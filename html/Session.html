<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Session</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="Content-Style-Type" content="text/css"/>
<link href="Agda.css" rel="stylesheet" type="text/css"/></head><body><p><a href="https://www.gnu.org/licenses/gpl.html">2013-2014 Matteo Acerbi</a></p>
<h1 id="dependent-sessions-in-agda-wip">Dependent sessions in Agda [WIP]</h1>
<pre></a
  ><a name="116" class="Keyword"
  >module</a
  ><a name="122"
  > </a
  ><a name="123" href="Session.html#1" class="Module"
  >Session</a
  ><a name="130"
  > </a
  ><a name="131" class="Keyword"
  >where</a
  ><a name="136"
  >

</a
  ><a name="138" class="Keyword"
  >open</a
  ><a name="142"
  > </a
  ><a name="143" class="Keyword"
  >import</a
  ><a name="149"
  > </a
  ><a name="150" href="Session.Base.html#1" class="Module"
  >Session.Base</a
  ><a name="162"
  > </a
  ><a name="163" class="Keyword"
  >public</a
  ><a name="169"
  ></pre>
<h2 id="types">Types</h2>
<p>The syntax for types is heavily inspired by both <em>Strictly Positive Families</em> (the version in Peter Morris's PhD thesis) and (indexed) <em>Descriptions</em> (Chapman et al, &quot;The Gentle Art of Levitation&quot;).</p>
<p>In our case, however, we do not want to describe indexed functors: we just want to be able to close the language under a (greatest) fixpoint operator/binder <code>`nu</code>, allowing nested usages thanks to a &quot;well-typed Bird-Paterson&quot; encoding of binding.</p>
<p>To compare with the cited universes, note that if we tried to give a <code>(I → Set) → (O → Set)</code> semantics to the <code>`I</code>, <code>`Σ</code> , <code>`Π</code> , <code>`ν</code> codes we would have to ignore the input of type <code>O</code>: in any case, such an interpretation would not make much sense here.</p>
<p>As opposed to Wadler's CP, the typing rules for the additional constructors <code>⊗</code>, <code>⅋</code>, <code>¡</code>, <code>¿</code> will not correspond directly to those of classical linear logic: however, the corresponding syntax maintains similar operational meaning (channel transmission and client/server interactions).</p>
<p>We add a type called <code>Side</code> (endpoint of a channel), with two only inhabitants: <code>+</code>, <code>-</code> . <code>Entry</code> is a type of optionally &quot;sided&quot; (session typed) codes, where absence of a side corresponds to the session not having started yet.</p>
<p>When a <code>Side</code> is specified, the <code>Entry</code> corresponds to an obligation for the process that contains it in its (input) context: if it is <code>+</code> then the session type is to be interpreted without changes, otherwise the process must behave along that channel by following the <em>dual</em> obligation (receiving vs sending, reading vs writing, connecting vs accepting).</p>
<p>Note that for what concerns <code>_⊗_</code> and <code>_⅋_</code> a whole <code>Entry</code> is required as the description of how a process participates to a channel needs to be preserved by the transfer.</p>
<pre></a
  ><a name="1979" class="Keyword"
  >mutual</a
  ><a name="1985"
  > 

  </a
  ><a name="1990" href="Session.html#1990" class="Function"
  >De</a
  ><a name="1992"
  >    </a
  ><a name="1996" class="Symbol"
  >=</a
  ><a name="1997"
  > </a
  ><a name="1998" class="Symbol"
  >&#955;</a
  ><a name="1999"
  > </a
  ><a name="2000" href="Session.html#2000" class="Bound"
  >I</a
  ><a name="2001"
  > </a
  ><a name="2002" class="Symbol"
  >&#8594;</a
  ><a name="2003"
  > </a
  ><a name="2004" href="Session.html#2000" class="Bound"
  >I</a
  ><a name="2005"
  > </a
  ><a name="2006" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2007"
  > </a
  ><a name="2008" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="2009"
  >
  </a
  ><a name="2012" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="2016"
  >  </a
  ><a name="2018" class="Symbol"
  >=</a
  ><a name="2019"
  > </a
  ><a name="2020" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="2021"
  > </a
  ><a name="2022" class="Symbol"
  >_</a
  ><a name="2023"
  > </a
  ><a name="2024" class="Symbol"
  >&#955;</a
  ><a name="2025"
  > </a
  ><a name="2026" href="Session.html#2026" class="Bound"
  >I</a
  ><a name="2027"
  > </a
  ><a name="2028" class="Symbol"
  >&#8594;</a
  ><a name="2029"
  > </a
  ><a name="2030" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="2031"
  > </a
  ><a name="2032" class="Symbol"
  >_</a
  ><a name="2033"
  > </a
  ><a name="2034" class="Symbol"
  >&#955;</a
  ><a name="2035"
  > </a
  ><a name="2036" href="Session.html#2036" class="Bound"
  >O</a
  ><a name="2037"
  > </a
  ><a name="2038" class="Symbol"
  >&#8594;</a
  ><a name="2039"
  > </a
  ><a name="2040" href="Session.html#2026" class="Bound"
  >I</a
  ><a name="2041"
  > </a
  ><a name="2042" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2043"
  > </a
  ><a name="2044" href="Session.html#2036" class="Bound"
  >O</a
  ><a name="2045"
  >
  </a
  ><a name="2048" href="Session.html#2048" class="Function"
  >Entry</a
  ><a name="2053"
  > </a
  ><a name="2054" class="Symbol"
  >=</a
  ><a name="2055"
  > </a
  ><a name="2056" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="2058"
  > </a
  ><a name="2059" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="2063"
  > </a
  ><a name="2064" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="2065"
  > </a
  ><a name="2066" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="2070"
  >

  </a
  ><a name="2074" class="Keyword"
  >data</a
  ><a name="2078"
  > </a
  ><a name="2079" href="Session.html#2079" class="Datatype Operator"
  >_&#9657;_</a
  ><a name="2082"
  > </a
  ><a name="2083" class="Symbol"
  >(</a
  ><a name="2084" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2085"
  > </a
  ><a name="2086" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2087"
  > </a
  ><a name="2088" class="Symbol"
  >:</a
  ><a name="2089"
  > </a
  ><a name="2090" class="PrimitiveType"
  >Set</a
  ><a name="2093" class="Symbol"
  >)</a
  ><a name="2094"
  > </a
  ><a name="2095" class="Symbol"
  >:</a
  ><a name="2096"
  > </a
  ><a name="2097" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="2101"
  > </a
  ><a name="2102" class="Keyword"
  >where</a
  ><a name="2107"
  ></pre>
<ul>
<li>Exiting a session</li>
</ul>
<pre>    </a
  ><a name="2158" href="Session.html#2158" class="InductiveConstructor"
  >`I</a
  ><a name="2160"
  >      </a
  ><a name="2166" class="Symbol"
  >:</a
  ><a name="2167"
  >                     </a
  ><a name="2188" class="Symbol"
  >(</a
  ><a name="2189" href="Session.html#2189" class="Bound"
  >i</a
  ><a name="2190"
  > </a
  ><a name="2191" class="Symbol"
  >:</a
  ><a name="2192"
  > </a
  ><a name="2193" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2194" class="Symbol"
  >)</a
  ><a name="2195"
  > </a
  ><a name="2196" class="Symbol"
  >&#8594;</a
  ><a name="2197"
  > </a
  ><a name="2198" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2199"
  > </a
  ><a name="2200" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2201"
  > </a
  ><a name="2202" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2203"
  ></pre>
<ul>
<li>Writing and reading values</li>
</ul>
<pre>    </a
  ><a name="2263" href="Session.html#2263" class="InductiveConstructor"
  >`&#931;</a
  ><a name="2265"
  > </a
  ><a name="2266" href="Session.html#2266" class="InductiveConstructor"
  >`&#928;</a
  ><a name="2268"
  >   </a
  ><a name="2271" class="Symbol"
  >:</a
  ><a name="2272"
  > </a
  ><a name="2273" class="Symbol"
  >(</a
  ><a name="2274" href="Session.html#2274" class="Bound"
  >S</a
  ><a name="2275"
  > </a
  ><a name="2276" class="Symbol"
  >:</a
  ><a name="2277"
  > </a
  ><a name="2278" class="PrimitiveType"
  >Set</a
  ><a name="2281" class="Symbol"
  >)(</a
  ><a name="2283" href="Session.html#2283" class="Bound"
  >T</a
  ><a name="2284"
  > </a
  ><a name="2285" class="Symbol"
  >:</a
  ><a name="2286"
  > </a
  ><a name="2287" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2288"
  > </a
  ><a name="2289" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2290"
  > </a
  ><a name="2291" href="Session.html#2274" class="Bound"
  >S</a
  ><a name="2292" class="Symbol"
  >)</a
  ><a name="2293"
  >        </a
  ><a name="2301" class="Symbol"
  >&#8594;</a
  ><a name="2302"
  > </a
  ><a name="2303" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2304"
  > </a
  ><a name="2305" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2306"
  > </a
  ><a name="2307" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2308"
  ></pre>
<ul>
<li>Dependency on previously exchanged values</li>
</ul>
<pre>    </a
  ><a name="2383" href="Session.html#2383" class="InductiveConstructor"
  >`^</a
  ><a name="2385"
  >      </a
  ><a name="2391" class="Symbol"
  >:</a
  ><a name="2392"
  > </a
  ><a name="2393" class="Symbol"
  >(</a
  ><a name="2394" href="Session.html#2394" class="Bound"
  >T</a
  ><a name="2395"
  > </a
  ><a name="2396" class="Symbol"
  >:</a
  ><a name="2397"
  > </a
  ><a name="2398" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2399"
  > </a
  ><a name="2400" class="Symbol"
  >&#8594;</a
  ><a name="2401"
  > </a
  ><a name="2402" href="Session.html#1990" class="Function"
  >De</a
  ><a name="2404"
  > </a
  ><a name="2405" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2406" class="Symbol"
  >)</a
  ><a name="2407"
  >              </a
  ><a name="2421" class="Symbol"
  >&#8594;</a
  ><a name="2422"
  > </a
  ><a name="2423" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2424"
  > </a
  ><a name="2425" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2426"
  > </a
  ><a name="2427" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2428"
  ></pre>
<ul>
<li>Sending and receiving channels</li>
</ul>
<pre>    </a
  ><a name="2492" href="Session.html#2492" class="InductiveConstructor Operator"
  >_&#8855;_</a
  ><a name="2495"
  > </a
  ><a name="2496" href="Session.html#2496" class="InductiveConstructor Operator"
  >_&#8523;_</a
  ><a name="2499"
  > </a
  ><a name="2500" class="Symbol"
  >:</a
  ><a name="2501"
  > </a
  ><a name="2502" class="Symbol"
  >(</a
  ><a name="2503" href="Session.html#2503" class="Bound"
  >L</a
  ><a name="2504"
  > </a
  ><a name="2505" class="Symbol"
  >:</a
  ><a name="2506"
  > </a
  ><a name="2507" href="Session.html#2048" class="Function"
  >Entry</a
  ><a name="2512" class="Symbol"
  >)(</a
  ><a name="2514" href="Session.html#2514" class="Bound"
  >R</a
  ><a name="2515"
  > </a
  ><a name="2516" class="Symbol"
  >:</a
  ><a name="2517"
  > </a
  ><a name="2518" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2519"
  > </a
  ><a name="2520" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2521"
  > </a
  ><a name="2522" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2523" class="Symbol"
  >)</a
  ><a name="2524"
  >      </a
  ><a name="2530" class="Symbol"
  >&#8594;</a
  ><a name="2531"
  > </a
  ><a name="2532" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2533"
  > </a
  ><a name="2534" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2535"
  > </a
  ><a name="2536" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2537"
  ></pre>
<ul>
<li>Servers and clients</li>
</ul>
<pre>    </a
  ><a name="2590" href="Session.html#2590" class="InductiveConstructor Operator"
  >&#161;_</a
  ><a name="2592"
  > </a
  ><a name="2593" href="Session.html#2593" class="InductiveConstructor Operator"
  >&#191;_</a
  ><a name="2595"
  >   </a
  ><a name="2598" class="Symbol"
  >:</a
  ><a name="2599"
  > </a
  ><a name="2600" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="2604"
  >                        </a
  ><a name="2628" class="Symbol"
  >&#8594;</a
  ><a name="2629"
  > </a
  ><a name="2630" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2631"
  > </a
  ><a name="2632" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2633"
  > </a
  ><a name="2634" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2635"
  ></pre>
<ul>
<li>Corecursion</li>
</ul>
<pre>    </a
  ><a name="2680" href="Session.html#2680" class="InductiveConstructor"
  >`&#957;</a
  ><a name="2682"
  >      </a
  ><a name="2688" class="Symbol"
  >:</a
  ><a name="2689"
  > </a
  ><a name="2690" class="Symbol"
  >(</a
  ><a name="2691" href="Session.html#2691" class="Bound"
  >F</a
  ><a name="2692"
  > </a
  ><a name="2693" class="Symbol"
  >:</a
  ><a name="2694"
  > </a
  ><a name="2695" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2696"
  > </a
  ><a name="2697" class="Symbol"
  >&#8594;</a
  ><a name="2698"
  > </a
  ><a name="2699" href="Session.html#1990" class="Function"
  >De</a
  ><a name="2701"
  > </a
  ><a name="2702" class="Symbol"
  >(</a
  ><a name="2703" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2704"
  > </a
  ><a name="2705" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="2706"
  > </a
  ><a name="2707" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2708" class="Symbol"
  >))(</a
  ><a name="2711" href="Session.html#2711" class="Bound"
  >o</a
  ><a name="2712"
  > </a
  ><a name="2713" class="Symbol"
  >:</a
  ><a name="2714"
  > </a
  ><a name="2715" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2716" class="Symbol"
  >)</a
  ><a name="2717"
  > </a
  ><a name="2718" class="Symbol"
  >&#8594;</a
  ><a name="2719"
  > </a
  ><a name="2720" href="Session.html#2084" class="Bound"
  >I</a
  ><a name="2721"
  > </a
  ><a name="2722" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2723"
  > </a
  ><a name="2724" href="Session.html#2086" class="Bound"
  >O</a
  ><a name="2725"
  ></pre>

<pre></a
  ><a name="2751" href="Session.html#2751" class="Function"
  >`&#931;^</a
  ><a name="2754"
  > </a
  ><a name="2755" href="Session.html#2755" class="Function"
  >`&#928;^</a
  ><a name="2758"
  > </a
  ><a name="2759" class="Symbol"
  >:</a
  ><a name="2760"
  > </a
  ><a name="2761" class="Symbol"
  >{</a
  ><a name="2762" href="Session.html#2762" class="Bound"
  >I</a
  ><a name="2763"
  > </a
  ><a name="2764" href="Session.html#2764" class="Bound"
  >O</a
  ><a name="2765"
  > </a
  ><a name="2766" class="Symbol"
  >:</a
  ><a name="2767"
  > </a
  ><a name="2768" class="PrimitiveType"
  >Set</a
  ><a name="2771" class="Symbol"
  >}(</a
  ><a name="2773" href="Session.html#2773" class="Bound"
  >S</a
  ><a name="2774"
  > </a
  ><a name="2775" class="Symbol"
  >:</a
  ><a name="2776"
  > </a
  ><a name="2777" class="PrimitiveType"
  >Set</a
  ><a name="2780" class="Symbol"
  >)(</a
  ><a name="2782" href="Session.html#2782" class="Bound"
  >T</a
  ><a name="2783"
  > </a
  ><a name="2784" class="Symbol"
  >:</a
  ><a name="2785"
  > </a
  ><a name="2786" href="Session.html#2773" class="Bound"
  >S</a
  ><a name="2787"
  > </a
  ><a name="2788" class="Symbol"
  >&#8594;</a
  ><a name="2789"
  > </a
  ><a name="2790" href="Session.html#1990" class="Function"
  >De</a
  ><a name="2792"
  > </a
  ><a name="2793" href="Session.html#2762" class="Bound"
  >I</a
  ><a name="2794" class="Symbol"
  >)</a
  ><a name="2795"
  > </a
  ><a name="2796" class="Symbol"
  >&#8594;</a
  ><a name="2797"
  > </a
  ><a name="2798" href="Session.html#2762" class="Bound"
  >I</a
  ><a name="2799"
  > </a
  ><a name="2800" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2801"
  > </a
  ><a name="2802" href="Session.html#2764" class="Bound"
  >O</a
  ><a name="2803"
  >
</a
  ><a name="2804" href="Session.html#2751" class="Function"
  >`&#931;^</a
  ><a name="2807"
  > </a
  ><a name="2808" href="Session.html#2808" class="Bound"
  >S</a
  ><a name="2809"
  > </a
  ><a name="2810" href="Session.html#2810" class="Bound"
  >T</a
  ><a name="2811"
  > </a
  ><a name="2812" class="Symbol"
  >=</a
  ><a name="2813"
  > </a
  ><a name="2814" href="Session.html#2263" class="InductiveConstructor"
  >`&#931;</a
  ><a name="2816"
  > </a
  ><a name="2817" href="Session.html#2808" class="Bound"
  >S</a
  ><a name="2818"
  > </a
  ><a name="2819" class="Symbol"
  >(</a
  ><a name="2820" href="Session.html#2383" class="InductiveConstructor"
  >`^</a
  ><a name="2822"
  > </a
  ><a name="2823" href="Session.html#2810" class="Bound"
  >T</a
  ><a name="2824" class="Symbol"
  >)</a
  ><a name="2825"
  >
</a
  ><a name="2826" href="Session.html#2755" class="Function"
  >`&#928;^</a
  ><a name="2829"
  > </a
  ><a name="2830" href="Session.html#2830" class="Bound"
  >S</a
  ><a name="2831"
  > </a
  ><a name="2832" href="Session.html#2832" class="Bound"
  >T</a
  ><a name="2833"
  > </a
  ><a name="2834" class="Symbol"
  >=</a
  ><a name="2835"
  > </a
  ><a name="2836" href="Session.html#2266" class="InductiveConstructor"
  >`&#928;</a
  ><a name="2838"
  > </a
  ><a name="2839" href="Session.html#2830" class="Bound"
  >S</a
  ><a name="2840"
  > </a
  ><a name="2841" class="Symbol"
  >(</a
  ><a name="2842" href="Session.html#2383" class="InductiveConstructor"
  >`^</a
  ><a name="2844"
  > </a
  ><a name="2845" href="Session.html#2832" class="Bound"
  >T</a
  ><a name="2846" class="Symbol"
  >)</a
  ><a name="2847"
  ></pre>

<pre></a
  ><a name="2873" href="Session.html#2873" class="Function Operator"
  >_&#9666;_</a
  ><a name="2876"
  > </a
  ><a name="2877" class="Symbol"
  >:</a
  ><a name="2878"
  > </a
  ><a name="2879" class="PrimitiveType"
  >Set</a
  ><a name="2882"
  > </a
  ><a name="2883" class="Symbol"
  >&#8594;</a
  ><a name="2884"
  > </a
  ><a name="2885" class="PrimitiveType"
  >Set</a
  ><a name="2888"
  > </a
  ><a name="2889" class="Symbol"
  >&#8594;</a
  ><a name="2890"
  > </a
  ><a name="2891" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="2895"
  >
</a
  ><a name="2896" href="Session.html#2896" class="Bound"
  >O</a
  ><a name="2897"
  > </a
  ><a name="2898" href="Session.html#2873" class="Function Operator"
  >&#9666;</a
  ><a name="2899"
  > </a
  ><a name="2900" href="Session.html#2900" class="Bound"
  >I</a
  ><a name="2901"
  > </a
  ><a name="2902" class="Symbol"
  >=</a
  ><a name="2903"
  > </a
  ><a name="2904" href="Session.html#2900" class="Bound"
  >I</a
  ><a name="2905"
  > </a
  ><a name="2906" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="2907"
  > </a
  ><a name="2908" href="Session.html#2896" class="Bound"
  >O</a
  ><a name="2909"
  ></pre>
<p>This representation of the language of types should not be considered definitive but it seems reasonably effective.</p>
<p>Other approaches, where the session types inductive definition <code>_▹_</code> would only have one parameter (as in <em>Descriptions</em>), seemed more difficult to implement and led to more awkward encodings of the syntax: we probably did not try all the possibilities, though.</p>
<h3 id="types-and-sides">Types and sides</h3>
<p>A &quot;sided&quot; type former (code) <code>[_]F</code> is the type former (code) <code>F</code> when the side is <code>+</code>, the <em>dual</em> of <code>F</code> when it is <code>-</code>.</p>
<pre></a
  ><a name="3459" href="Session.html#3459" class="Function Operator"
  >[_]&#931;</a
  ><a name="3463"
  >   </a
  ><a name="3466" href="Session.html#3466" class="Function Operator"
  >[_]&#928;</a
  ><a name="3470"
  >   </a
  ><a name="3473" class="Symbol"
  >:</a
  ><a name="3474"
  > </a
  ><a name="3475" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="3479"
  >  </a
  ><a name="3481" class="Symbol"
  >&#8594;</a
  ><a name="3482"
  > </a
  ><a name="3483" class="Symbol"
  >{</a
  ><a name="3484" href="Session.html#3484" class="Bound"
  >I</a
  ><a name="3485"
  > </a
  ><a name="3486" href="Session.html#3486" class="Bound"
  >O</a
  ><a name="3487"
  > </a
  ><a name="3488" class="Symbol"
  >:</a
  ><a name="3489"
  > </a
  ><a name="3490" class="PrimitiveType"
  >Set</a
  ><a name="3493" class="Symbol"
  >}(</a
  ><a name="3495" href="Session.html#3495" class="Bound"
  >S</a
  ><a name="3496"
  > </a
  ><a name="3497" class="Symbol"
  >:</a
  ><a name="3498"
  > </a
  ><a name="3499" class="PrimitiveType"
  >Set</a
  ><a name="3502" class="Symbol"
  >)(</a
  ><a name="3504" href="Session.html#3504" class="Bound"
  >T</a
  ><a name="3505"
  > </a
  ><a name="3506" class="Symbol"
  >:</a
  ><a name="3507"
  > </a
  ><a name="3508" href="Session.html#3484" class="Bound"
  >I</a
  ><a name="3509"
  > </a
  ><a name="3510" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="3511"
  > </a
  ><a name="3512" href="Session.html#3495" class="Bound"
  >S</a
  ><a name="3513" class="Symbol"
  >)</a
  ><a name="3514"
  >    </a
  ><a name="3518" class="Symbol"
  >&#8594;</a
  ><a name="3519"
  > </a
  ><a name="3520" href="Session.html#3484" class="Bound"
  >I</a
  ><a name="3521"
  > </a
  ><a name="3522" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="3523"
  > </a
  ><a name="3524" href="Session.html#3486" class="Bound"
  >O</a
  ><a name="3525"
  >
</a
  ><a name="3526" href="Session.html#3526" class="Function Operator"
  >[_]&#931;^</a
  ><a name="3531"
  >  </a
  ><a name="3533" href="Session.html#3533" class="Function Operator"
  >[_]&#928;^</a
  ><a name="3538"
  >  </a
  ><a name="3540" class="Symbol"
  >:</a
  ><a name="3541"
  > </a
  ><a name="3542" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="3546"
  >  </a
  ><a name="3548" class="Symbol"
  >&#8594;</a
  ><a name="3549"
  > </a
  ><a name="3550" class="Symbol"
  >{</a
  ><a name="3551" href="Session.html#3551" class="Bound"
  >I</a
  ><a name="3552"
  > </a
  ><a name="3553" href="Session.html#3553" class="Bound"
  >O</a
  ><a name="3554"
  > </a
  ><a name="3555" class="Symbol"
  >:</a
  ><a name="3556"
  > </a
  ><a name="3557" class="PrimitiveType"
  >Set</a
  ><a name="3560" class="Symbol"
  >}(</a
  ><a name="3562" href="Session.html#3562" class="Bound"
  >S</a
  ><a name="3563"
  > </a
  ><a name="3564" class="Symbol"
  >:</a
  ><a name="3565"
  > </a
  ><a name="3566" class="PrimitiveType"
  >Set</a
  ><a name="3569" class="Symbol"
  >)(</a
  ><a name="3571" href="Session.html#3571" class="Bound"
  >T</a
  ><a name="3572"
  > </a
  ><a name="3573" class="Symbol"
  >:</a
  ><a name="3574"
  > </a
  ><a name="3575" href="Session.html#3562" class="Bound"
  >S</a
  ><a name="3576"
  > </a
  ><a name="3577" class="Symbol"
  >&#8594;</a
  ><a name="3578"
  > </a
  ><a name="3579" href="Session.html#1990" class="Function"
  >De</a
  ><a name="3581"
  > </a
  ><a name="3582" href="Session.html#3551" class="Bound"
  >I</a
  ><a name="3583" class="Symbol"
  >)</a
  ><a name="3584"
  > </a
  ><a name="3585" class="Symbol"
  >&#8594;</a
  ><a name="3586"
  > </a
  ><a name="3587" href="Session.html#3551" class="Bound"
  >I</a
  ><a name="3588"
  > </a
  ><a name="3589" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="3590"
  > </a
  ><a name="3591" href="Session.html#3553" class="Bound"
  >O</a
  ><a name="3592"
  >
</a
  ><a name="3593" href="Session.html#3593" class="Function Operator"
  >_[_]&#8855;_</a
  ><a name="3599"
  > </a
  ><a name="3600" href="Session.html#3600" class="Function Operator"
  >_[_]&#8523;_</a
  ><a name="3606"
  > </a
  ><a name="3607" class="Symbol"
  >:</a
  ><a name="3608"
  > </a
  ><a name="3609" href="Session.html#2048" class="Function"
  >Entry</a
  ><a name="3614"
  > </a
  ><a name="3615" class="Symbol"
  >&#8594;</a
  ><a name="3616"
  > </a
  ><a name="3617" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="3621"
  > </a
  ><a name="3622" class="Symbol"
  >&#8594;</a
  ><a name="3623"
  > </a
  ><a name="3624" class="Symbol"
  >{</a
  ><a name="3625" href="Session.html#3625" class="Bound"
  >I</a
  ><a name="3626"
  > </a
  ><a name="3627" href="Session.html#3627" class="Bound"
  >O</a
  ><a name="3628"
  > </a
  ><a name="3629" class="Symbol"
  >:</a
  ><a name="3630"
  > </a
  ><a name="3631" class="PrimitiveType"
  >Set</a
  ><a name="3634" class="Symbol"
  >}</a
  ><a name="3635"
  > </a
  ><a name="3636" class="Symbol"
  >&#8594;</a
  ><a name="3637"
  > </a
  ><a name="3638" href="Session.html#3625" class="Bound"
  >I</a
  ><a name="3639"
  > </a
  ><a name="3640" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="3641"
  > </a
  ><a name="3642" href="Session.html#3627" class="Bound"
  >O</a
  ><a name="3643"
  >         </a
  ><a name="3652" class="Symbol"
  >&#8594;</a
  ><a name="3653"
  > </a
  ><a name="3654" href="Session.html#3625" class="Bound"
  >I</a
  ><a name="3655"
  > </a
  ><a name="3656" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="3657"
  > </a
  ><a name="3658" href="Session.html#3627" class="Bound"
  >O</a
  ><a name="3659"
  >
</a
  ><a name="3660" href="Session.html#3660" class="Function Operator"
  >[_]&#161;_</a
  ><a name="3665"
  >  </a
  ><a name="3667" href="Session.html#3667" class="Function Operator"
  >[_]&#191;_</a
  ><a name="3672"
  >  </a
  ><a name="3674" class="Symbol"
  >:</a
  ><a name="3675"
  > </a
  ><a name="3676" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="3680"
  >  </a
  ><a name="3682" class="Symbol"
  >&#8594;</a
  ><a name="3683"
  > </a
  ><a name="3684" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="3688"
  >  </a
  ><a name="3690" class="Symbol"
  >&#8594;</a
  ><a name="3691"
  > </a
  ><a name="3692" class="Symbol"
  >{</a
  ><a name="3693" href="Session.html#3693" class="Bound"
  >I</a
  ><a name="3694"
  > </a
  ><a name="3695" href="Session.html#3695" class="Bound"
  >O</a
  ><a name="3696"
  > </a
  ><a name="3697" class="Symbol"
  >:</a
  ><a name="3698"
  > </a
  ><a name="3699" class="PrimitiveType"
  >Set</a
  ><a name="3702" class="Symbol"
  >}</a
  ><a name="3703"
  >                </a
  ><a name="3719" class="Symbol"
  >&#8594;</a
  ><a name="3720"
  > </a
  ><a name="3721" href="Session.html#3693" class="Bound"
  >I</a
  ><a name="3722"
  > </a
  ><a name="3723" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="3724"
  > </a
  ><a name="3725" href="Session.html#3695" class="Bound"
  >O</a
  ><a name="3726"
  >
</a
  ><a name="3727" href="Session.html#3459" class="Function Operator"
  >[</a
  ><a name="3728"
  > </a
  ><a name="3729" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="3730"
  > </a
  ><a name="3731" href="Session.html#3459" class="Function Operator"
  >]&#931;</a
  ><a name="3733"
  >     </a
  ><a name="3738" class="Symbol"
  >=</a
  ><a name="3739"
  > </a
  ><a name="3740" href="Session.html#2263" class="InductiveConstructor"
  >`&#931;</a
  ><a name="3742"
  >
</a
  ><a name="3743" href="Session.html#3459" class="Function Operator"
  >[</a
  ><a name="3744"
  > </a
  ><a name="3745" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="3746"
  > </a
  ><a name="3747" href="Session.html#3459" class="Function Operator"
  >]&#931;</a
  ><a name="3749"
  >     </a
  ><a name="3754" class="Symbol"
  >=</a
  ><a name="3755"
  > </a
  ><a name="3756" href="Session.html#2266" class="InductiveConstructor"
  >`&#928;</a
  ><a name="3758"
  >
</a
  ><a name="3759" href="Session.html#3466" class="Function Operator"
  >[</a
  ><a name="3760"
  > </a
  ><a name="3761" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="3762"
  > </a
  ><a name="3763" href="Session.html#3466" class="Function Operator"
  >]&#928;</a
  ><a name="3765"
  >     </a
  ><a name="3770" class="Symbol"
  >=</a
  ><a name="3771"
  > </a
  ><a name="3772" href="Session.html#2266" class="InductiveConstructor"
  >`&#928;</a
  ><a name="3774"
  > 
</a
  ><a name="3776" href="Session.html#3466" class="Function Operator"
  >[</a
  ><a name="3777"
  > </a
  ><a name="3778" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="3779"
  > </a
  ><a name="3780" href="Session.html#3466" class="Function Operator"
  >]&#928;</a
  ><a name="3782"
  >     </a
  ><a name="3787" class="Symbol"
  >=</a
  ><a name="3788"
  > </a
  ><a name="3789" href="Session.html#2263" class="InductiveConstructor"
  >`&#931;</a
  ><a name="3791"
  > 
</a
  ><a name="3793" href="Session.html#3526" class="Function Operator"
  >[</a
  ><a name="3794"
  > </a
  ><a name="3795" href="Session.html#3795" class="Bound"
  >s</a
  ><a name="3796"
  > </a
  ><a name="3797" href="Session.html#3526" class="Function Operator"
  >]&#931;^</a
  ><a name="3800"
  > </a
  ><a name="3801" href="Session.html#3801" class="Bound"
  >S</a
  ><a name="3802"
  > </a
  ><a name="3803" href="Session.html#3803" class="Bound"
  >T</a
  ><a name="3804"
  > </a
  ><a name="3805" class="Symbol"
  >=</a
  ><a name="3806"
  > </a
  ><a name="3807" href="Session.html#3459" class="Function Operator"
  >[</a
  ><a name="3808"
  > </a
  ><a name="3809" href="Session.html#3795" class="Bound"
  >s</a
  ><a name="3810"
  > </a
  ><a name="3811" href="Session.html#3459" class="Function Operator"
  >]&#931;</a
  ><a name="3813"
  > </a
  ><a name="3814" href="Session.html#3801" class="Bound"
  >S</a
  ><a name="3815"
  > </a
  ><a name="3816" class="Symbol"
  >(</a
  ><a name="3817" href="Session.html#2383" class="InductiveConstructor"
  >`^</a
  ><a name="3819"
  > </a
  ><a name="3820" href="Session.html#3803" class="Bound"
  >T</a
  ><a name="3821" class="Symbol"
  >)</a
  ><a name="3822"
  >
</a
  ><a name="3823" href="Session.html#3533" class="Function Operator"
  >[</a
  ><a name="3824"
  > </a
  ><a name="3825" href="Session.html#3825" class="Bound"
  >s</a
  ><a name="3826"
  > </a
  ><a name="3827" href="Session.html#3533" class="Function Operator"
  >]&#928;^</a
  ><a name="3830"
  > </a
  ><a name="3831" href="Session.html#3831" class="Bound"
  >S</a
  ><a name="3832"
  > </a
  ><a name="3833" href="Session.html#3833" class="Bound"
  >T</a
  ><a name="3834"
  > </a
  ><a name="3835" class="Symbol"
  >=</a
  ><a name="3836"
  > </a
  ><a name="3837" href="Session.html#3466" class="Function Operator"
  >[</a
  ><a name="3838"
  > </a
  ><a name="3839" href="Session.html#3825" class="Bound"
  >s</a
  ><a name="3840"
  > </a
  ><a name="3841" href="Session.html#3466" class="Function Operator"
  >]&#928;</a
  ><a name="3843"
  > </a
  ><a name="3844" href="Session.html#3831" class="Bound"
  >S</a
  ><a name="3845"
  > </a
  ><a name="3846" class="Symbol"
  >(</a
  ><a name="3847" href="Session.html#2383" class="InductiveConstructor"
  >`^</a
  ><a name="3849"
  > </a
  ><a name="3850" href="Session.html#3833" class="Bound"
  >T</a
  ><a name="3851" class="Symbol"
  >)</a
  ><a name="3852"
  >
</a
  ><a name="3853" href="Session.html#3853" class="Bound"
  >L</a
  ><a name="3854"
  > </a
  ><a name="3855" href="Session.html#3593" class="Function Operator"
  >[</a
  ><a name="3856"
  > </a
  ><a name="3857" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="3858"
  > </a
  ><a name="3859" href="Session.html#3593" class="Function Operator"
  >]&#8855;</a
  ><a name="3861"
  > </a
  ><a name="3862" href="Session.html#3862" class="Bound"
  >R</a
  ><a name="3863"
  > </a
  ><a name="3864" class="Symbol"
  >=</a
  ><a name="3865"
  > </a
  ><a name="3866" href="Session.html#3853" class="Bound"
  >L</a
  ><a name="3867"
  > </a
  ><a name="3868" href="Session.html#2492" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="3869"
  > </a
  ><a name="3870" href="Session.html#3862" class="Bound"
  >R</a
  ><a name="3871"
  >
</a
  ><a name="3872" href="Session.html#3872" class="Bound"
  >L</a
  ><a name="3873"
  > </a
  ><a name="3874" href="Session.html#3593" class="Function Operator"
  >[</a
  ><a name="3875"
  > </a
  ><a name="3876" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="3877"
  > </a
  ><a name="3878" href="Session.html#3593" class="Function Operator"
  >]&#8855;</a
  ><a name="3880"
  > </a
  ><a name="3881" href="Session.html#3881" class="Bound"
  >R</a
  ><a name="3882"
  > </a
  ><a name="3883" class="Symbol"
  >=</a
  ><a name="3884"
  > </a
  ><a name="3885" href="Session.html#3872" class="Bound"
  >L</a
  ><a name="3886"
  > </a
  ><a name="3887" href="Session.html#2496" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="3888"
  > </a
  ><a name="3889" href="Session.html#3881" class="Bound"
  >R</a
  ><a name="3890"
  >
</a
  ><a name="3891" href="Session.html#3891" class="Bound"
  >L</a
  ><a name="3892"
  > </a
  ><a name="3893" href="Session.html#3600" class="Function Operator"
  >[</a
  ><a name="3894"
  > </a
  ><a name="3895" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="3896"
  > </a
  ><a name="3897" href="Session.html#3600" class="Function Operator"
  >]&#8523;</a
  ><a name="3899"
  > </a
  ><a name="3900" href="Session.html#3900" class="Bound"
  >R</a
  ><a name="3901"
  > </a
  ><a name="3902" class="Symbol"
  >=</a
  ><a name="3903"
  > </a
  ><a name="3904" href="Session.html#3891" class="Bound"
  >L</a
  ><a name="3905"
  > </a
  ><a name="3906" href="Session.html#2496" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="3907"
  > </a
  ><a name="3908" href="Session.html#3900" class="Bound"
  >R</a
  ><a name="3909"
  >
</a
  ><a name="3910" href="Session.html#3910" class="Bound"
  >L</a
  ><a name="3911"
  > </a
  ><a name="3912" href="Session.html#3600" class="Function Operator"
  >[</a
  ><a name="3913"
  > </a
  ><a name="3914" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="3915"
  > </a
  ><a name="3916" href="Session.html#3600" class="Function Operator"
  >]&#8523;</a
  ><a name="3918"
  > </a
  ><a name="3919" href="Session.html#3919" class="Bound"
  >R</a
  ><a name="3920"
  > </a
  ><a name="3921" class="Symbol"
  >=</a
  ><a name="3922"
  > </a
  ><a name="3923" href="Session.html#3910" class="Bound"
  >L</a
  ><a name="3924"
  > </a
  ><a name="3925" href="Session.html#2492" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="3926"
  > </a
  ><a name="3927" href="Session.html#3919" class="Bound"
  >R</a
  ><a name="3928"
  >
</a
  ><a name="3929" href="Session.html#3660" class="Function Operator"
  >[</a
  ><a name="3930"
  > </a
  ><a name="3931" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="3932"
  > </a
  ><a name="3933" href="Session.html#3660" class="Function Operator"
  >]&#161;</a
  ><a name="3935"
  > </a
  ><a name="3936" href="Session.html#3936" class="Bound"
  >F</a
  ><a name="3937"
  >   </a
  ><a name="3940" class="Symbol"
  >=</a
  ><a name="3941"
  > </a
  ><a name="3942" href="Session.html#2590" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="3943"
  > </a
  ><a name="3944" href="Session.html#3936" class="Bound"
  >F</a
  ><a name="3945"
  >    
</a
  ><a name="3950" href="Session.html#3660" class="Function Operator"
  >[</a
  ><a name="3951"
  > </a
  ><a name="3952" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="3953"
  > </a
  ><a name="3954" href="Session.html#3660" class="Function Operator"
  >]&#161;</a
  ><a name="3956"
  > </a
  ><a name="3957" href="Session.html#3957" class="Bound"
  >F</a
  ><a name="3958"
  >   </a
  ><a name="3961" class="Symbol"
  >=</a
  ><a name="3962"
  > </a
  ><a name="3963" href="Session.html#2593" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="3964"
  > </a
  ><a name="3965" href="Session.html#3957" class="Bound"
  >F</a
  ><a name="3966"
  >    
</a
  ><a name="3971" href="Session.html#3667" class="Function Operator"
  >[</a
  ><a name="3972"
  > </a
  ><a name="3973" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="3974"
  > </a
  ><a name="3975" href="Session.html#3667" class="Function Operator"
  >]&#191;</a
  ><a name="3977"
  > </a
  ><a name="3978" href="Session.html#3978" class="Bound"
  >F</a
  ><a name="3979"
  >   </a
  ><a name="3982" class="Symbol"
  >=</a
  ><a name="3983"
  > </a
  ><a name="3984" href="Session.html#2593" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="3985"
  > </a
  ><a name="3986" href="Session.html#3978" class="Bound"
  >F</a
  ><a name="3987"
  >     
</a
  ><a name="3993" href="Session.html#3667" class="Function Operator"
  >[</a
  ><a name="3994"
  > </a
  ><a name="3995" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="3996"
  > </a
  ><a name="3997" href="Session.html#3667" class="Function Operator"
  >]&#191;</a
  ><a name="3999"
  > </a
  ><a name="4000" href="Session.html#4000" class="Bound"
  >F</a
  ><a name="4001"
  >   </a
  ><a name="4004" class="Symbol"
  >=</a
  ><a name="4005"
  > </a
  ><a name="4006" href="Session.html#2590" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="4007"
  > </a
  ><a name="4008" href="Session.html#4000" class="Bound"
  >F</a
  ><a name="4009"
  ></pre>
<h3 id="contexts">Contexts</h3>
<p>A context is a simple list of entries, i.e. codes paired with an optional side. Absence of the side corresponds to the session not being started yet: in this situation we say that the channel is &quot;new&quot;.</p>
<pre></a
  ><a name="4252" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="4254"
  > </a
  ><a name="4255" class="Symbol"
  >=</a
  ><a name="4256"
  > </a
  ><a name="4257" href="Data.List.html#659" class="Datatype"
  >List</a
  ><a name="4261"
  > </a
  ><a name="4262" href="Session.html#2048" class="Function"
  >Entry</a
  ><a name="4267"
  ></pre>
<p><code>is¿</code> means &quot;is it safe to duplicate this entry?&quot;.</p>
<pre></a
  ><a name="4345" href="Session.html#4345" class="Function"
  >is&#191;</a
  ><a name="4348"
  > </a
  ><a name="4349" class="Symbol"
  >:</a
  ><a name="4350"
  > </a
  ><a name="4351" href="Session.html#2048" class="Function"
  >Entry</a
  ><a name="4356"
  > </a
  ><a name="4357" class="Symbol"
  >&#8594;</a
  ><a name="4358"
  > </a
  ><a name="4359" class="PrimitiveType"
  >Set</a
  ><a name="4362"
  >
</a
  ><a name="4363" href="Session.html#4345" class="Function"
  >is&#191;</a
  ><a name="4366"
  > </a
  ><a name="4367" class="Symbol"
  >(</a
  ><a name="4368" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="4369"
  > </a
  ><a name="4370" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="4371"
  > </a
  ><a name="4372" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="4373"
  > </a
  ><a name="4374" class="Symbol"
  >(_</a
  ><a name="4376"
  > </a
  ><a name="4377" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="4378"
  > </a
  ><a name="4379" class="Symbol"
  >_</a
  ><a name="4380"
  > </a
  ><a name="4381" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="4382"
  > </a
  ><a name="4383" href="Session.html#2593" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="4384"
  > </a
  ><a name="4385" href="Session.html#4385" class="Bound"
  >F</a
  ><a name="4386" class="Symbol"
  >))</a
  ><a name="4388"
  > </a
  ><a name="4389" class="Symbol"
  >=</a
  ><a name="4390"
  > </a
  ><a name="4391" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="4392"
  >
</a
  ><a name="4393" href="Session.html#4345" class="Function"
  >is&#191;</a
  ><a name="4396"
  > </a
  ><a name="4397" class="Symbol"
  >(</a
  ><a name="4398" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="4399"
  > </a
  ><a name="4400" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="4401"
  > </a
  ><a name="4402" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="4403"
  > </a
  ><a name="4404" class="Symbol"
  >(_</a
  ><a name="4406"
  > </a
  ><a name="4407" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="4408"
  > </a
  ><a name="4409" class="Symbol"
  >_</a
  ><a name="4410"
  > </a
  ><a name="4411" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="4412"
  > </a
  ><a name="4413" href="Session.html#2590" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="4414"
  > </a
  ><a name="4415" href="Session.html#4415" class="Bound"
  >F</a
  ><a name="4416" class="Symbol"
  >))</a
  ><a name="4418"
  > </a
  ><a name="4419" class="Symbol"
  >=</a
  ><a name="4420"
  > </a
  ><a name="4421" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="4422"
  >
</a
  ><a name="4423" href="Session.html#4345" class="Function"
  >is&#191;</a
  ><a name="4426"
  >  </a
  ><a name="4428" class="Symbol"
  >_</a
  ><a name="4429"
  >                    </a
  ><a name="4449" class="Symbol"
  >=</a
  ><a name="4450"
  > </a
  ><a name="4451" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="4452"
  ></pre>
<p>To construct a server we must check (at compile time) that it will be safe to duplicate all the channels that its runtime copies will have access to: <code>All¿</code> is the predicate over contexts which corresponds to this condition.</p>
<pre></a
  ><a name="4704" href="Session.html#4704" class="Function"
  >All&#191;</a
  ><a name="4708"
  > </a
  ><a name="4709" class="Symbol"
  >:</a
  ><a name="4710"
  > </a
  ><a name="4711" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="4713"
  > </a
  ><a name="4714" class="Symbol"
  >&#8594;</a
  ><a name="4715"
  > </a
  ><a name="4716" class="PrimitiveType"
  >Set</a
  ><a name="4719"
  > </a
  ><a name="4720" class="Symbol"
  >_</a
  ><a name="4721"
  >
</a
  ><a name="4722" href="Session.html#4704" class="Function"
  >All&#191;</a
  ><a name="4726"
  > </a
  ><a name="4727" class="Symbol"
  >=</a
  ><a name="4728"
  > </a
  ><a name="4729" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="4732"
  > </a
  ><a name="4733" href="Session.html#4345" class="Function"
  >is&#191;</a
  ><a name="4736"
  ></pre>
<h3 id="splitting-contexts">Splitting contexts</h3>
<p>We need to define what it means to split an (input) context in two.</p>
<pre></a
  ><a name="4855" class="Keyword"
  >data</a
  ><a name="4859"
  > </a
  ><a name="4860" href="Session.html#4860" class="Datatype"
  >SplitNew</a
  ><a name="4868"
  > </a
  ><a name="4869" class="Symbol"
  >:</a
  ><a name="4870"
  > </a
  ><a name="4871" class="PrimitiveType"
  >Set</a
  ><a name="4874"
  > </a
  ><a name="4875" class="Keyword"
  >where</a
  ><a name="4880"
  > 
  </a
  ><a name="4884" href="Session.html#4884" class="InductiveConstructor"
  >+</a
  ><a name="4885"
  > </a
  ><a name="4886" href="Session.html#4886" class="InductiveConstructor"
  >-</a
  ><a name="4887"
  > </a
  ><a name="4888" href="Session.html#4888" class="InductiveConstructor"
  >+-</a
  ><a name="4890"
  > </a
  ><a name="4891" href="Session.html#4891" class="InductiveConstructor"
  >-+</a
  ><a name="4893"
  > </a
  ><a name="4894" class="Symbol"
  >:</a
  ><a name="4895"
  > </a
  ><a name="4896" href="Session.html#4860" class="Datatype"
  >SplitNew</a
  ><a name="4904"
  >

</a
  ><a name="4906" href="Session.html#4906" class="Function"
  >Split</a
  ><a name="4911"
  > </a
  ><a name="4912" class="Symbol"
  >:</a
  ><a name="4913"
  > </a
  ><a name="4914" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="4916"
  > </a
  ><a name="4917" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="4921"
  > </a
  ><a name="4922" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="4923"
  > </a
  ><a name="4924" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="4928"
  > </a
  ><a name="4929" class="Symbol"
  >&#8594;</a
  ><a name="4930"
  > </a
  ><a name="4931" class="PrimitiveType"
  >Set</a
  ><a name="4934"
  >
</a
  ><a name="4935" href="Session.html#4906" class="Function"
  >Split</a
  ><a name="4940"
  > </a
  ><a name="4941" class="Symbol"
  >(</a
  ><a name="4942" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="4943"
  > </a
  ><a name="4944" class="Symbol"
  >_</a
  ><a name="4945"
  > </a
  ><a name="4946" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="4947"
  > </a
  ><a name="4948" href="Session.html#4948" class="Bound"
  >x</a
  ><a name="4949" class="Symbol"
  >)</a
  ><a name="4950"
  > </a
  ><a name="4951" class="Symbol"
  >=</a
  ><a name="4952"
  > </a
  ><a name="4953" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="4957"
  >
</a
  ><a name="4958" href="Session.html#4906" class="Function"
  >Split</a
  ><a name="4963"
  > </a
  ><a name="4964" class="Symbol"
  >(</a
  ><a name="4965" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="4966"
  >   </a
  ><a name="4969" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="4970"
  > </a
  ><a name="4971" href="Session.html#4971" class="Bound"
  >x</a
  ><a name="4972" class="Symbol"
  >)</a
  ><a name="4973"
  > </a
  ><a name="4974" class="Symbol"
  >=</a
  ><a name="4975"
  > </a
  ><a name="4976" href="Session.html#4860" class="Datatype"
  >SplitNew</a
  ><a name="4984"
  >

</a
  ><a name="4986" href="Session.html#4986" class="Function"
  >split</a
  ><a name="4991"
  > </a
  ><a name="4992" class="Symbol"
  >:</a
  ><a name="4993"
  > </a
  ><a name="4994" class="Symbol"
  >(</a
  ><a name="4995" href="Session.html#4995" class="Bound"
  >&#964;</a
  ><a name="4996"
  > </a
  ><a name="4997" class="Symbol"
  >:</a
  ><a name="4998"
  > </a
  ><a name="4999" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="5001"
  > </a
  ><a name="5002" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="5006"
  > </a
  ><a name="5007" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="5008"
  > </a
  ><a name="5009" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="5013" class="Symbol"
  >)</a
  ><a name="5014"
  > </a
  ><a name="5015" class="Symbol"
  >&#8594;</a
  ><a name="5016"
  > </a
  ><a name="5017" href="Session.html#4906" class="Function"
  >Split</a
  ><a name="5022"
  > </a
  ><a name="5023" href="Session.html#4995" class="Bound"
  >&#964;</a
  ><a name="5024"
  > </a
  ><a name="5025" class="Symbol"
  >&#8594;</a
  ><a name="5026"
  > </a
  ><a name="5027" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="5029"
  > </a
  ><a name="5030" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="5031"
  > </a
  ><a name="5032" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="5034"
  > </a
  ><a name="5035" class="Symbol"
  >&#8594;</a
  ><a name="5036"
  > </a
  ><a name="5037" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="5039"
  > </a
  ><a name="5040" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="5041"
  > </a
  ><a name="5042" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="5044"
  >
</a
  ><a name="5045" href="Session.html#4986" class="Function"
  >split</a
  ><a name="5050"
  > </a
  ><a name="5051" class="Symbol"
  >(</a
  ><a name="5052" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="5053"
  > </a
  ><a name="5054" href="Session.html#5054" class="Bound"
  >s</a
  ><a name="5055"
  > </a
  ><a name="5056" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5057"
  > </a
  ><a name="5058" href="Session.html#5058" class="Bound"
  >C</a
  ><a name="5059" class="Symbol"
  >)</a
  ><a name="5060"
  >  </a
  ><a name="5062" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="5063"
  > </a
  ><a name="5064" class="Symbol"
  >(</a
  ><a name="5065" href="Session.html#5065" class="Bound"
  >L</a
  ><a name="5066"
  > </a
  ><a name="5067" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5068"
  > </a
  ><a name="5069" href="Session.html#5069" class="Bound"
  >R</a
  ><a name="5070" class="Symbol"
  >)</a
  ><a name="5071"
  > </a
  ><a name="5072" class="Symbol"
  >=</a
  ><a name="5073"
  > </a
  ><a name="5074" class="Symbol"
  >(</a
  ><a name="5075" href="Session.html#5065" class="Bound"
  >L</a
  ><a name="5076"
  > </a
  ><a name="5077" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="5078"
  > </a
  ><a name="5079" class="Symbol"
  >(</a
  ><a name="5080" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="5081"
  > </a
  ><a name="5082" href="Session.html#5054" class="Bound"
  >s</a
  ><a name="5083"
  > </a
  ><a name="5084" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5085"
  > </a
  ><a name="5086" href="Session.html#5058" class="Bound"
  >C</a
  ><a name="5087" class="Symbol"
  >))</a
  ><a name="5089"
  > </a
  ><a name="5090" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5091"
  >  </a
  ><a name="5093" href="Session.html#5069" class="Bound"
  >R</a
  ><a name="5094"
  >
</a
  ><a name="5095" href="Session.html#4986" class="Function"
  >split</a
  ><a name="5100"
  > </a
  ><a name="5101" class="Symbol"
  >(</a
  ><a name="5102" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="5103"
  > </a
  ><a name="5104" href="Session.html#5104" class="Bound"
  >s</a
  ><a name="5105"
  > </a
  ><a name="5106" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5107"
  > </a
  ><a name="5108" href="Session.html#5108" class="Bound"
  >C</a
  ><a name="5109" class="Symbol"
  >)</a
  ><a name="5110"
  >  </a
  ><a name="5112" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="5113"
  > </a
  ><a name="5114" class="Symbol"
  >(</a
  ><a name="5115" href="Session.html#5115" class="Bound"
  >L</a
  ><a name="5116"
  > </a
  ><a name="5117" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5118"
  > </a
  ><a name="5119" href="Session.html#5119" class="Bound"
  >R</a
  ><a name="5120" class="Symbol"
  >)</a
  ><a name="5121"
  > </a
  ><a name="5122" class="Symbol"
  >=</a
  ><a name="5123"
  >  </a
  ><a name="5125" href="Session.html#5115" class="Bound"
  >L</a
  ><a name="5126"
  >              </a
  ><a name="5140" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5141"
  > </a
  ><a name="5142" class="Symbol"
  >(</a
  ><a name="5143" href="Session.html#5119" class="Bound"
  >R</a
  ><a name="5144"
  > </a
  ><a name="5145" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="5146"
  > </a
  ><a name="5147" class="Symbol"
  >(</a
  ><a name="5148" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="5149"
  > </a
  ><a name="5150" href="Session.html#5104" class="Bound"
  >s</a
  ><a name="5151"
  > </a
  ><a name="5152" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5153"
  > </a
  ><a name="5154" href="Session.html#5108" class="Bound"
  >C</a
  ><a name="5155" class="Symbol"
  >))</a
  ><a name="5157"
  >
</a
  ><a name="5158" href="Session.html#4986" class="Function"
  >split</a
  ><a name="5163"
  > </a
  ><a name="5164" class="Symbol"
  >(</a
  ><a name="5165" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="5166"
  >   </a
  ><a name="5169" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5170"
  > </a
  ><a name="5171" href="Session.html#5171" class="Bound"
  >C</a
  ><a name="5172" class="Symbol"
  >)</a
  ><a name="5173"
  >  </a
  ><a name="5175" href="Session.html#4884" class="InductiveConstructor"
  >+</a
  ><a name="5176"
  > </a
  ><a name="5177" class="Symbol"
  >(</a
  ><a name="5178" href="Session.html#5178" class="Bound"
  >L</a
  ><a name="5179"
  > </a
  ><a name="5180" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5181"
  > </a
  ><a name="5182" href="Session.html#5182" class="Bound"
  >R</a
  ><a name="5183" class="Symbol"
  >)</a
  ><a name="5184"
  > </a
  ><a name="5185" class="Symbol"
  >=</a
  ><a name="5186"
  > </a
  ><a name="5187" class="Symbol"
  >(</a
  ><a name="5188" href="Session.html#5178" class="Bound"
  >L</a
  ><a name="5189"
  > </a
  ><a name="5190" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="5191"
  > </a
  ><a name="5192" class="Symbol"
  >(</a
  ><a name="5193" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="5194"
  >   </a
  ><a name="5197" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5198"
  > </a
  ><a name="5199" href="Session.html#5171" class="Bound"
  >C</a
  ><a name="5200" class="Symbol"
  >))</a
  ><a name="5202"
  > </a
  ><a name="5203" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5204"
  >  </a
  ><a name="5206" href="Session.html#5182" class="Bound"
  >R</a
  ><a name="5207"
  >
</a
  ><a name="5208" href="Session.html#4986" class="Function"
  >split</a
  ><a name="5213"
  > </a
  ><a name="5214" class="Symbol"
  >(</a
  ><a name="5215" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="5216"
  >   </a
  ><a name="5219" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5220"
  > </a
  ><a name="5221" href="Session.html#5221" class="Bound"
  >C</a
  ><a name="5222" class="Symbol"
  >)</a
  ><a name="5223"
  >  </a
  ><a name="5225" href="Session.html#4886" class="InductiveConstructor"
  >-</a
  ><a name="5226"
  > </a
  ><a name="5227" class="Symbol"
  >(</a
  ><a name="5228" href="Session.html#5228" class="Bound"
  >L</a
  ><a name="5229"
  > </a
  ><a name="5230" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5231"
  > </a
  ><a name="5232" href="Session.html#5232" class="Bound"
  >R</a
  ><a name="5233" class="Symbol"
  >)</a
  ><a name="5234"
  > </a
  ><a name="5235" class="Symbol"
  >=</a
  ><a name="5236"
  >  </a
  ><a name="5238" href="Session.html#5228" class="Bound"
  >L</a
  ><a name="5239"
  >              </a
  ><a name="5253" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5254"
  > </a
  ><a name="5255" class="Symbol"
  >(</a
  ><a name="5256" href="Session.html#5232" class="Bound"
  >R</a
  ><a name="5257"
  > </a
  ><a name="5258" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="5259"
  > </a
  ><a name="5260" class="Symbol"
  >(</a
  ><a name="5261" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="5262"
  >   </a
  ><a name="5265" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5266"
  > </a
  ><a name="5267" href="Session.html#5221" class="Bound"
  >C</a
  ><a name="5268" class="Symbol"
  >))</a
  ><a name="5270"
  >
</a
  ><a name="5271" href="Session.html#4986" class="Function"
  >split</a
  ><a name="5276"
  > </a
  ><a name="5277" class="Symbol"
  >(</a
  ><a name="5278" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="5279"
  >   </a
  ><a name="5282" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5283"
  > </a
  ><a name="5284" href="Session.html#5284" class="Bound"
  >C</a
  ><a name="5285" class="Symbol"
  >)</a
  ><a name="5286"
  > </a
  ><a name="5287" href="Session.html#4888" class="InductiveConstructor"
  >+-</a
  ><a name="5289"
  > </a
  ><a name="5290" class="Symbol"
  >(</a
  ><a name="5291" href="Session.html#5291" class="Bound"
  >L</a
  ><a name="5292"
  > </a
  ><a name="5293" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5294"
  > </a
  ><a name="5295" href="Session.html#5295" class="Bound"
  >R</a
  ><a name="5296" class="Symbol"
  >)</a
  ><a name="5297"
  > </a
  ><a name="5298" class="Symbol"
  >=</a
  ><a name="5299"
  > </a
  ><a name="5300" class="Symbol"
  >(</a
  ><a name="5301" href="Session.html#5291" class="Bound"
  >L</a
  ><a name="5302"
  > </a
  ><a name="5303" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="5304"
  > </a
  ><a name="5305" class="Symbol"
  >(</a
  ><a name="5306" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="5307"
  > </a
  ><a name="5308" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="5309"
  > </a
  ><a name="5310" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5311"
  > </a
  ><a name="5312" href="Session.html#5284" class="Bound"
  >C</a
  ><a name="5313" class="Symbol"
  >))</a
  ><a name="5315"
  > </a
  ><a name="5316" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5317"
  > </a
  ><a name="5318" class="Symbol"
  >(</a
  ><a name="5319" href="Session.html#5295" class="Bound"
  >R</a
  ><a name="5320"
  > </a
  ><a name="5321" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="5322"
  > </a
  ><a name="5323" class="Symbol"
  >(</a
  ><a name="5324" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="5325"
  > </a
  ><a name="5326" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="5327"
  > </a
  ><a name="5328" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5329"
  > </a
  ><a name="5330" href="Session.html#5284" class="Bound"
  >C</a
  ><a name="5331" class="Symbol"
  >))</a
  ><a name="5333"
  >
</a
  ><a name="5334" href="Session.html#4986" class="Function"
  >split</a
  ><a name="5339"
  > </a
  ><a name="5340" class="Symbol"
  >(</a
  ><a name="5341" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="5342"
  >   </a
  ><a name="5345" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5346"
  > </a
  ><a name="5347" href="Session.html#5347" class="Bound"
  >C</a
  ><a name="5348" class="Symbol"
  >)</a
  ><a name="5349"
  > </a
  ><a name="5350" href="Session.html#4891" class="InductiveConstructor"
  >-+</a
  ><a name="5352"
  > </a
  ><a name="5353" class="Symbol"
  >(</a
  ><a name="5354" href="Session.html#5354" class="Bound"
  >L</a
  ><a name="5355"
  > </a
  ><a name="5356" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5357"
  > </a
  ><a name="5358" href="Session.html#5358" class="Bound"
  >R</a
  ><a name="5359" class="Symbol"
  >)</a
  ><a name="5360"
  > </a
  ><a name="5361" class="Symbol"
  >=</a
  ><a name="5362"
  > </a
  ><a name="5363" class="Symbol"
  >(</a
  ><a name="5364" href="Session.html#5354" class="Bound"
  >L</a
  ><a name="5365"
  > </a
  ><a name="5366" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="5367"
  > </a
  ><a name="5368" class="Symbol"
  >(</a
  ><a name="5369" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="5370"
  > </a
  ><a name="5371" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="5372"
  > </a
  ><a name="5373" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5374"
  > </a
  ><a name="5375" href="Session.html#5347" class="Bound"
  >C</a
  ><a name="5376" class="Symbol"
  >))</a
  ><a name="5378"
  > </a
  ><a name="5379" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5380"
  > </a
  ><a name="5381" class="Symbol"
  >(</a
  ><a name="5382" href="Session.html#5358" class="Bound"
  >R</a
  ><a name="5383"
  > </a
  ><a name="5384" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="5385"
  > </a
  ><a name="5386" class="Symbol"
  >(</a
  ><a name="5387" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="5388"
  > </a
  ><a name="5389" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="5390"
  > </a
  ><a name="5391" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5392"
  > </a
  ><a name="5393" href="Session.html#5347" class="Bound"
  >C</a
  ><a name="5394" class="Symbol"
  >))</a
  ><a name="5396"
  ></pre>
<p>At <code>fork</code> time, if <code>Γ</code> is the input context, the user is asked to inhabit a <code>Splits Γ</code>, whose meaning as a pair of contexts is given by <code>splits</code>.</p>
<pre></a
  ><a name="5569" href="Session.html#5569" class="Function"
  >Splits</a
  ><a name="5575"
  > </a
  ><a name="5576" class="Symbol"
  >:</a
  ><a name="5577"
  > </a
  ><a name="5578" class="Symbol"
  >&#8704;</a
  ><a name="5579"
  > </a
  ><a name="5580" href="Session.html#5580" class="Bound"
  >&#915;</a
  ><a name="5581"
  > </a
  ><a name="5582" class="Symbol"
  >&#8594;</a
  ><a name="5583"
  > </a
  ><a name="5584" class="PrimitiveType"
  >Set</a
  ><a name="5587"
  > </a
  ><a name="5588" class="Symbol"
  >_</a
  ><a name="5589"
  >
</a
  ><a name="5590" href="Session.html#5569" class="Function"
  >Splits</a
  ><a name="5596"
  > </a
  ><a name="5597" class="Symbol"
  >=</a
  ><a name="5598"
  > </a
  ><a name="5599" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="5602"
  > </a
  ><a name="5603" href="Session.html#4906" class="Function"
  >Split</a
  ><a name="5608"
  >

</a
  ><a name="5610" href="Session.html#5610" class="Function"
  >splits</a
  ><a name="5616"
  > </a
  ><a name="5617" class="Symbol"
  >:</a
  ><a name="5618"
  > </a
  ><a name="5619" class="Symbol"
  >&#8704;</a
  ><a name="5620"
  > </a
  ><a name="5621" class="Symbol"
  >{</a
  ><a name="5622" href="Session.html#5622" class="Bound"
  >&#915;</a
  ><a name="5623" class="Symbol"
  >}</a
  ><a name="5624"
  > </a
  ><a name="5625" class="Symbol"
  >&#8594;</a
  ><a name="5626"
  > </a
  ><a name="5627" href="Session.html#5569" class="Function"
  >Splits</a
  ><a name="5633"
  > </a
  ><a name="5634" href="Session.html#5622" class="Bound"
  >&#915;</a
  ><a name="5635"
  > </a
  ><a name="5636" class="Symbol"
  >&#8594;</a
  ><a name="5637"
  > </a
  ><a name="5638" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="5640"
  > </a
  ><a name="5641" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="5642"
  > </a
  ><a name="5643" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="5645"
  >
</a
  ><a name="5646" href="Session.html#5610" class="Function"
  >splits</a
  ><a name="5652"
  > </a
  ><a name="5653" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="5655"
  >       </a
  ><a name="5662" class="Symbol"
  >=</a
  ><a name="5663"
  > </a
  ><a name="5664" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="5666"
  > </a
  ><a name="5667" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="5668"
  > </a
  ><a name="5669" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="5671"
  >
</a
  ><a name="5672" href="Session.html#5610" class="Function"
  >splits</a
  ><a name="5678"
  > </a
  ><a name="5679" class="Symbol"
  >(</a
  ><a name="5680" href="Session.html#5680" class="Bound"
  >ds</a
  ><a name="5682"
  > </a
  ><a name="5683" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="5685"
  > </a
  ><a name="5686" href="Session.html#5686" class="Bound"
  >s</a
  ><a name="5687" class="Symbol"
  >)</a
  ><a name="5688"
  > </a
  ><a name="5689" class="Symbol"
  >=</a
  ><a name="5690"
  > </a
  ><a name="5691" href="Session.html#4986" class="Function"
  >split</a
  ><a name="5696"
  > </a
  ><a name="5697" class="Symbol"
  >_</a
  ><a name="5698"
  > </a
  ><a name="5699" href="Session.html#5686" class="Bound"
  >s</a
  ><a name="5700"
  > </a
  ><a name="5701" class="Symbol"
  >(</a
  ><a name="5702" href="Session.html#5610" class="Function"
  >splits</a
  ><a name="5708"
  > </a
  ><a name="5709" href="Session.html#5680" class="Bound"
  >ds</a
  ><a name="5711" class="Symbol"
  >)</a
  ><a name="5712"
  ></pre>
<p><code>all-splits</code> is a generic functions which allows to lift <code>splits</code> to &quot;boxed&quot; predicates.</p>
<pre></a
  ><a name="5828" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="5838"
  > </a
  ><a name="5839" class="Symbol"
  >:</a
  ><a name="5840"
  > </a
  ><a name="5841" class="Symbol"
  >&#8704;</a
  ><a name="5842"
  > </a
  ><a name="5843" class="Symbol"
  >{</a
  ><a name="5844" href="Session.html#5844" class="Bound"
  >lP</a
  ><a name="5846" class="Symbol"
  >}{</a
  ><a name="5848" href="Session.html#5848" class="Bound"
  >P</a
  ><a name="5849"
  > </a
  ><a name="5850" class="Symbol"
  >:</a
  ><a name="5851"
  > </a
  ><a name="5852" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="5856"
  > </a
  ><a name="5857" class="Symbol"
  >&#8594;</a
  ><a name="5858"
  > </a
  ><a name="5859" class="PrimitiveType"
  >Set</a
  ><a name="5862"
  > </a
  ><a name="5863" href="Session.html#5844" class="Bound"
  >lP</a
  ><a name="5865" class="Symbol"
  >}{</a
  ><a name="5867" href="Session.html#5867" class="Bound"
  >&#915;</a
  ><a name="5868" class="Symbol"
  >}</a
  ><a name="5869"
  > </a
  ><a name="5870" class="Symbol"
  >&#8594;</a
  ><a name="5871"
  >
                     </a
  ><a name="5893" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="5896"
  > </a
  ><a name="5897" class="Symbol"
  >(</a
  ><a name="5898" href="Session.html#5848" class="Bound"
  >P</a
  ><a name="5899"
  > </a
  ><a name="5900" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="5901"
  > </a
  ><a name="5902" href="Data.Product.html#539" class="Field"
  >snd</a
  ><a name="5905" class="Symbol"
  >)</a
  ><a name="5906"
  > </a
  ><a name="5907" href="Session.html#5867" class="Bound"
  >&#915;</a
  ><a name="5908"
  > </a
  ><a name="5909" class="Symbol"
  >&#8594;</a
  ><a name="5910"
  >
                </a
  ><a name="5927" class="Symbol"
  >(</a
  ><a name="5928" href="Session.html#5928" class="Bound"
  >d</a
  ><a name="5929"
  > </a
  ><a name="5930" class="Symbol"
  >:</a
  ><a name="5931"
  > </a
  ><a name="5932" href="Session.html#5569" class="Function"
  >Splits</a
  ><a name="5938"
  > </a
  ><a name="5939" href="Session.html#5867" class="Bound"
  >&#915;</a
  ><a name="5940" class="Symbol"
  >)</a
  ><a name="5941"
  >       </a
  ><a name="5948" class="Symbol"
  >&#8594;</a
  ><a name="5949"
  > 
                     </a
  ><a name="5972" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="5975"
  > </a
  ><a name="5976" class="Symbol"
  >(</a
  ><a name="5977" href="Session.html#5848" class="Bound"
  >P</a
  ><a name="5978"
  > </a
  ><a name="5979" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="5980"
  > </a
  ><a name="5981" href="Data.Product.html#539" class="Field"
  >snd</a
  ><a name="5984" class="Symbol"
  >)</a
  ><a name="5985"
  > </a
  ><a name="5986" class="Symbol"
  >(</a
  ><a name="5987" href="Data.Product.html#525" class="Field"
  >fst</a
  ><a name="5990"
  > </a
  ><a name="5991" class="Symbol"
  >(</a
  ><a name="5992" href="Session.html#5610" class="Function"
  >splits</a
  ><a name="5998"
  > </a
  ><a name="5999" href="Session.html#5928" class="Bound"
  >d</a
  ><a name="6000" class="Symbol"
  >))</a
  ><a name="6002"
  >
                   </a
  ><a name="6022" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="6023"
  > </a
  ><a name="6024" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="6027"
  > </a
  ><a name="6028" class="Symbol"
  >(</a
  ><a name="6029" href="Session.html#5848" class="Bound"
  >P</a
  ><a name="6030"
  > </a
  ><a name="6031" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="6032"
  > </a
  ><a name="6033" href="Data.Product.html#539" class="Field"
  >snd</a
  ><a name="6036" class="Symbol"
  >)</a
  ><a name="6037"
  > </a
  ><a name="6038" class="Symbol"
  >(</a
  ><a name="6039" href="Data.Product.html#539" class="Field"
  >snd</a
  ><a name="6042"
  > </a
  ><a name="6043" class="Symbol"
  >(</a
  ><a name="6044" href="Session.html#5610" class="Function"
  >splits</a
  ><a name="6050"
  > </a
  ><a name="6051" href="Session.html#5928" class="Bound"
  >d</a
  ><a name="6052" class="Symbol"
  >))</a
  ><a name="6054"
  >
</a
  ><a name="6055" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6065"
  >                      </a
  ><a name="6087" href="Session.html#6087" class="Bound"
  >ps</a
  ><a name="6089"
  >       </a
  ><a name="6096" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="6098"
  >         </a
  ><a name="6107" class="Symbol"
  >=</a
  ><a name="6108"
  >
  </a
  ><a name="6111" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="6113"
  > </a
  ><a name="6114" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6115"
  > </a
  ><a name="6116" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="6118"
  >
</a
  ><a name="6119" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6129"
  > </a
  ><a name="6130" class="Symbol"
  >{</a
  ><a name="6131" class="Argument"
  >&#915;</a
  ><a name="6132"
  > </a
  ><a name="6133" class="Symbol"
  >=</a
  ><a name="6134"
  > </a
  ><a name="6135" href="Session.html#6135" class="Bound"
  >&#915;</a
  ><a name="6136"
  > </a
  ><a name="6137" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6138"
  > </a
  ><a name="6139" class="Symbol"
  >(</a
  ><a name="6140" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6141"
  >   </a
  ><a name="6144" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6145"
  > </a
  ><a name="6146" href="Session.html#6146" class="Bound"
  >C</a
  ><a name="6147" class="Symbol"
  >)}</a
  ><a name="6149"
  > </a
  ><a name="6150" class="Symbol"
  >(</a
  ><a name="6151" href="Session.html#6151" class="Bound"
  >ps</a
  ><a name="6153"
  > </a
  ><a name="6154" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6156"
  > </a
  ><a name="6157" href="Session.html#6157" class="Bound"
  >p</a
  ><a name="6158" class="Symbol"
  >)</a
  ><a name="6159"
  > </a
  ><a name="6160" class="Symbol"
  >(</a
  ><a name="6161" href="Session.html#6161" class="Bound"
  >ds</a
  ><a name="6163"
  > </a
  ><a name="6164" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6166"
  >    </a
  ><a name="6170" href="Session.html#4884" class="InductiveConstructor"
  >+</a
  ><a name="6171" class="Symbol"
  >)</a
  ><a name="6172"
  > </a
  ><a name="6173" class="Symbol"
  >=</a
  ><a name="6174"
  >
  </a
  ><a name="6177" href="Data.Product.html#1854" class="Function"
  >&#931;.map</a
  ><a name="6182"
  > </a
  ><a name="6183" class="Symbol"
  >(</a
  ><a name="6184" href="Function.html#1480" class="Function"
  >flip</a
  ><a name="6188"
  > </a
  ><a name="6189" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="6193"
  > </a
  ><a name="6194" href="Session.html#6157" class="Bound"
  >p</a
  ><a name="6195" class="Symbol"
  >)</a
  ><a name="6196"
  >  </a
  ><a name="6198" href="Function.html#1012" class="Function"
  >id</a
  ><a name="6200"
  >          </a
  ><a name="6210" class="Symbol"
  >(</a
  ><a name="6211" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6221"
  > </a
  ><a name="6222" href="Session.html#6151" class="Bound"
  >ps</a
  ><a name="6224"
  > </a
  ><a name="6225" href="Session.html#6161" class="Bound"
  >ds</a
  ><a name="6227" class="Symbol"
  >)</a
  ><a name="6228"
  >
</a
  ><a name="6229" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6239"
  > </a
  ><a name="6240" class="Symbol"
  >{</a
  ><a name="6241" class="Argument"
  >&#915;</a
  ><a name="6242"
  > </a
  ><a name="6243" class="Symbol"
  >=</a
  ><a name="6244"
  > </a
  ><a name="6245" href="Session.html#6245" class="Bound"
  >&#915;</a
  ><a name="6246"
  > </a
  ><a name="6247" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6248"
  > </a
  ><a name="6249" class="Symbol"
  >(</a
  ><a name="6250" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6251"
  >   </a
  ><a name="6254" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6255"
  > </a
  ><a name="6256" href="Session.html#6256" class="Bound"
  >C</a
  ><a name="6257" class="Symbol"
  >)}</a
  ><a name="6259"
  > </a
  ><a name="6260" class="Symbol"
  >(</a
  ><a name="6261" href="Session.html#6261" class="Bound"
  >ps</a
  ><a name="6263"
  > </a
  ><a name="6264" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6266"
  > </a
  ><a name="6267" href="Session.html#6267" class="Bound"
  >p</a
  ><a name="6268" class="Symbol"
  >)</a
  ><a name="6269"
  > </a
  ><a name="6270" class="Symbol"
  >(</a
  ><a name="6271" href="Session.html#6271" class="Bound"
  >ds</a
  ><a name="6273"
  > </a
  ><a name="6274" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6276"
  >    </a
  ><a name="6280" href="Session.html#4886" class="InductiveConstructor"
  >-</a
  ><a name="6281" class="Symbol"
  >)</a
  ><a name="6282"
  > </a
  ><a name="6283" class="Symbol"
  >=</a
  ><a name="6284"
  >
  </a
  ><a name="6287" href="Data.Product.html#1854" class="Function"
  >&#931;.map</a
  ><a name="6292"
  >  </a
  ><a name="6294" href="Function.html#1012" class="Function"
  >id</a
  ><a name="6296"
  >          </a
  ><a name="6306" class="Symbol"
  >(</a
  ><a name="6307" href="Function.html#1480" class="Function"
  >flip</a
  ><a name="6311"
  > </a
  ><a name="6312" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="6316"
  > </a
  ><a name="6317" href="Session.html#6267" class="Bound"
  >p</a
  ><a name="6318" class="Symbol"
  >)</a
  ><a name="6319"
  > </a
  ><a name="6320" class="Symbol"
  >(</a
  ><a name="6321" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6331"
  > </a
  ><a name="6332" href="Session.html#6261" class="Bound"
  >ps</a
  ><a name="6334"
  > </a
  ><a name="6335" href="Session.html#6271" class="Bound"
  >ds</a
  ><a name="6337" class="Symbol"
  >)</a
  ><a name="6338"
  >
</a
  ><a name="6339" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6349"
  > </a
  ><a name="6350" class="Symbol"
  >{</a
  ><a name="6351" class="Argument"
  >&#915;</a
  ><a name="6352"
  > </a
  ><a name="6353" class="Symbol"
  >=</a
  ><a name="6354"
  > </a
  ><a name="6355" href="Session.html#6355" class="Bound"
  >&#915;</a
  ><a name="6356"
  > </a
  ><a name="6357" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6358"
  > </a
  ><a name="6359" class="Symbol"
  >(</a
  ><a name="6360" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6361"
  >   </a
  ><a name="6364" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6365"
  > </a
  ><a name="6366" href="Session.html#6366" class="Bound"
  >C</a
  ><a name="6367" class="Symbol"
  >)}</a
  ><a name="6369"
  > </a
  ><a name="6370" class="Symbol"
  >(</a
  ><a name="6371" href="Session.html#6371" class="Bound"
  >ps</a
  ><a name="6373"
  > </a
  ><a name="6374" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6376"
  > </a
  ><a name="6377" href="Session.html#6377" class="Bound"
  >p</a
  ><a name="6378" class="Symbol"
  >)</a
  ><a name="6379"
  > </a
  ><a name="6380" class="Symbol"
  >(</a
  ><a name="6381" href="Session.html#6381" class="Bound"
  >ds</a
  ><a name="6383"
  > </a
  ><a name="6384" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6386"
  >   </a
  ><a name="6389" href="Session.html#4888" class="InductiveConstructor"
  >+-</a
  ><a name="6391" class="Symbol"
  >)</a
  ><a name="6392"
  > </a
  ><a name="6393" class="Symbol"
  >=</a
  ><a name="6394"
  > 
  </a
  ><a name="6398" href="Data.Product.html#1854" class="Function"
  >&#931;.map</a
  ><a name="6403"
  > </a
  ><a name="6404" class="Symbol"
  >(</a
  ><a name="6405" href="Function.html#1480" class="Function"
  >flip</a
  ><a name="6409"
  > </a
  ><a name="6410" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="6414"
  > </a
  ><a name="6415" href="Session.html#6377" class="Bound"
  >p</a
  ><a name="6416" class="Symbol"
  >)</a
  ><a name="6417"
  > </a
  ><a name="6418" class="Symbol"
  >(</a
  ><a name="6419" href="Function.html#1480" class="Function"
  >flip</a
  ><a name="6423"
  > </a
  ><a name="6424" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="6428"
  > </a
  ><a name="6429" href="Session.html#6377" class="Bound"
  >p</a
  ><a name="6430" class="Symbol"
  >)</a
  ><a name="6431"
  > </a
  ><a name="6432" class="Symbol"
  >(</a
  ><a name="6433" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6443"
  > </a
  ><a name="6444" href="Session.html#6371" class="Bound"
  >ps</a
  ><a name="6446"
  > </a
  ><a name="6447" href="Session.html#6381" class="Bound"
  >ds</a
  ><a name="6449" class="Symbol"
  >)</a
  ><a name="6450"
  >
</a
  ><a name="6451" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6461"
  > </a
  ><a name="6462" class="Symbol"
  >{</a
  ><a name="6463" class="Argument"
  >&#915;</a
  ><a name="6464"
  > </a
  ><a name="6465" class="Symbol"
  >=</a
  ><a name="6466"
  > </a
  ><a name="6467" href="Session.html#6467" class="Bound"
  >&#915;</a
  ><a name="6468"
  > </a
  ><a name="6469" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6470"
  > </a
  ><a name="6471" class="Symbol"
  >(</a
  ><a name="6472" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6473"
  >   </a
  ><a name="6476" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6477"
  > </a
  ><a name="6478" href="Session.html#6478" class="Bound"
  >C</a
  ><a name="6479" class="Symbol"
  >)}</a
  ><a name="6481"
  > </a
  ><a name="6482" class="Symbol"
  >(</a
  ><a name="6483" href="Session.html#6483" class="Bound"
  >ps</a
  ><a name="6485"
  > </a
  ><a name="6486" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6488"
  > </a
  ><a name="6489" href="Session.html#6489" class="Bound"
  >p</a
  ><a name="6490" class="Symbol"
  >)</a
  ><a name="6491"
  > </a
  ><a name="6492" class="Symbol"
  >(</a
  ><a name="6493" href="Session.html#6493" class="Bound"
  >ds</a
  ><a name="6495"
  > </a
  ><a name="6496" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6498"
  >   </a
  ><a name="6501" href="Session.html#4891" class="InductiveConstructor"
  >-+</a
  ><a name="6503" class="Symbol"
  >)</a
  ><a name="6504"
  > </a
  ><a name="6505" class="Symbol"
  >=</a
  ><a name="6506"
  >
  </a
  ><a name="6509" href="Data.Product.html#1854" class="Function"
  >&#931;.map</a
  ><a name="6514"
  > </a
  ><a name="6515" class="Symbol"
  >(</a
  ><a name="6516" href="Function.html#1480" class="Function"
  >flip</a
  ><a name="6520"
  > </a
  ><a name="6521" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="6525"
  > </a
  ><a name="6526" href="Session.html#6489" class="Bound"
  >p</a
  ><a name="6527" class="Symbol"
  >)</a
  ><a name="6528"
  > </a
  ><a name="6529" class="Symbol"
  >(</a
  ><a name="6530" href="Function.html#1480" class="Function"
  >flip</a
  ><a name="6534"
  > </a
  ><a name="6535" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="6539"
  > </a
  ><a name="6540" href="Session.html#6489" class="Bound"
  >p</a
  ><a name="6541" class="Symbol"
  >)</a
  ><a name="6542"
  > </a
  ><a name="6543" class="Symbol"
  >(</a
  ><a name="6544" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6554"
  > </a
  ><a name="6555" href="Session.html#6483" class="Bound"
  >ps</a
  ><a name="6557"
  > </a
  ><a name="6558" href="Session.html#6493" class="Bound"
  >ds</a
  ><a name="6560" class="Symbol"
  >)</a
  ><a name="6561"
  >
</a
  ><a name="6562" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6572"
  > </a
  ><a name="6573" class="Symbol"
  >{</a
  ><a name="6574" class="Argument"
  >&#915;</a
  ><a name="6575"
  > </a
  ><a name="6576" class="Symbol"
  >=</a
  ><a name="6577"
  > </a
  ><a name="6578" href="Session.html#6578" class="Bound"
  >&#915;</a
  ><a name="6579"
  > </a
  ><a name="6580" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6581"
  > </a
  ><a name="6582" class="Symbol"
  >(</a
  ><a name="6583" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6584"
  > </a
  ><a name="6585" class="Symbol"
  >_</a
  ><a name="6586"
  > </a
  ><a name="6587" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6588"
  > </a
  ><a name="6589" href="Session.html#6589" class="Bound"
  >C</a
  ><a name="6590" class="Symbol"
  >)}</a
  ><a name="6592"
  > </a
  ><a name="6593" class="Symbol"
  >(</a
  ><a name="6594" href="Session.html#6594" class="Bound"
  >ps</a
  ><a name="6596"
  > </a
  ><a name="6597" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6599"
  > </a
  ><a name="6600" href="Session.html#6600" class="Bound"
  >p</a
  ><a name="6601" class="Symbol"
  >)</a
  ><a name="6602"
  > </a
  ><a name="6603" class="Symbol"
  >(</a
  ><a name="6604" href="Session.html#6604" class="Bound"
  >ds</a
  ><a name="6606"
  > </a
  ><a name="6607" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6609"
  >    </a
  ><a name="6613" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="6614" class="Symbol"
  >)</a
  ><a name="6615"
  > </a
  ><a name="6616" class="Symbol"
  >=</a
  ><a name="6617"
  > 
  </a
  ><a name="6621" href="Data.Product.html#1854" class="Function"
  >&#931;.map</a
  ><a name="6626"
  > </a
  ><a name="6627" class="Symbol"
  >(</a
  ><a name="6628" href="Function.html#1480" class="Function"
  >flip</a
  ><a name="6632"
  > </a
  ><a name="6633" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="6637"
  > </a
  ><a name="6638" href="Session.html#6600" class="Bound"
  >p</a
  ><a name="6639" class="Symbol"
  >)</a
  ><a name="6640"
  >  </a
  ><a name="6642" href="Function.html#1012" class="Function"
  >id</a
  ><a name="6644"
  >          </a
  ><a name="6654" class="Symbol"
  >(</a
  ><a name="6655" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6665"
  > </a
  ><a name="6666" href="Session.html#6594" class="Bound"
  >ps</a
  ><a name="6668"
  > </a
  ><a name="6669" href="Session.html#6604" class="Bound"
  >ds</a
  ><a name="6671" class="Symbol"
  >)</a
  ><a name="6672"
  >
</a
  ><a name="6673" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6683"
  > </a
  ><a name="6684" class="Symbol"
  >{</a
  ><a name="6685" class="Argument"
  >&#915;</a
  ><a name="6686"
  > </a
  ><a name="6687" class="Symbol"
  >=</a
  ><a name="6688"
  > </a
  ><a name="6689" href="Session.html#6689" class="Bound"
  >&#915;</a
  ><a name="6690"
  > </a
  ><a name="6691" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6692"
  > </a
  ><a name="6693" class="Symbol"
  >(</a
  ><a name="6694" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6695"
  > </a
  ><a name="6696" class="Symbol"
  >_</a
  ><a name="6697"
  > </a
  ><a name="6698" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6699"
  > </a
  ><a name="6700" href="Session.html#6700" class="Bound"
  >C</a
  ><a name="6701" class="Symbol"
  >)}</a
  ><a name="6703"
  > </a
  ><a name="6704" class="Symbol"
  >(</a
  ><a name="6705" href="Session.html#6705" class="Bound"
  >ps</a
  ><a name="6707"
  > </a
  ><a name="6708" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6710"
  > </a
  ><a name="6711" href="Session.html#6711" class="Bound"
  >p</a
  ><a name="6712" class="Symbol"
  >)</a
  ><a name="6713"
  > </a
  ><a name="6714" class="Symbol"
  >(</a
  ><a name="6715" href="Session.html#6715" class="Bound"
  >ds</a
  ><a name="6717"
  > </a
  ><a name="6718" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="6720"
  >    </a
  ><a name="6724" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="6725" class="Symbol"
  >)</a
  ><a name="6726"
  > </a
  ><a name="6727" class="Symbol"
  >=</a
  ><a name="6728"
  > 
  </a
  ><a name="6732" href="Data.Product.html#1854" class="Function"
  >&#931;.map</a
  ><a name="6737"
  >  </a
  ><a name="6739" href="Function.html#1012" class="Function"
  >id</a
  ><a name="6741"
  >          </a
  ><a name="6751" class="Symbol"
  >(</a
  ><a name="6752" href="Function.html#1480" class="Function"
  >flip</a
  ><a name="6756"
  > </a
  ><a name="6757" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="6761"
  > </a
  ><a name="6762" href="Session.html#6711" class="Bound"
  >p</a
  ><a name="6763" class="Symbol"
  >)</a
  ><a name="6764"
  > </a
  ><a name="6765" class="Symbol"
  >(</a
  ><a name="6766" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="6776"
  > </a
  ><a name="6777" href="Session.html#6705" class="Bound"
  >ps</a
  ><a name="6779"
  > </a
  ><a name="6780" href="Session.html#6715" class="Bound"
  >ds</a
  ><a name="6782" class="Symbol"
  >)</a
  ><a name="6783"
  ></pre>
<p>We use some patterns to deal more easily with dependent tuples and objects of type <code>Entry</code>.</p>
<pre></a
  ><a name="6902" class="Keyword"
  >pattern</a
  ><a name="6909"
  > </a
  ><a name="6910" href="Session.html#6910" class="InductiveConstructor Operator"
  >%_</a
  ><a name="6912"
  >  </a
  ><a name="6914" href="Session.html#6922" class="Bound"
  >x</a
  ><a name="6915"
  > </a
  ><a name="6916" class="Symbol"
  >=</a
  ><a name="6917"
  > </a
  ><a name="6918" class="Symbol"
  >_</a
  ><a name="6919"
  > </a
  ><a name="6920" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6921"
  > </a
  ><a name="6922" href="Session.html#6922" class="Bound"
  >x</a
  ><a name="6923"
  >
</a
  ><a name="6924" class="Keyword"
  >pattern</a
  ><a name="6931"
  > </a
  ><a name="6932" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2_</a
  ><a name="6935"
  > </a
  ><a name="6936" href="Session.html#6945" class="Bound"
  >x</a
  ><a name="6937"
  > </a
  ><a name="6938" class="Symbol"
  >=</a
  ><a name="6939"
  > </a
  ><a name="6940" href="Session.html#6910" class="InductiveConstructor Operator"
  >%</a
  ><a name="6941"
  > </a
  ><a name="6942" href="Session.html#6910" class="InductiveConstructor Operator"
  >%</a
  ><a name="6943"
  >  </a
  ><a name="6945" href="Session.html#6945" class="Bound"
  >x</a
  ><a name="6946"
  >
</a
  ><a name="6947" class="Keyword"
  >pattern</a
  ><a name="6954"
  > </a
  ><a name="6955" href="Session.html#6955" class="InductiveConstructor Operator"
  >%3_</a
  ><a name="6958"
  > </a
  ><a name="6959" href="Session.html#6968" class="Bound"
  >x</a
  ><a name="6960"
  > </a
  ><a name="6961" class="Symbol"
  >=</a
  ><a name="6962"
  > </a
  ><a name="6963" href="Session.html#6910" class="InductiveConstructor Operator"
  >%</a
  ><a name="6964"
  > </a
  ><a name="6965" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="6967"
  > </a
  ><a name="6968" href="Session.html#6968" class="Bound"
  >x</a
  ><a name="6969"
  >
</a
  ><a name="6970" class="Keyword"
  >pattern</a
  ><a name="6977"
  > </a
  ><a name="6978" href="Session.html#6978" class="InductiveConstructor Operator"
  >%4_</a
  ><a name="6981"
  > </a
  ><a name="6982" href="Session.html#6991" class="Bound"
  >x</a
  ><a name="6983"
  > </a
  ><a name="6984" class="Symbol"
  >=</a
  ><a name="6985"
  > </a
  ><a name="6986" href="Session.html#6910" class="InductiveConstructor Operator"
  >%</a
  ><a name="6987"
  > </a
  ><a name="6988" href="Session.html#6955" class="InductiveConstructor Operator"
  >%3</a
  ><a name="6990"
  > </a
  ><a name="6991" href="Session.html#6991" class="Bound"
  >x</a
  ><a name="6992"
  >

</a
  ><a name="6994" class="Keyword"
  >pattern</a
  ><a name="7001"
  > </a
  ><a name="7002" href="Session.html#7002" class="InductiveConstructor Operator"
  >&#187;&#187;_</a
  ><a name="7005"
  > </a
  ><a name="7006" href="Session.html#7019" class="Bound"
  >x</a
  ><a name="7007"
  > </a
  ><a name="7008" class="Symbol"
  >=</a
  ><a name="7009"
  > </a
  ><a name="7010" class="InductiveConstructor"
  >&gt;</a
  ><a name="7011"
  > </a
  ><a name="7012" class="InductiveConstructor"
  >+</a
  ><a name="7013"
  > </a
  ><a name="7014" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7015"
  > </a
  ><a name="7016" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="7018"
  > </a
  ><a name="7019" href="Session.html#7019" class="Bound"
  >x</a
  ><a name="7020"
  >
</a
  ><a name="7021" class="Keyword"
  >pattern</a
  ><a name="7028"
  > </a
  ><a name="7029" href="Session.html#7029" class="InductiveConstructor Operator"
  >_&#171;&#171;</a
  ><a name="7032"
  > </a
  ><a name="7033" href="Session.html#7046" class="Bound"
  >x</a
  ><a name="7034"
  > </a
  ><a name="7035" class="Symbol"
  >=</a
  ><a name="7036"
  > </a
  ><a name="7037" class="InductiveConstructor"
  >&gt;</a
  ><a name="7038"
  > </a
  ><a name="7039" class="InductiveConstructor"
  >-</a
  ><a name="7040"
  > </a
  ><a name="7041" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7042"
  > </a
  ><a name="7043" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="7045"
  > </a
  ><a name="7046" href="Session.html#7046" class="Bound"
  >x</a
  ><a name="7047"
  ></pre>
<h2 id="terms">Terms</h2>
<h2 id="introduction">Introduction</h2>
<p>Here we would like to provide a human-readable representation of the syntax which is encoded below, also discussing the choice of encoding.</p>
<p>For now we limit ourselves to illustrating the Agda code step-by-step.</p>
<h3 id="functors">Functors</h3>
<p>We define several (indexed) functors: we will obtain our process syntax by taking their fixpoint. While in the future we plan to move to codes for a universe of functors such as the ones cited above, for the purpose of illustrating the method we do not want to add further complications.</p>
<p>Most of the productions are non-recursive, so we will first define some families in <code>Ty</code>.</p>
<pre></a
  ><a name="7707" class="Keyword"
  >private</a
  ><a name="7714"
  > </a
  ><a name="7715" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="7717"
  > </a
  ><a name="7718" class="Symbol"
  >=</a
  ><a name="7719"
  > </a
  ><a name="7720" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="7722"
  > </a
  ><a name="7723" class="Symbol"
  >&#8594;</a
  ><a name="7724"
  > </a
  ><a name="7725" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="7727"
  > </a
  ><a name="7728" class="Symbol"
  >&#8594;</a
  ><a name="7729"
  > </a
  ><a name="7730" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="7734"
  ></pre>
<p>The functor corresponding to the <code>new</code> grammar production/constructor simply imposes that the output context contains a <em>new</em> channel, i.e. a channel whose side is <code>ε</code> (<code>Maybe.nothing</code>).</p>
<pre></a
  ><a name="7948" href="Session.html#7948" class="Function"
  >New</a
  ><a name="7951"
  > </a
  ><a name="7952" class="Symbol"
  >:</a
  ><a name="7953"
  > </a
  ><a name="7954" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="7956"
  >
</a
  ><a name="7957" href="Session.html#7948" class="Function"
  >New</a
  ><a name="7960"
  > </a
  ><a name="7961" href="Session.html#7961" class="Bound"
  >&#915;</a
  ><a name="7962"
  > </a
  ><a name="7963" href="Session.html#7963" class="Bound"
  >&#916;</a
  ><a name="7964"
  > </a
  ><a name="7965" class="Symbol"
  >=</a
  ><a name="7966"
  > </a
  ><a name="7967" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="7968"
  > </a
  ><a name="7969" class="Symbol"
  >_</a
  ><a name="7970"
  > </a
  ><a name="7971" class="Symbol"
  >&#955;</a
  ><a name="7972"
  > </a
  ><a name="7973" href="Session.html#7973" class="Bound"
  >F</a
  ><a name="7974"
  > </a
  ><a name="7975" class="Symbol"
  >&#8594;</a
  ><a name="7976"
  > </a
  ><a name="7977" href="Session.html#7963" class="Bound"
  >&#916;</a
  ><a name="7978"
  > </a
  ><a name="7979" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="7980"
  > </a
  ><a name="7981" href="Session.html#7961" class="Bound"
  >&#915;</a
  ><a name="7982"
  > </a
  ><a name="7983" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7984"
  > </a
  ><a name="7985" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="7986"
  > </a
  ><a name="7987" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7988"
  > </a
  ><a name="7989" href="Session.html#7973" class="Bound"
  >F</a
  ><a name="7990"
  ></pre>
<p>We can send and receive channels along channels: in the former case the sent session type is omitted from the output context, in the latter the context is extended with the entry corresponding to the received channel.</p>
<pre></a
  ><a name="8235" href="Session.html#8235" class="Function"
  >Send</a
  ><a name="8239"
  > </a
  ><a name="8240" href="Session.html#8240" class="Function"
  >Receive</a
  ><a name="8247"
  > </a
  ><a name="8248" class="Symbol"
  >:</a
  ><a name="8249"
  > </a
  ><a name="8250" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="8252"
  >
</a
  ><a name="8253" href="Session.html#8235" class="Function"
  >Send</a
  ><a name="8257"
  > </a
  ><a name="8258" href="Session.html#8258" class="Bound"
  >&#915;</a
  ><a name="8259"
  > </a
  ><a name="8260" href="Session.html#8260" class="Bound"
  >&#916;</a
  ><a name="8261"
  > </a
  ><a name="8262" class="Symbol"
  >=</a
  ><a name="8263"
  > </a
  ><a name="8264" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="8265"
  > </a
  ><a name="8266" class="Symbol"
  >(</a
  ><a name="8267" href="Session.html#2048" class="Function"
  >Entry</a
  ><a name="8272"
  > </a
  ><a name="8273" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="8274"
  > </a
  ><a name="8275" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="8279"
  > </a
  ><a name="8280" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="8281"
  > </a
  ><a name="8282" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="8286" class="Symbol"
  >)</a
  ><a name="8287"
  > </a
  ><a name="8288" class="Symbol"
  >&#955;</a
  ><a name="8289"
  > </a
  ><a name="8290" href="Session.html#8290" class="Bound"
  >W</a
  ><a name="8291"
  > </a
  ><a name="8292" class="Symbol"
  >&#8594;</a
  ><a name="8293"
  >
           </a
  ><a name="8305" class="Keyword"
  >let</a
  ><a name="8308"
  > </a
  ><a name="8309" href="Session.html#8309" class="Bound"
  >L</a
  ><a name="8310"
  > </a
  ><a name="8311" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8312"
  > </a
  ><a name="8313" href="Session.html#8313" class="Bound"
  >s</a
  ><a name="8314"
  > </a
  ><a name="8315" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8316"
  > </a
  ><a name="8317" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="8319"
  > </a
  ><a name="8320" href="Session.html#8320" class="Bound"
  >R</a
  ><a name="8321"
  > </a
  ><a name="8322" class="Symbol"
  >=</a
  ><a name="8323"
  > </a
  ><a name="8324" href="Session.html#8290" class="Bound"
  >W</a
  ><a name="8325"
  > </a
  ><a name="8326" class="Keyword"
  >in</a
  ><a name="8328"
  >
           </a
  ><a name="8340" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="8341"
  > </a
  ><a name="8342" class="Symbol"
  >(</a
  ><a name="8343"
  >                      </a
  ><a name="8365" href="Session.html#8309" class="Bound"
  >L</a
  ><a name="8366"
  > </a
  ><a name="8367" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="8368"
  > </a
  ><a name="8369" href="Session.html#8258" class="Bound"
  >&#915;</a
  ><a name="8370"
  >   </a
  ><a name="8373" class="Symbol"
  >)</a
  ><a name="8374"
  > </a
  ><a name="8375" class="Symbol"
  >&#955;</a
  ><a name="8376"
  > </a
  ><a name="8377" href="Session.html#8377" class="Bound"
  >i</a
  ><a name="8378"
  > </a
  ><a name="8379" class="Symbol"
  >&#8594;</a
  ><a name="8380"
  >
           </a
  ><a name="8392" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="8393"
  > </a
  ><a name="8394" class="Symbol"
  >((</a
  ><a name="8396" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="8397"
  > </a
  ><a name="8398" href="Session.html#8313" class="Bound"
  >s</a
  ><a name="8399"
  > </a
  ><a name="8400" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8401"
  > </a
  ><a name="8402" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="8404"
  > </a
  ><a name="8405" class="Symbol"
  >(</a
  ><a name="8406" href="Session.html#8309" class="Bound"
  >L</a
  ><a name="8407"
  > </a
  ><a name="8408" href="Session.html#3593" class="Function Operator"
  >[</a
  ><a name="8409"
  > </a
  ><a name="8410" href="Session.html#8313" class="Bound"
  >s</a
  ><a name="8411"
  > </a
  ><a name="8412" href="Session.html#3593" class="Function Operator"
  >]&#8855;</a
  ><a name="8414"
  > </a
  ><a name="8415" href="Session.html#8320" class="Bound"
  >R</a
  ><a name="8416" class="Symbol"
  >))</a
  ><a name="8418"
  > </a
  ><a name="8419" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="8420"
  > </a
  ><a name="8421" href="Session.Base.html#3035" class="Function"
  >rm</a
  ><a name="8423"
  > </a
  ><a name="8424" href="Session.html#8377" class="Bound"
  >i</a
  ><a name="8425" class="Symbol"
  >)</a
  ><a name="8426"
  >
             </a
  ><a name="8440" class="Symbol"
  >(</a
  ><a name="8441" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="8444"
  > </a
  ><a name="8445" href="Session.html#8260" class="Bound"
  >&#916;</a
  ><a name="8446"
  > </a
  ><a name="8447" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="8448"
  > </a
  ><a name="8449" href="Session.Base.html#3414" class="Function"
  >ud</a
  ><a name="8451"
  > </a
  ><a name="8452" class="Symbol"
  >(</a
  ><a name="8453" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="8454"
  > </a
  ><a name="8455" href="Session.html#8313" class="Bound"
  >s</a
  ><a name="8456"
  > </a
  ><a name="8457" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8458"
  > </a
  ><a name="8459" class="Symbol"
  >_</a
  ><a name="8460"
  > </a
  ><a name="8461" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8462"
  > </a
  ><a name="8463" class="Symbol"
  >_</a
  ><a name="8464"
  > </a
  ><a name="8465" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8466"
  > </a
  ><a name="8467" href="Session.html#8320" class="Bound"
  >R</a
  ><a name="8468" class="Symbol"
  >))</a
  ><a name="8470"
  >
</a
  ><a name="8471" href="Session.html#8240" class="Function"
  >Receive</a
  ><a name="8478"
  > </a
  ><a name="8479" href="Session.html#8479" class="Bound"
  >&#915;</a
  ><a name="8480"
  > </a
  ><a name="8481" href="Session.html#8481" class="Bound"
  >&#916;</a
  ><a name="8482"
  > </a
  ><a name="8483" class="Symbol"
  >=</a
  ><a name="8484"
  > </a
  ><a name="8485" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="8486"
  > </a
  ><a name="8487" class="Symbol"
  >(</a
  ><a name="8488" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="8492"
  > </a
  ><a name="8493" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="8494"
  > </a
  ><a name="8495" class="Symbol"
  >_</a
  ><a name="8496"
  > </a
  ><a name="8497" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="8498"
  > </a
  ><a name="8499" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="8503" class="Symbol"
  >)</a
  ><a name="8504"
  > </a
  ><a name="8505" class="Symbol"
  >&#955;</a
  ><a name="8506"
  > </a
  ><a name="8507" href="Session.html#8507" class="Bound"
  >W</a
  ><a name="8508"
  > </a
  ><a name="8509" class="Symbol"
  >&#8594;</a
  ><a name="8510"
  >
              </a
  ><a name="8525" class="Keyword"
  >let</a
  ><a name="8528"
  > </a
  ><a name="8529" href="Session.html#8529" class="Bound"
  >s</a
  ><a name="8530"
  > </a
  ><a name="8531" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8532"
  > </a
  ><a name="8533" href="Session.html#8533" class="Bound"
  >L</a
  ><a name="8534"
  > </a
  ><a name="8535" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8536"
  > </a
  ><a name="8537" class="Symbol"
  >_</a
  ><a name="8538"
  > </a
  ><a name="8539" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8540"
  > </a
  ><a name="8541" class="Symbol"
  >_</a
  ><a name="8542"
  > </a
  ><a name="8543" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8544"
  > </a
  ><a name="8545" href="Session.html#8545" class="Bound"
  >R</a
  ><a name="8546"
  > </a
  ><a name="8547" class="Symbol"
  >=</a
  ><a name="8548"
  > </a
  ><a name="8549" href="Session.html#8507" class="Bound"
  >W</a
  ><a name="8550"
  > </a
  ><a name="8551" class="Keyword"
  >in</a
  ><a name="8553"
  >
              </a
  ><a name="8568" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="8569"
  > </a
  ><a name="8570" class="Symbol"
  >((</a
  ><a name="8572" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="8573"
  > </a
  ><a name="8574" href="Session.html#8529" class="Bound"
  >s</a
  ><a name="8575"
  > </a
  ><a name="8576" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8577"
  > </a
  ><a name="8578" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="8580"
  > </a
  ><a name="8581" class="Symbol"
  >(</a
  ><a name="8582" href="Session.html#8533" class="Bound"
  >L</a
  ><a name="8583"
  > </a
  ><a name="8584" href="Session.html#3600" class="Function Operator"
  >[</a
  ><a name="8585"
  > </a
  ><a name="8586" href="Session.html#8529" class="Bound"
  >s</a
  ><a name="8587"
  > </a
  ><a name="8588" href="Session.html#3600" class="Function Operator"
  >]&#8523;</a
  ><a name="8590"
  > </a
  ><a name="8591" href="Session.html#8545" class="Bound"
  >R</a
  ><a name="8592" class="Symbol"
  >))</a
  ><a name="8594"
  > </a
  ><a name="8595" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="8596"
  > </a
  ><a name="8597" href="Session.html#8479" class="Bound"
  >&#915;</a
  ><a name="8598" class="Symbol"
  >)</a
  ><a name="8599"
  > </a
  ><a name="8600" class="Symbol"
  >&#955;</a
  ><a name="8601"
  > </a
  ><a name="8602" href="Session.html#8602" class="Bound"
  >i</a
  ><a name="8603"
  > </a
  ><a name="8604" class="Symbol"
  >&#8594;</a
  ><a name="8605"
  > 
                </a
  ><a name="8623" href="Session.html#8481" class="Bound"
  >&#916;</a
  ><a name="8624"
  > </a
  ><a name="8625" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="8626"
  > </a
  ><a name="8627" href="Session.Base.html#3414" class="Function"
  >ud</a
  ><a name="8629"
  > </a
  ><a name="8630" class="Symbol"
  >(</a
  ><a name="8631" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="8632"
  > </a
  ><a name="8633" href="Session.html#8529" class="Bound"
  >s</a
  ><a name="8634"
  > </a
  ><a name="8635" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8636"
  > </a
  ><a name="8637" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="8639"
  > </a
  ><a name="8640" href="Session.html#8545" class="Bound"
  >R</a
  ><a name="8641" class="Symbol"
  >)</a
  ><a name="8642"
  > </a
  ><a name="8643" href="Session.html#8602" class="Bound"
  >i</a
  ><a name="8644"
  > </a
  ><a name="8645" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8646"
  > </a
  ><a name="8647" href="Session.html#8533" class="Bound"
  >L</a
  ><a name="8648"
  ></pre>
<p>Writing to and reading from channels changes the type accordingly, without necessarily introducing dependencies.</p>
<pre></a
  ><a name="8788" href="Session.html#8788" class="Function"
  >Write</a
  ><a name="8793"
  > </a
  ><a name="8794" href="Session.html#8794" class="Function"
  >Read</a
  ><a name="8798"
  > </a
  ><a name="8799" class="Symbol"
  >:</a
  ><a name="8800"
  > </a
  ><a name="8801" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="8803"
  >
</a
  ><a name="8804" href="Session.html#8788" class="Function"
  >Write</a
  ><a name="8809"
  > </a
  ><a name="8810" href="Session.html#8810" class="Bound"
  >&#915;</a
  ><a name="8811"
  > </a
  ><a name="8812" href="Session.html#8812" class="Bound"
  >&#916;</a
  ><a name="8813"
  > </a
  ><a name="8814" class="Symbol"
  >=</a
  ><a name="8815"
  > </a
  ><a name="8816" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="8817"
  > </a
  ><a name="8818" class="Symbol"
  >(</a
  ><a name="8819" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="8820"
  > </a
  ><a name="8821" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="8825"
  > </a
  ><a name="8826" class="Symbol"
  >&#955;</a
  ><a name="8827"
  > </a
  ><a name="8828" class="Symbol"
  >{</a
  ><a name="8829"
  > </a
  ><a name="8830" class="Symbol"
  >(</a
  ><a name="8831" href="Session.html#8831" class="Bound"
  >I</a
  ><a name="8832"
  > </a
  ><a name="8833" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8834"
  > </a
  ><a name="8835" href="Session.html#8835" class="Bound"
  >J</a
  ><a name="8836"
  > </a
  ><a name="8837" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8838"
  > </a
  ><a name="8839" href="Session.html#8839" class="Bound"
  >T</a
  ><a name="8840" class="Symbol"
  >)</a
  ><a name="8841"
  > </a
  ><a name="8842" class="Symbol"
  >&#8594;</a
  ><a name="8843"
  > </a
  ><a name="8844" href="Session.html#8835" class="Bound"
  >J</a
  ><a name="8845"
  > </a
  ><a name="8846" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="8847"
  > </a
  ><a name="8848" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="8852"
  > </a
  ><a name="8853" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="8854"
  > </a
  ><a name="8855" class="PrimitiveType"
  >Set</a
  ><a name="8858"
  > </a
  ><a name="8859" class="Symbol"
  >})</a
  ><a name="8861"
  > </a
  ><a name="8862" class="Symbol"
  >&#955;</a
  ><a name="8863"
  > </a
  ><a name="8864" href="Session.html#8864" class="Bound"
  >W</a
  ><a name="8865"
  > </a
  ><a name="8866" class="Symbol"
  >&#8594;</a
  ><a name="8867"
  >
            </a
  ><a name="8880" class="Keyword"
  >let</a
  ><a name="8883"
  > </a
  ><a name="8884" class="Symbol"
  >(</a
  ><a name="8885" href="Session.html#8885" class="Bound"
  >I</a
  ><a name="8886"
  > </a
  ><a name="8887" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8888"
  > </a
  ><a name="8889" href="Session.html#8889" class="Bound"
  >J</a
  ><a name="8890"
  > </a
  ><a name="8891" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8892"
  > </a
  ><a name="8893" href="Session.html#8893" class="Bound"
  >T</a
  ><a name="8894" class="Symbol"
  >)</a
  ><a name="8895"
  > </a
  ><a name="8896" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8897"
  > </a
  ><a name="8898" href="Session.html#8898" class="Bound"
  >j</a
  ><a name="8899"
  > </a
  ><a name="8900" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8901"
  > </a
  ><a name="8902" href="Session.html#8902" class="Bound"
  >s</a
  ><a name="8903"
  > </a
  ><a name="8904" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8905"
  > </a
  ><a name="8906" href="Session.html#8906" class="Bound"
  >O</a
  ><a name="8907"
  > </a
  ><a name="8908" class="Symbol"
  >=</a
  ><a name="8909"
  > </a
  ><a name="8910" href="Session.html#8864" class="Bound"
  >W</a
  ><a name="8911"
  > </a
  ><a name="8912" class="Keyword"
  >in</a
  ><a name="8914"
  >
            </a
  ><a name="8927" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="8928"
  > </a
  ><a name="8929" class="Symbol"
  >((</a
  ><a name="8931" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="8932"
  > </a
  ><a name="8933" href="Session.html#8902" class="Bound"
  >s</a
  ><a name="8934"
  > </a
  ><a name="8935" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8936"
  > </a
  ><a name="8937" href="Session.html#8885" class="Bound"
  >I</a
  ><a name="8938"
  > </a
  ><a name="8939" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8940"
  > </a
  ><a name="8941" href="Session.html#8906" class="Bound"
  >O</a
  ><a name="8942"
  > </a
  ><a name="8943" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8944"
  > </a
  ><a name="8945" href="Session.html#3459" class="Function Operator"
  >[</a
  ><a name="8946"
  > </a
  ><a name="8947" href="Session.html#8902" class="Bound"
  >s</a
  ><a name="8948"
  > </a
  ><a name="8949" href="Session.html#3459" class="Function Operator"
  >]&#931;</a
  ><a name="8951"
  > </a
  ><a name="8952" href="Session.html#8889" class="Bound"
  >J</a
  ><a name="8953"
  > </a
  ><a name="8954" href="Session.html#8893" class="Bound"
  >T</a
  ><a name="8955" class="Symbol"
  >)</a
  ><a name="8956"
  > </a
  ><a name="8957" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="8958"
  > </a
  ><a name="8959" href="Session.html#8810" class="Bound"
  >&#915;</a
  ><a name="8960" class="Symbol"
  >)</a
  ><a name="8961"
  >
              </a
  ><a name="8976" class="Symbol"
  >(</a
  ><a name="8977" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="8980"
  > </a
  ><a name="8981" href="Session.html#8812" class="Bound"
  >&#916;</a
  ><a name="8982"
  > </a
  ><a name="8983" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="8984"
  > </a
  ><a name="8985" href="Session.Base.html#3414" class="Function"
  >ud</a
  ><a name="8987"
  > </a
  ><a name="8988" class="Symbol"
  >(</a
  ><a name="8989" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="8990"
  > </a
  ><a name="8991" href="Session.html#8902" class="Bound"
  >s</a
  ><a name="8992"
  > </a
  ><a name="8993" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8994"
  > </a
  ><a name="8995" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="8997"
  > </a
  ><a name="8998" href="Session.html#8893" class="Bound"
  >T</a
  ><a name="8999" class="Symbol"
  >))</a
  ><a name="9001"
  >
</a
  ><a name="9002" href="Session.html#8794" class="Function"
  >Read</a
  ><a name="9006"
  > </a
  ><a name="9007" href="Session.html#9007" class="Bound"
  >&#915;</a
  ><a name="9008"
  > </a
  ><a name="9009" href="Session.html#9009" class="Bound"
  >&#916;</a
  ><a name="9010"
  > </a
  ><a name="9011" class="Symbol"
  >=</a
  ><a name="9012"
  > </a
  ><a name="9013" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9014"
  > </a
  ><a name="9015" class="Symbol"
  >(</a
  ><a name="9016" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="9020"
  > </a
  ><a name="9021" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="9022"
  > </a
  ><a name="9023" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="9027"
  > </a
  ><a name="9028" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="9029"
  > </a
  ><a name="9030" class="Symbol"
  >_)</a
  ><a name="9032"
  > </a
  ><a name="9033" class="Symbol"
  >&#955;</a
  ><a name="9034"
  > </a
  ><a name="9035" href="Session.html#9035" class="Bound"
  >W</a
  ><a name="9036"
  > </a
  ><a name="9037" class="Symbol"
  >&#8594;</a
  ><a name="9038"
  >
           </a
  ><a name="9050" class="Keyword"
  >let</a
  ><a name="9053"
  > </a
  ><a name="9054" class="Symbol"
  >(</a
  ><a name="9055" href="Session.html#9055" class="Bound"
  >I</a
  ><a name="9056"
  > </a
  ><a name="9057" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9058"
  > </a
  ><a name="9059" href="Session.html#9059" class="Bound"
  >J</a
  ><a name="9060"
  > </a
  ><a name="9061" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9062"
  > </a
  ><a name="9063" href="Session.html#9063" class="Bound"
  >T</a
  ><a name="9064" class="Symbol"
  >)</a
  ><a name="9065"
  > </a
  ><a name="9066" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9067"
  > </a
  ><a name="9068" href="Session.html#9068" class="Bound"
  >s</a
  ><a name="9069"
  > </a
  ><a name="9070" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9071"
  > </a
  ><a name="9072" href="Session.html#9072" class="Bound"
  >O</a
  ><a name="9073"
  > </a
  ><a name="9074" class="Symbol"
  >=</a
  ><a name="9075"
  > </a
  ><a name="9076" href="Session.html#9035" class="Bound"
  >W</a
  ><a name="9077"
  > </a
  ><a name="9078" class="Keyword"
  >in</a
  ><a name="9080"
  >
           </a
  ><a name="9092" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9093"
  > </a
  ><a name="9094" class="Symbol"
  >((</a
  ><a name="9096" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="9097"
  > </a
  ><a name="9098" href="Session.html#9068" class="Bound"
  >s</a
  ><a name="9099"
  > </a
  ><a name="9100" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9101"
  > </a
  ><a name="9102" href="Session.html#9055" class="Bound"
  >I</a
  ><a name="9103"
  > </a
  ><a name="9104" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9105"
  > </a
  ><a name="9106" href="Session.html#9072" class="Bound"
  >O</a
  ><a name="9107"
  > </a
  ><a name="9108" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9109"
  > </a
  ><a name="9110" href="Session.html#3466" class="Function Operator"
  >[</a
  ><a name="9111"
  > </a
  ><a name="9112" href="Session.html#9068" class="Bound"
  >s</a
  ><a name="9113"
  > </a
  ><a name="9114" href="Session.html#3466" class="Function Operator"
  >]&#928;</a
  ><a name="9116"
  > </a
  ><a name="9117" href="Session.html#9059" class="Bound"
  >J</a
  ><a name="9118"
  > </a
  ><a name="9119" href="Session.html#9063" class="Bound"
  >T</a
  ><a name="9120" class="Symbol"
  >)</a
  ><a name="9121"
  > </a
  ><a name="9122" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="9123"
  > </a
  ><a name="9124" href="Session.html#9007" class="Bound"
  >&#915;</a
  ><a name="9125" class="Symbol"
  >)</a
  ><a name="9126"
  >
             </a
  ><a name="9140" class="Symbol"
  >(</a
  ><a name="9141" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="9144"
  > </a
  ><a name="9145" href="Session.html#9009" class="Bound"
  >&#916;</a
  ><a name="9146"
  > </a
  ><a name="9147" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="9148"
  > </a
  ><a name="9149" href="Session.Base.html#3414" class="Function"
  >ud</a
  ><a name="9151"
  > </a
  ><a name="9152" class="Symbol"
  >(</a
  ><a name="9153" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="9154"
  > </a
  ><a name="9155" href="Session.html#9068" class="Bound"
  >s</a
  ><a name="9156"
  > </a
  ><a name="9157" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9158"
  > </a
  ><a name="9159" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="9161"
  > </a
  ><a name="9162" href="Session.html#9063" class="Bound"
  >T</a
  ><a name="9163" class="Symbol"
  >))</a
  ><a name="9165"
  ></pre>
<p>This functor &quot;consumes&quot; <code>`^</code> from the session type: it &quot;allows&quot; you to choose a value from which the rest of the type is dependent, but <em>most often</em> this value will be forced by the type.</p>
<pre></a
  ><a name="9384" href="Session.html#9384" class="Function"
  >At</a
  ><a name="9386"
  > </a
  ><a name="9387" class="Symbol"
  >:</a
  ><a name="9388"
  > </a
  ><a name="9389" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="9391"
  >
</a
  ><a name="9392" href="Session.html#9384" class="Function"
  >At</a
  ><a name="9394"
  > </a
  ><a name="9395" href="Session.html#9395" class="Bound"
  >&#915;</a
  ><a name="9396"
  > </a
  ><a name="9397" href="Session.html#9397" class="Bound"
  >&#916;</a
  ><a name="9398"
  > </a
  ><a name="9399" class="Symbol"
  >=</a
  ><a name="9400"
  > </a
  ><a name="9401" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9402"
  > </a
  ><a name="9403" class="Symbol"
  >(</a
  ><a name="9404" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9405"
  > </a
  ><a name="9406" class="Symbol"
  >_</a
  ><a name="9407"
  > </a
  ><a name="9408" class="Symbol"
  >&#955;</a
  ><a name="9409"
  > </a
  ><a name="9410" href="Session.html#9410" class="Bound"
  >I</a
  ><a name="9411"
  > </a
  ><a name="9412" class="Symbol"
  >&#8594;</a
  ><a name="9413"
  > </a
  ><a name="9414" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9415"
  > </a
  ><a name="9416" class="Symbol"
  >_</a
  ><a name="9417"
  > </a
  ><a name="9418" class="Symbol"
  >&#955;</a
  ><a name="9419"
  > </a
  ><a name="9420" href="Session.html#9420" class="Bound"
  >O</a
  ><a name="9421"
  > </a
  ><a name="9422" class="Symbol"
  >&#8594;</a
  ><a name="9423"
  > </a
  ><a name="9424" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9425"
  > </a
  ><a name="9426" class="Symbol"
  >(</a
  ><a name="9427" href="Session.html#9420" class="Bound"
  >O</a
  ><a name="9428"
  > </a
  ><a name="9429" class="Symbol"
  >&#8594;</a
  ><a name="9430"
  > </a
  ><a name="9431" href="Session.html#1990" class="Function"
  >De</a
  ><a name="9433"
  > </a
  ><a name="9434" href="Session.html#9410" class="Bound"
  >I</a
  ><a name="9435" class="Symbol"
  >)</a
  ><a name="9436"
  > </a
  ><a name="9437" class="Symbol"
  >&#955;</a
  ><a name="9438"
  > </a
  ><a name="9439" href="Session.html#9439" class="Bound"
  >_</a
  ><a name="9440"
  > </a
  ><a name="9441" class="Symbol"
  >&#8594;</a
  ><a name="9442"
  > </a
  ><a name="9443" href="Session.html#9420" class="Bound"
  >O</a
  ><a name="9444"
  > </a
  ><a name="9445" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="9446"
  > </a
  ><a name="9447" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="9451" class="Symbol"
  >)</a
  ><a name="9452"
  > </a
  ><a name="9453" class="Symbol"
  >&#955;</a
  ><a name="9454"
  > </a
  ><a name="9455" href="Session.html#9455" class="Bound"
  >W</a
  ><a name="9456"
  > </a
  ><a name="9457" class="Symbol"
  >&#8594;</a
  ><a name="9458"
  >
         </a
  ><a name="9468" class="Keyword"
  >let</a
  ><a name="9471"
  > </a
  ><a name="9472" href="Session.html#9472" class="Bound"
  >I</a
  ><a name="9473"
  > </a
  ><a name="9474" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9475"
  > </a
  ><a name="9476" href="Session.html#9476" class="Bound"
  >O</a
  ><a name="9477"
  > </a
  ><a name="9478" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9479"
  > </a
  ><a name="9480" href="Session.html#9480" class="Bound"
  >T</a
  ><a name="9481"
  > </a
  ><a name="9482" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9483"
  > </a
  ><a name="9484" href="Session.html#9484" class="Bound"
  >o</a
  ><a name="9485"
  > </a
  ><a name="9486" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9487"
  > </a
  ><a name="9488" href="Session.html#9488" class="Bound"
  >s</a
  ><a name="9489"
  > </a
  ><a name="9490" class="Symbol"
  >=</a
  ><a name="9491"
  > </a
  ><a name="9492" href="Session.html#9455" class="Bound"
  >W</a
  ><a name="9493"
  > </a
  ><a name="9494" class="Keyword"
  >in</a
  ><a name="9496"
  >
         </a
  ><a name="9506" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9507"
  > </a
  ><a name="9508" class="Symbol"
  >((</a
  ><a name="9510" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="9511"
  > </a
  ><a name="9512" href="Session.html#9488" class="Bound"
  >s</a
  ><a name="9513"
  > </a
  ><a name="9514" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9515"
  > </a
  ><a name="9516" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="9518"
  > </a
  ><a name="9519" href="Session.html#2383" class="InductiveConstructor"
  >`^</a
  ><a name="9521"
  > </a
  ><a name="9522" href="Session.html#9480" class="Bound"
  >T</a
  ><a name="9523" class="Symbol"
  >)</a
  ><a name="9524"
  > </a
  ><a name="9525" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="9526"
  > </a
  ><a name="9527" href="Session.html#9395" class="Bound"
  >&#915;</a
  ><a name="9528" class="Symbol"
  >)</a
  ><a name="9529"
  >
            </a
  ><a name="9542" class="Symbol"
  >(</a
  ><a name="9543" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="9546"
  > </a
  ><a name="9547" href="Session.html#9397" class="Bound"
  >&#916;</a
  ><a name="9548"
  > </a
  ><a name="9549" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="9550"
  > </a
  ><a name="9551" href="Session.Base.html#3414" class="Function"
  >ud</a
  ><a name="9553"
  > </a
  ><a name="9554" class="Symbol"
  >(</a
  ><a name="9555" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="9556"
  > </a
  ><a name="9557" href="Session.html#9488" class="Bound"
  >s</a
  ><a name="9558"
  > </a
  ><a name="9559" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9560"
  > </a
  ><a name="9561" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="9563"
  > </a
  ><a name="9564" href="Session.html#9480" class="Bound"
  >T</a
  ><a name="9565"
  > </a
  ><a name="9566" href="Session.html#9484" class="Bound"
  >o</a
  ><a name="9567" class="Symbol"
  >))</a
  ><a name="9569"
  ></pre>
<p>Session types have &quot;identity&quot; codes <code>`I</code> as leaves, so to end a session we need to consume it and remove the type from the context.</p>
<pre></a
  ><a name="9732" href="Session.html#9732" class="Function"
  >End</a
  ><a name="9735"
  > </a
  ><a name="9736" class="Symbol"
  >:</a
  ><a name="9737"
  > </a
  ><a name="9738" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="9740"
  >
</a
  ><a name="9741" href="Session.html#9732" class="Function"
  >End</a
  ><a name="9744"
  > </a
  ><a name="9745" href="Session.html#9745" class="Bound"
  >&#915;</a
  ><a name="9746"
  > </a
  ><a name="9747" href="Session.html#9747" class="Bound"
  >&#916;</a
  ><a name="9748"
  > </a
  ><a name="9749" class="Symbol"
  >=</a
  ><a name="9750"
  > </a
  ><a name="9751" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9752"
  > </a
  ><a name="9753" class="Symbol"
  >(</a
  ><a name="9754" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9755"
  > </a
  ><a name="9756" class="PrimitiveType"
  >Set</a
  ><a name="9759"
  > </a
  ><a name="9760" class="Symbol"
  >&#955;</a
  ><a name="9761"
  > </a
  ><a name="9762" href="Session.html#9762" class="Bound"
  >I</a
  ><a name="9763"
  > </a
  ><a name="9764" class="Symbol"
  >&#8594;</a
  ><a name="9765"
  > </a
  ><a name="9766" class="PrimitiveType"
  >Set</a
  ><a name="9769"
  > </a
  ><a name="9770" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="9771"
  > </a
  ><a name="9772" href="Session.html#9762" class="Bound"
  >I</a
  ><a name="9773"
  > </a
  ><a name="9774" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="9775"
  > </a
  ><a name="9776" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="9780" class="Symbol"
  >)</a
  ><a name="9781"
  > </a
  ><a name="9782" class="Symbol"
  >&#955;</a
  ><a name="9783"
  > </a
  ><a name="9784" href="Session.html#9784" class="Bound"
  >W</a
  ><a name="9785"
  > </a
  ><a name="9786" class="Symbol"
  >&#8594;</a
  ><a name="9787"
  >
          </a
  ><a name="9798" class="Keyword"
  >let</a
  ><a name="9801"
  > </a
  ><a name="9802" href="Session.html#9802" class="Bound"
  >I</a
  ><a name="9803"
  > </a
  ><a name="9804" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9805"
  > </a
  ><a name="9806" href="Session.html#9806" class="Bound"
  >O</a
  ><a name="9807"
  > </a
  ><a name="9808" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9809"
  > </a
  ><a name="9810" href="Session.html#9810" class="Bound"
  >i</a
  ><a name="9811"
  > </a
  ><a name="9812" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9813"
  > </a
  ><a name="9814" href="Session.html#9814" class="Bound"
  >s</a
  ><a name="9815"
  > </a
  ><a name="9816" class="Symbol"
  >=</a
  ><a name="9817"
  > </a
  ><a name="9818" href="Session.html#9784" class="Bound"
  >W</a
  ><a name="9819"
  > </a
  ><a name="9820" class="Keyword"
  >in</a
  ><a name="9822"
  >
          </a
  ><a name="9833" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9834"
  > </a
  ><a name="9835" class="Symbol"
  >((</a
  ><a name="9837" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="9838"
  > </a
  ><a name="9839" href="Session.html#9814" class="Bound"
  >s</a
  ><a name="9840"
  > </a
  ><a name="9841" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9842"
  > </a
  ><a name="9843" class="Symbol"
  >(</a
  ><a name="9844" href="Session.html#9802" class="Bound"
  >I</a
  ><a name="9845"
  > </a
  ><a name="9846" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9847"
  > </a
  ><a name="9848" href="Session.html#9806" class="Bound"
  >O</a
  ><a name="9849"
  > </a
  ><a name="9850" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9851"
  > </a
  ><a name="9852" href="Session.html#2158" class="InductiveConstructor"
  >`I</a
  ><a name="9854"
  > </a
  ><a name="9855" href="Session.html#9810" class="Bound"
  >i</a
  ><a name="9856" class="Symbol"
  >))</a
  ><a name="9858"
  > </a
  ><a name="9859" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="9860"
  > </a
  ><a name="9861" href="Session.html#9745" class="Bound"
  >&#915;</a
  ><a name="9862" class="Symbol"
  >)</a
  ><a name="9863"
  >
            </a
  ><a name="9876" class="Symbol"
  >(</a
  ><a name="9877" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="9880"
  > </a
  ><a name="9881" href="Session.html#9747" class="Bound"
  >&#916;</a
  ><a name="9882"
  > </a
  ><a name="9883" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="9884"
  > </a
  ><a name="9885" href="Session.Base.html#3035" class="Function"
  >rm</a
  ><a name="9887" class="Symbol"
  >)</a
  ><a name="9888"
  ></pre>
<p>The following definitions are actual (strictly positive) indexed functors: calls to the <code>F</code> argument correspond to recursion in the grammar.</p>
<p>When forking, we need to split the input context sensibly (see <code>Splits</code> above): the child must do <em>all</em> <code>ΓR</code>, the continuation must do <code>ΓL</code>.</p>
<pre></a
  ><a name="10198" href="Session.html#10198" class="Function"
  >Fork</a
  ><a name="10202"
  > </a
  ><a name="10203" class="Symbol"
  >:</a
  ><a name="10204"
  > </a
  ><a name="10205" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="10207"
  > </a
  ><a name="10208" class="Symbol"
  >&#8594;</a
  ><a name="10209"
  > </a
  ><a name="10210" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="10212"
  >
</a
  ><a name="10213" href="Session.html#10198" class="Function"
  >Fork</a
  ><a name="10217"
  > </a
  ><a name="10218" href="Session.html#10218" class="Bound"
  >F</a
  ><a name="10219"
  > </a
  ><a name="10220" href="Session.html#10220" class="Bound"
  >&#915;</a
  ><a name="10221"
  > </a
  ><a name="10222" href="Session.html#10222" class="Bound"
  >&#916;</a
  ><a name="10223"
  > </a
  ><a name="10224" class="Symbol"
  >=</a
  ><a name="10225"
  > </a
  ><a name="10226" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10227"
  > </a
  ><a name="10228" class="Symbol"
  >(</a
  ><a name="10229" href="Session.html#5569" class="Function"
  >Splits</a
  ><a name="10235"
  > </a
  ><a name="10236" href="Session.html#10220" class="Bound"
  >&#915;</a
  ><a name="10237" class="Symbol"
  >)</a
  ><a name="10238"
  > </a
  ><a name="10239" class="Symbol"
  >&#955;</a
  ><a name="10240"
  > </a
  ><a name="10241" href="Session.html#10241" class="Bound"
  >ds</a
  ><a name="10243"
  > </a
  ><a name="10244" class="Symbol"
  >&#8594;</a
  ><a name="10245"
  >
             </a
  ><a name="10259" class="Keyword"
  >let</a
  ><a name="10262"
  > </a
  ><a name="10263" href="Session.html#10263" class="Bound"
  >&#915;L</a
  ><a name="10265"
  > </a
  ><a name="10266" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10267"
  > </a
  ><a name="10268" href="Session.html#10268" class="Bound"
  >&#915;R</a
  ><a name="10270"
  > </a
  ><a name="10271" class="Symbol"
  >=</a
  ><a name="10272"
  > </a
  ><a name="10273" href="Session.html#5610" class="Function"
  >splits</a
  ><a name="10279"
  > </a
  ><a name="10280" href="Session.html#10241" class="Bound"
  >ds</a
  ><a name="10282"
  > </a
  ><a name="10283" class="Keyword"
  >in</a
  ><a name="10285"
  >
               </a
  ><a name="10301" href="Session.html#10218" class="Bound"
  >F</a
  ><a name="10302"
  > </a
  ><a name="10303" href="Session.html#10268" class="Bound"
  >&#915;R</a
  ><a name="10305"
  > </a
  ><a name="10306" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="10308"
  >
             </a
  ><a name="10322" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="10323"
  > </a
  ><a name="10324" href="Session.html#10222" class="Bound"
  >&#916;</a
  ><a name="10325"
  > </a
  ><a name="10326" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="10327"
  > </a
  ><a name="10328" href="Session.html#10263" class="Bound"
  >&#915;L</a
  ><a name="10330"
  ></pre>
<p>A server process can only be launched in a context where it is possible to duplicate all channels.</p>
<p>The server is located on the <code>+</code> side of the channel.</p>
<pre></a
  ><a name="10511" href="Session.html#10511" class="Function"
  >Server</a
  ><a name="10517"
  > </a
  ><a name="10518" class="Symbol"
  >:</a
  ><a name="10519"
  > </a
  ><a name="10520" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="10522"
  > </a
  ><a name="10523" class="Symbol"
  >&#8594;</a
  ><a name="10524"
  > </a
  ><a name="10525" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="10527"
  >
</a
  ><a name="10528" href="Session.html#10511" class="Function"
  >Server</a
  ><a name="10534"
  > </a
  ><a name="10535" href="Session.html#10535" class="Bound"
  >F</a
  ><a name="10536"
  > </a
  ><a name="10537" href="Session.html#10537" class="Bound"
  >&#915;</a
  ><a name="10538"
  > </a
  ><a name="10539" href="Session.html#10539" class="Bound"
  >&#916;</a
  ><a name="10540"
  > </a
  ><a name="10541" class="Symbol"
  >=</a
  ><a name="10542"
  > </a
  ><a name="10543" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10544"
  > </a
  ><a name="10545" class="Symbol"
  >(</a
  ><a name="10546" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="10550"
  > </a
  ><a name="10551" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="10552"
  > </a
  ><a name="10553" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="10557"
  > </a
  ><a name="10558" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="10559"
  > </a
  ><a name="10560" class="Symbol"
  >_)</a
  ><a name="10562"
  > </a
  ><a name="10563" class="Symbol"
  >&#955;</a
  ><a name="10564"
  > </a
  ><a name="10565" href="Session.html#10565" class="Bound"
  >W</a
  ><a name="10566"
  > </a
  ><a name="10567" class="Symbol"
  >&#8594;</a
  ><a name="10568"
  > </a
  ><a name="10569" class="Keyword"
  >let</a
  ><a name="10572"
  > </a
  ><a name="10573" href="Session.html#10573" class="Bound"
  >A</a
  ><a name="10574"
  > </a
  ><a name="10575" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10576"
  > </a
  ><a name="10577" href="Session.html#10577" class="Bound"
  >s</a
  ><a name="10578"
  > </a
  ><a name="10579" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10580"
  > </a
  ><a name="10581" href="Session.html#10581" class="Bound"
  >I</a
  ><a name="10582"
  > </a
  ><a name="10583" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10584"
  > </a
  ><a name="10585" href="Session.html#10585" class="Bound"
  >O</a
  ><a name="10586"
  > </a
  ><a name="10587" class="Symbol"
  >=</a
  ><a name="10588"
  > </a
  ><a name="10589" href="Session.html#10565" class="Bound"
  >W</a
  ><a name="10590"
  > </a
  ><a name="10591" class="Keyword"
  >in</a
  ><a name="10593"
  >
               </a
  ><a name="10609" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10610"
  > </a
  ><a name="10611" class="Symbol"
  >((</a
  ><a name="10613" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10614"
  > </a
  ><a name="10615" href="Session.html#10577" class="Bound"
  >s</a
  ><a name="10616"
  > </a
  ><a name="10617" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10618"
  > </a
  ><a name="10619" href="Session.html#10581" class="Bound"
  >I</a
  ><a name="10620"
  > </a
  ><a name="10621" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10622"
  > </a
  ><a name="10623" href="Session.html#10585" class="Bound"
  >O</a
  ><a name="10624"
  > </a
  ><a name="10625" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10626"
  > </a
  ><a name="10627" href="Session.html#3660" class="Function Operator"
  >[</a
  ><a name="10628"
  > </a
  ><a name="10629" href="Session.html#10577" class="Bound"
  >s</a
  ><a name="10630"
  > </a
  ><a name="10631" href="Session.html#3660" class="Function Operator"
  >]&#161;</a
  ><a name="10633"
  > </a
  ><a name="10634" href="Session.html#10573" class="Bound"
  >A</a
  ><a name="10635" class="Symbol"
  >)</a
  ><a name="10636"
  > </a
  ><a name="10637" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10638"
  > </a
  ><a name="10639" href="Session.html#10537" class="Bound"
  >&#915;</a
  ><a name="10640" class="Symbol"
  >)</a
  ><a name="10641"
  > </a
  ><a name="10642" class="Symbol"
  >&#955;</a
  ><a name="10643"
  > </a
  ><a name="10644" href="Session.html#10644" class="Bound"
  >i</a
  ><a name="10645"
  > </a
  ><a name="10646" class="Symbol"
  >&#8594;</a
  ><a name="10647"
  >
                 </a
  ><a name="10665" href="Session.html#4704" class="Function"
  >All&#191;</a
  ><a name="10669"
  > </a
  ><a name="10670" href="Session.html#10539" class="Bound"
  >&#916;</a
  ><a name="10671"
  >
               </a
  ><a name="10687" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="10688"
  > </a
  ><a name="10689" href="Session.html#10535" class="Bound"
  >F</a
  ><a name="10690"
  > </a
  ><a name="10691" class="Symbol"
  >(</a
  ><a name="10692" href="Session.Base.html#3414" class="Function"
  >ud</a
  ><a name="10694"
  > </a
  ><a name="10695" class="Symbol"
  >(</a
  ><a name="10696" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10697"
  > </a
  ><a name="10698" href="Session.Base.html#4873" class="InductiveConstructor"
  >+</a
  ><a name="10699"
  > </a
  ><a name="10700" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10701"
  > </a
  ><a name="10702" href="Session.html#10573" class="Bound"
  >A</a
  ><a name="10703" class="Symbol"
  >)</a
  ><a name="10704"
  > </a
  ><a name="10705" href="Session.html#10644" class="Bound"
  >i</a
  ><a name="10706" class="Symbol"
  >)</a
  ><a name="10707"
  > </a
  ><a name="10708" href="Session.html#10539" class="Bound"
  >&#916;</a
  ><a name="10709"
  >
               </a
  ><a name="10725" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="10726"
  > </a
  ><a name="10727" href="Session.html#10539" class="Bound"
  >&#916;</a
  ><a name="10728"
  > </a
  ><a name="10729" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="10730"
  > </a
  ><a name="10731" href="Session.Base.html#3035" class="Function"
  >rm</a
  ><a name="10733"
  > </a
  ><a name="10734" href="Session.html#10644" class="Bound"
  >i</a
  ><a name="10735"
  ></pre>
<p>The client is positioned on the <code>-</code> side of the channel.</p>
<p>In this case execution is synchronous: we account for the fact that the client might also interact on some other channels by passing <code>Δ</code> to <code>F</code>.</p>
<pre></a
  ><a name="10965" href="Session.html#10965" class="Function"
  >Client</a
  ><a name="10971"
  > </a
  ><a name="10972" class="Symbol"
  >:</a
  ><a name="10973"
  > </a
  ><a name="10974" class="Symbol"
  >(</a
  ><a name="10975" class="PrimitiveType"
  >Set</a
  ><a name="10978"
  > </a
  ><a name="10979" class="Symbol"
  >&#8594;</a
  ><a name="10980"
  > </a
  ><a name="10981" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="10983" class="Symbol"
  >)</a
  ><a name="10984"
  > </a
  ><a name="10985" class="Symbol"
  >&#8594;</a
  ><a name="10986"
  > </a
  ><a name="10987" class="PrimitiveType"
  >Set</a
  ><a name="10990"
  > </a
  ><a name="10991" class="Symbol"
  >&#8594;</a
  ><a name="10992"
  > </a
  ><a name="10993" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="10995"
  >
</a
  ><a name="10996" href="Session.html#10965" class="Function"
  >Client</a
  ><a name="11002"
  > </a
  ><a name="11003" href="Session.html#11003" class="Bound"
  >F</a
  ><a name="11004"
  > </a
  ><a name="11005" href="Session.html#11005" class="Bound"
  >X</a
  ><a name="11006"
  > </a
  ><a name="11007" href="Session.html#11007" class="Bound"
  >&#915;</a
  ><a name="11008"
  > </a
  ><a name="11009" href="Session.html#11009" class="Bound"
  >&#916;</a
  ><a name="11010"
  > </a
  ><a name="11011" class="Symbol"
  >=</a
  ><a name="11012"
  > </a
  ><a name="11013" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11014"
  > </a
  ><a name="11015" class="Symbol"
  >(</a
  ><a name="11016" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="11020"
  > </a
  ><a name="11021" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="11022"
  > </a
  ><a name="11023" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="11027"
  > </a
  ><a name="11028" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="11029"
  > </a
  ><a name="11030" class="Symbol"
  >_)</a
  ><a name="11032"
  > </a
  ><a name="11033" class="Symbol"
  >&#955;</a
  ><a name="11034"
  > </a
  ><a name="11035" href="Session.html#11035" class="Bound"
  >W</a
  ><a name="11036"
  > </a
  ><a name="11037" class="Symbol"
  >&#8594;</a
  ><a name="11038"
  > </a
  ><a name="11039" class="Keyword"
  >let</a
  ><a name="11042"
  > </a
  ><a name="11043" href="Session.html#11043" class="Bound"
  >A</a
  ><a name="11044"
  > </a
  ><a name="11045" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11046"
  > </a
  ><a name="11047" href="Session.html#11047" class="Bound"
  >s</a
  ><a name="11048"
  > </a
  ><a name="11049" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11050"
  > </a
  ><a name="11051" href="Session.html#11051" class="Bound"
  >I</a
  ><a name="11052"
  > </a
  ><a name="11053" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11054"
  > </a
  ><a name="11055" href="Session.html#11055" class="Bound"
  >O</a
  ><a name="11056"
  > </a
  ><a name="11057" class="Symbol"
  >=</a
  ><a name="11058"
  > </a
  ><a name="11059" href="Session.html#11035" class="Bound"
  >W</a
  ><a name="11060"
  > </a
  ><a name="11061" class="Keyword"
  >in</a
  ><a name="11063"
  >
                 </a
  ><a name="11081" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11082"
  > </a
  ><a name="11083" class="Symbol"
  >((</a
  ><a name="11085" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11086"
  > </a
  ><a name="11087" href="Session.html#11047" class="Bound"
  >s</a
  ><a name="11088"
  > </a
  ><a name="11089" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11090"
  > </a
  ><a name="11091" href="Session.html#11051" class="Bound"
  >I</a
  ><a name="11092"
  > </a
  ><a name="11093" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11094"
  > </a
  ><a name="11095" href="Session.html#11055" class="Bound"
  >O</a
  ><a name="11096"
  > </a
  ><a name="11097" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11098"
  > </a
  ><a name="11099" href="Session.html#3667" class="Function Operator"
  >[</a
  ><a name="11100"
  > </a
  ><a name="11101" href="Session.html#11047" class="Bound"
  >s</a
  ><a name="11102"
  > </a
  ><a name="11103" href="Session.html#3667" class="Function Operator"
  >]&#191;</a
  ><a name="11105"
  > </a
  ><a name="11106" href="Session.html#11043" class="Bound"
  >A</a
  ><a name="11107" class="Symbol"
  >)</a
  ><a name="11108"
  > </a
  ><a name="11109" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="11110"
  > </a
  ><a name="11111" href="Session.html#11007" class="Bound"
  >&#915;</a
  ><a name="11112" class="Symbol"
  >)</a
  ><a name="11113"
  > </a
  ><a name="11114" class="Symbol"
  >&#955;</a
  ><a name="11115"
  > </a
  ><a name="11116" href="Session.html#11116" class="Bound"
  >i</a
  ><a name="11117"
  > </a
  ><a name="11118" class="Symbol"
  >&#8594;</a
  ><a name="11119"
  >
                   </a
  ><a name="11139" href="Session.html#11003" class="Bound"
  >F</a
  ><a name="11140"
  > </a
  ><a name="11141" href="Session.html#11005" class="Bound"
  >X</a
  ><a name="11142"
  > </a
  ><a name="11143" class="Symbol"
  >(</a
  ><a name="11144" href="Session.Base.html#3414" class="Function"
  >ud</a
  ><a name="11146"
  > </a
  ><a name="11147" class="Symbol"
  >(</a
  ><a name="11148" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11149"
  > </a
  ><a name="11150" href="Session.Base.html#4875" class="InductiveConstructor"
  >-</a
  ><a name="11151"
  > </a
  ><a name="11152" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11153"
  > </a
  ><a name="11154" href="Session.html#11043" class="Bound"
  >A</a
  ><a name="11155" class="Symbol"
  >)</a
  ><a name="11156"
  > </a
  ><a name="11157" href="Session.html#11116" class="Bound"
  >i</a
  ><a name="11158" class="Symbol"
  >)</a
  ><a name="11159"
  > </a
  ><a name="11160" href="Session.html#11009" class="Bound"
  >&#916;</a
  ><a name="11161"
  ></pre>
<p>We are free to run clients as many times as we want (<code>Ctr</code>), or even refrain from doing so (<code>Wk</code>).</p>
<pre></a
  ><a name="11287" href="Session.html#11287" class="Function"
  >Wk</a
  ><a name="11289"
  > </a
  ><a name="11290" href="Session.html#11290" class="Function"
  >Ctr</a
  ><a name="11293"
  > </a
  ><a name="11294" class="Symbol"
  >:</a
  ><a name="11295"
  > </a
  ><a name="11296" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="11298"
  >
</a
  ><a name="11299" href="Session.html#11287" class="Function"
  >Wk</a
  ><a name="11301"
  > </a
  ><a name="11302" href="Session.html#11302" class="Bound"
  >&#915;</a
  ><a name="11303"
  > </a
  ><a name="11304" href="Session.html#11304" class="Bound"
  >&#916;</a
  ><a name="11305"
  > </a
  ><a name="11306" class="Symbol"
  >=</a
  ><a name="11307"
  > </a
  ><a name="11308" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11309"
  > </a
  ><a name="11310" class="Symbol"
  >(</a
  ><a name="11311" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="11315"
  > </a
  ><a name="11316" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="11317"
  > </a
  ><a name="11318" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="11322"
  > </a
  ><a name="11323" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="11324"
  > </a
  ><a name="11325" class="Symbol"
  >_)</a
  ><a name="11327"
  > </a
  ><a name="11328" class="Symbol"
  >&#955;</a
  ><a name="11329"
  > </a
  ><a name="11330" href="Session.html#11330" class="Bound"
  >W</a
  ><a name="11331"
  > </a
  ><a name="11332" class="Symbol"
  >&#8594;</a
  ><a name="11333"
  >
         </a
  ><a name="11343" class="Keyword"
  >let</a
  ><a name="11346"
  > </a
  ><a name="11347" href="Session.html#11347" class="Bound"
  >A</a
  ><a name="11348"
  > </a
  ><a name="11349" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11350"
  > </a
  ><a name="11351" href="Session.html#11351" class="Bound"
  >s</a
  ><a name="11352"
  > </a
  ><a name="11353" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11354"
  > </a
  ><a name="11355" href="Session.html#11355" class="Bound"
  >I</a
  ><a name="11356"
  > </a
  ><a name="11357" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11358"
  > </a
  ><a name="11359" href="Session.html#11359" class="Bound"
  >O</a
  ><a name="11360"
  > </a
  ><a name="11361" class="Symbol"
  >=</a
  ><a name="11362"
  > </a
  ><a name="11363" href="Session.html#11330" class="Bound"
  >W</a
  ><a name="11364"
  > </a
  ><a name="11365" class="Keyword"
  >in</a
  ><a name="11367"
  >
         </a
  ><a name="11377" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11378"
  > </a
  ><a name="11379" class="Symbol"
  >((</a
  ><a name="11381" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11382"
  > </a
  ><a name="11383" href="Session.html#11351" class="Bound"
  >s</a
  ><a name="11384"
  > </a
  ><a name="11385" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11386"
  > </a
  ><a name="11387" href="Session.html#11355" class="Bound"
  >I</a
  ><a name="11388"
  > </a
  ><a name="11389" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11390"
  > </a
  ><a name="11391" href="Session.html#11359" class="Bound"
  >O</a
  ><a name="11392"
  > </a
  ><a name="11393" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11394"
  > </a
  ><a name="11395" href="Session.html#3667" class="Function Operator"
  >[</a
  ><a name="11396"
  > </a
  ><a name="11397" href="Session.html#11351" class="Bound"
  >s</a
  ><a name="11398"
  > </a
  ><a name="11399" href="Session.html#3667" class="Function Operator"
  >]&#191;</a
  ><a name="11401"
  > </a
  ><a name="11402" href="Session.html#11347" class="Bound"
  >A</a
  ><a name="11403" class="Symbol"
  >)</a
  ><a name="11404"
  > </a
  ><a name="11405" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="11406"
  > </a
  ><a name="11407" href="Session.html#11302" class="Bound"
  >&#915;</a
  ><a name="11408" class="Symbol"
  >)</a
  ><a name="11409"
  >
           </a
  ><a name="11421" class="Symbol"
  >(</a
  ><a name="11422" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="11425"
  > </a
  ><a name="11426" href="Session.html#11304" class="Bound"
  >&#916;</a
  ><a name="11427"
  > </a
  ><a name="11428" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="11429"
  > </a
  ><a name="11430" href="Session.Base.html#3035" class="Function"
  >rm</a
  ><a name="11432" class="Symbol"
  >)</a
  ><a name="11433"
  >
</a
  ><a name="11434" href="Session.html#11290" class="Function"
  >Ctr</a
  ><a name="11437"
  > </a
  ><a name="11438" href="Session.html#11438" class="Bound"
  >&#915;</a
  ><a name="11439"
  > </a
  ><a name="11440" href="Session.html#11440" class="Bound"
  >&#916;</a
  ><a name="11441"
  > </a
  ><a name="11442" class="Symbol"
  >=</a
  ><a name="11443"
  > </a
  ><a name="11444" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11445"
  > </a
  ><a name="11446" class="Symbol"
  >(</a
  ><a name="11447" href="Session.html#2012" class="Function"
  >Code</a
  ><a name="11451"
  > </a
  ><a name="11452" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="11453"
  > </a
  ><a name="11454" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="11458"
  > </a
  ><a name="11459" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="11460"
  > </a
  ><a name="11461" class="Symbol"
  >_)</a
  ><a name="11463"
  > </a
  ><a name="11464" class="Symbol"
  >&#955;</a
  ><a name="11465"
  > </a
  ><a name="11466" href="Session.html#11466" class="Bound"
  >W</a
  ><a name="11467"
  > </a
  ><a name="11468" class="Symbol"
  >&#8594;</a
  ><a name="11469"
  >
          </a
  ><a name="11480" class="Keyword"
  >let</a
  ><a name="11483"
  > </a
  ><a name="11484" href="Session.html#11484" class="Bound"
  >A</a
  ><a name="11485"
  > </a
  ><a name="11486" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11487"
  > </a
  ><a name="11488" href="Session.html#11488" class="Bound"
  >s</a
  ><a name="11489"
  > </a
  ><a name="11490" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11491"
  > </a
  ><a name="11492" href="Session.html#11492" class="Bound"
  >I</a
  ><a name="11493"
  > </a
  ><a name="11494" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11495"
  > </a
  ><a name="11496" href="Session.html#11496" class="Bound"
  >O</a
  ><a name="11497"
  > </a
  ><a name="11498" class="Symbol"
  >=</a
  ><a name="11499"
  > </a
  ><a name="11500" href="Session.html#11466" class="Bound"
  >W</a
  ><a name="11501"
  > </a
  ><a name="11502" class="Keyword"
  >in</a
  ><a name="11504"
  >
          </a
  ><a name="11515" class="Keyword"
  >let</a
  ><a name="11518"
  > </a
  ><a name="11519" href="Session.html#11519" class="Bound"
  >&#964;</a
  ><a name="11520"
  > </a
  ><a name="11521" class="Symbol"
  >=</a
  ><a name="11522"
  > </a
  ><a name="11523" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11524"
  > </a
  ><a name="11525" href="Session.html#11488" class="Bound"
  >s</a
  ><a name="11526"
  > </a
  ><a name="11527" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11528"
  > </a
  ><a name="11529" href="Session.html#11492" class="Bound"
  >I</a
  ><a name="11530"
  > </a
  ><a name="11531" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11532"
  > </a
  ><a name="11533" href="Session.html#11496" class="Bound"
  >O</a
  ><a name="11534"
  > </a
  ><a name="11535" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11536"
  > </a
  ><a name="11537" href="Session.html#3667" class="Function Operator"
  >[</a
  ><a name="11538"
  > </a
  ><a name="11539" href="Session.html#11488" class="Bound"
  >s</a
  ><a name="11540"
  > </a
  ><a name="11541" href="Session.html#3667" class="Function Operator"
  >]&#191;</a
  ><a name="11543"
  > </a
  ><a name="11544" href="Session.html#11484" class="Bound"
  >A</a
  ><a name="11545"
  > </a
  ><a name="11546" class="Keyword"
  >in</a
  ><a name="11548"
  >
            </a
  ><a name="11561" href="Session.html#11519" class="Bound"
  >&#964;</a
  ><a name="11562"
  > </a
  ><a name="11563" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="11564"
  > </a
  ><a name="11565" href="Session.html#11438" class="Bound"
  >&#915;</a
  ><a name="11566"
  >
          </a
  ><a name="11577" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="11578"
  > </a
  ><a name="11579" href="Session.html#11440" class="Bound"
  >&#916;</a
  ><a name="11580"
  > </a
  ><a name="11581" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="11582"
  > </a
  ><a name="11583" href="Session.html#11438" class="Bound"
  >&#915;</a
  ><a name="11584"
  > </a
  ><a name="11585" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="11586"
  > </a
  ><a name="11587" href="Session.html#11519" class="Bound"
  >&#964;</a
  ><a name="11588"
  ></pre>
<p>To add corecursion, we must first define what we consider a <em>guarded</em> (hence, hopefully, <em>productive</em>) session.</p>
<pre></a
  ><a name="11727" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11734"
  > </a
  ><a name="11735" class="Symbol"
  >:</a
  ><a name="11736"
  > </a
  ><a name="11737" class="Symbol"
  >&#8704;</a
  ><a name="11738"
  > </a
  ><a name="11739" class="Symbol"
  >{</a
  ><a name="11740" href="Session.html#11740" class="Bound"
  >I</a
  ><a name="11741"
  > </a
  ><a name="11742" href="Session.html#11742" class="Bound"
  >O</a
  ><a name="11743" class="Symbol"
  >}</a
  ><a name="11744"
  > </a
  ><a name="11745" class="Symbol"
  >&#8594;</a
  ><a name="11746"
  > </a
  ><a name="11747" href="Session.html#11740" class="Bound"
  >I</a
  ><a name="11748"
  > </a
  ><a name="11749" href="Session.html#2079" class="Datatype Operator"
  >&#9657;</a
  ><a name="11750"
  > </a
  ><a name="11751" href="Session.html#11742" class="Bound"
  >O</a
  ><a name="11752"
  > </a
  ><a name="11753" class="Symbol"
  >&#8594;</a
  ><a name="11754"
  > </a
  ><a name="11755" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="11759"
  >
</a
  ><a name="11760" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11767"
  > </a
  ><a name="11768" class="Symbol"
  >(</a
  ><a name="11769" href="Session.html#2158" class="InductiveConstructor"
  >`I</a
  ><a name="11771"
  > </a
  ><a name="11772" href="Session.html#11772" class="Bound"
  >i</a
  ><a name="11773"
  >    </a
  ><a name="11777" class="Symbol"
  >)</a
  ><a name="11778"
  > </a
  ><a name="11779" class="Symbol"
  >=</a
  ><a name="11780"
  > </a
  ><a name="11781" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="11782"
  >
</a
  ><a name="11783" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11790"
  > </a
  ><a name="11791" class="Symbol"
  >(</a
  ><a name="11792" href="Session.html#2263" class="InductiveConstructor"
  >`&#931;</a
  ><a name="11794"
  > </a
  ><a name="11795" href="Session.html#11795" class="Bound"
  >S</a
  ><a name="11796"
  > </a
  ><a name="11797" href="Session.html#11797" class="Bound"
  >T</a
  ><a name="11798"
  >  </a
  ><a name="11800" class="Symbol"
  >)</a
  ><a name="11801"
  > </a
  ><a name="11802" class="Symbol"
  >=</a
  ><a name="11803"
  > </a
  ><a name="11804" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="11805"
  >
</a
  ><a name="11806" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11813"
  > </a
  ><a name="11814" class="Symbol"
  >(</a
  ><a name="11815" href="Session.html#2266" class="InductiveConstructor"
  >`&#928;</a
  ><a name="11817"
  > </a
  ><a name="11818" href="Session.html#11818" class="Bound"
  >S</a
  ><a name="11819"
  > </a
  ><a name="11820" href="Session.html#11820" class="Bound"
  >T</a
  ><a name="11821"
  >  </a
  ><a name="11823" class="Symbol"
  >)</a
  ><a name="11824"
  > </a
  ><a name="11825" class="Symbol"
  >=</a
  ><a name="11826"
  > </a
  ><a name="11827" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="11828"
  >
</a
  ><a name="11829" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11836"
  > </a
  ><a name="11837" class="Symbol"
  >(</a
  ><a name="11838" href="Session.html#2383" class="InductiveConstructor"
  >`^</a
  ><a name="11840"
  > </a
  ><a name="11841" href="Session.html#11841" class="Bound"
  >T</a
  ><a name="11842"
  >    </a
  ><a name="11846" class="Symbol"
  >)</a
  ><a name="11847"
  > </a
  ><a name="11848" class="Symbol"
  >=</a
  ><a name="11849"
  > </a
  ><a name="11850" class="Symbol"
  >&#8704;</a
  ><a name="11851"
  > </a
  ><a name="11852" href="Session.html#11852" class="Bound"
  >s</a
  ><a name="11853"
  > </a
  ><a name="11854" class="Symbol"
  >&#8594;</a
  ><a name="11855"
  > </a
  ><a name="11856" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11863"
  > </a
  ><a name="11864" class="Symbol"
  >(</a
  ><a name="11865" href="Session.html#11841" class="Bound"
  >T</a
  ><a name="11866"
  > </a
  ><a name="11867" href="Session.html#11852" class="Bound"
  >s</a
  ><a name="11868" class="Symbol"
  >)</a
  ><a name="11869"
  >
</a
  ><a name="11870" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11877"
  > </a
  ><a name="11878" class="Symbol"
  >(</a
  ><a name="11879" href="Session.html#6955" class="InductiveConstructor Operator"
  >%3</a
  ><a name="11881"
  > </a
  ><a name="11882" href="Session.html#11882" class="Bound"
  >L</a
  ><a name="11883"
  > </a
  ><a name="11884" href="Session.html#2492" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="11885"
  > </a
  ><a name="11886" href="Session.html#11886" class="Bound"
  >R</a
  ><a name="11887" class="Symbol"
  >)</a
  ><a name="11888"
  > </a
  ><a name="11889" class="Symbol"
  >=</a
  ><a name="11890"
  > </a
  ><a name="11891" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11898"
  > </a
  ><a name="11899" href="Session.html#11886" class="Bound"
  >R</a
  ><a name="11900"
  >
</a
  ><a name="11901" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11908"
  > </a
  ><a name="11909" class="Symbol"
  >(</a
  ><a name="11910" href="Session.html#6955" class="InductiveConstructor Operator"
  >%3</a
  ><a name="11912"
  > </a
  ><a name="11913" href="Session.html#11913" class="Bound"
  >L</a
  ><a name="11914"
  > </a
  ><a name="11915" href="Session.html#2496" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="11916"
  > </a
  ><a name="11917" href="Session.html#11917" class="Bound"
  >R</a
  ><a name="11918" class="Symbol"
  >)</a
  ><a name="11919"
  > </a
  ><a name="11920" class="Symbol"
  >=</a
  ><a name="11921"
  > </a
  ><a name="11922" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11929"
  > </a
  ><a name="11930" href="Session.html#11917" class="Bound"
  >R</a
  ><a name="11931"
  >
</a
  ><a name="11932" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11939"
  > </a
  ><a name="11940" class="Symbol"
  >(</a
  ><a name="11941" href="Session.html#2590" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="11942"
  > </a
  ><a name="11943" href="Session.html#11943" class="Bound"
  >F</a
  ><a name="11944"
  >     </a
  ><a name="11949" class="Symbol"
  >)</a
  ><a name="11950"
  > </a
  ><a name="11951" class="Symbol"
  >=</a
  ><a name="11952"
  > </a
  ><a name="11953" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="11954"
  >
</a
  ><a name="11955" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11962"
  > </a
  ><a name="11963" class="Symbol"
  >(</a
  ><a name="11964" href="Session.html#2593" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="11965"
  > </a
  ><a name="11966" href="Session.html#11966" class="Bound"
  >F</a
  ><a name="11967"
  >     </a
  ><a name="11972" class="Symbol"
  >)</a
  ><a name="11973"
  > </a
  ><a name="11974" class="Symbol"
  >=</a
  ><a name="11975"
  > </a
  ><a name="11976" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="11977"
  >
</a
  ><a name="11978" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="11985"
  > </a
  ><a name="11986" class="Symbol"
  >(</a
  ><a name="11987" href="Session.html#2680" class="InductiveConstructor"
  >`&#957;</a
  ><a name="11989"
  > </a
  ><a name="11990" href="Session.html#11990" class="Bound"
  >F</a
  ><a name="11991"
  > </a
  ><a name="11992" class="Symbol"
  >_</a
  ><a name="11993"
  >  </a
  ><a name="11995" class="Symbol"
  >)</a
  ><a name="11996"
  > </a
  ><a name="11997" class="Symbol"
  >=</a
  ><a name="11998"
  > </a
  ><a name="11999" class="Symbol"
  >&#8704;</a
  ><a name="12000"
  > </a
  ><a name="12001" href="Session.html#12001" class="Bound"
  >o</a
  ><a name="12002"
  > </a
  ><a name="12003" class="Symbol"
  >&#8594;</a
  ><a name="12004"
  > </a
  ><a name="12005" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="12012"
  > </a
  ><a name="12013" class="Symbol"
  >(</a
  ><a name="12014" href="Session.html#11990" class="Bound"
  >F</a
  ><a name="12015"
  > </a
  ><a name="12016" href="Session.html#12001" class="Bound"
  >o</a
  ><a name="12017" class="Symbol"
  >)</a
  ><a name="12018"
  ></pre>
<p>To provide syntax to productive nested loops that run for a possibly infinite amount of time, we use the following definition:</p>
<pre></a
  ><a name="12172" href="Session.html#12172" class="Function"
  >CoRec</a
  ><a name="12177"
  > </a
  ><a name="12178" class="Symbol"
  >:</a
  ><a name="12179"
  > </a
  ><a name="12180" class="Symbol"
  >(</a
  ><a name="12181" class="PrimitiveType"
  >Set</a
  ><a name="12184"
  > </a
  ><a name="12185" class="Symbol"
  >&#8594;</a
  ><a name="12186"
  > </a
  ><a name="12187" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="12189" class="Symbol"
  >)</a
  ><a name="12190"
  > </a
  ><a name="12191" class="Symbol"
  >&#8594;</a
  ><a name="12192"
  > </a
  ><a name="12193" class="PrimitiveType"
  >Set</a
  ><a name="12196"
  > </a
  ><a name="12197" class="Symbol"
  >&#8594;</a
  ><a name="12198"
  > </a
  ><a name="12199" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="12201"
  >
</a
  ><a name="12202" href="Session.html#12172" class="Function"
  >CoRec</a
  ><a name="12207"
  > </a
  ><a name="12208" href="Session.html#12208" class="Bound"
  >F</a
  ><a name="12209"
  > </a
  ><a name="12210" href="Session.html#12210" class="Bound"
  >X</a
  ><a name="12211"
  > </a
  ><a name="12212" href="Session.html#12212" class="Bound"
  >&#915;</a
  ><a name="12213"
  > </a
  ><a name="12214" href="Session.html#12214" class="Bound"
  >&#916;</a
  ><a name="12215"
  > </a
  ><a name="12216" class="Symbol"
  >=</a
  ><a name="12217"
  > </a
  ><a name="12218" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12219"
  > </a
  ><a name="12220" class="Symbol"
  >(</a
  ><a name="12221" href="Session.Base.html#4856" class="Datatype"
  >Side</a
  ><a name="12225"
  > </a
  ><a name="12226" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="12227"
  > </a
  ><a name="12228" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12229"
  > </a
  ><a name="12230" class="Symbol"
  >_</a
  ><a name="12231"
  > </a
  ><a name="12232" class="Symbol"
  >&#955;</a
  ><a name="12233"
  > </a
  ><a name="12234" href="Session.html#12234" class="Bound"
  >I</a
  ><a name="12235"
  > </a
  ><a name="12236" class="Symbol"
  >&#8594;</a
  ><a name="12237"
  > </a
  ><a name="12238" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12239"
  > </a
  ><a name="12240" class="Symbol"
  >_</a
  ><a name="12241"
  > </a
  ><a name="12242" class="Symbol"
  >&#955;</a
  ><a name="12243"
  > </a
  ><a name="12244" href="Session.html#12244" class="Bound"
  >O</a
  ><a name="12245"
  > </a
  ><a name="12246" class="Symbol"
  >&#8594;</a
  ><a name="12247"
  > </a
  ><a name="12248" class="Symbol"
  >(</a
  ><a name="12249" href="Session.html#12244" class="Bound"
  >O</a
  ><a name="12250"
  > </a
  ><a name="12251" class="Symbol"
  >&#8594;</a
  ><a name="12252"
  > </a
  ><a name="12253" href="Session.html#1990" class="Function"
  >De</a
  ><a name="12255"
  > </a
  ><a name="12256" class="Symbol"
  >(</a
  ><a name="12257" href="Session.html#12234" class="Bound"
  >I</a
  ><a name="12258"
  > </a
  ><a name="12259" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="12260"
  > </a
  ><a name="12261" href="Session.html#12244" class="Bound"
  >O</a
  ><a name="12262" class="Symbol"
  >))</a
  ><a name="12264"
  > </a
  ><a name="12265" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="12266"
  > </a
  ><a name="12267" href="Session.html#12244" class="Bound"
  >O</a
  ><a name="12268" class="Symbol"
  >)</a
  ><a name="12269"
  > </a
  ><a name="12270" class="Symbol"
  >&#955;</a
  ><a name="12271"
  > </a
  ><a name="12272" href="Session.html#12272" class="Bound"
  >W</a
  ><a name="12273"
  > </a
  ><a name="12274" class="Symbol"
  >&#8594;</a
  ><a name="12275"
  >
                </a
  ><a name="12292" class="Keyword"
  >let</a
  ><a name="12295"
  > </a
  ><a name="12296" href="Session.html#12296" class="Bound"
  >s</a
  ><a name="12297"
  > </a
  ><a name="12298" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12299"
  > </a
  ><a name="12300" href="Session.html#12300" class="Bound"
  >I</a
  ><a name="12301"
  > </a
  ><a name="12302" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12303"
  > </a
  ><a name="12304" href="Session.html#12304" class="Bound"
  >O</a
  ><a name="12305"
  > </a
  ><a name="12306" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12307"
  > </a
  ><a name="12308" href="Session.html#12308" class="Bound"
  >T</a
  ><a name="12309"
  > </a
  ><a name="12310" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12311"
  > </a
  ><a name="12312" href="Session.html#12312" class="Bound"
  >o</a
  ><a name="12313"
  > </a
  ><a name="12314" class="Symbol"
  >=</a
  ><a name="12315"
  > </a
  ><a name="12316" href="Session.html#12272" class="Bound"
  >W</a
  ><a name="12317"
  > </a
  ><a name="12318" class="Keyword"
  >in</a
  ><a name="12320"
  > 
                </a
  ><a name="12338" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12339"
  > </a
  ><a name="12340" class="Symbol"
  >((</a
  ><a name="12342" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12343"
  > </a
  ><a name="12344" href="Session.html#12296" class="Bound"
  >s</a
  ><a name="12345"
  > </a
  ><a name="12346" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12347"
  > </a
  ><a name="12348" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="12350"
  > </a
  ><a name="12351" href="Session.html#2680" class="InductiveConstructor"
  >`&#957;</a
  ><a name="12353"
  > </a
  ><a name="12354" href="Session.html#12308" class="Bound"
  >T</a
  ><a name="12355"
  > </a
  ><a name="12356" href="Session.html#12312" class="Bound"
  >o</a
  ><a name="12357" class="Symbol"
  >)</a
  ><a name="12358"
  > </a
  ><a name="12359" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="12360"
  > </a
  ><a name="12361" href="Session.html#12212" class="Bound"
  >&#915;</a
  ><a name="12362" class="Symbol"
  >)</a
  ><a name="12363"
  > </a
  ><a name="12364" class="Symbol"
  >&#955;</a
  ><a name="12365"
  > </a
  ><a name="12366" href="Session.html#12366" class="Bound"
  >i</a
  ><a name="12367"
  > </a
  ><a name="12368" class="Symbol"
  >&#8594;</a
  ><a name="12369"
  >
                  </a
  ><a name="12388" class="Symbol"
  >((</a
  ><a name="12390" href="Session.html#12390" class="Bound"
  >o</a
  ><a name="12391"
  > </a
  ><a name="12392" class="Symbol"
  >:</a
  ><a name="12393"
  > </a
  ><a name="12394" href="Session.html#12304" class="Bound"
  >O</a
  ><a name="12395" class="Symbol"
  >)</a
  ><a name="12396"
  > </a
  ><a name="12397" class="Symbol"
  >&#8594;</a
  ><a name="12398"
  >   </a
  ><a name="12401" href="Session.html#11727" class="Function"
  >Guarded</a
  ><a name="12408"
  > </a
  ><a name="12409" class="Symbol"
  >(</a
  ><a name="12410" href="Session.html#12308" class="Bound"
  >T</a
  ><a name="12411"
  > </a
  ><a name="12412" href="Session.html#12390" class="Bound"
  >o</a
  ><a name="12413" class="Symbol"
  >)</a
  ><a name="12414"
  >
                             </a
  ><a name="12444" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="12445"
  > </a
  ><a name="12446" href="Session.html#12208" class="Bound"
  >F</a
  ><a name="12447"
  > </a
  ><a name="12448" class="Symbol"
  >(</a
  ><a name="12449" href="Session.html#12210" class="Bound"
  >X</a
  ><a name="12450"
  > </a
  ><a name="12451" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="12452"
  > </a
  ><a name="12453" href="Session.html#12304" class="Bound"
  >O</a
  ><a name="12454" class="Symbol"
  >)</a
  ><a name="12455"
  > </a
  ><a name="12456" class="Symbol"
  >(</a
  ><a name="12457" href="Session.Base.html#3414" class="Function"
  >ud</a
  ><a name="12459"
  > </a
  ><a name="12460" class="Symbol"
  >(</a
  ><a name="12461" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12462"
  > </a
  ><a name="12463" href="Session.html#12296" class="Bound"
  >s</a
  ><a name="12464"
  > </a
  ><a name="12465" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12466"
  > </a
  ><a name="12467" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="12469"
  > </a
  ><a name="12470" href="Session.html#12308" class="Bound"
  >T</a
  ><a name="12471"
  > </a
  ><a name="12472" href="Session.html#12390" class="Bound"
  >o</a
  ><a name="12473" class="Symbol"
  >)</a
  ><a name="12474"
  > </a
  ><a name="12475" href="Session.html#12366" class="Bound"
  >i</a
  ><a name="12476" class="Symbol"
  >)</a
  ><a name="12477"
  > </a
  ><a name="12478" href="Session.html#12214" class="Bound"
  >&#916;</a
  ><a name="12479" class="Symbol"
  >)</a
  ><a name="12480"
  >
                </a
  ><a name="12497" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="12498"
  > </a
  ><a name="12499" href="Session.html#12214" class="Bound"
  >&#916;</a
  ><a name="12500"
  > </a
  ><a name="12501" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="12502"
  > </a
  ><a name="12503" href="Session.Base.html#3035" class="Function"
  >rm</a
  ><a name="12505"
  > </a
  ><a name="12506" href="Session.html#12366" class="Bound"
  >i</a
  ><a name="12507"
  ></pre>
<h3 id="tags">Tags</h3>
<p>We adopt a &quot;tagful&quot; syntax, where nodes of the syntax tree are made of dependent pairs whose first component is of type <code>Tag</code>.</p>
<pre></a
  ><a name="12671" class="Keyword"
  >module</a
  ><a name="12677"
  > </a
  ><a name="12678" href="Session.html#12678" class="Module"
  >T</a
  ><a name="12679"
  > </a
  ><a name="12680" class="Keyword"
  >where</a
  ><a name="12685"
  >

  </a
  ><a name="12689" class="Keyword"
  >data</a
  ><a name="12693"
  > </a
  ><a name="12694" href="Session.html#12694" class="Datatype"
  >Tag</a
  ><a name="12697"
  > </a
  ><a name="12698" class="Symbol"
  >:</a
  ><a name="12699"
  > </a
  ><a name="12700" class="PrimitiveType"
  >Set</a
  ><a name="12703"
  > </a
  ><a name="12704" class="Keyword"
  >where</a
  ><a name="12709"
  >
    </a
  ><a name="12714" href="Session.html#12714" class="InductiveConstructor"
  >new</a
  ><a name="12717"
  > </a
  ><a name="12718" href="Session.html#12718" class="InductiveConstructor"
  >fork</a
  ><a name="12722"
  >       </a
  ><a name="12729" class="Symbol"
  >:</a
  ><a name="12730"
  > </a
  ><a name="12731" href="Session.html#12694" class="Datatype"
  >Tag</a
  ><a name="12734"
  >
    </a
  ><a name="12739" href="Session.html#12739" class="InductiveConstructor"
  >send</a
  ><a name="12743"
  > </a
  ><a name="12744" href="Session.html#12744" class="InductiveConstructor"
  >recv</a
  ><a name="12748"
  >      </a
  ><a name="12754" class="Symbol"
  >:</a
  ><a name="12755"
  > </a
  ><a name="12756" href="Session.html#12694" class="Datatype"
  >Tag</a
  ><a name="12759"
  >
    </a
  ><a name="12764" href="Session.html#12764" class="InductiveConstructor"
  >!!</a
  ><a name="12766"
  > </a
  ><a name="12767" href="Session.html#12767" class="InductiveConstructor"
  >??</a
  ><a name="12769"
  > </a
  ><a name="12770" href="Session.html#12770" class="InductiveConstructor"
  >wk</a
  ><a name="12772"
  > </a
  ><a name="12773" href="Session.html#12773" class="InductiveConstructor"
  >ctr</a
  ><a name="12776"
  >   </a
  ><a name="12779" class="Symbol"
  >:</a
  ><a name="12780"
  > </a
  ><a name="12781" href="Session.html#12694" class="Datatype"
  >Tag</a
  ><a name="12784"
  >
    </a
  ><a name="12789" href="Session.html#12789" class="InductiveConstructor"
  >corec</a
  ><a name="12794"
  >          </a
  ><a name="12804" class="Symbol"
  >:</a
  ><a name="12805"
  > </a
  ><a name="12806" href="Session.html#12694" class="Datatype"
  >Tag</a
  ><a name="12809"
  >
    </a
  ><a name="12814" href="Session.html#12814" class="InductiveConstructor"
  >write</a
  ><a name="12819"
  > </a
  ><a name="12820" href="Session.html#12820" class="InductiveConstructor"
  >read</a
  ><a name="12824"
  >     </a
  ><a name="12829" class="Symbol"
  >:</a
  ><a name="12830"
  > </a
  ><a name="12831" href="Session.html#12694" class="Datatype"
  >Tag</a
  ><a name="12834"
  >
    </a
  ><a name="12839" href="Session.html#12839" class="InductiveConstructor"
  >at</a
  ><a name="12841"
  >             </a
  ><a name="12854" class="Symbol"
  >:</a
  ><a name="12855"
  > </a
  ><a name="12856" href="Session.html#12694" class="Datatype"
  >Tag</a
  ><a name="12859"
  >
    </a
  ><a name="12864" href="Session.html#12864" class="InductiveConstructor"
  >end</a
  ><a name="12867"
  >            </a
  ><a name="12879" class="Symbol"
  >:</a
  ><a name="12880"
  > </a
  ><a name="12881" href="Session.html#12694" class="Datatype"
  >Tag</a
  ><a name="12884"
  >

</a
  ><a name="12886" class="Keyword"
  >open</a
  ><a name="12890"
  > </a
  ><a name="12891" href="Session.html#12678" class="Module"
  >T</a
  ><a name="12892"
  > </a
  ><a name="12893" class="Keyword"
  >using</a
  ><a name="12898"
  > </a
  ><a name="12899" class="Symbol"
  >(</a
  ><a name="12900"
  >Tag</a
  ><a name="12903" class="Symbol"
  >)</a
  ><a name="12904"
  ></pre>
<h3 id="the-tagged-family-of-functors">The tagged family of functors</h3>
<p>The type of the second component is given by the following family, which groups all the above functors.</p>
<pre></a
  ><a name="13070" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13071"
  > </a
  ><a name="13072" class="Symbol"
  >:</a
  ><a name="13073"
  > </a
  ><a name="13074" href="Session.html#12694" class="Datatype"
  >Tag</a
  ><a name="13077"
  > </a
  ><a name="13078" class="Symbol"
  >&#8594;</a
  ><a name="13079"
  > </a
  ><a name="13080" class="Symbol"
  >(</a
  ><a name="13081" class="PrimitiveType"
  >Set</a
  ><a name="13084"
  > </a
  ><a name="13085" class="Symbol"
  >&#8594;</a
  ><a name="13086"
  > </a
  ><a name="13087" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="13089" class="Symbol"
  >)</a
  ><a name="13090"
  > </a
  ><a name="13091" class="Symbol"
  >&#8594;</a
  ><a name="13092"
  > </a
  ><a name="13093" class="PrimitiveType"
  >Set</a
  ><a name="13096"
  > </a
  ><a name="13097" class="Symbol"
  >&#8594;</a
  ><a name="13098"
  > </a
  ><a name="13099" href="Session.html#7715" class="Function"
  >Ty</a
  ><a name="13101"
  >
</a
  ><a name="13102" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13103"
  > </a
  ><a name="13104" href="Session.html#12714" class="InductiveConstructor"
  >T.new</a
  ><a name="13109"
  >   </a
  ><a name="13112" href="Session.html#13112" class="Bound"
  >T</a
  ><a name="13113"
  > </a
  ><a name="13114" href="Session.html#13114" class="Bound"
  >X</a
  ><a name="13115"
  > </a
  ><a name="13116" href="Session.html#13116" class="Bound"
  >&#915;</a
  ><a name="13117"
  > </a
  ><a name="13118" href="Session.html#13118" class="Bound"
  >&#916;</a
  ><a name="13119"
  > </a
  ><a name="13120" class="Symbol"
  >=</a
  ><a name="13121"
  > </a
  ><a name="13122" href="Session.html#7948" class="Function"
  >New</a
  ><a name="13125"
  >          </a
  ><a name="13135" href="Session.html#13116" class="Bound"
  >&#915;</a
  ><a name="13136"
  > </a
  ><a name="13137" href="Session.html#13118" class="Bound"
  >&#916;</a
  ><a name="13138"
  >                 </a
  ><a name="13155" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="13156"
  > </a
  ><a name="13157" href="Session.html#13114" class="Bound"
  >X</a
  ><a name="13158"
  > </a
  ><a name="13159" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13160"
  > </a
  ><a name="13161" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13162"
  >
</a
  ><a name="13163" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13164"
  > </a
  ><a name="13165" href="Session.html#12718" class="InductiveConstructor"
  >T.fork</a
  ><a name="13171"
  >  </a
  ><a name="13173" href="Session.html#13173" class="Bound"
  >T</a
  ><a name="13174"
  > </a
  ><a name="13175" href="Session.html#13175" class="Bound"
  >X</a
  ><a name="13176"
  > </a
  ><a name="13177" href="Session.html#13177" class="Bound"
  >&#915;</a
  ><a name="13178"
  > </a
  ><a name="13179" href="Session.html#13179" class="Bound"
  >&#916;</a
  ><a name="13180"
  > </a
  ><a name="13181" class="Symbol"
  >=</a
  ><a name="13182"
  > </a
  ><a name="13183" href="Session.html#10198" class="Function"
  >Fork</a
  ><a name="13187"
  >   </a
  ><a name="13190" class="Symbol"
  >(</a
  ><a name="13191" href="Session.html#13173" class="Bound"
  >T</a
  ><a name="13192"
  > </a
  ><a name="13193" href="Session.html#13175" class="Bound"
  >X</a
  ><a name="13194" class="Symbol"
  >)</a
  ><a name="13195"
  > </a
  ><a name="13196" href="Session.html#13177" class="Bound"
  >&#915;</a
  ><a name="13197"
  > </a
  ><a name="13198" href="Session.html#13179" class="Bound"
  >&#916;</a
  ><a name="13199"
  >                 </a
  ><a name="13216" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="13217"
  > </a
  ><a name="13218" href="Session.html#13175" class="Bound"
  >X</a
  ><a name="13219"
  > </a
  ><a name="13220" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13221"
  > </a
  ><a name="13222" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13223"
  >
</a
  ><a name="13224" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13225"
  > </a
  ><a name="13226" href="Session.html#12739" class="InductiveConstructor"
  >T.send</a
  ><a name="13232"
  >  </a
  ><a name="13234" href="Session.html#13234" class="Bound"
  >T</a
  ><a name="13235"
  > </a
  ><a name="13236" href="Session.html#13236" class="Bound"
  >X</a
  ><a name="13237"
  > </a
  ><a name="13238" href="Session.html#13238" class="Bound"
  >&#915;</a
  ><a name="13239"
  > </a
  ><a name="13240" href="Session.html#13240" class="Bound"
  >&#916;</a
  ><a name="13241"
  > </a
  ><a name="13242" class="Symbol"
  >=</a
  ><a name="13243"
  > </a
  ><a name="13244" href="Session.html#8235" class="Function"
  >Send</a
  ><a name="13248"
  >         </a
  ><a name="13257" href="Session.html#13238" class="Bound"
  >&#915;</a
  ><a name="13258"
  > </a
  ><a name="13259" href="Session.html#13240" class="Bound"
  >&#916;</a
  ><a name="13260"
  >                 </a
  ><a name="13277" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="13278"
  > </a
  ><a name="13279" href="Session.html#13236" class="Bound"
  >X</a
  ><a name="13280"
  > </a
  ><a name="13281" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13282"
  > </a
  ><a name="13283" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13284"
  >
</a
  ><a name="13285" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13286"
  > </a
  ><a name="13287" href="Session.html#12744" class="InductiveConstructor"
  >T.recv</a
  ><a name="13293"
  >  </a
  ><a name="13295" href="Session.html#13295" class="Bound"
  >T</a
  ><a name="13296"
  > </a
  ><a name="13297" href="Session.html#13297" class="Bound"
  >X</a
  ><a name="13298"
  > </a
  ><a name="13299" href="Session.html#13299" class="Bound"
  >&#915;</a
  ><a name="13300"
  > </a
  ><a name="13301" href="Session.html#13301" class="Bound"
  >&#916;</a
  ><a name="13302"
  > </a
  ><a name="13303" class="Symbol"
  >=</a
  ><a name="13304"
  > </a
  ><a name="13305" href="Session.html#8240" class="Function"
  >Receive</a
  ><a name="13312"
  >      </a
  ><a name="13318" href="Session.html#13299" class="Bound"
  >&#915;</a
  ><a name="13319"
  > </a
  ><a name="13320" href="Session.html#13301" class="Bound"
  >&#916;</a
  ><a name="13321"
  >                 </a
  ><a name="13338" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="13339"
  > </a
  ><a name="13340" href="Session.html#13297" class="Bound"
  >X</a
  ><a name="13341"
  > </a
  ><a name="13342" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13343"
  > </a
  ><a name="13344" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13345"
  >
</a
  ><a name="13346" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13347"
  > </a
  ><a name="13348" href="Session.html#12764" class="InductiveConstructor"
  >T.!!</a
  ><a name="13352"
  >    </a
  ><a name="13356" href="Session.html#13356" class="Bound"
  >T</a
  ><a name="13357"
  > </a
  ><a name="13358" href="Session.html#13358" class="Bound"
  >X</a
  ><a name="13359"
  > </a
  ><a name="13360" href="Session.html#13360" class="Bound"
  >&#915;</a
  ><a name="13361"
  > </a
  ><a name="13362" href="Session.html#13362" class="Bound"
  >&#916;</a
  ><a name="13363"
  > </a
  ><a name="13364" class="Symbol"
  >=</a
  ><a name="13365"
  > </a
  ><a name="13366" href="Session.html#10511" class="Function"
  >Server</a
  ><a name="13372"
  > </a
  ><a name="13373" class="Symbol"
  >(</a
  ><a name="13374" href="Session.html#13356" class="Bound"
  >T</a
  ><a name="13375"
  > </a
  ><a name="13376" href="Session.html#13358" class="Bound"
  >X</a
  ><a name="13377" class="Symbol"
  >)</a
  ><a name="13378"
  > </a
  ><a name="13379" href="Session.html#13360" class="Bound"
  >&#915;</a
  ><a name="13380"
  > </a
  ><a name="13381" href="Session.html#13362" class="Bound"
  >&#916;</a
  ><a name="13382"
  >                 </a
  ><a name="13399" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="13400"
  > </a
  ><a name="13401" href="Session.html#13358" class="Bound"
  >X</a
  ><a name="13402"
  > </a
  ><a name="13403" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13404"
  > </a
  ><a name="13405" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13406"
  >
</a
  ><a name="13407" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13408"
  > </a
  ><a name="13409" href="Session.html#12767" class="InductiveConstructor"
  >T.??</a
  ><a name="13413"
  >    </a
  ><a name="13417" href="Session.html#13417" class="Bound"
  >T</a
  ><a name="13418"
  > </a
  ><a name="13419" href="Session.html#13419" class="Bound"
  >X</a
  ><a name="13420"
  > </a
  ><a name="13421" href="Session.html#13421" class="Bound"
  >&#915;</a
  ><a name="13422"
  > </a
  ><a name="13423" href="Session.html#13423" class="Bound"
  >&#916;</a
  ><a name="13424"
  > </a
  ><a name="13425" class="Symbol"
  >=</a
  ><a name="13426"
  > </a
  ><a name="13427" href="Session.html#10965" class="Function"
  >Client</a
  ><a name="13433"
  >  </a
  ><a name="13435" href="Session.html#13417" class="Bound"
  >T</a
  ><a name="13436"
  > </a
  ><a name="13437" href="Session.html#13419" class="Bound"
  >X</a
  ><a name="13438"
  >  </a
  ><a name="13440" href="Session.html#13421" class="Bound"
  >&#915;</a
  ><a name="13441"
  > </a
  ><a name="13442" href="Session.html#13423" class="Bound"
  >&#916;</a
  ><a name="13443"
  >
</a
  ><a name="13444" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13445"
  > </a
  ><a name="13446" href="Session.html#12770" class="InductiveConstructor"
  >T.wk</a
  ><a name="13450"
  >    </a
  ><a name="13454" href="Session.html#13454" class="Bound"
  >T</a
  ><a name="13455"
  > </a
  ><a name="13456" href="Session.html#13456" class="Bound"
  >X</a
  ><a name="13457"
  > </a
  ><a name="13458" href="Session.html#13458" class="Bound"
  >&#915;</a
  ><a name="13459"
  > </a
  ><a name="13460" href="Session.html#13460" class="Bound"
  >&#916;</a
  ><a name="13461"
  > </a
  ><a name="13462" class="Symbol"
  >=</a
  ><a name="13463"
  > </a
  ><a name="13464" href="Session.html#11287" class="Function"
  >Wk</a
  ><a name="13466"
  >           </a
  ><a name="13477" href="Session.html#13458" class="Bound"
  >&#915;</a
  ><a name="13478"
  > </a
  ><a name="13479" href="Session.html#13460" class="Bound"
  >&#916;</a
  ><a name="13480"
  >                 </a
  ><a name="13497" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="13498"
  > </a
  ><a name="13499" href="Session.html#13456" class="Bound"
  >X</a
  ><a name="13500"
  > </a
  ><a name="13501" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13502"
  > </a
  ><a name="13503" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13504"
  >
</a
  ><a name="13505" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13506"
  > </a
  ><a name="13507" href="Session.html#12773" class="InductiveConstructor"
  >T.ctr</a
  ><a name="13512"
  >   </a
  ><a name="13515" href="Session.html#13515" class="Bound"
  >T</a
  ><a name="13516"
  > </a
  ><a name="13517" href="Session.html#13517" class="Bound"
  >X</a
  ><a name="13518"
  > </a
  ><a name="13519" href="Session.html#13519" class="Bound"
  >&#915;</a
  ><a name="13520"
  > </a
  ><a name="13521" href="Session.html#13521" class="Bound"
  >&#916;</a
  ><a name="13522"
  > </a
  ><a name="13523" class="Symbol"
  >=</a
  ><a name="13524"
  > </a
  ><a name="13525" href="Session.html#11290" class="Function"
  >Ctr</a
  ><a name="13528"
  >          </a
  ><a name="13538" href="Session.html#13519" class="Bound"
  >&#915;</a
  ><a name="13539"
  > </a
  ><a name="13540" href="Session.html#13521" class="Bound"
  >&#916;</a
  ><a name="13541"
  >                 </a
  ><a name="13558" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="13559"
  > </a
  ><a name="13560" href="Session.html#13517" class="Bound"
  >X</a
  ><a name="13561"
  > </a
  ><a name="13562" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13563"
  > </a
  ><a name="13564" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13565"
  >
</a
  ><a name="13566" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13567"
  > </a
  ><a name="13568" href="Session.html#12789" class="InductiveConstructor"
  >T.corec</a
  ><a name="13575"
  > </a
  ><a name="13576" href="Session.html#13576" class="Bound"
  >T</a
  ><a name="13577"
  > </a
  ><a name="13578" href="Session.html#13578" class="Bound"
  >X</a
  ><a name="13579"
  > </a
  ><a name="13580" href="Session.html#13580" class="Bound"
  >&#915;</a
  ><a name="13581"
  > </a
  ><a name="13582" href="Session.html#13582" class="Bound"
  >&#916;</a
  ><a name="13583"
  > </a
  ><a name="13584" class="Symbol"
  >=</a
  ><a name="13585"
  > </a
  ><a name="13586" href="Session.html#12172" class="Function"
  >CoRec</a
  ><a name="13591"
  >   </a
  ><a name="13594" href="Session.html#13576" class="Bound"
  >T</a
  ><a name="13595"
  > </a
  ><a name="13596" href="Session.html#13578" class="Bound"
  >X</a
  ><a name="13597"
  >  </a
  ><a name="13599" href="Session.html#13580" class="Bound"
  >&#915;</a
  ><a name="13600"
  > </a
  ><a name="13601" href="Session.html#13582" class="Bound"
  >&#916;</a
  ><a name="13602"
  >
</a
  ><a name="13603" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13604"
  > </a
  ><a name="13605" href="Session.html#12814" class="InductiveConstructor"
  >T.write</a
  ><a name="13612"
  > </a
  ><a name="13613" href="Session.html#13613" class="Bound"
  >T</a
  ><a name="13614"
  > </a
  ><a name="13615" href="Session.html#13615" class="Bound"
  >X</a
  ><a name="13616"
  > </a
  ><a name="13617" href="Session.html#13617" class="Bound"
  >&#915;</a
  ><a name="13618"
  > </a
  ><a name="13619" href="Session.html#13619" class="Bound"
  >&#916;</a
  ><a name="13620"
  > </a
  ><a name="13621" class="Symbol"
  >=</a
  ><a name="13622"
  > </a
  ><a name="13623" href="Session.html#8788" class="Function"
  >Write</a
  ><a name="13628"
  >        </a
  ><a name="13636" href="Session.html#13617" class="Bound"
  >&#915;</a
  ><a name="13637"
  > </a
  ><a name="13638" href="Session.html#13619" class="Bound"
  >&#916;</a
  ><a name="13639"
  >                 </a
  ><a name="13656" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="13657"
  > </a
  ><a name="13658" href="Session.html#13615" class="Bound"
  >X</a
  ><a name="13659"
  > </a
  ><a name="13660" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13661"
  > </a
  ><a name="13662" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13663"
  >
</a
  ><a name="13664" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13665"
  > </a
  ><a name="13666" href="Session.html#12820" class="InductiveConstructor"
  >T.read</a
  ><a name="13672"
  >  </a
  ><a name="13674" href="Session.html#13674" class="Bound"
  >T</a
  ><a name="13675"
  > </a
  ><a name="13676" href="Session.html#13676" class="Bound"
  >X</a
  ><a name="13677"
  > </a
  ><a name="13678" href="Session.html#13678" class="Bound"
  >&#915;</a
  ><a name="13679"
  > </a
  ><a name="13680" href="Session.html#13680" class="Bound"
  >&#916;</a
  ><a name="13681"
  > </a
  ><a name="13682" class="Symbol"
  >=</a
  ><a name="13683"
  > </a
  ><a name="13684" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13685"
  > </a
  ><a name="13686" class="Symbol"
  >(</a
  ><a name="13687" href="Session.html#8794" class="Function"
  >Read</a
  ><a name="13691"
  > </a
  ><a name="13692" href="Session.html#13678" class="Bound"
  >&#915;</a
  ><a name="13693"
  > </a
  ><a name="13694" href="Session.html#13680" class="Bound"
  >&#916;</a
  ><a name="13695" class="Symbol"
  >)</a
  ><a name="13696"
  > </a
  ><a name="13697" class="Symbol"
  >&#955;</a
  ><a name="13698"
  > </a
  ><a name="13699" href="Session.html#13699" class="Bound"
  >p</a
  ><a name="13700"
  > </a
  ><a name="13701" class="Symbol"
  >&#8594;</a
  ><a name="13702"
  >                          
                    </a
  ><a name="13749" class="Keyword"
  >let</a
  ><a name="13752"
  > </a
  ><a name="13753" class="Symbol"
  >((_</a
  ><a name="13756"
  > </a
  ><a name="13757" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13758"
  > </a
  ><a name="13759" href="Session.html#13759" class="Bound"
  >J</a
  ><a name="13760"
  > </a
  ><a name="13761" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13762"
  > </a
  ><a name="13763" class="Symbol"
  >_)</a
  ><a name="13765"
  > </a
  ><a name="13766" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13767"
  > </a
  ><a name="13768" class="Symbol"
  >_)</a
  ><a name="13770"
  > </a
  ><a name="13771" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13772"
  > </a
  ><a name="13773" class="Symbol"
  >_</a
  ><a name="13774"
  > </a
  ><a name="13775" class="Symbol"
  >=</a
  ><a name="13776"
  > </a
  ><a name="13777" href="Session.html#13699" class="Bound"
  >p</a
  ><a name="13778"
  > </a
  ><a name="13779" class="Keyword"
  >in</a
  ><a name="13781"
  >   </a
  ><a name="13784" href="Session.html#13676" class="Bound"
  >X</a
  ><a name="13785"
  > </a
  ><a name="13786" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13787"
  > </a
  ><a name="13788" href="Session.html#13759" class="Bound"
  >J</a
  ><a name="13789"
  >       
</a
  ><a name="13797" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13798"
  > </a
  ><a name="13799" href="Session.html#12839" class="InductiveConstructor"
  >T.at</a
  ><a name="13803"
  >    </a
  ><a name="13807" href="Session.html#13807" class="Bound"
  >T</a
  ><a name="13808"
  > </a
  ><a name="13809" href="Session.html#13809" class="Bound"
  >X</a
  ><a name="13810"
  > </a
  ><a name="13811" href="Session.html#13811" class="Bound"
  >&#915;</a
  ><a name="13812"
  > </a
  ><a name="13813" href="Session.html#13813" class="Bound"
  >&#916;</a
  ><a name="13814"
  > </a
  ><a name="13815" class="Symbol"
  >=</a
  ><a name="13816"
  > </a
  ><a name="13817" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13818"
  > </a
  ><a name="13819" class="Symbol"
  >(</a
  ><a name="13820" href="Session.html#9384" class="Function"
  >At</a
  ><a name="13822"
  > </a
  ><a name="13823" href="Session.html#13811" class="Bound"
  >&#915;</a
  ><a name="13824"
  > </a
  ><a name="13825" href="Session.html#13813" class="Bound"
  >&#916;</a
  ><a name="13826" class="Symbol"
  >)</a
  ><a name="13827"
  > </a
  ><a name="13828" class="Symbol"
  >&#955;</a
  ><a name="13829"
  > </a
  ><a name="13830" href="Session.html#13830" class="Bound"
  >p</a
  ><a name="13831"
  > </a
  ><a name="13832" class="Symbol"
  >&#8594;</a
  ><a name="13833"
  >
                    </a
  ><a name="13854" class="Keyword"
  >let</a
  ><a name="13857"
  > </a
  ><a name="13858" class="Symbol"
  >(_</a
  ><a name="13860"
  > </a
  ><a name="13861" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13862"
  > </a
  ><a name="13863" href="Session.html#13863" class="Bound"
  >O</a
  ><a name="13864"
  > </a
  ><a name="13865" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13866"
  > </a
  ><a name="13867" class="Symbol"
  >_)</a
  ><a name="13869"
  > </a
  ><a name="13870" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13871"
  > </a
  ><a name="13872" class="Symbol"
  >_</a
  ><a name="13873"
  > </a
  ><a name="13874" class="Symbol"
  >=</a
  ><a name="13875"
  > </a
  ><a name="13876" href="Session.html#13830" class="Bound"
  >p</a
  ><a name="13877"
  > </a
  ><a name="13878" class="Keyword"
  >in</a
  ><a name="13880"
  >         </a
  ><a name="13889" href="Session.html#13809" class="Bound"
  >X</a
  ><a name="13890"
  > </a
  ><a name="13891" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13892"
  > </a
  ><a name="13893" href="Session.html#13863" class="Bound"
  >O</a
  ><a name="13894"
  >
</a
  ><a name="13895" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="13896"
  > </a
  ><a name="13897" href="Session.html#12864" class="InductiveConstructor"
  >T.end</a
  ><a name="13902"
  >   </a
  ><a name="13905" href="Session.html#13905" class="Bound"
  >T</a
  ><a name="13906"
  > </a
  ><a name="13907" href="Session.html#13907" class="Bound"
  >X</a
  ><a name="13908"
  > </a
  ><a name="13909" href="Session.html#13909" class="Bound"
  >&#915;</a
  ><a name="13910"
  > </a
  ><a name="13911" href="Session.html#13911" class="Bound"
  >&#916;</a
  ><a name="13912"
  > </a
  ><a name="13913" class="Symbol"
  >=</a
  ><a name="13914"
  > </a
  ><a name="13915" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13916"
  > </a
  ><a name="13917" class="Symbol"
  >(</a
  ><a name="13918" href="Session.html#9732" class="Function"
  >End</a
  ><a name="13921"
  >  </a
  ><a name="13923" href="Session.html#13909" class="Bound"
  >&#915;</a
  ><a name="13924"
  > </a
  ><a name="13925" href="Session.html#13911" class="Bound"
  >&#916;</a
  ><a name="13926" class="Symbol"
  >)</a
  ><a name="13927"
  > </a
  ><a name="13928" class="Symbol"
  >&#955;</a
  ><a name="13929"
  > </a
  ><a name="13930" href="Session.html#13930" class="Bound"
  >p</a
  ><a name="13931"
  > </a
  ><a name="13932" class="Symbol"
  >&#8594;</a
  ><a name="13933"
  >                             
                    </a
  ><a name="13983" class="Keyword"
  >let</a
  ><a name="13986"
  > </a
  ><a name="13987" class="Symbol"
  >(</a
  ><a name="13988" href="Session.html#13988" class="Bound"
  >I</a
  ><a name="13989"
  > </a
  ><a name="13990" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13991"
  > </a
  ><a name="13992" class="Symbol"
  >_</a
  ><a name="13993"
  > </a
  ><a name="13994" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13995"
  > </a
  ><a name="13996" class="Symbol"
  >_)</a
  ><a name="13998"
  > </a
  ><a name="13999" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14000"
  > </a
  ><a name="14001" class="Symbol"
  >_</a
  ><a name="14002"
  > </a
  ><a name="14003" class="Symbol"
  >=</a
  ><a name="14004"
  > </a
  ><a name="14005" href="Session.html#13930" class="Bound"
  >p</a
  ><a name="14006"
  > </a
  ><a name="14007" class="Keyword"
  >in</a
  ><a name="14009"
  >         </a
  ><a name="14018" href="Session.html#13907" class="Bound"
  >X</a
  ><a name="14019"
  > </a
  ><a name="14020" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="14021"
  > </a
  ><a name="14022" href="Session.html#13988" class="Bound"
  >I</a
  ><a name="14023"
  ></pre>
<h3 id="process-terms">Process terms</h3>
<p>As already stated, we plan to adopt codes for indexed functors instead of defining those directly. We could then simply use a generic indexed free monad construction, as in McBride's &quot;Kleisli Arrows of Outrageous Fortune&quot;, encoding our &quot;Atkey-style&quot; parameterisation in the way described there.</p>
<p>To make things simpler we use the following definition for now: this is neither a monad nor a monad transfomer, it is just convenient temporary syntax.</p>
<pre></a
  ><a name="14517" class="Keyword"
  >module</a
  ><a name="14523"
  > </a
  ><a name="14524" href="Session.html#14524" class="Module"
  >Process</a
  ><a name="14531"
  > </a
  ><a name="14532" class="Keyword"
  >where</a
  ><a name="14537"
  >

  </a
  ><a name="14541" class="Keyword"
  >infix</a
  ><a name="14546"
  > </a
  ><a name="14547" class="Number"
  >2</a
  ><a name="14548"
  > _[_&#8866;_]&gt;_

  </a
  ><a name="14561" href="Session.html#14561" class="Function"
  >F</a
  ><a name="14562"
  > </a
  ><a name="14563" class="Symbol"
  >=</a
  ><a name="14564"
  > </a
  ><a name="14565" class="Symbol"
  >&#955;</a
  ><a name="14566"
  > </a
  ><a name="14567" href="Session.html#14567" class="Bound"
  >T</a
  ><a name="14568"
  > </a
  ><a name="14569" href="Session.html#14569" class="Bound"
  >X</a
  ><a name="14570"
  > </a
  ><a name="14571" href="Session.html#14571" class="Bound"
  >&#915;</a
  ><a name="14572"
  > </a
  ><a name="14573" href="Session.html#14573" class="Bound"
  >&#916;</a
  ><a name="14574"
  > </a
  ><a name="14575" class="Symbol"
  >&#8594;</a
  ><a name="14576"
  > </a
  ><a name="14577" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14578"
  > </a
  ><a name="14579" href="Session.html#12694" class="Datatype"
  >T.Tag</a
  ><a name="14584"
  > </a
  ><a name="14585" class="Symbol"
  >&#955;</a
  ><a name="14586"
  > </a
  ><a name="14587" href="Session.html#14587" class="Bound"
  >t</a
  ><a name="14588"
  > </a
  ><a name="14589" class="Symbol"
  >&#8594;</a
  ><a name="14590"
  > </a
  ><a name="14591" href="Session.html#13070" class="Function"
  >&#960;</a
  ><a name="14592"
  > </a
  ><a name="14593" href="Session.html#14587" class="Bound"
  >t</a
  ><a name="14594"
  > </a
  ><a name="14595" href="Session.html#14567" class="Bound"
  >T</a
  ><a name="14596"
  > </a
  ><a name="14597" href="Session.html#14569" class="Bound"
  >X</a
  ><a name="14598"
  > </a
  ><a name="14599" href="Session.html#14571" class="Bound"
  >&#915;</a
  ><a name="14600"
  > </a
  ><a name="14601" href="Session.html#14573" class="Bound"
  >&#916;</a
  ><a name="14602"
  >

  </a
  ><a name="14606" class="Keyword"
  >data</a
  ><a name="14610"
  > </a
  ><a name="14611" href="Session.html#14611" class="Datatype Operator"
  >_[_&#8866;_]&gt;_</a
  ><a name="14619"
  > </a
  ><a name="14620" href="Session.html#14620" class="Bound"
  >&#915;</a
  ><a name="14621"
  > </a
  ><a name="14622" class="Symbol"
  >(</a
  ><a name="14623" href="Session.html#14623" class="Bound"
  >M</a
  ><a name="14624"
  > </a
  ><a name="14625" class="Symbol"
  >:</a
  ><a name="14626"
  > </a
  ><a name="14627" class="PrimitiveType"
  >Set</a
  ><a name="14630"
  > </a
  ><a name="14631" class="Symbol"
  >&#8594;</a
  ><a name="14632"
  > </a
  ><a name="14633" class="PrimitiveType"
  >Set</a
  ><a name="14636" class="Symbol"
  >)</a
  ><a name="14637"
  > </a
  ><a name="14638" href="Session.html#14638" class="Bound"
  >X</a
  ><a name="14639"
  > </a
  ><a name="14640" class="Symbol"
  >:</a
  ><a name="14641"
  > </a
  ><a name="14642" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="14644"
  > </a
  ><a name="14645" class="Symbol"
  >&#8594;</a
  ><a name="14646"
  > </a
  ><a name="14647" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="14651"
  > </a
  ><a name="14652" class="Keyword"
  >where</a
  ><a name="14657"
  >
    </a
  ><a name="14662" href="Session.html#14662" class="InductiveConstructor Operator"
  >&#8657;_</a
  ><a name="14664"
  >    </a
  ><a name="14668" class="Symbol"
  >:</a
  ><a name="14669"
  >             </a
  ><a name="14682" href="Session.html#14623" class="Bound"
  >M</a
  ><a name="14683"
  > </a
  ><a name="14684" href="Session.html#14638" class="Bound"
  >X</a
  ><a name="14685"
  >                                </a
  ><a name="14717" class="Symbol"
  >&#8594;</a
  ><a name="14718"
  > </a
  ><a name="14719" href="Session.html#14620" class="Bound"
  >&#915;</a
  ><a name="14720"
  > </a
  ><a name="14721" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="14722"
  > </a
  ><a name="14723" href="Session.html#14623" class="Bound"
  >M</a
  ><a name="14724"
  > </a
  ><a name="14725" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="14726"
  > </a
  ><a name="14727" href="Session.html#14638" class="Bound"
  >X</a
  ><a name="14728"
  > </a
  ><a name="14729" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="14731"
  > </a
  ><a name="14732" href="Session.html#14620" class="Bound"
  >&#915;</a
  ><a name="14733"
  >
    </a
  ><a name="14738" href="Session.html#14738" class="InductiveConstructor Operator"
  >[_]</a
  ><a name="14741"
  >   </a
  ><a name="14744" class="Symbol"
  >:</a
  ><a name="14745"
  > </a
  ><a name="14746" class="Symbol"
  >&#8704;</a
  ><a name="14747"
  > </a
  ><a name="14748" class="Symbol"
  >{</a
  ><a name="14749" href="Session.html#14749" class="Bound"
  >&#916;</a
  ><a name="14750" class="Symbol"
  >}</a
  ><a name="14751"
  >     </a
  ><a name="14756" class="Symbol"
  >&#8594;</a
  ><a name="14757"
  > </a
  ><a name="14758" href="Session.html#14561" class="Function"
  >F</a
  ><a name="14759"
  > </a
  ><a name="14760" class="Symbol"
  >(&#955;</a
  ><a name="14762"
  > </a
  ><a name="14763" href="Session.html#14763" class="Bound"
  >Z</a
  ><a name="14764"
  > </a
  ><a name="14765" href="Session.html#14765" class="Bound"
  >A</a
  ><a name="14766"
  > </a
  ><a name="14767" href="Session.html#14767" class="Bound"
  >B</a
  ><a name="14768"
  > </a
  ><a name="14769" class="Symbol"
  >&#8594;</a
  ><a name="14770"
  > </a
  ><a name="14771" href="Session.html#14765" class="Bound"
  >A</a
  ><a name="14772"
  > </a
  ><a name="14773" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="14774"
  > </a
  ><a name="14775" href="Session.html#14623" class="Bound"
  >M</a
  ><a name="14776"
  > </a
  ><a name="14777" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="14778"
  > </a
  ><a name="14779" href="Session.html#14763" class="Bound"
  >Z</a
  ><a name="14780"
  > </a
  ><a name="14781" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="14783"
  > </a
  ><a name="14784" href="Session.html#14767" class="Bound"
  >B</a
  ><a name="14785" class="Symbol"
  >)</a
  ><a name="14786"
  > </a
  ><a name="14787" href="Session.html#14638" class="Bound"
  >X</a
  ><a name="14788"
  > </a
  ><a name="14789" href="Session.html#14620" class="Bound"
  >&#915;</a
  ><a name="14790"
  > </a
  ><a name="14791" href="Session.html#14749" class="Bound"
  >&#916;</a
  ><a name="14792"
  > </a
  ><a name="14793" class="Symbol"
  >&#8594;</a
  ><a name="14794"
  > </a
  ><a name="14795" href="Session.html#14620" class="Bound"
  >&#915;</a
  ><a name="14796"
  > </a
  ><a name="14797" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="14798"
  > </a
  ><a name="14799" href="Session.html#14623" class="Bound"
  >M</a
  ><a name="14800"
  > </a
  ><a name="14801" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="14802"
  > </a
  ><a name="14803" href="Session.html#14638" class="Bound"
  >X</a
  ><a name="14804"
  > </a
  ><a name="14805" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="14807"
  > </a
  ><a name="14808" href="Session.html#14749" class="Bound"
  >&#916;</a
  ><a name="14809"
  >
    </a
  ><a name="14814" href="Session.html#14814" class="InductiveConstructor Operator"
  >_&#187;=_</a
  ><a name="14818"
  >  </a
  ><a name="14820" class="Symbol"
  >:</a
  ><a name="14821"
  > </a
  ><a name="14822" class="Symbol"
  >&#8704;</a
  ><a name="14823"
  > </a
  ><a name="14824" class="Symbol"
  >{</a
  ><a name="14825" href="Session.html#14825" class="Bound"
  >&#926;</a
  ><a name="14826"
  > </a
  ><a name="14827" href="Session.html#14827" class="Bound"
  >&#916;</a
  ><a name="14828"
  > </a
  ><a name="14829" href="Session.html#14829" class="Bound"
  >Y</a
  ><a name="14830" class="Symbol"
  >}</a
  ><a name="14831"
  > </a
  ><a name="14832" class="Symbol"
  >&#8594;</a
  ><a name="14833"
  > </a
  ><a name="14834" href="Session.html#14620" class="Bound"
  >&#915;</a
  ><a name="14835"
  > </a
  ><a name="14836" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="14837"
  > </a
  ><a name="14838" href="Session.html#14623" class="Bound"
  >M</a
  ><a name="14839"
  > </a
  ><a name="14840" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="14841"
  > </a
  ><a name="14842" href="Session.html#14829" class="Bound"
  >Y</a
  ><a name="14843"
  > </a
  ><a name="14844" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="14846"
  > </a
  ><a name="14847" href="Session.html#14825" class="Bound"
  >&#926;</a
  ><a name="14848"
  >                     </a
  ><a name="14869" class="Symbol"
  >&#8594;</a
  ><a name="14870"
  > 
                   </a
  ><a name="14891" class="Symbol"
  >(</a
  ><a name="14892" href="Session.html#14829" class="Bound"
  >Y</a
  ><a name="14893"
  > </a
  ><a name="14894" class="Symbol"
  >&#8594;</a
  ><a name="14895"
  > </a
  ><a name="14896" href="Session.html#14825" class="Bound"
  >&#926;</a
  ><a name="14897"
  > </a
  ><a name="14898" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="14899"
  > </a
  ><a name="14900" href="Session.html#14623" class="Bound"
  >M</a
  ><a name="14901"
  > </a
  ><a name="14902" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="14903"
  > </a
  ><a name="14904" href="Session.html#14638" class="Bound"
  >X</a
  ><a name="14905"
  > </a
  ><a name="14906" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="14908"
  > </a
  ><a name="14909" href="Session.html#14827" class="Bound"
  >&#916;</a
  ><a name="14910" class="Symbol"
  >)</a
  ><a name="14911"
  >                    </a
  ><a name="14931" class="Symbol"
  >&#8594;</a
  ><a name="14932"
  > </a
  ><a name="14933" href="Session.html#14620" class="Bound"
  >&#915;</a
  ><a name="14934"
  > </a
  ><a name="14935" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="14936"
  > </a
  ><a name="14937" href="Session.html#14623" class="Bound"
  >M</a
  ><a name="14938"
  > </a
  ><a name="14939" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="14940"
  > </a
  ><a name="14941" href="Session.html#14638" class="Bound"
  >X</a
  ><a name="14942"
  > </a
  ><a name="14943" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="14945"
  > </a
  ><a name="14946" href="Session.html#14827" class="Bound"
  >&#916;</a
  ><a name="14947"
  >

</a
  ><a name="14949" class="Keyword"
  >open</a
  ><a name="14953"
  > </a
  ><a name="14954" href="Session.html#14524" class="Module"
  >Process</a
  ><a name="14961"
  > </a
  ><a name="14962" class="Keyword"
  >using</a
  ><a name="14967"
  > </a
  ><a name="14968" class="Symbol"
  >(</a
  ><a name="14969"
  >_[_&#8866;_]&gt;_ </a
  ><a name="14978" class="Symbol"
  >;</a
  ><a name="14979"
  > &#8657;_ </a
  ><a name="14983" class="Symbol"
  >;</a
  ><a name="14984"
  > _&#187;=_ </a
  ><a name="14990" class="Symbol"
  >;</a
  ><a name="14991"
  > [_]</a
  ><a name="14995" class="Symbol"
  >)</a
  ><a name="14996"
  > </a
  ><a name="14997" class="Keyword"
  >public</a
  ><a name="15003"
  ></pre>
<p>Note that referring to the above operators as &quot;strictly positive functors&quot; as we did, while very reasonable from their definitions, is also justified by the fact that Agda's positivity checker accepts <code>_[_⊢_]&gt;_</code>.</p>
<h3 id="syntactic-sugar">Syntactic sugar</h3>
<h4 id="patterns">Patterns</h4>
<p>To construct and pattern match on processes we make extensive use of Agda's <code>pattern</code> facility.</p>
<pre></a
  ><a name="15376" class="Keyword"
  >pattern</a
  ><a name="15383"
  > </a
  ><a name="15384" href="Session.html#15384" class="InductiveConstructor"
  >fork</a
  ><a name="15388"
  >    </a
  ><a name="15392" href="Session.html#15414" class="Bound"
  >d</a
  ><a name="15393"
  > </a
  ><a name="15394" href="Session.html#15418" class="Bound"
  >x</a
  ><a name="15395"
  >    </a
  ><a name="15399" class="Symbol"
  >=</a
  ><a name="15400"
  > </a
  ><a name="15401" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="15402"
  > </a
  ><a name="15403" href="Session.html#12718" class="InductiveConstructor"
  >T.fork</a
  ><a name="15409"
  >  </a
  ><a name="15411" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15412"
  > </a
  ><a name="15413" class="Symbol"
  >(</a
  ><a name="15414" href="Session.html#15414" class="Bound"
  >d</a
  ><a name="15415"
  > </a
  ><a name="15416" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15417"
  > </a
  ><a name="15418" href="Session.html#15418" class="Bound"
  >x</a
  ><a name="15419"
  > </a
  ><a name="15420" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15421"
  > </a
  ><a name="15422" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15424" class="Symbol"
  >)</a
  ><a name="15425"
  >                 </a
  ><a name="15442" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15443"
  > </a
  ><a name="15444" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15446"
  > </a
  ><a name="15447" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="15448"
  > 
</a
  ><a name="15450" class="Keyword"
  >pattern</a
  ><a name="15457"
  > </a
  ><a name="15458" href="Session.html#15458" class="InductiveConstructor"
  >new</a
  ><a name="15461"
  >            </a
  ><a name="15473" class="Symbol"
  >=</a
  ><a name="15474"
  > </a
  ><a name="15475" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="15476"
  > </a
  ><a name="15477" href="Session.html#12714" class="InductiveConstructor"
  >T.new</a
  ><a name="15482"
  >   </a
  ><a name="15485" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15486"
  > </a
  ><a name="15487" class="Symbol"
  >(_</a
  ><a name="15489"
  > </a
  ><a name="15490" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15491"
  > </a
  ><a name="15492" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15494" class="Symbol"
  >)</a
  ><a name="15495"
  >                     </a
  ><a name="15516" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15517"
  > </a
  ><a name="15518" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15520"
  > </a
  ><a name="15521" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="15522"
  > 
</a
  ><a name="15524" class="Keyword"
  >pattern</a
  ><a name="15531"
  > </a
  ><a name="15532" href="Session.html#15532" class="InductiveConstructor"
  >send</a
  ><a name="15536"
  >    </a
  ><a name="15540" href="Session.html#15564" class="Bound"
  >i</a
  ><a name="15541"
  > </a
  ><a name="15542" href="Session.html#15568" class="Bound"
  >j</a
  ><a name="15543"
  >    </a
  ><a name="15547" class="Symbol"
  >=</a
  ><a name="15548"
  > </a
  ><a name="15549" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="15550"
  > </a
  ><a name="15551" href="Session.html#12739" class="InductiveConstructor"
  >T.send</a
  ><a name="15557"
  >  </a
  ><a name="15559" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15560"
  > </a
  ><a name="15561" href="Session.html#6910" class="InductiveConstructor Operator"
  >%</a
  ><a name="15562"
  > </a
  ><a name="15563" class="Symbol"
  >(</a
  ><a name="15564" href="Session.html#15564" class="Bound"
  >i</a
  ><a name="15565"
  > </a
  ><a name="15566" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15567"
  > </a
  ><a name="15568" href="Session.html#15568" class="Bound"
  >j</a
  ><a name="15569"
  > </a
  ><a name="15570" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15571"
  > </a
  ><a name="15572" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15574" class="Symbol"
  >)</a
  ><a name="15575"
  >               </a
  ><a name="15590" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15591"
  > </a
  ><a name="15592" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15594"
  > </a
  ><a name="15595" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="15596"
  > 
</a
  ><a name="15598" class="Keyword"
  >pattern</a
  ><a name="15605"
  > </a
  ><a name="15606" href="Session.html#15606" class="InductiveConstructor"
  >receive</a
  ><a name="15613"
  > </a
  ><a name="15614" href="Session.html#15638" class="Bound"
  >i</a
  ><a name="15615"
  >      </a
  ><a name="15621" class="Symbol"
  >=</a
  ><a name="15622"
  > </a
  ><a name="15623" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="15624"
  > </a
  ><a name="15625" href="Session.html#12744" class="InductiveConstructor"
  >T.recv</a
  ><a name="15631"
  >  </a
  ><a name="15633" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15634"
  > </a
  ><a name="15635" href="Session.html#6910" class="InductiveConstructor Operator"
  >%</a
  ><a name="15636"
  > </a
  ><a name="15637" class="Symbol"
  >(</a
  ><a name="15638" href="Session.html#15638" class="Bound"
  >i</a
  ><a name="15639"
  > </a
  ><a name="15640" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15641"
  > </a
  ><a name="15642" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15644" class="Symbol"
  >)</a
  ><a name="15645"
  >                   </a
  ><a name="15664" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15665"
  > </a
  ><a name="15666" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15668"
  > </a
  ><a name="15669" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="15670"
  > 
</a
  ><a name="15672" class="Keyword"
  >pattern</a
  ><a name="15679"
  > </a
  ><a name="15680" href="Session.html#15680" class="InductiveConstructor"
  >accept</a
  ><a name="15686"
  >  </a
  ><a name="15688" href="Session.html#15712" class="Bound"
  >i</a
  ><a name="15689"
  > </a
  ><a name="15690" href="Session.html#15716" class="Bound"
  >a</a
  ><a name="15691"
  > </a
  ><a name="15692" href="Session.html#15720" class="Bound"
  >p</a
  ><a name="15693"
  >  </a
  ><a name="15695" class="Symbol"
  >=</a
  ><a name="15696"
  > </a
  ><a name="15697" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="15698"
  > </a
  ><a name="15699" href="Session.html#12764" class="InductiveConstructor"
  >T.!!</a
  ><a name="15703"
  >    </a
  ><a name="15707" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15708"
  > </a
  ><a name="15709" href="Session.html#6910" class="InductiveConstructor Operator"
  >%</a
  ><a name="15710"
  > </a
  ><a name="15711" class="Symbol"
  >(</a
  ><a name="15712" href="Session.html#15712" class="Bound"
  >i</a
  ><a name="15713"
  > </a
  ><a name="15714" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15715"
  > </a
  ><a name="15716" href="Session.html#15716" class="Bound"
  >a</a
  ><a name="15717"
  > </a
  ><a name="15718" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15719"
  > </a
  ><a name="15720" href="Session.html#15720" class="Bound"
  >p</a
  ><a name="15721"
  > </a
  ><a name="15722" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15723"
  > </a
  ><a name="15724" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15726" class="Symbol"
  >)</a
  ><a name="15727"
  >           </a
  ><a name="15738" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15739"
  > </a
  ><a name="15740" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15742"
  > </a
  ><a name="15743" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="15744"
  > 
</a
  ><a name="15746" class="Keyword"
  >pattern</a
  ><a name="15753"
  > </a
  ><a name="15754" href="Session.html#15754" class="InductiveConstructor"
  >connect</a
  ><a name="15761"
  > </a
  ><a name="15762" href="Session.html#15786" class="Bound"
  >i</a
  ><a name="15763"
  >   </a
  ><a name="15766" href="Session.html#15790" class="Bound"
  >p</a
  ><a name="15767"
  >  </a
  ><a name="15769" class="Symbol"
  >=</a
  ><a name="15770"
  > </a
  ><a name="15771" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="15772"
  > </a
  ><a name="15773" href="Session.html#12767" class="InductiveConstructor"
  >T.??</a
  ><a name="15777"
  >    </a
  ><a name="15781" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15782"
  > </a
  ><a name="15783" href="Session.html#6910" class="InductiveConstructor Operator"
  >%</a
  ><a name="15784"
  > </a
  ><a name="15785" class="Symbol"
  >(</a
  ><a name="15786" href="Session.html#15786" class="Bound"
  >i</a
  ><a name="15787"
  > </a
  ><a name="15788" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15789"
  > </a
  ><a name="15790" href="Session.html#15790" class="Bound"
  >p</a
  ><a name="15791" class="Symbol"
  >)</a
  ><a name="15792"
  >                         </a
  ><a name="15817" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="15818"
  > 
</a
  ><a name="15820" class="Keyword"
  >pattern</a
  ><a name="15827"
  > </a
  ><a name="15828" href="Session.html#15828" class="InductiveConstructor"
  >wont</a
  ><a name="15832"
  >    </a
  ><a name="15836" href="Session.html#15860" class="Bound"
  >i</a
  ><a name="15837"
  >      </a
  ><a name="15843" class="Symbol"
  >=</a
  ><a name="15844"
  > </a
  ><a name="15845" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="15846"
  > </a
  ><a name="15847" href="Session.html#12770" class="InductiveConstructor"
  >T.wk</a
  ><a name="15851"
  >    </a
  ><a name="15855" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15856"
  > </a
  ><a name="15857" href="Session.html#6910" class="InductiveConstructor Operator"
  >%</a
  ><a name="15858"
  > </a
  ><a name="15859" class="Symbol"
  >(</a
  ><a name="15860" href="Session.html#15860" class="Bound"
  >i</a
  ><a name="15861"
  > </a
  ><a name="15862" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15863"
  > </a
  ><a name="15864" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15866" class="Symbol"
  >)</a
  ><a name="15867"
  >                   </a
  ><a name="15886" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15887"
  > </a
  ><a name="15888" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15890"
  > </a
  ><a name="15891" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="15892"
  > 
</a
  ><a name="15894" class="Keyword"
  >pattern</a
  ><a name="15901"
  > </a
  ><a name="15902" href="Session.html#15902" class="InductiveConstructor"
  >twice</a
  ><a name="15907"
  >   </a
  ><a name="15910" href="Session.html#15934" class="Bound"
  >i</a
  ><a name="15911"
  >      </a
  ><a name="15917" class="Symbol"
  >=</a
  ><a name="15918"
  > </a
  ><a name="15919" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="15920"
  > </a
  ><a name="15921" href="Session.html#12773" class="InductiveConstructor"
  >T.ctr</a
  ><a name="15926"
  >   </a
  ><a name="15929" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15930"
  > </a
  ><a name="15931" href="Session.html#6910" class="InductiveConstructor Operator"
  >%</a
  ><a name="15932"
  > </a
  ><a name="15933" class="Symbol"
  >(</a
  ><a name="15934" href="Session.html#15934" class="Bound"
  >i</a
  ><a name="15935"
  > </a
  ><a name="15936" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15937"
  > </a
  ><a name="15938" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15940" class="Symbol"
  >)</a
  ><a name="15941"
  >                   </a
  ><a name="15960" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15961"
  > </a
  ><a name="15962" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="15964"
  > </a
  ><a name="15965" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="15966"
  > 
</a
  ><a name="15968" class="Keyword"
  >pattern</a
  ><a name="15975"
  > </a
  ><a name="15976" href="Session.html#15976" class="InductiveConstructor"
  >write</a
  ><a name="15981"
  >   </a
  ><a name="15984" href="Session.html#16020" class="Bound"
  >i</a
  ><a name="15985"
  > </a
  ><a name="15986" href="Session.html#16011" class="Bound"
  >x</a
  ><a name="15987"
  >    </a
  ><a name="15991" class="Symbol"
  >=</a
  ><a name="15992"
  > </a
  ><a name="15993" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="15994"
  > </a
  ><a name="15995" href="Session.html#12814" class="InductiveConstructor"
  >T.write</a
  ><a name="16002"
  > </a
  ><a name="16003" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16004"
  > </a
  ><a name="16005" class="Symbol"
  >((_</a
  ><a name="16008"
  > </a
  ><a name="16009" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16010"
  > </a
  ><a name="16011" href="Session.html#16011" class="Bound"
  >x</a
  ><a name="16012"
  > </a
  ><a name="16013" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16014"
  > </a
  ><a name="16015" class="Symbol"
  >_)</a
  ><a name="16017"
  > </a
  ><a name="16018" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16019"
  > </a
  ><a name="16020" href="Session.html#16020" class="Bound"
  >i</a
  ><a name="16021"
  > </a
  ><a name="16022" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16023"
  > </a
  ><a name="16024" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="16026" class="Symbol"
  >)</a
  ><a name="16027"
  >       </a
  ><a name="16034" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16035"
  > </a
  ><a name="16036" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="16038"
  > </a
  ><a name="16039" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="16040"
  > 
</a
  ><a name="16042" class="Keyword"
  >pattern</a
  ><a name="16049"
  > </a
  ><a name="16050" href="Session.html#16050" class="InductiveConstructor"
  >read</a
  ><a name="16054"
  >    </a
  ><a name="16058" href="Session.html#16082" class="Bound"
  >i</a
  ><a name="16059"
  >      </a
  ><a name="16065" class="Symbol"
  >=</a
  ><a name="16066"
  > </a
  ><a name="16067" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="16068"
  > </a
  ><a name="16069" href="Session.html#12820" class="InductiveConstructor"
  >T.read</a
  ><a name="16075"
  >  </a
  ><a name="16077" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16078"
  > </a
  ><a name="16079" href="Session.html#6910" class="InductiveConstructor Operator"
  >%</a
  ><a name="16080"
  > </a
  ><a name="16081" class="Symbol"
  >(</a
  ><a name="16082" href="Session.html#16082" class="Bound"
  >i</a
  ><a name="16083"
  > </a
  ><a name="16084" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16085"
  > </a
  ><a name="16086" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="16088" class="Symbol"
  >)</a
  ><a name="16089"
  >                   </a
  ><a name="16108" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16109"
  > </a
  ><a name="16110" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="16112"
  > </a
  ><a name="16113" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="16114"
  > 
</a
  ><a name="16116" class="Keyword"
  >pattern</a
  ><a name="16123"
  > </a
  ><a name="16124" href="Session.html#16124" class="InductiveConstructor"
  >end/</a
  ><a name="16128"
  >    </a
  ><a name="16132" href="Session.html#16173" class="Bound"
  >i</a
  ><a name="16133"
  > </a
  ><a name="16134" href="Session.html#16163" class="Bound"
  >r</a
  ><a name="16135"
  >    </a
  ><a name="16139" class="Symbol"
  >=</a
  ><a name="16140"
  > </a
  ><a name="16141" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="16142"
  > </a
  ><a name="16143" href="Session.html#12864" class="InductiveConstructor"
  >T.end</a
  ><a name="16148"
  >   </a
  ><a name="16151" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16152"
  > </a
  ><a name="16153" class="Symbol"
  >((_</a
  ><a name="16156"
  > </a
  ><a name="16157" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16158"
  > </a
  ><a name="16159" class="Symbol"
  >_</a
  ><a name="16160"
  > </a
  ><a name="16161" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16162"
  > </a
  ><a name="16163" href="Session.html#16163" class="Bound"
  >r</a
  ><a name="16164"
  > </a
  ><a name="16165" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16166"
  > </a
  ><a name="16167" class="Symbol"
  >_)</a
  ><a name="16169"
  > </a
  ><a name="16170" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16171"
  > </a
  ><a name="16172" class="Symbol"
  >(</a
  ><a name="16173" href="Session.html#16173" class="Bound"
  >i</a
  ><a name="16174"
  > </a
  ><a name="16175" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16176"
  > </a
  ><a name="16177" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="16179" class="Symbol"
  >))</a
  ><a name="16181"
  > </a
  ><a name="16182" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16183"
  > </a
  ><a name="16184" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="16186"
  > </a
  ><a name="16187" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="16188"
  > 
</a
  ><a name="16190" class="Keyword"
  >pattern</a
  ><a name="16197"
  > </a
  ><a name="16198" href="Session.html#16198" class="InductiveConstructor"
  >end</a
  ><a name="16201"
  >     </a
  ><a name="16206" href="Session.html#16220" class="Bound"
  >i</a
  ><a name="16207"
  >      </a
  ><a name="16213" class="Symbol"
  >=</a
  ><a name="16214"
  > </a
  ><a name="16215" href="Session.html#16124" class="InductiveConstructor"
  >end/</a
  ><a name="16219"
  > </a
  ><a name="16220" href="Session.html#16220" class="Bound"
  >i</a
  ><a name="16221"
  > </a
  ><a name="16222" class="Symbol"
  >_</a
  ><a name="16223"
  >
</a
  ><a name="16224" class="Keyword"
  >pattern</a
  ><a name="16231"
  > </a
  ><a name="16232" href="Session.html#16232" class="InductiveConstructor"
  >at/</a
  ><a name="16235"
  >     </a
  ><a name="16240" href="Session.html#16277" class="Bound"
  >i</a
  ><a name="16241"
  > </a
  ><a name="16242" href="Session.html#16267" class="Bound"
  >o</a
  ><a name="16243"
  >    </a
  ><a name="16247" class="Symbol"
  >=</a
  ><a name="16248"
  > </a
  ><a name="16249" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="16250"
  > </a
  ><a name="16251" href="Session.html#12839" class="InductiveConstructor"
  >T.at</a
  ><a name="16255"
  >    </a
  ><a name="16259" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16260"
  > </a
  ><a name="16261" class="Symbol"
  >((</a
  ><a name="16263" href="Session.html#6955" class="InductiveConstructor Operator"
  >%3</a
  ><a name="16265"
  > </a
  ><a name="16266" class="Symbol"
  >(</a
  ><a name="16267" href="Session.html#16267" class="Bound"
  >o</a
  ><a name="16268"
  > </a
  ><a name="16269" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16270"
  > </a
  ><a name="16271" class="Symbol"
  >_)</a
  ><a name="16273"
  > </a
  ><a name="16274" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16275"
  > </a
  ><a name="16276" class="Symbol"
  >(</a
  ><a name="16277" href="Session.html#16277" class="Bound"
  >i</a
  ><a name="16278"
  > </a
  ><a name="16279" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16280"
  > </a
  ><a name="16281" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="16283" class="Symbol"
  >)))</a
  ><a name="16286"
  >    </a
  ><a name="16290" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16291"
  > </a
  ><a name="16292" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="16294"
  > </a
  ><a name="16295" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="16296"
  > 
</a
  ><a name="16298" class="Keyword"
  >pattern</a
  ><a name="16305"
  > </a
  ><a name="16306" href="Session.html#16306" class="InductiveConstructor"
  >at</a
  ><a name="16308"
  >      </a
  ><a name="16314" href="Session.html#16327" class="Bound"
  >i</a
  ><a name="16315"
  >      </a
  ><a name="16321" class="Symbol"
  >=</a
  ><a name="16322"
  > </a
  ><a name="16323" href="Session.html#16232" class="InductiveConstructor"
  >at/</a
  ><a name="16326"
  > </a
  ><a name="16327" href="Session.html#16327" class="Bound"
  >i</a
  ><a name="16328"
  > </a
  ><a name="16329" class="Symbol"
  >_</a
  ><a name="16330"
  >                                         
</a
  ><a name="16372" class="Keyword"
  >pattern</a
  ><a name="16379"
  > </a
  ><a name="16380" href="Session.html#16380" class="InductiveConstructor"
  >corec</a
  ><a name="16385"
  >   </a
  ><a name="16388" href="Session.html#16419" class="Bound"
  >i</a
  ><a name="16389"
  > </a
  ><a name="16390" href="Session.html#16413" class="Bound"
  >o</a
  ><a name="16391"
  > </a
  ><a name="16392" href="Session.html#16424" class="Bound"
  >gp</a
  ><a name="16394"
  > </a
  ><a name="16395" class="Symbol"
  >=</a
  ><a name="16396"
  > </a
  ><a name="16397" href="Session.html#14738" class="InductiveConstructor Operator"
  >[</a
  ><a name="16398"
  > </a
  ><a name="16399" href="Session.html#12789" class="InductiveConstructor"
  >T.corec</a
  ><a name="16406"
  > </a
  ><a name="16407" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16408"
  > </a
  ><a name="16409" class="Symbol"
  >(</a
  ><a name="16410" href="Session.html#6978" class="InductiveConstructor Operator"
  >%4</a
  ><a name="16412"
  > </a
  ><a name="16413" href="Session.html#16413" class="Bound"
  >o</a
  ><a name="16414" class="Symbol"
  >)</a
  ><a name="16415"
  > </a
  ><a name="16416" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16417"
  > </a
  ><a name="16418" class="Symbol"
  >(</a
  ><a name="16419" href="Session.html#16419" class="Bound"
  >i</a
  ><a name="16420"
  > </a
  ><a name="16421" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16422"
  > </a
  ><a name="16423" class="Symbol"
  >(</a
  ><a name="16424" href="Session.html#16424" class="Bound"
  >gp</a
  ><a name="16426"
  > </a
  ><a name="16427" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16428"
  > </a
  ><a name="16429" href="Relation.Binary.Core.html#4653" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="16431" class="Symbol"
  >))</a
  ><a name="16433"
  >          </a
  ><a name="16443" href="Session.html#14738" class="InductiveConstructor Operator"
  >]</a
  ><a name="16444"
  ></pre>
<p>(We plan to also define a view for these patterns, so that Agda's interactive splitting (<code>C-c C-c</code>) can be recovered after a <code>with</code>)</p>
<h4 id="monadic-binding-notation">Monadic binding notation</h4>
<p>For the binding operator we mimic Haskell's <code>do</code>-notation with a <code>syntax</code> declaration.</p>
<pre></a
  ><a name="16723" class="Keyword"
  >infixr</a
  ><a name="16729"
  > </a
  ><a name="16730" class="Number"
  >5</a
  ><a name="16731"
  > bind
</a
  ><a name="16737" href="Session.html#16737" class="Function"
  >bind</a
  ><a name="16741"
  > </a
  ><a name="16742" class="Symbol"
  >:</a
  ><a name="16743"
  > </a
  ><a name="16744" class="Symbol"
  >&#8704;</a
  ><a name="16745"
  > </a
  ><a name="16746" class="Symbol"
  >{</a
  ><a name="16747" href="Session.html#16747" class="Bound"
  >M</a
  ><a name="16748"
  > </a
  ><a name="16749" href="Session.html#16749" class="Bound"
  >&#915;</a
  ><a name="16750"
  > </a
  ><a name="16751" href="Session.html#16751" class="Bound"
  >&#926;</a
  ><a name="16752"
  > </a
  ><a name="16753" href="Session.html#16753" class="Bound"
  >&#916;</a
  ><a name="16754"
  > </a
  ><a name="16755" href="Session.html#16755" class="Bound"
  >X</a
  ><a name="16756"
  > </a
  ><a name="16757" href="Session.html#16757" class="Bound"
  >Y</a
  ><a name="16758" class="Symbol"
  >}</a
  ><a name="16759"
  > </a
  ><a name="16760" class="Symbol"
  >&#8594;</a
  ><a name="16761"
  > </a
  ><a name="16762" href="Session.html#16749" class="Bound"
  >&#915;</a
  ><a name="16763"
  > </a
  ><a name="16764" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="16765"
  > </a
  ><a name="16766" href="Session.html#16747" class="Bound"
  >M</a
  ><a name="16767"
  > </a
  ><a name="16768" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="16769"
  > </a
  ><a name="16770" href="Session.html#16757" class="Bound"
  >Y</a
  ><a name="16771"
  > </a
  ><a name="16772" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="16774"
  > </a
  ><a name="16775" href="Session.html#16751" class="Bound"
  >&#926;</a
  ><a name="16776"
  >  </a
  ><a name="16778" class="Symbol"
  >&#8594;</a
  ><a name="16779"
  > 
                    </a
  ><a name="16801" class="Symbol"
  >(</a
  ><a name="16802" href="Session.html#16757" class="Bound"
  >Y</a
  ><a name="16803"
  > </a
  ><a name="16804" class="Symbol"
  >&#8594;</a
  ><a name="16805"
  > </a
  ><a name="16806" href="Session.html#16751" class="Bound"
  >&#926;</a
  ><a name="16807"
  > </a
  ><a name="16808" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="16809"
  > </a
  ><a name="16810" href="Session.html#16747" class="Bound"
  >M</a
  ><a name="16811"
  > </a
  ><a name="16812" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="16813"
  > </a
  ><a name="16814" href="Session.html#16755" class="Bound"
  >X</a
  ><a name="16815"
  > </a
  ><a name="16816" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="16818"
  > </a
  ><a name="16819" href="Session.html#16753" class="Bound"
  >&#916;</a
  ><a name="16820" class="Symbol"
  >)</a
  ><a name="16821"
  > </a
  ><a name="16822" class="Symbol"
  >&#8594;</a
  ><a name="16823"
  > </a
  ><a name="16824" href="Session.html#16749" class="Bound"
  >&#915;</a
  ><a name="16825"
  > </a
  ><a name="16826" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="16827"
  > </a
  ><a name="16828" href="Session.html#16747" class="Bound"
  >M</a
  ><a name="16829"
  > </a
  ><a name="16830" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="16831"
  > </a
  ><a name="16832" href="Session.html#16755" class="Bound"
  >X</a
  ><a name="16833"
  > </a
  ><a name="16834" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="16836"
  > </a
  ><a name="16837" href="Session.html#16753" class="Bound"
  >&#916;</a
  ><a name="16838"
  >
</a
  ><a name="16839" href="Session.html#16737" class="Function"
  >bind</a
  ><a name="16843"
  > </a
  ><a name="16844" class="Symbol"
  >=</a
  ><a name="16845"
  > </a
  ><a name="16846" href="Session.html#14814" class="InductiveConstructor Operator"
  >_&#187;=_</a
  ><a name="16850"
  >
</a
  ><a name="16851" class="Keyword"
  >syntax</a
  ><a name="16857"
  > bind m </a
  ><a name="16865" class="Symbol"
  >(&#955;</a
  ><a name="16867"
  > x </a
  ><a name="16870" class="Symbol"
  >&#8594;</a
  ><a name="16871"
  > y</a
  ><a name="16873" class="Symbol"
  >)</a
  ><a name="16874"
  > </a
  ><a name="16875" class="Symbol"
  >=</a
  ><a name="16876"
  > x &lt;- m &#8943; y</pre>

<pre></a
  ><a name="16913" class="Keyword"
  >infixr</a
  ><a name="16919"
  > </a
  ><a name="16920" class="Number"
  >5</a
  ><a name="16921"
  > _&#187;_
</a
  ><a name="16926" href="Session.html#16926" class="Function Operator"
  >_&#187;_</a
  ><a name="16929"
  > </a
  ><a name="16930" class="Symbol"
  >:</a
  ><a name="16931"
  > </a
  ><a name="16932" class="Symbol"
  >&#8704;</a
  ><a name="16933"
  > </a
  ><a name="16934" class="Symbol"
  >{</a
  ><a name="16935" href="Session.html#16935" class="Bound"
  >M</a
  ><a name="16936"
  > </a
  ><a name="16937" href="Session.html#16937" class="Bound"
  >&#915;</a
  ><a name="16938"
  > </a
  ><a name="16939" href="Session.html#16939" class="Bound"
  >&#926;</a
  ><a name="16940"
  > </a
  ><a name="16941" href="Session.html#16941" class="Bound"
  >&#916;</a
  ><a name="16942"
  > </a
  ><a name="16943" href="Session.html#16943" class="Bound"
  >X</a
  ><a name="16944"
  > </a
  ><a name="16945" href="Session.html#16945" class="Bound"
  >Y</a
  ><a name="16946" class="Symbol"
  >}</a
  ><a name="16947"
  > </a
  ><a name="16948" class="Symbol"
  >&#8594;</a
  ><a name="16949"
  > </a
  ><a name="16950" href="Session.html#16937" class="Bound"
  >&#915;</a
  ><a name="16951"
  > </a
  ><a name="16952" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="16953"
  > </a
  ><a name="16954" href="Session.html#16935" class="Bound"
  >M</a
  ><a name="16955"
  > </a
  ><a name="16956" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="16957"
  > </a
  ><a name="16958" href="Session.html#16943" class="Bound"
  >X</a
  ><a name="16959"
  > </a
  ><a name="16960" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="16962"
  > </a
  ><a name="16963" href="Session.html#16939" class="Bound"
  >&#926;</a
  ><a name="16964"
  > </a
  ><a name="16965" class="Symbol"
  >&#8594;</a
  ><a name="16966"
  > </a
  ><a name="16967" href="Session.html#16939" class="Bound"
  >&#926;</a
  ><a name="16968"
  > </a
  ><a name="16969" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="16970"
  > </a
  ><a name="16971" href="Session.html#16935" class="Bound"
  >M</a
  ><a name="16972"
  > </a
  ><a name="16973" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="16974"
  > </a
  ><a name="16975" href="Session.html#16945" class="Bound"
  >Y</a
  ><a name="16976"
  > </a
  ><a name="16977" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="16979"
  > </a
  ><a name="16980" href="Session.html#16941" class="Bound"
  >&#916;</a
  ><a name="16981"
  > </a
  ><a name="16982" class="Symbol"
  >&#8594;</a
  ><a name="16983"
  > </a
  ><a name="16984" href="Session.html#16937" class="Bound"
  >&#915;</a
  ><a name="16985"
  > </a
  ><a name="16986" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="16987"
  > </a
  ><a name="16988" href="Session.html#16935" class="Bound"
  >M</a
  ><a name="16989"
  > </a
  ><a name="16990" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="16991"
  > </a
  ><a name="16992" href="Session.html#16945" class="Bound"
  >Y</a
  ><a name="16993"
  > </a
  ><a name="16994" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="16996"
  > </a
  ><a name="16997" href="Session.html#16941" class="Bound"
  >&#916;</a
  ><a name="16998"
  >
</a
  ><a name="16999" href="Session.html#16999" class="Bound"
  >m</a
  ><a name="17000"
  > </a
  ><a name="17001" href="Session.html#16926" class="Function Operator"
  >&#187;</a
  ><a name="17002"
  > </a
  ><a name="17003" href="Session.html#17003" class="Bound"
  >n</a
  ><a name="17004"
  > </a
  ><a name="17005" class="Symbol"
  >=</a
  ><a name="17006"
  > </a
  ><a name="17007" href="Session.html#16999" class="Bound"
  >m</a
  ><a name="17008"
  > </a
  ><a name="17009" href="Session.html#14814" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="17011"
  > </a
  ><a name="17012" class="Symbol"
  >&#955;</a
  ><a name="17013"
  > </a
  ><a name="17014" href="Session.html#17014" class="Bound"
  >_</a
  ><a name="17015"
  > </a
  ><a name="17016" class="Symbol"
  >&#8594;</a
  ><a name="17017"
  > </a
  ><a name="17018" href="Session.html#17003" class="Bound"
  >n</a
  ><a name="17019"
  ></pre>
<h4 id="write-and-read-dependently"><code>write</code> and <code>read</code> dependently</h4>
<p>We added <code>`^</code> to recover the <em>possibility</em> of making use of data exchanged by <code>write</code> and <code>read</code> at the type level.</p>
<pre></a
  ><a name="17203" href="Session.html#17203" class="Function"
  >put</a
  ><a name="17206"
  > </a
  ><a name="17207" class="Symbol"
  >:</a
  ><a name="17208"
  > </a
  ><a name="17209" class="Symbol"
  >&#8704;</a
  ><a name="17210"
  > </a
  ><a name="17211" class="Symbol"
  >{</a
  ><a name="17212" href="Session.html#17212" class="Bound"
  >M</a
  ><a name="17213"
  > </a
  ><a name="17214" href="Session.html#17214" class="Bound"
  >&#915;</a
  ><a name="17215" class="Symbol"
  >}{</a
  ><a name="17217" href="Session.html#17217" class="Bound"
  >I</a
  ><a name="17218"
  > </a
  ><a name="17219" href="Session.html#17219" class="Bound"
  >O</a
  ><a name="17220"
  > </a
  ><a name="17221" href="Session.html#17221" class="Bound"
  >A</a
  ><a name="17222"
  > </a
  ><a name="17223" class="Symbol"
  >:</a
  ><a name="17224"
  > </a
  ><a name="17225" class="PrimitiveType"
  >Set</a
  ><a name="17228" class="Symbol"
  >}{</a
  ><a name="17230" href="Session.html#17230" class="Bound"
  >T</a
  ><a name="17231"
  > </a
  ><a name="17232" class="Symbol"
  >:</a
  ><a name="17233"
  > </a
  ><a name="17234" href="Session.html#17221" class="Bound"
  >A</a
  ><a name="17235"
  > </a
  ><a name="17236" class="Symbol"
  >&#8594;</a
  ><a name="17237"
  > </a
  ><a name="17238" href="Session.html#1990" class="Function"
  >De</a
  ><a name="17240"
  > </a
  ><a name="17241" href="Session.html#17217" class="Bound"
  >I</a
  ><a name="17242" class="Symbol"
  >}{</a
  ><a name="17244" href="Session.html#17244" class="Bound"
  >s</a
  ><a name="17245" class="Symbol"
  >}</a
  ><a name="17246"
  > </a
  ><a name="17247" class="Symbol"
  >&#8594;</a
  ><a name="17248"
  >
      </a
  ><a name="17255" class="Symbol"
  >(</a
  ><a name="17256" href="Session.html#17256" class="Bound"
  >i</a
  ><a name="17257"
  > </a
  ><a name="17258" class="Symbol"
  >:</a
  ><a name="17259"
  > </a
  ><a name="17260" class="Symbol"
  >(</a
  ><a name="17261" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="17262"
  > </a
  ><a name="17263" href="Session.html#17244" class="Bound"
  >s</a
  ><a name="17264"
  > </a
  ><a name="17265" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17266"
  > </a
  ><a name="17267" href="Session.html#17217" class="Bound"
  >I</a
  ><a name="17268"
  > </a
  ><a name="17269" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17270"
  > </a
  ><a name="17271" href="Session.html#17219" class="Bound"
  >O</a
  ><a name="17272"
  > </a
  ><a name="17273" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17274"
  > </a
  ><a name="17275" href="Session.html#3459" class="Function Operator"
  >[</a
  ><a name="17276"
  > </a
  ><a name="17277" href="Session.html#17244" class="Bound"
  >s</a
  ><a name="17278"
  > </a
  ><a name="17279" href="Session.html#3459" class="Function Operator"
  >]&#931;</a
  ><a name="17281"
  > </a
  ><a name="17282" href="Session.html#17221" class="Bound"
  >A</a
  ><a name="17283"
  > </a
  ><a name="17284" class="Symbol"
  >(</a
  ><a name="17285" href="Session.html#2383" class="InductiveConstructor"
  >`^</a
  ><a name="17287"
  > </a
  ><a name="17288" href="Session.html#17230" class="Bound"
  >T</a
  ><a name="17289" class="Symbol"
  >))</a
  ><a name="17291"
  > </a
  ><a name="17292" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="17293"
  > </a
  ><a name="17294" href="Session.html#17214" class="Bound"
  >&#915;</a
  ><a name="17295" class="Symbol"
  >)</a
  ><a name="17296"
  > </a
  ><a name="17297" class="Symbol"
  >&#8594;</a
  ><a name="17298"
  >
      </a
  ><a name="17305" class="Symbol"
  >(</a
  ><a name="17306" href="Session.html#17306" class="Bound"
  >a</a
  ><a name="17307"
  > </a
  ><a name="17308" class="Symbol"
  >:</a
  ><a name="17309"
  > </a
  ><a name="17310" href="Session.html#17221" class="Bound"
  >A</a
  ><a name="17311" class="Symbol"
  >)</a
  ><a name="17312"
  > </a
  ><a name="17313" class="Symbol"
  >&#8594;</a
  ><a name="17314"
  > </a
  ><a name="17315" href="Session.html#17214" class="Bound"
  >&#915;</a
  ><a name="17316"
  > </a
  ><a name="17317" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="17318"
  > </a
  ><a name="17319" href="Session.html#17212" class="Bound"
  >M</a
  ><a name="17320"
  > </a
  ><a name="17321" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="17322"
  > </a
  ><a name="17323" href="Session.html#17221" class="Bound"
  >A</a
  ><a name="17324"
  > </a
  ><a name="17325" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="17327"
  > </a
  ><a name="17328" class="Symbol"
  >(</a
  ><a name="17329" href="Session.Base.html#3414" class="Function"
  >ud</a
  ><a name="17331"
  > </a
  ><a name="17332" class="Symbol"
  >(</a
  ><a name="17333" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="17334"
  > </a
  ><a name="17335" href="Session.html#17244" class="Bound"
  >s</a
  ><a name="17336"
  > </a
  ><a name="17337" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17338"
  > </a
  ><a name="17339" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="17341"
  > </a
  ><a name="17342" href="Session.html#17230" class="Bound"
  >T</a
  ><a name="17343"
  > </a
  ><a name="17344" href="Session.html#17306" class="Bound"
  >a</a
  ><a name="17345" class="Symbol"
  >)</a
  ><a name="17346"
  > </a
  ><a name="17347" class="Symbol"
  >(</a
  ><a name="17348" href="Session.Base.html#3535" class="Function"
  >&#8712;ud</a
  ><a name="17351"
  > </a
  ><a name="17352" href="Session.html#17256" class="Bound"
  >i</a
  ><a name="17353" class="Symbol"
  >))</a
  ><a name="17355"
  >
</a
  ><a name="17356" href="Session.html#17203" class="Function"
  >put</a
  ><a name="17359"
  > </a
  ><a name="17360" href="Session.html#17360" class="Bound"
  >i</a
  ><a name="17361"
  > </a
  ><a name="17362" href="Session.html#17362" class="Bound"
  >a</a
  ><a name="17363"
  > </a
  ><a name="17364" class="Symbol"
  >=</a
  ><a name="17365"
  > </a
  ><a name="17366" href="Session.html#15976" class="InductiveConstructor"
  >write</a
  ><a name="17371"
  > </a
  ><a name="17372" href="Session.html#17360" class="Bound"
  >i</a
  ><a name="17373"
  > </a
  ><a name="17374" href="Session.html#17362" class="Bound"
  >a</a
  ><a name="17375"
  > </a
  ><a name="17376" href="Session.html#14814" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="17378"
  > </a
  ><a name="17379" class="Symbol"
  >&#955;</a
  ><a name="17380"
  > </a
  ><a name="17381" href="Session.html#17381" class="Bound"
  >_</a
  ><a name="17382"
  > </a
  ><a name="17383" class="Symbol"
  >&#8594;</a
  ><a name="17384"
  > </a
  ><a name="17385" href="Session.html#16306" class="InductiveConstructor"
  >at</a
  ><a name="17387"
  > </a
  ><a name="17388" class="Symbol"
  >(</a
  ><a name="17389" href="Session.Base.html#3535" class="Function"
  >&#8712;ud</a
  ><a name="17392"
  > </a
  ><a name="17393" href="Session.html#17360" class="Bound"
  >i</a
  ><a name="17394" class="Symbol"
  >)</a
  ><a name="17395"
  >

</a
  ><a name="17397" href="Session.html#17397" class="Function"
  >get</a
  ><a name="17400"
  > </a
  ><a name="17401" class="Symbol"
  >:</a
  ><a name="17402"
  > </a
  ><a name="17403" class="Symbol"
  >&#8704;</a
  ><a name="17404"
  > </a
  ><a name="17405" class="Symbol"
  >{</a
  ><a name="17406" href="Session.html#17406" class="Bound"
  >M</a
  ><a name="17407"
  > </a
  ><a name="17408" href="Session.html#17408" class="Bound"
  >&#915;</a
  ><a name="17409"
  > </a
  ><a name="17410" href="Session.html#17410" class="Bound"
  >&#916;</a
  ><a name="17411" class="Symbol"
  >}{</a
  ><a name="17413" href="Session.html#17413" class="Bound"
  >I</a
  ><a name="17414"
  > </a
  ><a name="17415" href="Session.html#17415" class="Bound"
  >O</a
  ><a name="17416"
  > </a
  ><a name="17417" href="Session.html#17417" class="Bound"
  >A</a
  ><a name="17418"
  > </a
  ><a name="17419" href="Session.html#17419" class="Bound"
  >B</a
  ><a name="17420"
  > </a
  ><a name="17421" class="Symbol"
  >:</a
  ><a name="17422"
  > </a
  ><a name="17423" class="PrimitiveType"
  >Set</a
  ><a name="17426" class="Symbol"
  >}{</a
  ><a name="17428" href="Session.html#17428" class="Bound"
  >T</a
  ><a name="17429"
  > </a
  ><a name="17430" class="Symbol"
  >:</a
  ><a name="17431"
  > </a
  ><a name="17432" href="Session.html#17417" class="Bound"
  >A</a
  ><a name="17433"
  > </a
  ><a name="17434" class="Symbol"
  >&#8594;</a
  ><a name="17435"
  > </a
  ><a name="17436" href="Session.html#1990" class="Function"
  >De</a
  ><a name="17438"
  > </a
  ><a name="17439" href="Session.html#17413" class="Bound"
  >I</a
  ><a name="17440" class="Symbol"
  >}{</a
  ><a name="17442" href="Session.html#17442" class="Bound"
  >s</a
  ><a name="17443" class="Symbol"
  >}</a
  ><a name="17444"
  >
      </a
  ><a name="17451" class="Symbol"
  >(</a
  ><a name="17452" href="Session.html#17452" class="Bound"
  >i</a
  ><a name="17453"
  > </a
  ><a name="17454" class="Symbol"
  >:</a
  ><a name="17455"
  > </a
  ><a name="17456" class="Symbol"
  >(</a
  ><a name="17457" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="17458"
  > </a
  ><a name="17459" href="Session.html#17442" class="Bound"
  >s</a
  ><a name="17460"
  > </a
  ><a name="17461" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17462"
  > </a
  ><a name="17463" href="Session.html#17413" class="Bound"
  >I</a
  ><a name="17464"
  > </a
  ><a name="17465" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17466"
  > </a
  ><a name="17467" href="Session.html#17415" class="Bound"
  >O</a
  ><a name="17468"
  > </a
  ><a name="17469" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17470"
  > </a
  ><a name="17471" href="Session.html#3466" class="Function Operator"
  >[</a
  ><a name="17472"
  > </a
  ><a name="17473" href="Session.html#17442" class="Bound"
  >s</a
  ><a name="17474"
  > </a
  ><a name="17475" href="Session.html#3466" class="Function Operator"
  >]&#928;</a
  ><a name="17477"
  > </a
  ><a name="17478" href="Session.html#17417" class="Bound"
  >A</a
  ><a name="17479"
  > </a
  ><a name="17480" class="Symbol"
  >(</a
  ><a name="17481" href="Session.html#2383" class="InductiveConstructor"
  >`^</a
  ><a name="17483"
  > </a
  ><a name="17484" href="Session.html#17428" class="Bound"
  >T</a
  ><a name="17485" class="Symbol"
  >))</a
  ><a name="17487"
  > </a
  ><a name="17488" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="17489"
  > </a
  ><a name="17490" href="Session.html#17408" class="Bound"
  >&#915;</a
  ><a name="17491" class="Symbol"
  >)</a
  ><a name="17492"
  > </a
  ><a name="17493" class="Symbol"
  >&#8594;</a
  ><a name="17494"
  >
      </a
  ><a name="17501" class="Symbol"
  >(</a
  ><a name="17502" href="Session.html#17502" class="Bound"
  >f</a
  ><a name="17503"
  > </a
  ><a name="17504" class="Symbol"
  >:</a
  ><a name="17505"
  > </a
  ><a name="17506" class="Symbol"
  >&#8704;</a
  ><a name="17507"
  > </a
  ><a name="17508" href="Session.html#17508" class="Bound"
  >a</a
  ><a name="17509"
  > </a
  ><a name="17510" class="Symbol"
  >&#8594;</a
  ><a name="17511"
  > </a
  ><a name="17512" href="Session.Base.html#3414" class="Function"
  >ud</a
  ><a name="17514"
  > </a
  ><a name="17515" class="Symbol"
  >(</a
  ><a name="17516" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="17517"
  > </a
  ><a name="17518" href="Session.html#17442" class="Bound"
  >s</a
  ><a name="17519"
  > </a
  ><a name="17520" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17521"
  > </a
  ><a name="17522" href="Session.html#6932" class="InductiveConstructor Operator"
  >%2</a
  ><a name="17524"
  > </a
  ><a name="17525" href="Session.html#17428" class="Bound"
  >T</a
  ><a name="17526"
  > </a
  ><a name="17527" href="Session.html#17508" class="Bound"
  >a</a
  ><a name="17528" class="Symbol"
  >)</a
  ><a name="17529"
  > </a
  ><a name="17530" class="Symbol"
  >(</a
  ><a name="17531" href="Session.Base.html#3535" class="Function"
  >&#8712;ud</a
  ><a name="17534"
  > </a
  ><a name="17535" href="Session.html#17452" class="Bound"
  >i</a
  ><a name="17536" class="Symbol"
  >)</a
  ><a name="17537"
  > </a
  ><a name="17538" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="17539"
  > </a
  ><a name="17540" href="Session.html#17406" class="Bound"
  >M</a
  ><a name="17541"
  > </a
  ><a name="17542" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="17543"
  > </a
  ><a name="17544" href="Session.html#17419" class="Bound"
  >B</a
  ><a name="17545"
  > </a
  ><a name="17546" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="17548"
  > </a
  ><a name="17549" href="Session.html#17410" class="Bound"
  >&#916;</a
  ><a name="17550" class="Symbol"
  >)</a
  ><a name="17551"
  > </a
  ><a name="17552" class="Symbol"
  >&#8594;</a
  ><a name="17553"
  >
      </a
  ><a name="17560" href="Session.html#17408" class="Bound"
  >&#915;</a
  ><a name="17561"
  > </a
  ><a name="17562" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="17563"
  > </a
  ><a name="17564" href="Session.html#17406" class="Bound"
  >M</a
  ><a name="17565"
  > </a
  ><a name="17566" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="17567"
  > </a
  ><a name="17568" href="Session.html#17419" class="Bound"
  >B</a
  ><a name="17569"
  > </a
  ><a name="17570" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="17572"
  > </a
  ><a name="17573" href="Session.html#17410" class="Bound"
  >&#916;</a
  ><a name="17574"
  >
</a
  ><a name="17575" href="Session.html#17397" class="Function"
  >get</a
  ><a name="17578"
  > </a
  ><a name="17579" href="Session.html#17579" class="Bound"
  >i</a
  ><a name="17580"
  > </a
  ><a name="17581" href="Session.html#17581" class="Bound"
  >f</a
  ><a name="17582"
  > </a
  ><a name="17583" class="Symbol"
  >=</a
  ><a name="17584"
  > </a
  ><a name="17585" href="Session.html#16050" class="InductiveConstructor"
  >read</a
  ><a name="17589"
  > </a
  ><a name="17590" href="Session.html#17579" class="Bound"
  >i</a
  ><a name="17591"
  > </a
  ><a name="17592" href="Session.html#14814" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="17594"
  > </a
  ><a name="17595" class="Symbol"
  >&#955;</a
  ><a name="17596"
  > </a
  ><a name="17597" href="Session.html#17597" class="Bound"
  >a</a
  ><a name="17598"
  > </a
  ><a name="17599" class="Symbol"
  >&#8594;</a
  ><a name="17600"
  > </a
  ><a name="17601" href="Session.html#16306" class="InductiveConstructor"
  >at</a
  ><a name="17603"
  > </a
  ><a name="17604" class="Symbol"
  >(</a
  ><a name="17605" href="Session.Base.html#3535" class="Function"
  >&#8712;ud</a
  ><a name="17608"
  > </a
  ><a name="17609" href="Session.html#17579" class="Bound"
  >i</a
  ><a name="17610" class="Symbol"
  >)</a
  ><a name="17611"
  > </a
  ><a name="17612" href="Session.html#16926" class="Function Operator"
  >&#187;</a
  ><a name="17613"
  > </a
  ><a name="17614" href="Session.html#17581" class="Bound"
  >f</a
  ><a name="17615"
  > </a
  ><a name="17616" href="Session.html#17597" class="Bound"
  >a</a
  ><a name="17617"
  ></pre>
<h4 id="new-channel-for--indexed-sessions"><code>new</code> channel for ⊤-indexed sessions</h4>
<p>We often create channels for stateful sessions where both index sets are <code>⊤</code>: using <code>new⊤</code> helps inference.</p>
<pre></a
  ><a name="17795" href="Session.html#17795" class="Function"
  >new&#8868;</a
  ><a name="17799"
  > </a
  ><a name="17800" class="Symbol"
  >:</a
  ><a name="17801"
  > </a
  ><a name="17802" class="Symbol"
  >&#8704;</a
  ><a name="17803"
  > </a
  ><a name="17804" class="Symbol"
  >{</a
  ><a name="17805" href="Session.html#17805" class="Bound"
  >&#915;</a
  ><a name="17806"
  > </a
  ><a name="17807" href="Session.html#17807" class="Bound"
  >M</a
  ><a name="17808"
  > </a
  ><a name="17809" href="Session.html#17809" class="Bound"
  >F</a
  ><a name="17810" class="Symbol"
  >}</a
  ><a name="17811"
  > </a
  ><a name="17812" class="Symbol"
  >&#8594;</a
  ><a name="17813"
  > </a
  ><a name="17814" href="Session.html#17805" class="Bound"
  >&#915;</a
  ><a name="17815"
  > </a
  ><a name="17816" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="17817"
  > </a
  ><a name="17818" href="Session.html#17807" class="Bound"
  >M</a
  ><a name="17819"
  > </a
  ><a name="17820" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="17821"
  > </a
  ><a name="17822" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="17823"
  > </a
  ><a name="17824" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="17826"
  > </a
  ><a name="17827" href="Session.html#17805" class="Bound"
  >&#915;</a
  ><a name="17828"
  > </a
  ><a name="17829" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="17830"
  > </a
  ><a name="17831" class="Symbol"
  >(</a
  ><a name="17832" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="17833"
  > </a
  ><a name="17834" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17835"
  > </a
  ><a name="17836" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="17837"
  > </a
  ><a name="17838" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17839"
  > </a
  ><a name="17840" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="17841"
  > </a
  ><a name="17842" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17843"
  > </a
  ><a name="17844" href="Session.html#17809" class="Bound"
  >F</a
  ><a name="17845" class="Symbol"
  >)</a
  ><a name="17846"
  >
</a
  ><a name="17847" href="Session.html#17795" class="Function"
  >new&#8868;</a
  ><a name="17851"
  > </a
  ><a name="17852" class="Symbol"
  >=</a
  ><a name="17853"
  > </a
  ><a name="17854" href="Session.html#15458" class="InductiveConstructor"
  >new</a
  ><a name="17857"
  ></pre>
<h2 id="haskell-evaluator">Haskell evaluator</h2>
<p>To make an efficient use of Haskell channels, while forgetting the data required to compute their &quot;changing&quot; types, we resort to making a <em>sensible</em> use of <strong>unsafe</strong> casts. What follows should therefore be considered as an extension to the <em>trusted base</em>.</p>
<p>We provide <strong>no correctness proof</strong> for this evaluator.</p>
<pre></a
  ><a name="18220" class="Keyword"
  >private</a
  ><a name="18227"
  >

  </a
  ><a name="18231" class="Keyword"
  >postulate</a
  ><a name="18240"
  >
    </a
  ><a name="18245" href="Session.html#18245" class="Postulate"
  >unsafeCoerce</a
  ><a name="18257"
  > </a
  ><a name="18258" class="Symbol"
  >:</a
  ><a name="18259"
  > </a
  ><a name="18260" class="Symbol"
  >&#8704;</a
  ><a name="18261"
  > </a
  ><a name="18262" class="Symbol"
  >{</a
  ><a name="18263" href="Session.html#18263" class="Bound"
  >l1</a
  ><a name="18265" class="Symbol"
  >}{</a
  ><a name="18267" href="Session.html#18267" class="Bound"
  >A</a
  ><a name="18268"
  > </a
  ><a name="18269" class="Symbol"
  >:</a
  ><a name="18270"
  > </a
  ><a name="18271" class="PrimitiveType"
  >Set</a
  ><a name="18274"
  > </a
  ><a name="18275" href="Session.html#18263" class="Bound"
  >l1</a
  ><a name="18277" class="Symbol"
  >}{</a
  ><a name="18279" href="Session.html#18279" class="Bound"
  >l2</a
  ><a name="18281" class="Symbol"
  >}{</a
  ><a name="18283" href="Session.html#18283" class="Bound"
  >B</a
  ><a name="18284"
  > </a
  ><a name="18285" class="Symbol"
  >:</a
  ><a name="18286"
  > </a
  ><a name="18287" class="PrimitiveType"
  >Set</a
  ><a name="18290"
  > </a
  ><a name="18291" href="Session.html#18279" class="Bound"
  >l2</a
  ><a name="18293" class="Symbol"
  >}</a
  ><a name="18294"
  > </a
  ><a name="18295" class="Symbol"
  >&#8594;</a
  ><a name="18296"
  > </a
  ><a name="18297" href="Session.html#18267" class="Bound"
  >A</a
  ><a name="18298"
  > </a
  ><a name="18299" class="Symbol"
  >&#8594;</a
  ><a name="18300"
  > </a
  ><a name="18301" href="Session.html#18283" class="Bound"
  >B</a
  ><a name="18302"
  >

  </a
  ><a name="18306" class="Symbol"
  >{-#</a
  ><a name="18309"
  > </a
  ><a name="18310" class="Keyword"
  >IMPORT</a
  ><a name="18316"
  >   Unsafe.Coerce                                          </a
  ><a name="18374" class="Symbol"
  >#-}</a
  ><a name="18377"
  >
  </a
  ><a name="18380" class="Symbol"
  >{-#</a
  ><a name="18383"
  > </a
  ><a name="18384" class="Keyword"
  >COMPILED</a
  ><a name="18392"
  > </a
  ><a name="18393" href="Session.html#18245" class="Postulate"
  >unsafeCoerce</a
  ><a name="18405"
  > (\ _ _ _ _ -&gt; Unsafe.Coerce.unsafeCoerce) </a
  ><a name="18448" class="Symbol"
  >#-}</a
  ><a name="18451"
  ></pre>

<pre></a
  ><a name="18477" class="Keyword"
  >open</a
  ><a name="18481"
  > </a
  ><a name="18482" class="Keyword"
  >import</a
  ><a name="18488"
  > </a
  ><a name="18489" href="IO.Primitive.html#1" class="Module"
  >IO.Primitive</a
  ><a name="18501"
  > </a
  ><a name="18502" class="Keyword"
  >using</a
  ><a name="18507"
  > </a
  ><a name="18508" class="Symbol"
  >(</a
  ><a name="18509"
  >IO </a
  ><a name="18512" class="Symbol"
  >;</a
  ><a name="18513"
  > return </a
  ><a name="18521" class="Symbol"
  >;</a
  ><a name="18522"
  > _&gt;&gt;=_ </a
  ><a name="18529" class="Symbol"
  >;</a
  ><a name="18530"
  > putStr </a
  ><a name="18538" class="Symbol"
  >;</a
  ><a name="18539"
  > putStrLn</a
  ><a name="18548" class="Symbol"
  >)</a
  ><a name="18549"
  >
</a
  ><a name="18550" class="Keyword"
  >module</a
  ><a name="18556"
  > </a
  ><a name="18557" href="Session.html#18557" class="Module"
  >IO</a
  ><a name="18559"
  > </a
  ><a name="18560" class="Symbol"
  >=</a
  ><a name="18561"
  > </a
  ><a name="18562" href="IO.Primitive.html#1" class="Module"
  >IO.Primitive</a
  ><a name="18574"
  ></pre>

<pre></a
  ><a name="18600" class="Keyword"
  >infix</a
  ><a name="18605"
  > </a
  ><a name="18606" class="Number"
  >2</a
  ><a name="18607"
  > _[IO_]&gt;_
</a
  ><a name="18617" href="Session.html#18617" class="Function Operator"
  >_[IO_]&gt;_</a
  ><a name="18625"
  > </a
  ><a name="18626" class="Symbol"
  >=</a
  ><a name="18627"
  > </a
  ><a name="18628" class="Symbol"
  >&#955;</a
  ><a name="18629"
  > </a
  ><a name="18630" href="Session.html#18630" class="Bound"
  >&#915;</a
  ><a name="18631"
  > </a
  ><a name="18632" href="Session.html#18632" class="Bound"
  >X</a
  ><a name="18633"
  > </a
  ><a name="18634" href="Session.html#18634" class="Bound"
  >&#916;</a
  ><a name="18635"
  > </a
  ><a name="18636" class="Symbol"
  >&#8594;</a
  ><a name="18637"
  > </a
  ><a name="18638" href="Session.html#18630" class="Bound"
  >&#915;</a
  ><a name="18639"
  > </a
  ><a name="18640" href="Session.html#14611" class="Datatype Operator"
  >[</a
  ><a name="18641"
  > </a
  ><a name="18642" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="18644"
  > </a
  ><a name="18645" href="Session.html#14611" class="Datatype Operator"
  >&#8866;</a
  ><a name="18646"
  > </a
  ><a name="18647" href="Session.html#18632" class="Bound"
  >X</a
  ><a name="18648"
  > </a
  ><a name="18649" href="Session.html#14611" class="Datatype Operator"
  >]&gt;</a
  ><a name="18651"
  > </a
  ><a name="18652" href="Session.html#18634" class="Bound"
  >&#916;</a
  ><a name="18653"
  >

</a
  ><a name="18655" href="Session.html#18655" class="Function"
  >IOProc</a
  ><a name="18661"
  > </a
  ><a name="18662" class="Symbol"
  >=</a
  ><a name="18663"
  > </a
  ><a name="18664" class="Symbol"
  >&#955;</a
  ><a name="18665"
  > </a
  ><a name="18666" href="Session.html#18666" class="Bound"
  >X</a
  ><a name="18667"
  > </a
  ><a name="18668" class="Symbol"
  >&#8594;</a
  ><a name="18669"
  > </a
  ><a name="18670" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="18672"
  > </a
  ><a name="18673" href="Session.html#18617" class="Function Operator"
  >[IO</a
  ><a name="18676"
  > </a
  ><a name="18677" href="Session.html#18666" class="Bound"
  >X</a
  ><a name="18678"
  > </a
  ><a name="18679" href="Session.html#18617" class="Function Operator"
  >]&gt;</a
  ><a name="18681"
  > </a
  ><a name="18682" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="18684"
  >

</a
  ><a name="18686" class="Keyword"
  >open</a
  ><a name="18690"
  > </a
  ><a name="18691" class="Keyword"
  >import</a
  ><a name="18697"
  > </a
  ><a name="18698" href="Control.Concurrent.html#1" class="Module"
  >Control.Concurrent</a
  ><a name="18716"
  > </a
  ><a name="18717" class="Symbol"
  >as</a
  ><a name="18719"
  > </a
  ><a name="18720" class="Module"
  >C</a
  ><a name="18721"
  >
</a
  ><a name="18722" class="Keyword"
  >open</a
  ><a name="18726"
  > </a
  ><a name="18727" class="Keyword"
  >import</a
  ><a name="18733"
  > </a
  ><a name="18734" href="Control.Concurrent.Chan.Synchronous.html#1" class="Module"
  >Control.Concurrent.Chan.Synchronous</a
  ><a name="18769"
  ></pre>
<p>We need our channels to be untyped, to obtain which we postulate an abstract type and use unsafe coercions to and from it.</p>
<p>This is similar to Pucella and Tov's embedding in <a href="http://www.eecs.harvard.edu/~tov/pubs/haskell-session-types/">&quot;Haskell Session Types with (Almost) No Class&quot;</a>.</p>
<pre></a
  ><a name="19082" class="Keyword"
  >postulate</a
  ><a name="19091"
  > </a
  ><a name="19092" href="Session.html#19092" class="Postulate"
  >Abs</a
  ><a name="19095"
  > </a
  ><a name="19096" class="Symbol"
  >:</a
  ><a name="19097"
  > </a
  ><a name="19098" class="PrimitiveType"
  >Set</a
  ><a name="19101"
  >

</a
  ><a name="19103" href="Session.html#19103" class="Function"
  >UChan</a
  ><a name="19108"
  > </a
  ><a name="19109" class="Symbol"
  >=</a
  ><a name="19110"
  > </a
  ><a name="19111" href="Control.Concurrent.Chan.Synchronous.html#131" class="Postulate"
  >Chan</a
  ><a name="19115"
  > </a
  ><a name="19116" href="Session.html#19092" class="Postulate"
  >Abs</a
  ><a name="19119"
  ></pre>
<p>The channels for a context.</p>
<pre></a
  ><a name="19174" href="Session.html#19174" class="Function Operator"
  >&#10214;_&#10215;Cx</a
  ><a name="19179"
  > </a
  ><a name="19180" class="Symbol"
  >:</a
  ><a name="19181"
  > </a
  ><a name="19182" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="19184"
  > </a
  ><a name="19185" class="Symbol"
  >&#8594;</a
  ><a name="19186"
  > </a
  ><a name="19187" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="19191"
  >
</a
  ><a name="19192" href="Session.html#19174" class="Function Operator"
  >&#10214;_&#10215;Cx</a
  ><a name="19197"
  > </a
  ><a name="19198" class="Symbol"
  >=</a
  ><a name="19199"
  > </a
  ><a name="19200" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="19203"
  > </a
  ><a name="19204" class="Symbol"
  >&#955;</a
  ><a name="19205"
  > </a
  ><a name="19206" href="Session.html#19206" class="Bound"
  >_</a
  ><a name="19207"
  > </a
  ><a name="19208" class="Symbol"
  >&#8594;</a
  ><a name="19209"
  > </a
  ><a name="19210" href="Session.html#19103" class="Function"
  >UChan</a
  ><a name="19215"
  ></pre>

<pre></a
  ><a name="19241" href="Session.html#19241" class="Function"
  >lookupUChan</a
  ><a name="19252"
  > </a
  ><a name="19253" class="Symbol"
  >:</a
  ><a name="19254"
  > </a
  ><a name="19255" class="Symbol"
  >&#8704;</a
  ><a name="19256"
  > </a
  ><a name="19257" class="Symbol"
  >{</a
  ><a name="19258" href="Session.html#19258" class="Bound"
  >&#915;</a
  ><a name="19259"
  > </a
  ><a name="19260" href="Session.html#19260" class="Bound"
  >C</a
  ><a name="19261" class="Symbol"
  >}</a
  ><a name="19262"
  > </a
  ><a name="19263" class="Symbol"
  >&#8594;</a
  ><a name="19264"
  > </a
  ><a name="19265" class="Symbol"
  >(</a
  ><a name="19266" href="Session.html#19266" class="Bound"
  >i</a
  ><a name="19267"
  > </a
  ><a name="19268" class="Symbol"
  >:</a
  ><a name="19269"
  > </a
  ><a name="19270" href="Session.html#19260" class="Bound"
  >C</a
  ><a name="19271"
  > </a
  ><a name="19272" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="19273"
  > </a
  ><a name="19274" href="Session.html#19258" class="Bound"
  >&#915;</a
  ><a name="19275" class="Symbol"
  >)</a
  ><a name="19276"
  > </a
  ><a name="19277" class="Symbol"
  >&#8594;</a
  ><a name="19278"
  > </a
  ><a name="19279" href="Session.html#19174" class="Function Operator"
  >&#10214;</a
  ><a name="19280"
  > </a
  ><a name="19281" href="Session.html#19258" class="Bound"
  >&#915;</a
  ><a name="19282"
  > </a
  ><a name="19283" href="Session.html#19174" class="Function Operator"
  >&#10215;Cx</a
  ><a name="19286"
  > </a
  ><a name="19287" class="Symbol"
  >&#8594;</a
  ><a name="19288"
  > </a
  ><a name="19289" href="Session.html#19103" class="Function"
  >UChan</a
  ><a name="19294"
  >
</a
  ><a name="19295" href="Session.html#19241" class="Function"
  >lookupUChan</a
  ><a name="19306"
  > </a
  ><a name="19307" href="Session.html#19307" class="Bound"
  >i</a
  ><a name="19308"
  > </a
  ><a name="19309" href="Session.html#19309" class="Bound"
  >cs</a
  ><a name="19311"
  > </a
  ><a name="19312" class="Symbol"
  >=</a
  ><a name="19313"
  > </a
  ><a name="19314" href="Data.Product.html#539" class="Field"
  >snd</a
  ><a name="19317"
  > </a
  ><a name="19318" class="Symbol"
  >(</a
  ><a name="19319" href="Session.Base.html#3859" class="Function"
  >lookupAll</a
  ><a name="19328"
  > </a
  ><a name="19329" href="Session.html#19307" class="Bound"
  >i</a
  ><a name="19330"
  > </a
  ><a name="19331" href="Session.html#19309" class="Bound"
  >cs</a
  ><a name="19333" class="Symbol"
  >)</a
  ><a name="19334"
  ></pre>
<p>We need some Haskell helpers.</p>
<p>Note that our channels are ultimately implemented on top of Jesse Tov's <code>synchronous-channels</code> package: for this reason, currently all the interactions are synchronous (blocking).</p>
<pre></a
  ><a name="19572" class="Keyword"
  >infixl</a
  ><a name="19578"
  > </a
  ><a name="19579" class="Number"
  >1</a
  ><a name="19580"
  > _&gt;&gt;_

</a
  ><a name="19587" href="Session.html#19587" class="Function Operator"
  >_&gt;&gt;_</a
  ><a name="19591"
  > </a
  ><a name="19592" class="Symbol"
  >:</a
  ><a name="19593"
  > </a
  ><a name="19594" class="Symbol"
  >&#8704;</a
  ><a name="19595"
  > </a
  ><a name="19596" class="Symbol"
  >{</a
  ><a name="19597" href="Session.html#19597" class="Bound"
  >lA</a
  ><a name="19599"
  > </a
  ><a name="19600" href="Session.html#19600" class="Bound"
  >lB</a
  ><a name="19602" class="Symbol"
  >}{</a
  ><a name="19604" href="Session.html#19604" class="Bound"
  >A</a
  ><a name="19605"
  > </a
  ><a name="19606" class="Symbol"
  >:</a
  ><a name="19607"
  > </a
  ><a name="19608" class="PrimitiveType"
  >Set</a
  ><a name="19611"
  > </a
  ><a name="19612" href="Session.html#19597" class="Bound"
  >lA</a
  ><a name="19614" class="Symbol"
  >}{</a
  ><a name="19616" href="Session.html#19616" class="Bound"
  >B</a
  ><a name="19617"
  > </a
  ><a name="19618" class="Symbol"
  >:</a
  ><a name="19619"
  > </a
  ><a name="19620" class="PrimitiveType"
  >Set</a
  ><a name="19623"
  > </a
  ><a name="19624" href="Session.html#19600" class="Bound"
  >lB</a
  ><a name="19626" class="Symbol"
  >}</a
  ><a name="19627"
  > </a
  ><a name="19628" class="Symbol"
  >&#8594;</a
  ><a name="19629"
  > </a
  ><a name="19630" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="19632"
  > </a
  ><a name="19633" href="Session.html#19604" class="Bound"
  >A</a
  ><a name="19634"
  > </a
  ><a name="19635" class="Symbol"
  >&#8594;</a
  ><a name="19636"
  > </a
  ><a name="19637" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="19639"
  > </a
  ><a name="19640" href="Session.html#19616" class="Bound"
  >B</a
  ><a name="19641"
  > </a
  ><a name="19642" class="Symbol"
  >&#8594;</a
  ><a name="19643"
  > </a
  ><a name="19644" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="19646"
  > </a
  ><a name="19647" href="Session.html#19616" class="Bound"
  >B</a
  ><a name="19648"
  >
</a
  ><a name="19649" href="Session.html#19649" class="Bound"
  >m</a
  ><a name="19650"
  > </a
  ><a name="19651" href="Session.html#19587" class="Function Operator"
  >&gt;&gt;</a
  ><a name="19653"
  > </a
  ><a name="19654" href="Session.html#19654" class="Bound"
  >n</a
  ><a name="19655"
  > </a
  ><a name="19656" class="Symbol"
  >=</a
  ><a name="19657"
  > </a
  ><a name="19658" href="Session.html#19649" class="Bound"
  >m</a
  ><a name="19659"
  > </a
  ><a name="19660" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="19663"
  > </a
  ><a name="19664" class="Symbol"
  >&#955;</a
  ><a name="19665"
  > </a
  ><a name="19666" href="Session.html#19666" class="Bound"
  >_</a
  ><a name="19667"
  > </a
  ><a name="19668" class="Symbol"
  >&#8594;</a
  ><a name="19669"
  > </a
  ><a name="19670" href="Session.html#19654" class="Bound"
  >n</a
  ><a name="19671"
  >

</a
  ><a name="19673" href="Session.html#19673" class="Function"
  >mapIO</a
  ><a name="19678"
  > </a
  ><a name="19679" class="Symbol"
  >:</a
  ><a name="19680"
  > </a
  ><a name="19681" class="Symbol"
  >&#8704;</a
  ><a name="19682"
  > </a
  ><a name="19683" class="Symbol"
  >{</a
  ><a name="19684" href="Session.html#19684" class="Bound"
  >lA</a
  ><a name="19686"
  > </a
  ><a name="19687" href="Session.html#19687" class="Bound"
  >lB</a
  ><a name="19689" class="Symbol"
  >}{</a
  ><a name="19691" href="Session.html#19691" class="Bound"
  >A</a
  ><a name="19692"
  > </a
  ><a name="19693" class="Symbol"
  >:</a
  ><a name="19694"
  > </a
  ><a name="19695" class="PrimitiveType"
  >Set</a
  ><a name="19698"
  > </a
  ><a name="19699" href="Session.html#19684" class="Bound"
  >lA</a
  ><a name="19701" class="Symbol"
  >}{</a
  ><a name="19703" href="Session.html#19703" class="Bound"
  >B</a
  ><a name="19704"
  > </a
  ><a name="19705" class="Symbol"
  >:</a
  ><a name="19706"
  > </a
  ><a name="19707" class="PrimitiveType"
  >Set</a
  ><a name="19710"
  > </a
  ><a name="19711" href="Session.html#19687" class="Bound"
  >lB</a
  ><a name="19713" class="Symbol"
  >}</a
  ><a name="19714"
  > </a
  ><a name="19715" class="Symbol"
  >&#8594;</a
  ><a name="19716"
  > </a
  ><a name="19717" class="Symbol"
  >(</a
  ><a name="19718" href="Session.html#19691" class="Bound"
  >A</a
  ><a name="19719"
  > </a
  ><a name="19720" class="Symbol"
  >&#8594;</a
  ><a name="19721"
  > </a
  ><a name="19722" href="Session.html#19703" class="Bound"
  >B</a
  ><a name="19723" class="Symbol"
  >)</a
  ><a name="19724"
  > </a
  ><a name="19725" class="Symbol"
  >&#8594;</a
  ><a name="19726"
  > </a
  ><a name="19727" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="19729"
  > </a
  ><a name="19730" href="Session.html#19691" class="Bound"
  >A</a
  ><a name="19731"
  > </a
  ><a name="19732" class="Symbol"
  >&#8594;</a
  ><a name="19733"
  > </a
  ><a name="19734" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="19736"
  > </a
  ><a name="19737" href="Session.html#19703" class="Bound"
  >B</a
  ><a name="19738"
  >
</a
  ><a name="19739" href="Session.html#19673" class="Function"
  >mapIO</a
  ><a name="19744"
  > </a
  ><a name="19745" href="Session.html#19745" class="Bound"
  >f</a
  ><a name="19746"
  > </a
  ><a name="19747" href="Session.html#19747" class="Bound"
  >xs</a
  ><a name="19749"
  > </a
  ><a name="19750" class="Symbol"
  >=</a
  ><a name="19751"
  > </a
  ><a name="19752" href="Session.html#19747" class="Bound"
  >xs</a
  ><a name="19754"
  > </a
  ><a name="19755" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="19758"
  > </a
  ><a name="19759" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="19765"
  > </a
  ><a name="19766" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="19767"
  > </a
  ><a name="19768" href="Session.html#19745" class="Bound"
  >f</a
  ><a name="19769"
  ></pre>
<p>Every communication with the untyped channels uses <code>unsafeCoerce</code>.</p>
<pre></a
  ><a name="19863" href="Session.html#19863" class="Function"
  >writeUChan</a
  ><a name="19873"
  > </a
  ><a name="19874" class="Symbol"
  >:</a
  ><a name="19875"
  > </a
  ><a name="19876" class="Symbol"
  >{</a
  ><a name="19877" href="Session.html#19877" class="Bound"
  >A</a
  ><a name="19878"
  > </a
  ><a name="19879" class="Symbol"
  >:</a
  ><a name="19880"
  > </a
  ><a name="19881" class="PrimitiveType"
  >Set</a
  ><a name="19884" class="Symbol"
  >}</a
  ><a name="19885"
  > </a
  ><a name="19886" class="Symbol"
  >&#8594;</a
  ><a name="19887"
  > </a
  ><a name="19888" href="Session.html#19103" class="Function"
  >UChan</a
  ><a name="19893"
  > </a
  ><a name="19894" class="Symbol"
  >&#8594;</a
  ><a name="19895"
  > </a
  ><a name="19896" href="Session.html#19877" class="Bound"
  >A</a
  ><a name="19897"
  > </a
  ><a name="19898" class="Symbol"
  >&#8594;</a
  ><a name="19899"
  > </a
  ><a name="19900" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="19902"
  > </a
  ><a name="19903" href="Unit.html#194" class="Function"
  >C.&lt;&gt;</a
  ><a name="19907"
  >
</a
  ><a name="19908" href="Session.html#19863" class="Function"
  >writeUChan</a
  ><a name="19918"
  > </a
  ><a name="19919" href="Session.html#19919" class="Bound"
  >c</a
  ><a name="19920"
  > </a
  ><a name="19921" class="Symbol"
  >=</a
  ><a name="19922"
  > </a
  ><a name="19923" href="Control.Concurrent.Chan.Synchronous.html#345" class="Postulate"
  >writeChan</a
  ><a name="19932"
  > </a
  ><a name="19933" href="Session.html#19919" class="Bound"
  >c</a
  ><a name="19934"
  > </a
  ><a name="19935" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="19936"
  > </a
  ><a name="19937" href="Session.html#18245" class="Postulate"
  >unsafeCoerce</a
  ><a name="19949"
  >

</a
  ><a name="19951" href="Session.html#19951" class="Function"
  >readUChan</a
  ><a name="19960"
  > </a
  ><a name="19961" class="Symbol"
  >:</a
  ><a name="19962"
  > </a
  ><a name="19963" class="Symbol"
  >{</a
  ><a name="19964" href="Session.html#19964" class="Bound"
  >A</a
  ><a name="19965"
  > </a
  ><a name="19966" class="Symbol"
  >:</a
  ><a name="19967"
  > </a
  ><a name="19968" class="PrimitiveType"
  >Set</a
  ><a name="19971" class="Symbol"
  >}</a
  ><a name="19972"
  > </a
  ><a name="19973" class="Symbol"
  >&#8594;</a
  ><a name="19974"
  > </a
  ><a name="19975" href="Session.html#19103" class="Function"
  >UChan</a
  ><a name="19980"
  > </a
  ><a name="19981" class="Symbol"
  >&#8594;</a
  ><a name="19982"
  > </a
  ><a name="19983" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="19985"
  > </a
  ><a name="19986" href="Session.html#19964" class="Bound"
  >A</a
  ><a name="19987"
  >
</a
  ><a name="19988" href="Session.html#19951" class="Function"
  >readUChan</a
  ><a name="19997"
  > </a
  ><a name="19998" class="Symbol"
  >{</a
  ><a name="19999" class="Argument"
  >A</a
  ><a name="20000"
  > </a
  ><a name="20001" class="Symbol"
  >=</a
  ><a name="20002"
  > </a
  ><a name="20003" href="Session.html#20003" class="Bound"
  >A</a
  ><a name="20004" class="Symbol"
  >}</a
  ><a name="20005"
  > </a
  ><a name="20006" href="Session.html#20006" class="Bound"
  >c</a
  ><a name="20007"
  > </a
  ><a name="20008" class="Symbol"
  >=</a
  ><a name="20009"
  > </a
  ><a name="20010" href="Control.Concurrent.Chan.Synchronous.html#397" class="Postulate"
  >readChan</a
  ><a name="20018"
  > </a
  ><a name="20019" href="Session.html#20006" class="Bound"
  >c</a
  ><a name="20020"
  > </a
  ><a name="20021" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="20024"
  > </a
  ><a name="20025" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="20031"
  > </a
  ><a name="20032" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="20033"
  > </a
  ><a name="20034" href="Session.html#18245" class="Postulate"
  >unsafeCoerce</a
  ><a name="20046"
  ></pre>
<p>Here is the actual test evaluator, to implement which we disable termination checking: we already use &quot;unsafe&quot; features so we do not bother defining a <em>coinductive</em> wrapper as in the <code>IO</code> module of Agda's standard library.</p>
<pre></a
  ><a name="20296" class="Symbol"
  >{-#</a
  ><a name="20299"
  > </a
  ><a name="20300" class="Keyword"
  >NO_TERMINATION_CHECK</a
  ><a name="20320"
  > </a
  ><a name="20321" class="Symbol"
  >#-}</a
  ><a name="20324"
  >
</a
  ><a name="20325" href="Session.html#20325" class="Function"
  >run</a
  ><a name="20328"
  > </a
  ><a name="20329" class="Symbol"
  >:</a
  ><a name="20330"
  > </a
  ><a name="20331" class="Symbol"
  >{</a
  ><a name="20332" href="Session.html#20332" class="Bound"
  >&#915;</a
  ><a name="20333"
  > </a
  ><a name="20334" href="Session.html#20334" class="Bound"
  >&#916;</a
  ><a name="20335"
  > </a
  ><a name="20336" class="Symbol"
  >:</a
  ><a name="20337"
  > </a
  ><a name="20338" href="Session.html#4252" class="Function"
  >Cx</a
  ><a name="20340" class="Symbol"
  >}{</a
  ><a name="20342" href="Session.html#20342" class="Bound"
  >X</a
  ><a name="20343"
  > </a
  ><a name="20344" class="Symbol"
  >:</a
  ><a name="20345"
  > </a
  ><a name="20346" class="PrimitiveType"
  >Set</a
  ><a name="20349" class="Symbol"
  >}</a
  ><a name="20350"
  > </a
  ><a name="20351" class="Symbol"
  >&#8594;</a
  ><a name="20352"
  > </a
  ><a name="20353" href="Session.html#20332" class="Bound"
  >&#915;</a
  ><a name="20354"
  > </a
  ><a name="20355" href="Session.html#18617" class="Function Operator"
  >[IO</a
  ><a name="20358"
  > </a
  ><a name="20359" href="Session.html#20342" class="Bound"
  >X</a
  ><a name="20360"
  > </a
  ><a name="20361" href="Session.html#18617" class="Function Operator"
  >]&gt;</a
  ><a name="20363"
  > </a
  ><a name="20364" href="Session.html#20334" class="Bound"
  >&#916;</a
  ><a name="20365"
  > </a
  ><a name="20366" class="Symbol"
  >&#8594;</a
  ><a name="20367"
  > </a
  ><a name="20368" href="Session.html#19174" class="Function Operator"
  >&#10214;</a
  ><a name="20369"
  > </a
  ><a name="20370" href="Session.html#20332" class="Bound"
  >&#915;</a
  ><a name="20371"
  > </a
  ><a name="20372" href="Session.html#19174" class="Function Operator"
  >&#10215;Cx</a
  ><a name="20375"
  > </a
  ><a name="20376" class="Symbol"
  >&#8594;</a
  ><a name="20377"
  > </a
  ><a name="20378" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="20380"
  > </a
  ><a name="20381" class="Symbol"
  >(</a
  ><a name="20382" href="Session.html#20342" class="Bound"
  >X</a
  ><a name="20383"
  > </a
  ><a name="20384" href="Data.Product.html#1055" class="Function Operator"
  >&#215;</a
  ><a name="20385"
  > </a
  ><a name="20386" href="Session.html#19174" class="Function Operator"
  >&#10214;</a
  ><a name="20387"
  > </a
  ><a name="20388" href="Session.html#20334" class="Bound"
  >&#916;</a
  ><a name="20389"
  > </a
  ><a name="20390" href="Session.html#19174" class="Function Operator"
  >&#10215;Cx</a
  ><a name="20393" class="Symbol"
  >)</a
  ><a name="20394"
  ></pre>
<p>We map the embedded monadic actions to themselves, and the binding syntax to the binding operator for the <code>IO</code> monad.</p>
<pre></a
  ><a name="20539" href="Session.html#20325" class="Function"
  >run</a
  ><a name="20542"
  > </a
  ><a name="20543" class="Symbol"
  >(</a
  ><a name="20544" href="Session.html#14662" class="InductiveConstructor Operator"
  >&#8657;</a
  ><a name="20545"
  > </a
  ><a name="20546" href="Session.html#20546" class="Bound"
  >m</a
  ><a name="20547"
  >           </a
  ><a name="20558" class="Symbol"
  >)</a
  ><a name="20559"
  > </a
  ><a name="20560" href="Session.html#20560" class="Bound"
  >cs</a
  ><a name="20562"
  > </a
  ><a name="20563" class="Symbol"
  >=</a
  ><a name="20564"
  > </a
  ><a name="20565" href="Session.html#19673" class="Function"
  >mapIO</a
  ><a name="20570"
  > </a
  ><a name="20571" class="Symbol"
  >(</a
  ><a name="20572" href="Function.html#1480" class="Function"
  >flip</a
  ><a name="20576"
  > </a
  ><a name="20577" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >_,_</a
  ><a name="20580"
  > </a
  ><a name="20581" href="Session.html#20560" class="Bound"
  >cs</a
  ><a name="20583" class="Symbol"
  >)</a
  ><a name="20584"
  > </a
  ><a name="20585" href="Session.html#20546" class="Bound"
  >m</a
  ><a name="20586"
  >                                           
                                                                                          
</a
  ><a name="20721" href="Session.html#20325" class="Function"
  >run</a
  ><a name="20724"
  > </a
  ><a name="20725" class="Symbol"
  >(</a
  ><a name="20726" href="Session.html#20726" class="Bound"
  >m</a
  ><a name="20727"
  > </a
  ><a name="20728" href="Session.html#14814" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="20730"
  > </a
  ><a name="20731" href="Session.html#20731" class="Bound"
  >f</a
  ><a name="20732"
  >        </a
  ><a name="20740" class="Symbol"
  >)</a
  ><a name="20741"
  > </a
  ><a name="20742" href="Session.html#20742" class="Bound"
  >cs</a
  ><a name="20744"
  > </a
  ><a name="20745" class="Symbol"
  >=</a
  ><a name="20746"
  > </a
  ><a name="20747" href="Session.html#20325" class="Function"
  >run</a
  ><a name="20750"
  > </a
  ><a name="20751" href="Session.html#20726" class="Bound"
  >m</a
  ><a name="20752"
  > </a
  ><a name="20753" href="Session.html#20742" class="Bound"
  >cs</a
  ><a name="20755"
  > </a
  ><a name="20756" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="20759"
  > </a
  ><a name="20760" class="Symbol"
  >&#955;</a
  ><a name="20761"
  > </a
  ><a name="20762" class="Symbol"
  >{</a
  ><a name="20763"
  > </a
  ><a name="20764" class="Symbol"
  >(</a
  ><a name="20765" href="Session.html#20765" class="Bound"
  >x</a
  ><a name="20766"
  > </a
  ><a name="20767" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20768"
  > </a
  ><a name="20769" href="Session.html#20769" class="Bound"
  >cs</a
  ><a name="20771" class="Symbol"
  >)</a
  ><a name="20772"
  > </a
  ><a name="20773" class="Symbol"
  >&#8594;</a
  ><a name="20774"
  > </a
  ><a name="20775" href="Session.html#20325" class="Function"
  >run</a
  ><a name="20778"
  > </a
  ><a name="20779" class="Symbol"
  >(</a
  ><a name="20780" href="Session.html#20731" class="Bound"
  >f</a
  ><a name="20781"
  > </a
  ><a name="20782" href="Session.html#20765" class="Bound"
  >x</a
  ><a name="20783" class="Symbol"
  >)</a
  ><a name="20784"
  > </a
  ><a name="20785" href="Session.html#20769" class="Bound"
  >cs</a
  ><a name="20787"
  > </a
  ><a name="20788" class="Symbol"
  >}</a
  ><a name="20789"
  >                      </pre>
<p><code>new</code> just creates a new channel.</p>
<pre></a
  ><a name="21030" href="Session.html#20325" class="Function"
  >run</a
  ><a name="21033"
  > </a
  ><a name="21034" class="Symbol"
  >(</a
  ><a name="21035" href="Session.html#15458" class="InductiveConstructor"
  >new</a
  ><a name="21038"
  >           </a
  ><a name="21049" class="Symbol"
  >)</a
  ><a name="21050"
  > </a
  ><a name="21051" href="Session.html#21051" class="Bound"
  >cs</a
  ><a name="21053"
  > </a
  ><a name="21054" class="Symbol"
  >=</a
  ><a name="21055"
  > </a
  ><a name="21056" href="Control.Concurrent.Chan.Synchronous.html#300" class="Postulate"
  >newChan</a
  ><a name="21063"
  > </a
  ><a name="21064" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="21067"
  > </a
  ><a name="21068" class="Symbol"
  >&#955;</a
  ><a name="21069"
  > </a
  ><a name="21070" href="Session.html#21070" class="Bound"
  >c</a
  ><a name="21071"
  > </a
  ><a name="21072" class="Symbol"
  >&#8594;</a
  ><a name="21073"
  > </a
  ><a name="21074" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="21080"
  > </a
  ><a name="21081" class="Symbol"
  >(_</a
  ><a name="21083"
  > </a
  ><a name="21084" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="21085"
  > </a
  ><a name="21086" class="Symbol"
  >(</a
  ><a name="21087" href="Session.html#21051" class="Bound"
  >cs</a
  ><a name="21089"
  > </a
  ><a name="21090" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="21092"
  > </a
  ><a name="21093" href="Session.html#21070" class="Bound"
  >c</a
  ><a name="21094" class="Symbol"
  >))</a
  ><a name="21096"
  ></pre>
<p><code>fork x</code> interprets the <code>Splits</code> in <code>s</code> obtaining two lists of channels <code>ls</code> and <code>rs</code>: it keeps <code>ls</code> for the parent thread and leaves access to <code>rs</code> to the child (<code>x</code>).</p>
<pre></a
  ><a name="21382" href="Session.html#20325" class="Function"
  >run</a
  ><a name="21385"
  > </a
  ><a name="21386" class="Symbol"
  >(</a
  ><a name="21387" href="Session.html#15384" class="InductiveConstructor"
  >fork</a
  ><a name="21391"
  >       </a
  ><a name="21398" href="Session.html#21398" class="Bound"
  >s</a
  ><a name="21399"
  > </a
  ><a name="21400" href="Session.html#21400" class="Bound"
  >x</a
  ><a name="21401" class="Symbol"
  >)</a
  ><a name="21402"
  > </a
  ><a name="21403" href="Session.html#21403" class="Bound"
  >cs</a
  ><a name="21405"
  > </a
  ><a name="21406" class="Symbol"
  >=</a
  ><a name="21407"
  > </a
  ><a name="21408" class="Keyword"
  >let</a
  ><a name="21411"
  > </a
  ><a name="21412" href="Session.html#21412" class="Bound"
  >ls</a
  ><a name="21414"
  > </a
  ><a name="21415" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="21416"
  > </a
  ><a name="21417" href="Session.html#21417" class="Bound"
  >rs</a
  ><a name="21419"
  > </a
  ><a name="21420" class="Symbol"
  >=</a
  ><a name="21421"
  > </a
  ><a name="21422" href="Session.html#5828" class="Function"
  >all-splits</a
  ><a name="21432"
  > </a
  ><a name="21433" href="Session.html#21403" class="Bound"
  >cs</a
  ><a name="21435"
  > </a
  ><a name="21436" href="Session.html#21398" class="Bound"
  >s</a
  ><a name="21437"
  > </a
  ><a name="21438" class="Keyword"
  >in</a
  ><a name="21440"
  >
                          </a
  ><a name="21467" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="21473"
  > </a
  ><a name="21474" class="Symbol"
  >(</a
  ><a name="21475" href="Session.html#20325" class="Function"
  >run</a
  ><a name="21478"
  > </a
  ><a name="21479" href="Session.html#21400" class="Bound"
  >x</a
  ><a name="21480"
  > </a
  ><a name="21481" href="Session.html#21417" class="Bound"
  >rs</a
  ><a name="21483"
  > </a
  ><a name="21484" href="Session.html#19587" class="Function Operator"
  >&gt;&gt;</a
  ><a name="21486"
  > </a
  ><a name="21487" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="21493"
  > </a
  ><a name="21494" href="Unit.html#210" class="Function"
  >&#10216;&#10217;</a
  ><a name="21496" class="Symbol"
  >)</a
  ><a name="21497"
  > </a
  ><a name="21498" href="Session.html#19587" class="Function Operator"
  >&gt;&gt;</a
  ><a name="21500"
  >                               
                          </a
  ><a name="21558" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="21564"
  > </a
  ><a name="21565" class="Symbol"
  >(</a
  ><a name="21566" class="InductiveConstructor"
  >tt</a
  ><a name="21568"
  > </a
  ><a name="21569" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="21570"
  > </a
  ><a name="21571" href="Session.html#21412" class="Bound"
  >ls</a
  ><a name="21573" class="Symbol"
  >)</a
  ><a name="21574"
  >                                                </pre>
<p><code>send i j</code> writes channel <code>i</code> on channel <code>j</code> and frees the continuation from the burden of communicating along <code>i</code>.</p>
<p>We could avoid many uses of <code>unsafeCoerce</code> in the following but we think it is more efficient to avoid calling functions like <code>all-ud</code> as in the commented-out code: they perform no operations on the actual lists of <em>untyped</em> channels.</p>
<p>The usages of <code>unsafeCoerce</code> which are more difficult to justify are those inside every call to <code>readUChan</code> and <code>writeUChan</code>.</p>
<pre></a
  ><a name="22286" href="Session.html#20325" class="Function"
  >run</a
  ><a name="22289"
  > </a
  ><a name="22290" class="Symbol"
  >(</a
  ><a name="22291" href="Session.html#15532" class="InductiveConstructor"
  >send</a
  ><a name="22295"
  >       </a
  ><a name="22302" href="Session.html#22302" class="Bound"
  >i</a
  ><a name="22303"
  > </a
  ><a name="22304" href="Session.html#22304" class="Bound"
  >j</a
  ><a name="22305" class="Symbol"
  >)</a
  ><a name="22306"
  > </a
  ><a name="22307" href="Session.html#22307" class="Bound"
  >cs</a
  ><a name="22309"
  > </a
  ><a name="22310" class="Symbol"
  >=</a
  ><a name="22311"
  > </a
  ><a name="22312" class="Keyword"
  >let</a
  ><a name="22315"
  > </a
  ><a name="22316" href="Session.html#22316" class="Bound"
  >chanToSend</a
  ><a name="22326"
  >    </a
  ><a name="22330" class="Symbol"
  >=</a
  ><a name="22331"
  > </a
  ><a name="22332" href="Session.html#19241" class="Function"
  >lookupUChan</a
  ><a name="22343"
  >        </a
  ><a name="22351" href="Session.html#22302" class="Bound"
  >i</a
  ><a name="22352"
  >  </a
  ><a name="22354" href="Session.html#22307" class="Bound"
  >cs</a
  ><a name="22356"
  > </a
  ><a name="22357" class="Keyword"
  >in</a
  ><a name="22359"
  >                 
                          </a
  ><a name="22403" class="Keyword"
  >let</a
  ><a name="22406"
  > </a
  ><a name="22407" href="Session.html#22407" class="Bound"
  >chanToWriteOn</a
  ><a name="22420"
  > </a
  ><a name="22421" class="Symbol"
  >=</a
  ><a name="22422"
  > </a
  ><a name="22423" href="Session.html#19241" class="Function"
  >lookupUChan</a
  ><a name="22434"
  > </a
  ><a name="22435" class="Symbol"
  >(</a
  ><a name="22436" href="Session.Base.html#4041" class="Function"
  >wk/</a
  ><a name="22439"
  > </a
  ><a name="22440" href="Session.html#22302" class="Bound"
  >i</a
  ><a name="22441"
  > </a
  ><a name="22442" href="Session.html#22304" class="Bound"
  >j</a
  ><a name="22443" class="Symbol"
  >)</a
  ><a name="22444"
  > </a
  ><a name="22445" href="Session.html#22307" class="Bound"
  >cs</a
  ><a name="22447"
  > </a
  ><a name="22448" class="Keyword"
  >in</a
  ><a name="22450"
  >                 
                          </a
  ><a name="22494" href="Session.html#19863" class="Function"
  >writeUChan</a
  ><a name="22504"
  > </a
  ><a name="22505" href="Session.html#22407" class="Bound"
  >chanToWriteOn</a
  ><a name="22518"
  > </a
  ><a name="22519" href="Session.html#22316" class="Bound"
  >chanToSend</a
  ><a name="22529"
  > </a
  ><a name="22530" href="Session.html#19587" class="Function Operator"
  >&gt;&gt;</a
  ><a name="22532"
  >
                          </a
  ><a name="22559" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="22565"
  > </a
  ><a name="22566" class="Symbol"
  >(</a
  ><a name="22567" class="InductiveConstructor"
  >tt</a
  ><a name="22569"
  > </a
  ><a name="22570" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="22571"
  > </a
  ><a name="22572" href="Session.html#18245" class="Postulate"
  >unsafeCoerce</a
  ><a name="22584"
  > </a
  ><a name="22585" class="Symbol"
  >(</a
  ><a name="22586" href="Session.Base.html#4253" class="Function"
  >all-rm</a
  ><a name="22592"
  > </a
  ><a name="22593" href="Session.html#22302" class="Bound"
  >i</a
  ><a name="22594"
  > </a
  ><a name="22595" href="Session.html#22307" class="Bound"
  >cs</a
  ><a name="22597" class="Symbol"
  >))</a
  ><a name="22599"
  >
                       </a
  ><a name="22623" class="Comment"
  >-- return (tt , all-ud j (all-rm i cs) chanToWriteOn)</a
  ><a name="22676"
  ></pre>
<p><code>receive i</code> receives a channel from channel <code>i</code> and allows/forces the continuation to also take care of it.</p>
<pre></a
  ><a name="22901" href="Session.html#20325" class="Function"
  >run</a
  ><a name="22904"
  > </a
  ><a name="22905" class="Symbol"
  >(</a
  ><a name="22906" href="Session.html#15606" class="InductiveConstructor"
  >receive</a
  ><a name="22913"
  >      </a
  ><a name="22919" href="Session.html#22919" class="Bound"
  >i</a
  ><a name="22920" class="Symbol"
  >)</a
  ><a name="22921"
  > </a
  ><a name="22922" href="Session.html#22922" class="Bound"
  >cs</a
  ><a name="22924"
  > </a
  ><a name="22925" class="Symbol"
  >=</a
  ><a name="22926"
  > </a
  ><a name="22927" class="Keyword"
  >let</a
  ><a name="22930"
  > </a
  ><a name="22931" href="Session.html#22931" class="Bound"
  >chanToReadFrom</a
  ><a name="22945"
  > </a
  ><a name="22946" class="Symbol"
  >=</a
  ><a name="22947"
  > </a
  ><a name="22948" href="Session.html#19241" class="Function"
  >lookupUChan</a
  ><a name="22959"
  > </a
  ><a name="22960" href="Session.html#22919" class="Bound"
  >i</a
  ><a name="22961"
  > </a
  ><a name="22962" href="Session.html#22922" class="Bound"
  >cs</a
  ><a name="22964"
  > </a
  ><a name="22965" class="Keyword"
  >in</a
  ><a name="22967"
  >                        
                          </a
  ><a name="23018" href="Session.html#19951" class="Function"
  >readUChan</a
  ><a name="23027"
  > </a
  ><a name="23028" href="Session.html#22931" class="Bound"
  >chanToReadFrom</a
  ><a name="23042"
  > </a
  ><a name="23043" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="23046"
  > </a
  ><a name="23047" class="Symbol"
  >&#955;</a
  ><a name="23048"
  > </a
  ><a name="23049" href="Session.html#23049" class="Bound"
  >receivedChan</a
  ><a name="23061"
  > </a
  ><a name="23062" class="Symbol"
  >&#8594;</a
  ><a name="23063"
  >                   
                          </a
  ><a name="23109" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="23115"
  > </a
  ><a name="23116" class="Symbol"
  >(</a
  ><a name="23117" class="InductiveConstructor"
  >tt</a
  ><a name="23119"
  > </a
  ><a name="23120" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="23121"
  > </a
  ><a name="23122" class="Symbol"
  >(</a
  ><a name="23123" href="Session.html#18245" class="Postulate"
  >unsafeCoerce</a
  ><a name="23135"
  > </a
  ><a name="23136" href="Session.html#22922" class="Bound"
  >cs</a
  ><a name="23138"
  > </a
  ><a name="23139" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="23141"
  > </a
  ><a name="23142" href="Session.html#23049" class="Bound"
  >receivedChan</a
  ><a name="23154" class="Symbol"
  >))</a
  ><a name="23156"
  >                  </pre>
<p><code>accept i a p</code> forks a process that waits for channels: whenever one is received it spawns a new copy of the server <code>p</code> along it.</p>
<pre></a
  ><a name="23409" href="Session.html#20325" class="Function"
  >run</a
  ><a name="23412"
  > </a
  ><a name="23413" class="Symbol"
  >(</a
  ><a name="23414" href="Session.html#15680" class="InductiveConstructor"
  >accept</a
  ><a name="23420"
  >   </a
  ><a name="23423" href="Session.html#23423" class="Bound"
  >i</a
  ><a name="23424"
  > </a
  ><a name="23425" href="Session.html#23425" class="Bound"
  >a</a
  ><a name="23426"
  > </a
  ><a name="23427" href="Session.html#23427" class="Bound"
  >p</a
  ><a name="23428" class="Symbol"
  >)</a
  ><a name="23429"
  > </a
  ><a name="23430" href="Session.html#23430" class="Bound"
  >cs</a
  ><a name="23432"
  > </a
  ><a name="23433" class="Symbol"
  >=</a
  ><a name="23434"
  > </a
  ><a name="23435" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="23441"
  > </a
  ><a name="23442" href="Session.html#23706" class="Function"
  >server</a
  ><a name="23448"
  > </a
  ><a name="23449" href="Session.html#19587" class="Function Operator"
  >&gt;&gt;</a
  ><a name="23451"
  > </a
  ><a name="23452" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="23458"
  > </a
  ><a name="23459" class="Symbol"
  >(</a
  ><a name="23460" class="InductiveConstructor"
  >tt</a
  ><a name="23462"
  > </a
  ><a name="23463" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="23464"
  > </a
  ><a name="23465" href="Session.Base.html#4253" class="Function"
  >all-rm</a
  ><a name="23471"
  > </a
  ><a name="23472" href="Session.html#23423" class="Bound"
  >i</a
  ><a name="23473"
  > </a
  ><a name="23474" href="Session.html#23430" class="Bound"
  >cs</a
  ><a name="23476" class="Symbol"
  >)</a
  ><a name="23477"
  >                   
  </a
  ><a name="23499" class="Keyword"
  >where</a
  ><a name="23504"
  > </a
  ><a name="23505" href="Session.html#23505" class="Function"
  >c</a
  ><a name="23506"
  > </a
  ><a name="23507" class="Symbol"
  >=</a
  ><a name="23508"
  > </a
  ><a name="23509" href="Session.html#19241" class="Function"
  >lookupUChan</a
  ><a name="23520"
  > </a
  ><a name="23521" href="Session.html#23423" class="Bound"
  >i</a
  ><a name="23522"
  > </a
  ><a name="23523" href="Session.html#23430" class="Bound"
  >cs</a
  ><a name="23525"
  >                                            
        </a
  ><a name="23578" href="Session.html#23578" class="Function"
  >service</a
  ><a name="23585"
  > </a
  ><a name="23586" class="Symbol"
  >:</a
  ><a name="23587"
  > </a
  ><a name="23588" href="Session.html#19103" class="Function"
  >UChan</a
  ><a name="23593"
  > </a
  ><a name="23594" class="Symbol"
  >&#8594;</a
  ><a name="23595"
  > </a
  ><a name="23596" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="23598"
  > </a
  ><a name="23599" class="Symbol"
  >_</a
  ><a name="23600"
  >                                          
        </a
  ><a name="23651" href="Session.html#23578" class="Function"
  >service</a
  ><a name="23658"
  > </a
  ><a name="23659" href="Session.html#23659" class="Bound"
  >n</a
  ><a name="23660"
  > </a
  ><a name="23661" class="Symbol"
  >=</a
  ><a name="23662"
  > </a
  ><a name="23663" href="Session.html#20325" class="Function"
  >run</a
  ><a name="23666"
  > </a
  ><a name="23667" href="Session.html#23427" class="Bound"
  >p</a
  ><a name="23668"
  > </a
  ><a name="23669" class="Symbol"
  >(</a
  ><a name="23670" href="Session.Base.html#4401" class="Function"
  >all-ud</a
  ><a name="23676"
  > </a
  ><a name="23677" href="Session.html#23423" class="Bound"
  >i</a
  ><a name="23678"
  > </a
  ><a name="23679" href="Session.html#23430" class="Bound"
  >cs</a
  ><a name="23681"
  > </a
  ><a name="23682" href="Session.html#23659" class="Bound"
  >n</a
  ><a name="23683" class="Symbol"
  >)</a
  ><a name="23684"
  > </a
  ><a name="23685" href="Session.html#19587" class="Function Operator"
  >&gt;&gt;</a
  ><a name="23687"
  > </a
  ><a name="23688" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="23694"
  > </a
  ><a name="23695" href="Unit.html#210" class="Function"
  >&#10216;&#10217;</a
  ><a name="23697"
  >
        </a
  ><a name="23706" href="Session.html#23706" class="Function"
  >server</a
  ><a name="23712"
  > </a
  ><a name="23713" class="Symbol"
  >:</a
  ><a name="23714"
  > </a
  ><a name="23715" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="23717"
  > </a
  ><a name="23718" href="Unit.html#194" class="Function"
  >C.&lt;&gt;</a
  ><a name="23722"
  >                                                
        </a
  ><a name="23779" href="Session.html#23706" class="Function"
  >server</a
  ><a name="23785"
  > </a
  ><a name="23786" class="Symbol"
  >=</a
  ><a name="23787"
  > </a
  ><a name="23788" href="Session.html#19951" class="Function"
  >readUChan</a
  ><a name="23797"
  > </a
  ><a name="23798" href="Session.html#23505" class="Function"
  >c</a
  ><a name="23799"
  >        </a
  ><a name="23807" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="23810"
  > </a
  ><a name="23811" class="Symbol"
  >&#955;</a
  ><a name="23812"
  > </a
  ><a name="23813" href="Session.html#23813" class="Bound"
  >n</a
  ><a name="23814"
  > </a
  ><a name="23815" class="Symbol"
  >&#8594;</a
  ><a name="23816"
  >                           
                 </a
  ><a name="23861" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="23867"
  > </a
  ><a name="23868" class="Symbol"
  >(</a
  ><a name="23869" href="Session.html#23578" class="Function"
  >service</a
  ><a name="23876"
  > </a
  ><a name="23877" href="Session.html#23813" class="Bound"
  >n</a
  ><a name="23878" class="Symbol"
  >)</a
  ><a name="23879"
  > </a
  ><a name="23880" href="Session.html#19587" class="Function Operator"
  >&gt;&gt;</a
  ><a name="23882"
  >                                  
                 </a
  ><a name="23934" href="Session.html#23706" class="Function"
  >server</a
  ><a name="23940"
  >                                                 </pre>
<p><code>connect i p</code> creates a channel and sends it along channel <code>i</code>, which is (or should be) shared by construction with a server, then it becomes process <code>p</code>.</p>
<pre></a
  ><a name="24261" href="Session.html#20325" class="Function"
  >run</a
  ><a name="24264"
  > </a
  ><a name="24265" class="Symbol"
  >(</a
  ><a name="24266" href="Session.html#15754" class="InductiveConstructor"
  >connect</a
  ><a name="24273"
  >    </a
  ><a name="24277" href="Session.html#24277" class="Bound"
  >i</a
  ><a name="24278"
  > </a
  ><a name="24279" href="Session.html#24279" class="Bound"
  >p</a
  ><a name="24280" class="Symbol"
  >)</a
  ><a name="24281"
  > </a
  ><a name="24282" href="Session.html#24282" class="Bound"
  >cs</a
  ><a name="24284"
  > </a
  ><a name="24285" class="Symbol"
  >=</a
  ><a name="24286"
  > </a
  ><a name="24287" href="Control.Concurrent.Chan.Synchronous.html#300" class="Postulate"
  >newChan</a
  ><a name="24294"
  >                         </a
  ><a name="24319" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="24322"
  > </a
  ><a name="24323" class="Symbol"
  >&#955;</a
  ><a name="24324"
  > </a
  ><a name="24325" href="Session.html#24325" class="Bound"
  >n</a
  ><a name="24326"
  > </a
  ><a name="24327" class="Symbol"
  >&#8594;</a
  ><a name="24328"
  >                       
                          </a
  ><a name="24378" href="Session.html#19863" class="Function"
  >writeUChan</a
  ><a name="24388"
  > </a
  ><a name="24389" class="Symbol"
  >(</a
  ><a name="24390" href="Session.html#19241" class="Function"
  >lookupUChan</a
  ><a name="24401"
  > </a
  ><a name="24402" href="Session.html#24277" class="Bound"
  >i</a
  ><a name="24403"
  > </a
  ><a name="24404" href="Session.html#24282" class="Bound"
  >cs</a
  ><a name="24406" class="Symbol"
  >)</a
  ><a name="24407"
  > </a
  ><a name="24408" href="Session.html#24325" class="Bound"
  >n</a
  ><a name="24409"
  > </a
  ><a name="24410" href="Session.html#19587" class="Function Operator"
  >&gt;&gt;</a
  ><a name="24412"
  >                              
                          </a
  ><a name="24469" href="Session.html#20325" class="Function"
  >run</a
  ><a name="24472"
  > </a
  ><a name="24473" href="Session.html#24279" class="Bound"
  >p</a
  ><a name="24474"
  > </a
  ><a name="24475" class="Symbol"
  >(</a
  ><a name="24476" href="Session.Base.html#4401" class="Function"
  >all-ud</a
  ><a name="24482"
  > </a
  ><a name="24483" href="Session.html#24277" class="Bound"
  >i</a
  ><a name="24484"
  > </a
  ><a name="24485" href="Session.html#24282" class="Bound"
  >cs</a
  ><a name="24487"
  > </a
  ><a name="24488" href="Session.html#24325" class="Bound"
  >n</a
  ><a name="24489" class="Symbol"
  >)</a
  ><a name="24490"
  ></pre>
<p><code>wont i</code> avoids starting the client/server interaction with the server which waits for channels on <code>i</code>.</p>
<pre></a
  ><a name="24711" href="Session.html#20325" class="Function"
  >run</a
  ><a name="24714"
  > </a
  ><a name="24715" class="Symbol"
  >(</a
  ><a name="24716" href="Session.html#15828" class="InductiveConstructor"
  >wont</a
  ><a name="24720"
  >         </a
  ><a name="24729" href="Session.html#24729" class="Bound"
  >i</a
  ><a name="24730" class="Symbol"
  >)</a
  ><a name="24731"
  > </a
  ><a name="24732" href="Session.html#24732" class="Bound"
  >cs</a
  ><a name="24734"
  > </a
  ><a name="24735" class="Symbol"
  >=</a
  ><a name="24736"
  > </a
  ><a name="24737" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="24743"
  > </a
  ><a name="24744" class="Symbol"
  >(</a
  ><a name="24745" class="InductiveConstructor"
  >tt</a
  ><a name="24747"
  > </a
  ><a name="24748" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="24749"
  > </a
  ><a name="24750" href="Session.Base.html#4253" class="Function"
  >all-rm</a
  ><a name="24756"
  > </a
  ><a name="24757" href="Session.html#24729" class="Bound"
  >i</a
  ><a name="24758"
  > </a
  ><a name="24759" href="Session.html#24732" class="Bound"
  >cs</a
  ><a name="24761" class="Symbol"
  >)</a
  ><a name="24762"
  ></pre>
<p><code>twice i</code> duplicates the server which waits for channels on <code>i</code>.</p>
<pre></a
  ><a name="24944" href="Session.html#20325" class="Function"
  >run</a
  ><a name="24947"
  > </a
  ><a name="24948" class="Symbol"
  >(</a
  ><a name="24949" href="Session.html#15902" class="InductiveConstructor"
  >twice</a
  ><a name="24954"
  >        </a
  ><a name="24962" href="Session.html#24962" class="Bound"
  >i</a
  ><a name="24963" class="Symbol"
  >)</a
  ><a name="24964"
  > </a
  ><a name="24965" href="Session.html#24965" class="Bound"
  >cs</a
  ><a name="24967"
  > </a
  ><a name="24968" class="Symbol"
  >=</a
  ><a name="24969"
  > </a
  ><a name="24970" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="24976"
  > </a
  ><a name="24977" class="Symbol"
  >(</a
  ><a name="24978" class="InductiveConstructor"
  >tt</a
  ><a name="24980"
  > </a
  ><a name="24981" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="24982"
  > </a
  ><a name="24983" class="Symbol"
  >(</a
  ><a name="24984" href="Session.html#24965" class="Bound"
  >cs</a
  ><a name="24986"
  > </a
  ><a name="24987" href="Session.Base.html#2118" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="24989"
  > </a
  ><a name="24990" href="Session.html#19241" class="Function"
  >lookupUChan</a
  ><a name="25001"
  > </a
  ><a name="25002" href="Session.html#24962" class="Bound"
  >i</a
  ><a name="25003"
  > </a
  ><a name="25004" href="Session.html#24965" class="Bound"
  >cs</a
  ><a name="25006" class="Symbol"
  >))</a
  ><a name="25008"
  >                           </pre>
<p><code>write i x</code> writes <code>x</code> on channel <code>i</code>.</p>
<pre></a
  ><a name="25269" href="Session.html#20325" class="Function"
  >run</a
  ><a name="25272"
  > </a
  ><a name="25273" class="Symbol"
  >(</a
  ><a name="25274" href="Session.html#15976" class="InductiveConstructor"
  >write</a
  ><a name="25279"
  >      </a
  ><a name="25285" href="Session.html#25285" class="Bound"
  >i</a
  ><a name="25286"
  > </a
  ><a name="25287" href="Session.html#25287" class="Bound"
  >x</a
  ><a name="25288" class="Symbol"
  >)</a
  ><a name="25289"
  > </a
  ><a name="25290" href="Session.html#25290" class="Bound"
  >cs</a
  ><a name="25292"
  > </a
  ><a name="25293" class="Symbol"
  >=</a
  ><a name="25294"
  > </a
  ><a name="25295" class="Keyword"
  >let</a
  ><a name="25298"
  > </a
  ><a name="25299" href="Session.html#25299" class="Bound"
  >c</a
  ><a name="25300"
  > </a
  ><a name="25301" class="Symbol"
  >=</a
  ><a name="25302"
  > </a
  ><a name="25303" href="Session.html#19241" class="Function"
  >lookupUChan</a
  ><a name="25314"
  > </a
  ><a name="25315" href="Session.html#25285" class="Bound"
  >i</a
  ><a name="25316"
  > </a
  ><a name="25317" href="Session.html#25290" class="Bound"
  >cs</a
  ><a name="25319"
  > </a
  ><a name="25320" class="Keyword"
  >in</a
  ><a name="25322"
  >                                     
                          </a
  ><a name="25386" href="Session.html#19863" class="Function"
  >writeUChan</a
  ><a name="25396"
  > </a
  ><a name="25397" href="Session.html#25299" class="Bound"
  >c</a
  ><a name="25398"
  > </a
  ><a name="25399" href="Session.html#25287" class="Bound"
  >x</a
  ><a name="25400"
  > </a
  ><a name="25401" href="Session.html#19587" class="Function Operator"
  >&gt;&gt;</a
  ><a name="25403"
  >                                               
                          </a
  ><a name="25477" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="25483"
  > </a
  ><a name="25484" class="Symbol"
  >(</a
  ><a name="25485" class="InductiveConstructor"
  >tt</a
  ><a name="25487"
  > </a
  ><a name="25488" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="25489"
  > </a
  ><a name="25490" href="Session.html#18245" class="Postulate"
  >unsafeCoerce</a
  ><a name="25502"
  > </a
  ><a name="25503" href="Session.html#25290" class="Bound"
  >cs</a
  ><a name="25505" class="Symbol"
  >)</a
  ><a name="25506"
  >                                   </pre>
<p><code>read i</code> reads from <code>i</code> and returns what it read.</p>
<pre></a
  ><a name="25708" href="Session.html#20325" class="Function"
  >run</a
  ><a name="25711"
  > </a
  ><a name="25712" class="Symbol"
  >(</a
  ><a name="25713" href="Session.html#16050" class="InductiveConstructor"
  >read</a
  ><a name="25717"
  >         </a
  ><a name="25726" href="Session.html#25726" class="Bound"
  >i</a
  ><a name="25727" class="Symbol"
  >)</a
  ><a name="25728"
  > </a
  ><a name="25729" href="Session.html#25729" class="Bound"
  >cs</a
  ><a name="25731"
  > </a
  ><a name="25732" class="Symbol"
  >=</a
  ><a name="25733"
  > </a
  ><a name="25734" class="Keyword"
  >let</a
  ><a name="25737"
  > </a
  ><a name="25738" href="Session.html#25738" class="Bound"
  >c</a
  ><a name="25739"
  > </a
  ><a name="25740" class="Symbol"
  >=</a
  ><a name="25741"
  > </a
  ><a name="25742" href="Session.html#19241" class="Function"
  >lookupUChan</a
  ><a name="25753"
  > </a
  ><a name="25754" href="Session.html#25726" class="Bound"
  >i</a
  ><a name="25755"
  > </a
  ><a name="25756" href="Session.html#25729" class="Bound"
  >cs</a
  ><a name="25758"
  > </a
  ><a name="25759" class="Keyword"
  >in</a
  ><a name="25761"
  >                                     
                          </a
  ><a name="25825" href="Session.html#19951" class="Function"
  >readUChan</a
  ><a name="25834"
  > </a
  ><a name="25835" href="Session.html#25738" class="Bound"
  >c</a
  ><a name="25836"
  > </a
  ><a name="25837" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="25840"
  > </a
  ><a name="25841" class="Symbol"
  >&#955;</a
  ><a name="25842"
  > </a
  ><a name="25843" href="Session.html#25843" class="Bound"
  >x</a
  ><a name="25844"
  > </a
  ><a name="25845" class="Symbol"
  >&#8594;</a
  ><a name="25846"
  >
                          </a
  ><a name="25873" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="25879"
  > </a
  ><a name="25880" class="Symbol"
  >(</a
  ><a name="25881" href="Session.html#25843" class="Bound"
  >x</a
  ><a name="25882"
  > </a
  ><a name="25883" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="25884"
  > </a
  ><a name="25885" href="Session.html#18245" class="Postulate"
  >unsafeCoerce</a
  ><a name="25897"
  > </a
  ><a name="25898" href="Session.html#25729" class="Bound"
  >cs</a
  ><a name="25900" class="Symbol"
  >)</a
  ><a name="25901"
  >                                    </pre>
<p><code>end i</code> terminates the (sub)session</p>
<pre></a
  ><a name="26168" href="Session.html#20325" class="Function"
  >run</a
  ><a name="26171"
  > </a
  ><a name="26172" class="Symbol"
  >(</a
  ><a name="26173" href="Session.html#16124" class="InductiveConstructor"
  >end/</a
  ><a name="26177"
  >       </a
  ><a name="26184" href="Session.html#26184" class="Bound"
  >i</a
  ><a name="26185"
  > </a
  ><a name="26186" href="Session.html#26186" class="Bound"
  >r</a
  ><a name="26187" class="Symbol"
  >)</a
  ><a name="26188"
  > </a
  ><a name="26189" href="Session.html#26189" class="Bound"
  >cs</a
  ><a name="26191"
  > </a
  ><a name="26192" class="Symbol"
  >=</a
  ><a name="26193"
  > </a
  ><a name="26194" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="26200"
  > </a
  ><a name="26201" class="Symbol"
  >(</a
  ><a name="26202" href="Session.html#26186" class="Bound"
  >r</a
  ><a name="26203"
  > </a
  ><a name="26204" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="26205"
  > </a
  ><a name="26206" href="Session.Base.html#4253" class="Function"
  >all-rm</a
  ><a name="26212"
  > </a
  ><a name="26213" href="Session.html#26184" class="Bound"
  >i</a
  ><a name="26214"
  > </a
  ><a name="26215" href="Session.html#26189" class="Bound"
  >cs</a
  ><a name="26217" class="Symbol"
  >)</a
  ><a name="26218"
  >                                     </pre>
<p><code>at/ i o</code> simply returns <code>o</code>.</p>
<pre></a
  ><a name="26312" href="Session.html#20325" class="Function"
  >run</a
  ><a name="26315"
  > </a
  ><a name="26316" class="Symbol"
  >(</a
  ><a name="26317" href="Session.html#16232" class="InductiveConstructor"
  >at/</a
  ><a name="26320"
  >        </a
  ><a name="26328" href="Session.html#26328" class="Bound"
  >i</a
  ><a name="26329"
  > </a
  ><a name="26330" href="Session.html#26330" class="Bound"
  >o</a
  ><a name="26331" class="Symbol"
  >)</a
  ><a name="26332"
  > </a
  ><a name="26333" href="Session.html#26333" class="Bound"
  >cs</a
  ><a name="26335"
  > </a
  ><a name="26336" class="Symbol"
  >=</a
  ><a name="26337"
  > </a
  ><a name="26338" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="26344"
  > </a
  ><a name="26345" class="Symbol"
  >(</a
  ><a name="26346" href="Session.html#26330" class="Bound"
  >o</a
  ><a name="26347"
  > </a
  ><a name="26348" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="26349"
  > </a
  ><a name="26350" href="Session.html#18245" class="Postulate"
  >unsafeCoerce</a
  ><a name="26362"
  > </a
  ><a name="26363" href="Session.html#26333" class="Bound"
  >cs</a
  ><a name="26365" class="Symbol"
  >)</a
  ><a name="26366"
  >                                    </pre>
<p><code>corec</code> enters a loop whose body is contained in <code>gp</code>: the coiteration will possibly be exited whenever the value the process returns is <code>inl x</code> for some <code>x</code>.</p>
<pre></a
  ><a name="26588" href="Session.html#20325" class="Function"
  >run</a
  ><a name="26591"
  > </a
  ><a name="26592" class="Symbol"
  >(</a
  ><a name="26593" href="Session.html#16380" class="InductiveConstructor"
  >corec</a
  ><a name="26598"
  >   </a
  ><a name="26601" href="Session.html#26601" class="Bound"
  >i</a
  ><a name="26602"
  > </a
  ><a name="26603" href="Session.html#26603" class="Bound"
  >o</a
  ><a name="26604"
  > </a
  ><a name="26605" href="Session.html#26605" class="Bound"
  >gp</a
  ><a name="26607" class="Symbol"
  >)</a
  ><a name="26608"
  > </a
  ><a name="26609" href="Session.html#26609" class="Bound"
  >cs</a
  ><a name="26611"
  > </a
  ><a name="26612" class="Symbol"
  >=</a
  ><a name="26613"
  > </a
  ><a name="26614" href="Session.html#26628" class="Function"
  >aux</a
  ><a name="26617"
  > </a
  ><a name="26618" href="Session.html#26603" class="Bound"
  >o</a
  ><a name="26619"
  >
  </a
  ><a name="26622" class="Keyword"
  >where</a
  ><a name="26627"
  > </a
  ><a name="26628" href="Session.html#26628" class="Function"
  >aux</a
  ><a name="26631"
  > </a
  ><a name="26632" class="Symbol"
  >=</a
  ><a name="26633"
  > </a
  ><a name="26634" class="Symbol"
  >&#955;</a
  ><a name="26635"
  > </a
  ><a name="26636" href="Session.html#26636" class="Bound"
  >o</a
  ><a name="26637"
  > </a
  ><a name="26638" class="Symbol"
  >&#8594;</a
  ><a name="26639"
  > </a
  ><a name="26640" href="Session.html#20325" class="Function"
  >run</a
  ><a name="26643"
  > </a
  ><a name="26644" class="Symbol"
  >(</a
  ><a name="26645" href="Data.Product.html#539" class="Field"
  >snd</a
  ><a name="26648"
  > </a
  ><a name="26649" class="Symbol"
  >(</a
  ><a name="26650" href="Session.html#26605" class="Bound"
  >gp</a
  ><a name="26652"
  > </a
  ><a name="26653" href="Session.html#26636" class="Bound"
  >o</a
  ><a name="26654" class="Symbol"
  >))</a
  ><a name="26656"
  > </a
  ><a name="26657" class="Symbol"
  >(</a
  ><a name="26658" href="Session.html#18245" class="Postulate"
  >unsafeCoerce</a
  ><a name="26670"
  > </a
  ><a name="26671" href="Session.html#26609" class="Bound"
  >cs</a
  ><a name="26673" class="Symbol"
  >)</a
  ><a name="26674"
  > </a
  ><a name="26675" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="26678"
  >
                    </a
  ><a name="26699" href="Data.Product.html#2824" class="Function"
  >uc</a
  ><a name="26701"
  > </a
  ><a name="26702" href="Data.Sum.html#678" class="Function Operator"
  >&#8846;.[</a
  ><a name="26705"
  > </a
  ><a name="26706" href="Data.Product.html#2659" class="Function"
  >cu</a
  ><a name="26708"
  > </a
  ><a name="26709" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="26715"
  > </a
  ><a name="26716" href="Data.Sum.html#678" class="Function Operator"
  >,</a
  ><a name="26717"
  > </a
  ><a name="26718" class="Symbol"
  >(&#955;</a
  ><a name="26720"
  > </a
  ><a name="26721" href="Session.html#26721" class="Bound"
  >o</a
  ><a name="26722"
  > </a
  ><a name="26723" href="Session.html#26723" class="Bound"
  >_</a
  ><a name="26724"
  > </a
  ><a name="26725" class="Symbol"
  >&#8594;</a
  ><a name="26726"
  > </a
  ><a name="26727" href="Session.html#26628" class="Function"
  >aux</a
  ><a name="26730"
  > </a
  ><a name="26731" href="Session.html#26721" class="Bound"
  >o</a
  ><a name="26732" class="Symbol"
  >)</a
  ><a name="26733"
  > </a
  ><a name="26734" href="Data.Sum.html#678" class="Function Operator"
  >]</a
  ><a name="26735"
  ></pre>
<p>Closed processes describe IO computations.</p>
<pre></a
  ><a name="26805" href="Session.html#26805" class="Function"
  >run[]</a
  ><a name="26810"
  > </a
  ><a name="26811" class="Symbol"
  >:</a
  ><a name="26812"
  > </a
  ><a name="26813" class="Symbol"
  >&#8704;</a
  ><a name="26814"
  > </a
  ><a name="26815" class="Symbol"
  >{</a
  ><a name="26816" href="Session.html#26816" class="Bound"
  >X</a
  ><a name="26817" class="Symbol"
  >}</a
  ><a name="26818"
  > </a
  ><a name="26819" class="Symbol"
  >&#8594;</a
  ><a name="26820"
  >  </a
  ><a name="26822" href="Session.html#18655" class="Function"
  >IOProc</a
  ><a name="26828"
  > </a
  ><a name="26829" href="Session.html#26816" class="Bound"
  >X</a
  ><a name="26830"
  > </a
  ><a name="26831" class="Symbol"
  >&#8594;</a
  ><a name="26832"
  > </a
  ><a name="26833" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="26835"
  > </a
  ><a name="26836" href="Session.html#26816" class="Bound"
  >X</a
  ><a name="26837"
  >
</a
  ><a name="26838" href="Session.html#26805" class="Function"
  >run[]</a
  ><a name="26843"
  > </a
  ><a name="26844" href="Session.html#26844" class="Bound"
  >P</a
  ><a name="26845"
  > </a
  ><a name="26846" class="Symbol"
  >=</a
  ><a name="26847"
  > </a
  ><a name="26848" href="Session.html#19673" class="Function"
  >mapIO</a
  ><a name="26853"
  > </a
  ><a name="26854" href="Data.Product.html#525" class="Field"
  >fst</a
  ><a name="26857"
  > </a
  ><a name="26858" class="Symbol"
  >(</a
  ><a name="26859" href="Session.html#20325" class="Function"
  >run</a
  ><a name="26862"
  > </a
  ><a name="26863" href="Session.html#26844" class="Bound"
  >P</a
  ><a name="26864"
  > </a
  ><a name="26865" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="26867" class="Symbol"
  >)</a
  ><a name="26868"
  ></pre>
<p>Note that as the evaluator allows for processes that embed any <code>IO</code> action one could easily add unwanted behaviours: the user is still free to capture a fragment of <code>IO</code> to be considered <em>safe</em> and simply compose this evaluator after a translation phase to <code>IO</code>.</p>
<p>For simplicity, the currently provided <a href="Session.Examples.html">examples</a> just use <code>IO</code> for basic operations like suspending processes for finite amounts of time or accessing the standard output.</p></body></html>