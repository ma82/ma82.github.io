<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Session</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="Content-Style-Type" content="text/css"/>
<link href="Agda.css" rel="stylesheet" type="text/css"/></head><body><p><a href="https://www.gnu.org/licenses/gpl.html">2013-2014 Matteo Acerbi</a></p>
<h1 id="linear-dependent-session-types-wip">Linear dependent session types [WIP]</h1>
<h2 id="introduction">Introduction</h2>
<p>This document describes and contains an Agda implementation of an embedded concurrent language with linear dependent session types.</p>
<p>The reader must be warned that in this work we are using Agda <em>only</em> to try and mimic features typical of a session typed process calculus with a by-construction well-typed representation: we are in no way in the position to prove any correspondence with a logical system.</p>
<p>We nonetheless adopt notations and ideas from more theoretical works in the fields of process algebras and linear logic, in particular from Philip Wadler's &quot;Propositions as Sessions&quot; paper (for the main type and terms constructs), and from the recent line of work by Caires, Pfenning and Toninho (on monadic syntax, corecursion and dependent types).</p>
<p>The immediate goal of this development is not to formalise a typed process calculus, but to allow Agda users to experiment with an <em>embedded</em> concurrency-oriented DSL: before attempting to prove the properties of the system or even of specific processes, we aim at designing a programmer-friendly interface.</p>
<p>We provide an evaluation function making use of the Haskell FFI: it is therefore possible to compile and execute programs in the DSL as Haskell process (see the <a href="http://github.com/ma82/session/">README</a> for instructions on how to attempt compilation). Note that in order to obtain the evaluator (see the end of this file) we had to (locally) disable totality checking and to use <code>unsafeCoerce</code> in several places.</p>
<p>We are currently studying how to define a total non-deterministic reference semantics which will allow formalised reasoning concerning the concurrent execution of processes.</p>
<pre></a
  ><a name="1793" class="Keyword"
  >module</a
  ><a name="1799"
  > </a
  ><a name="1800" href="Session.html#1" class="Module"
  >Session</a
  ><a name="1807"
  > </a
  ><a name="1808" class="Keyword"
  >where</a
  ><a name="1813"
  >

</a
  ><a name="1815" class="Keyword"
  >open</a
  ><a name="1819"
  > </a
  ><a name="1820" class="Keyword"
  >import</a
  ><a name="1826"
  > </a
  ><a name="1827" href="Session.Base.html#1" class="Module"
  >Session.Base</a
  ><a name="1839"
  > </a
  ><a name="1840" class="Keyword"
  >public</a
  ><a name="1846"
  ></pre>
<h2 id="types">Types</h2>
<p>The syntax for types is heavily inspired by both <em>Strictly Positive Families</em> (the version in Peter Morris's PhD thesis) and (indexed) <em>Descriptions</em> (Chapman et al, &quot;The Gentle Art of Levitation&quot;).</p>
<p>In our case, however, we do not want to describe indexed functors: we just want to be able to close the language under a (greatest) fixpoint operator/binder <code>`nu</code>, allowing nested usages thanks to a &quot;well-typed Bird-Paterson&quot; encoding of binding.</p>
<p>To compare with the cited universes, note that if we tried to give a <code>(I → Set) → (O → Set)</code> semantics to the <code>`I</code>, <code>`Σ</code> , <code>`Π</code> , <code>`ν</code> codes we would have to ignore the input of type <code>O</code>: in any case, such an interpretation would not make much sense here.</p>
<p>As opposed to Wadler's CP, the typing rules for the additional constructors <code>⊗</code>, <code>⅋</code>, <code>¡</code>, <code>¿</code> will not correspond directly to those of classical linear logic: however, the corresponding syntax maintains similar operational meaning (channel transmission and client/server interactions).</p>
<p>We add a type called <code>Side</code> (endpoint of a channel), with two only inhabitants: <code>+</code>, <code>-</code> . <code>Entry</code> is a type of optionally &quot;sided&quot; (session typed) codes, where absence of a side corresponds to the session not having started yet.</p>
<p>When a <code>Side</code> is specified, the <code>Entry</code> corresponds to an obligation for the process that contains it in its (input) context: if it is <code>+</code> then the session type is to be interpreted without changes, otherwise the process must behave along that channel by following the <em>dual</em> obligation (receiving vs sending, reading vs writing, connecting vs accepting).</p>
<p>Note that for what concerns <code>_⊗_</code> and <code>_⅋_</code> a whole <code>Entry</code> is required as the description of how a process participates to a channel needs to be preserved by the transfer.</p>
<pre></a
  ><a name="3656" class="Keyword"
  >mutual</a
  ><a name="3662"
  > 

  </a
  ><a name="3667" href="Session.html#3667" class="Function"
  >De</a
  ><a name="3669"
  >    </a
  ><a name="3673" class="Symbol"
  >=</a
  ><a name="3674"
  > </a
  ><a name="3675" class="Symbol"
  >&#955;</a
  ><a name="3676"
  > </a
  ><a name="3677" href="Session.html#3677" class="Bound"
  >I</a
  ><a name="3678"
  > </a
  ><a name="3679" class="Symbol"
  >&#8594;</a
  ><a name="3680"
  > </a
  ><a name="3681" href="Session.html#3677" class="Bound"
  >I</a
  ><a name="3682"
  > </a
  ><a name="3683" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="3684"
  > </a
  ><a name="3685" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="3686"
  >
  </a
  ><a name="3689" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="3693"
  >  </a
  ><a name="3695" class="Symbol"
  >=</a
  ><a name="3696"
  > </a
  ><a name="3697" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="3698"
  > </a
  ><a name="3699" class="Symbol"
  >_</a
  ><a name="3700"
  > </a
  ><a name="3701" class="Symbol"
  >&#955;</a
  ><a name="3702"
  > </a
  ><a name="3703" href="Session.html#3703" class="Bound"
  >I</a
  ><a name="3704"
  > </a
  ><a name="3705" class="Symbol"
  >&#8594;</a
  ><a name="3706"
  > </a
  ><a name="3707" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="3708"
  > </a
  ><a name="3709" class="Symbol"
  >_</a
  ><a name="3710"
  > </a
  ><a name="3711" class="Symbol"
  >&#955;</a
  ><a name="3712"
  > </a
  ><a name="3713" href="Session.html#3713" class="Bound"
  >O</a
  ><a name="3714"
  > </a
  ><a name="3715" class="Symbol"
  >&#8594;</a
  ><a name="3716"
  > </a
  ><a name="3717" href="Session.html#3703" class="Bound"
  >I</a
  ><a name="3718"
  > </a
  ><a name="3719" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="3720"
  > </a
  ><a name="3721" href="Session.html#3713" class="Bound"
  >O</a
  ><a name="3722"
  >
  </a
  ><a name="3725" href="Session.html#3725" class="Function"
  >Entry</a
  ><a name="3730"
  > </a
  ><a name="3731" class="Symbol"
  >=</a
  ><a name="3732"
  > </a
  ><a name="3733" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="3735"
  > </a
  ><a name="3736" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="3740"
  > </a
  ><a name="3741" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="3742"
  > </a
  ><a name="3743" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="3747"
  >

  </a
  ><a name="3751" class="Keyword"
  >data</a
  ><a name="3755"
  > </a
  ><a name="3756" href="Session.html#3756" class="Datatype Operator"
  >_&#9657;_</a
  ><a name="3759"
  > </a
  ><a name="3760" class="Symbol"
  >(</a
  ><a name="3761" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="3762"
  > </a
  ><a name="3763" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="3764"
  > </a
  ><a name="3765" class="Symbol"
  >:</a
  ><a name="3766"
  > </a
  ><a name="3767" class="PrimitiveType"
  >Set</a
  ><a name="3770" class="Symbol"
  >)</a
  ><a name="3771"
  > </a
  ><a name="3772" class="Symbol"
  >:</a
  ><a name="3773"
  > </a
  ><a name="3774" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="3778"
  > </a
  ><a name="3779" class="Keyword"
  >where</a
  ><a name="3784"
  ></pre>
<ul>
<li>Exiting a session</li>
</ul>
<pre>    </a
  ><a name="3835" href="Session.html#3835" class="InductiveConstructor"
  >`I</a
  ><a name="3837"
  >      </a
  ><a name="3843" class="Symbol"
  >:</a
  ><a name="3844"
  >                     </a
  ><a name="3865" class="Symbol"
  >(</a
  ><a name="3866" href="Session.html#3866" class="Bound"
  >i</a
  ><a name="3867"
  > </a
  ><a name="3868" class="Symbol"
  >:</a
  ><a name="3869"
  > </a
  ><a name="3870" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="3871" class="Symbol"
  >)</a
  ><a name="3872"
  > </a
  ><a name="3873" class="Symbol"
  >&#8594;</a
  ><a name="3874"
  > </a
  ><a name="3875" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="3876"
  > </a
  ><a name="3877" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="3878"
  > </a
  ><a name="3879" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="3880"
  ></pre>
<ul>
<li>Writing and reading values</li>
</ul>
<pre>    </a
  ><a name="3940" href="Session.html#3940" class="InductiveConstructor"
  >`&#931;</a
  ><a name="3942"
  > </a
  ><a name="3943" href="Session.html#3943" class="InductiveConstructor"
  >`&#928;</a
  ><a name="3945"
  >   </a
  ><a name="3948" class="Symbol"
  >:</a
  ><a name="3949"
  > </a
  ><a name="3950" class="Symbol"
  >(</a
  ><a name="3951" href="Session.html#3951" class="Bound"
  >S</a
  ><a name="3952"
  > </a
  ><a name="3953" class="Symbol"
  >:</a
  ><a name="3954"
  > </a
  ><a name="3955" class="PrimitiveType"
  >Set</a
  ><a name="3958" class="Symbol"
  >)(</a
  ><a name="3960" href="Session.html#3960" class="Bound"
  >T</a
  ><a name="3961"
  > </a
  ><a name="3962" class="Symbol"
  >:</a
  ><a name="3963"
  > </a
  ><a name="3964" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="3965"
  > </a
  ><a name="3966" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="3967"
  > </a
  ><a name="3968" href="Session.html#3951" class="Bound"
  >S</a
  ><a name="3969" class="Symbol"
  >)</a
  ><a name="3970"
  >        </a
  ><a name="3978" class="Symbol"
  >&#8594;</a
  ><a name="3979"
  > </a
  ><a name="3980" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="3981"
  > </a
  ><a name="3982" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="3983"
  > </a
  ><a name="3984" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="3985"
  ></pre>
<ul>
<li>Dependency on previously exchanged values</li>
</ul>
<pre>    </a
  ><a name="4060" href="Session.html#4060" class="InductiveConstructor"
  >`^</a
  ><a name="4062"
  >      </a
  ><a name="4068" class="Symbol"
  >:</a
  ><a name="4069"
  > </a
  ><a name="4070" class="Symbol"
  >(</a
  ><a name="4071" href="Session.html#4071" class="Bound"
  >T</a
  ><a name="4072"
  > </a
  ><a name="4073" class="Symbol"
  >:</a
  ><a name="4074"
  > </a
  ><a name="4075" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="4076"
  > </a
  ><a name="4077" class="Symbol"
  >&#8594;</a
  ><a name="4078"
  > </a
  ><a name="4079" href="Session.html#3667" class="Function"
  >De</a
  ><a name="4081"
  > </a
  ><a name="4082" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="4083" class="Symbol"
  >)</a
  ><a name="4084"
  >              </a
  ><a name="4098" class="Symbol"
  >&#8594;</a
  ><a name="4099"
  > </a
  ><a name="4100" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="4101"
  > </a
  ><a name="4102" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="4103"
  > </a
  ><a name="4104" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="4105"
  ></pre>
<ul>
<li>Sending and receiving channels</li>
</ul>
<pre>    </a
  ><a name="4169" href="Session.html#4169" class="InductiveConstructor Operator"
  >_&#8855;_</a
  ><a name="4172"
  > </a
  ><a name="4173" href="Session.html#4173" class="InductiveConstructor Operator"
  >_&#8523;_</a
  ><a name="4176"
  > </a
  ><a name="4177" class="Symbol"
  >:</a
  ><a name="4178"
  > </a
  ><a name="4179" class="Symbol"
  >(</a
  ><a name="4180" href="Session.html#4180" class="Bound"
  >L</a
  ><a name="4181"
  > </a
  ><a name="4182" class="Symbol"
  >:</a
  ><a name="4183"
  > </a
  ><a name="4184" href="Session.html#3725" class="Function"
  >Entry</a
  ><a name="4189" class="Symbol"
  >)(</a
  ><a name="4191" href="Session.html#4191" class="Bound"
  >R</a
  ><a name="4192"
  > </a
  ><a name="4193" class="Symbol"
  >:</a
  ><a name="4194"
  > </a
  ><a name="4195" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="4196"
  > </a
  ><a name="4197" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="4198"
  > </a
  ><a name="4199" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="4200" class="Symbol"
  >)</a
  ><a name="4201"
  >      </a
  ><a name="4207" class="Symbol"
  >&#8594;</a
  ><a name="4208"
  > </a
  ><a name="4209" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="4210"
  > </a
  ><a name="4211" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="4212"
  > </a
  ><a name="4213" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="4214"
  ></pre>
<ul>
<li>Servers and clients</li>
</ul>
<pre>    </a
  ><a name="4267" href="Session.html#4267" class="InductiveConstructor Operator"
  >&#161;_</a
  ><a name="4269"
  > </a
  ><a name="4270" href="Session.html#4270" class="InductiveConstructor Operator"
  >&#191;_</a
  ><a name="4272"
  >   </a
  ><a name="4275" class="Symbol"
  >:</a
  ><a name="4276"
  > </a
  ><a name="4277" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="4281"
  >                        </a
  ><a name="4305" class="Symbol"
  >&#8594;</a
  ><a name="4306"
  > </a
  ><a name="4307" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="4308"
  > </a
  ><a name="4309" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="4310"
  > </a
  ><a name="4311" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="4312"
  ></pre>
<ul>
<li>Corecursion</li>
</ul>
<pre>    </a
  ><a name="4357" href="Session.html#4357" class="InductiveConstructor"
  >`&#957;</a
  ><a name="4359"
  >      </a
  ><a name="4365" class="Symbol"
  >:</a
  ><a name="4366"
  > </a
  ><a name="4367" class="Symbol"
  >(</a
  ><a name="4368" href="Session.html#4368" class="Bound"
  >F</a
  ><a name="4369"
  > </a
  ><a name="4370" class="Symbol"
  >:</a
  ><a name="4371"
  > </a
  ><a name="4372" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="4373"
  > </a
  ><a name="4374" class="Symbol"
  >&#8594;</a
  ><a name="4375"
  > </a
  ><a name="4376" href="Session.html#3667" class="Function"
  >De</a
  ><a name="4378"
  > </a
  ><a name="4379" class="Symbol"
  >(</a
  ><a name="4380" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="4381"
  > </a
  ><a name="4382" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="4383"
  > </a
  ><a name="4384" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="4385" class="Symbol"
  >))(</a
  ><a name="4388" href="Session.html#4388" class="Bound"
  >o</a
  ><a name="4389"
  > </a
  ><a name="4390" class="Symbol"
  >:</a
  ><a name="4391"
  > </a
  ><a name="4392" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="4393" class="Symbol"
  >)</a
  ><a name="4394"
  > </a
  ><a name="4395" class="Symbol"
  >&#8594;</a
  ><a name="4396"
  > </a
  ><a name="4397" href="Session.html#3761" class="Bound"
  >I</a
  ><a name="4398"
  > </a
  ><a name="4399" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="4400"
  > </a
  ><a name="4401" href="Session.html#3763" class="Bound"
  >O</a
  ><a name="4402"
  ></pre>

<pre></a
  ><a name="4428" href="Session.html#4428" class="Function"
  >`&#931;^</a
  ><a name="4431"
  > </a
  ><a name="4432" href="Session.html#4432" class="Function"
  >`&#928;^</a
  ><a name="4435"
  > </a
  ><a name="4436" class="Symbol"
  >:</a
  ><a name="4437"
  > </a
  ><a name="4438" class="Symbol"
  >{</a
  ><a name="4439" href="Session.html#4439" class="Bound"
  >I</a
  ><a name="4440"
  > </a
  ><a name="4441" href="Session.html#4441" class="Bound"
  >O</a
  ><a name="4442"
  > </a
  ><a name="4443" class="Symbol"
  >:</a
  ><a name="4444"
  > </a
  ><a name="4445" class="PrimitiveType"
  >Set</a
  ><a name="4448" class="Symbol"
  >}(</a
  ><a name="4450" href="Session.html#4450" class="Bound"
  >S</a
  ><a name="4451"
  > </a
  ><a name="4452" class="Symbol"
  >:</a
  ><a name="4453"
  > </a
  ><a name="4454" class="PrimitiveType"
  >Set</a
  ><a name="4457" class="Symbol"
  >)(</a
  ><a name="4459" href="Session.html#4459" class="Bound"
  >T</a
  ><a name="4460"
  > </a
  ><a name="4461" class="Symbol"
  >:</a
  ><a name="4462"
  > </a
  ><a name="4463" href="Session.html#4450" class="Bound"
  >S</a
  ><a name="4464"
  > </a
  ><a name="4465" class="Symbol"
  >&#8594;</a
  ><a name="4466"
  > </a
  ><a name="4467" href="Session.html#3667" class="Function"
  >De</a
  ><a name="4469"
  > </a
  ><a name="4470" href="Session.html#4439" class="Bound"
  >I</a
  ><a name="4471" class="Symbol"
  >)</a
  ><a name="4472"
  > </a
  ><a name="4473" class="Symbol"
  >&#8594;</a
  ><a name="4474"
  > </a
  ><a name="4475" href="Session.html#4439" class="Bound"
  >I</a
  ><a name="4476"
  > </a
  ><a name="4477" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="4478"
  > </a
  ><a name="4479" href="Session.html#4441" class="Bound"
  >O</a
  ><a name="4480"
  >
</a
  ><a name="4481" href="Session.html#4428" class="Function"
  >`&#931;^</a
  ><a name="4484"
  > </a
  ><a name="4485" href="Session.html#4485" class="Bound"
  >S</a
  ><a name="4486"
  > </a
  ><a name="4487" href="Session.html#4487" class="Bound"
  >T</a
  ><a name="4488"
  > </a
  ><a name="4489" class="Symbol"
  >=</a
  ><a name="4490"
  > </a
  ><a name="4491" href="Session.html#3940" class="InductiveConstructor"
  >`&#931;</a
  ><a name="4493"
  > </a
  ><a name="4494" href="Session.html#4485" class="Bound"
  >S</a
  ><a name="4495"
  > </a
  ><a name="4496" class="Symbol"
  >(</a
  ><a name="4497" href="Session.html#4060" class="InductiveConstructor"
  >`^</a
  ><a name="4499"
  > </a
  ><a name="4500" href="Session.html#4487" class="Bound"
  >T</a
  ><a name="4501" class="Symbol"
  >)</a
  ><a name="4502"
  >
</a
  ><a name="4503" href="Session.html#4432" class="Function"
  >`&#928;^</a
  ><a name="4506"
  > </a
  ><a name="4507" href="Session.html#4507" class="Bound"
  >S</a
  ><a name="4508"
  > </a
  ><a name="4509" href="Session.html#4509" class="Bound"
  >T</a
  ><a name="4510"
  > </a
  ><a name="4511" class="Symbol"
  >=</a
  ><a name="4512"
  > </a
  ><a name="4513" href="Session.html#3943" class="InductiveConstructor"
  >`&#928;</a
  ><a name="4515"
  > </a
  ><a name="4516" href="Session.html#4507" class="Bound"
  >S</a
  ><a name="4517"
  > </a
  ><a name="4518" class="Symbol"
  >(</a
  ><a name="4519" href="Session.html#4060" class="InductiveConstructor"
  >`^</a
  ><a name="4521"
  > </a
  ><a name="4522" href="Session.html#4509" class="Bound"
  >T</a
  ><a name="4523" class="Symbol"
  >)</a
  ><a name="4524"
  ></pre>

<pre></a
  ><a name="4550" href="Session.html#4550" class="Function Operator"
  >_&#9666;_</a
  ><a name="4553"
  > </a
  ><a name="4554" class="Symbol"
  >:</a
  ><a name="4555"
  > </a
  ><a name="4556" class="PrimitiveType"
  >Set</a
  ><a name="4559"
  > </a
  ><a name="4560" class="Symbol"
  >&#8594;</a
  ><a name="4561"
  > </a
  ><a name="4562" class="PrimitiveType"
  >Set</a
  ><a name="4565"
  > </a
  ><a name="4566" class="Symbol"
  >&#8594;</a
  ><a name="4567"
  > </a
  ><a name="4568" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="4572"
  >
</a
  ><a name="4573" href="Session.html#4573" class="Bound"
  >O</a
  ><a name="4574"
  > </a
  ><a name="4575" href="Session.html#4550" class="Function Operator"
  >&#9666;</a
  ><a name="4576"
  > </a
  ><a name="4577" href="Session.html#4577" class="Bound"
  >I</a
  ><a name="4578"
  > </a
  ><a name="4579" class="Symbol"
  >=</a
  ><a name="4580"
  > </a
  ><a name="4581" href="Session.html#4577" class="Bound"
  >I</a
  ><a name="4582"
  > </a
  ><a name="4583" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="4584"
  > </a
  ><a name="4585" href="Session.html#4573" class="Bound"
  >O</a
  ><a name="4586"
  ></pre>
<p>This representation of the language of types should not be considered definitive but it seems reasonably effective.</p>
<p>Other approaches, where the session types inductive definition <code>_▹_</code> would only have one parameter (as in <em>Descriptions</em>), seemed more difficult to implement and led to more awkward encodings of the syntax: we probably did not try all the possibilities, though.</p>
<h3 id="types-and-sides">Types and sides</h3>
<p>A &quot;sided&quot; type former (code) <code>[_]F</code> is the type former (code) <code>F</code> when the side is <code>+</code>, the <em>dual</em> of <code>F</code> when it is <code>-</code>.</p>
<pre></a
  ><a name="5136" href="Session.html#5136" class="Function Operator"
  >[_]&#931;</a
  ><a name="5140"
  >   </a
  ><a name="5143" href="Session.html#5143" class="Function Operator"
  >[_]&#928;</a
  ><a name="5147"
  >   </a
  ><a name="5150" class="Symbol"
  >:</a
  ><a name="5151"
  > </a
  ><a name="5152" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="5156"
  >  </a
  ><a name="5158" class="Symbol"
  >&#8594;</a
  ><a name="5159"
  > </a
  ><a name="5160" class="Symbol"
  >{</a
  ><a name="5161" href="Session.html#5161" class="Bound"
  >I</a
  ><a name="5162"
  > </a
  ><a name="5163" href="Session.html#5163" class="Bound"
  >O</a
  ><a name="5164"
  > </a
  ><a name="5165" class="Symbol"
  >:</a
  ><a name="5166"
  > </a
  ><a name="5167" class="PrimitiveType"
  >Set</a
  ><a name="5170" class="Symbol"
  >}(</a
  ><a name="5172" href="Session.html#5172" class="Bound"
  >S</a
  ><a name="5173"
  > </a
  ><a name="5174" class="Symbol"
  >:</a
  ><a name="5175"
  > </a
  ><a name="5176" class="PrimitiveType"
  >Set</a
  ><a name="5179" class="Symbol"
  >)(</a
  ><a name="5181" href="Session.html#5181" class="Bound"
  >T</a
  ><a name="5182"
  > </a
  ><a name="5183" class="Symbol"
  >:</a
  ><a name="5184"
  > </a
  ><a name="5185" href="Session.html#5161" class="Bound"
  >I</a
  ><a name="5186"
  > </a
  ><a name="5187" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="5188"
  > </a
  ><a name="5189" href="Session.html#5172" class="Bound"
  >S</a
  ><a name="5190" class="Symbol"
  >)</a
  ><a name="5191"
  >    </a
  ><a name="5195" class="Symbol"
  >&#8594;</a
  ><a name="5196"
  > </a
  ><a name="5197" href="Session.html#5161" class="Bound"
  >I</a
  ><a name="5198"
  > </a
  ><a name="5199" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="5200"
  > </a
  ><a name="5201" href="Session.html#5163" class="Bound"
  >O</a
  ><a name="5202"
  >
</a
  ><a name="5203" href="Session.html#5203" class="Function Operator"
  >[_]&#931;^</a
  ><a name="5208"
  >  </a
  ><a name="5210" href="Session.html#5210" class="Function Operator"
  >[_]&#928;^</a
  ><a name="5215"
  >  </a
  ><a name="5217" class="Symbol"
  >:</a
  ><a name="5218"
  > </a
  ><a name="5219" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="5223"
  >  </a
  ><a name="5225" class="Symbol"
  >&#8594;</a
  ><a name="5226"
  > </a
  ><a name="5227" class="Symbol"
  >{</a
  ><a name="5228" href="Session.html#5228" class="Bound"
  >I</a
  ><a name="5229"
  > </a
  ><a name="5230" href="Session.html#5230" class="Bound"
  >O</a
  ><a name="5231"
  > </a
  ><a name="5232" class="Symbol"
  >:</a
  ><a name="5233"
  > </a
  ><a name="5234" class="PrimitiveType"
  >Set</a
  ><a name="5237" class="Symbol"
  >}(</a
  ><a name="5239" href="Session.html#5239" class="Bound"
  >S</a
  ><a name="5240"
  > </a
  ><a name="5241" class="Symbol"
  >:</a
  ><a name="5242"
  > </a
  ><a name="5243" class="PrimitiveType"
  >Set</a
  ><a name="5246" class="Symbol"
  >)(</a
  ><a name="5248" href="Session.html#5248" class="Bound"
  >T</a
  ><a name="5249"
  > </a
  ><a name="5250" class="Symbol"
  >:</a
  ><a name="5251"
  > </a
  ><a name="5252" href="Session.html#5239" class="Bound"
  >S</a
  ><a name="5253"
  > </a
  ><a name="5254" class="Symbol"
  >&#8594;</a
  ><a name="5255"
  > </a
  ><a name="5256" href="Session.html#3667" class="Function"
  >De</a
  ><a name="5258"
  > </a
  ><a name="5259" href="Session.html#5228" class="Bound"
  >I</a
  ><a name="5260" class="Symbol"
  >)</a
  ><a name="5261"
  > </a
  ><a name="5262" class="Symbol"
  >&#8594;</a
  ><a name="5263"
  > </a
  ><a name="5264" href="Session.html#5228" class="Bound"
  >I</a
  ><a name="5265"
  > </a
  ><a name="5266" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="5267"
  > </a
  ><a name="5268" href="Session.html#5230" class="Bound"
  >O</a
  ><a name="5269"
  >
</a
  ><a name="5270" href="Session.html#5270" class="Function Operator"
  >_[_]&#8855;_</a
  ><a name="5276"
  > </a
  ><a name="5277" href="Session.html#5277" class="Function Operator"
  >_[_]&#8523;_</a
  ><a name="5283"
  > </a
  ><a name="5284" class="Symbol"
  >:</a
  ><a name="5285"
  > </a
  ><a name="5286" href="Session.html#3725" class="Function"
  >Entry</a
  ><a name="5291"
  > </a
  ><a name="5292" class="Symbol"
  >&#8594;</a
  ><a name="5293"
  > </a
  ><a name="5294" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="5298"
  > </a
  ><a name="5299" class="Symbol"
  >&#8594;</a
  ><a name="5300"
  > </a
  ><a name="5301" class="Symbol"
  >{</a
  ><a name="5302" href="Session.html#5302" class="Bound"
  >I</a
  ><a name="5303"
  > </a
  ><a name="5304" href="Session.html#5304" class="Bound"
  >O</a
  ><a name="5305"
  > </a
  ><a name="5306" class="Symbol"
  >:</a
  ><a name="5307"
  > </a
  ><a name="5308" class="PrimitiveType"
  >Set</a
  ><a name="5311" class="Symbol"
  >}</a
  ><a name="5312"
  > </a
  ><a name="5313" class="Symbol"
  >&#8594;</a
  ><a name="5314"
  > </a
  ><a name="5315" href="Session.html#5302" class="Bound"
  >I</a
  ><a name="5316"
  > </a
  ><a name="5317" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="5318"
  > </a
  ><a name="5319" href="Session.html#5304" class="Bound"
  >O</a
  ><a name="5320"
  >         </a
  ><a name="5329" class="Symbol"
  >&#8594;</a
  ><a name="5330"
  > </a
  ><a name="5331" href="Session.html#5302" class="Bound"
  >I</a
  ><a name="5332"
  > </a
  ><a name="5333" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="5334"
  > </a
  ><a name="5335" href="Session.html#5304" class="Bound"
  >O</a
  ><a name="5336"
  >
</a
  ><a name="5337" href="Session.html#5337" class="Function Operator"
  >[_]&#161;_</a
  ><a name="5342"
  >  </a
  ><a name="5344" href="Session.html#5344" class="Function Operator"
  >[_]&#191;_</a
  ><a name="5349"
  >  </a
  ><a name="5351" class="Symbol"
  >:</a
  ><a name="5352"
  > </a
  ><a name="5353" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="5357"
  >  </a
  ><a name="5359" class="Symbol"
  >&#8594;</a
  ><a name="5360"
  > </a
  ><a name="5361" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="5365"
  >  </a
  ><a name="5367" class="Symbol"
  >&#8594;</a
  ><a name="5368"
  > </a
  ><a name="5369" class="Symbol"
  >{</a
  ><a name="5370" href="Session.html#5370" class="Bound"
  >I</a
  ><a name="5371"
  > </a
  ><a name="5372" href="Session.html#5372" class="Bound"
  >O</a
  ><a name="5373"
  > </a
  ><a name="5374" class="Symbol"
  >:</a
  ><a name="5375"
  > </a
  ><a name="5376" class="PrimitiveType"
  >Set</a
  ><a name="5379" class="Symbol"
  >}</a
  ><a name="5380"
  >                </a
  ><a name="5396" class="Symbol"
  >&#8594;</a
  ><a name="5397"
  > </a
  ><a name="5398" href="Session.html#5370" class="Bound"
  >I</a
  ><a name="5399"
  > </a
  ><a name="5400" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="5401"
  > </a
  ><a name="5402" href="Session.html#5372" class="Bound"
  >O</a
  ><a name="5403"
  >
</a
  ><a name="5404" href="Session.html#5136" class="Function Operator"
  >[</a
  ><a name="5405"
  > </a
  ><a name="5406" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5407"
  > </a
  ><a name="5408" href="Session.html#5136" class="Function Operator"
  >]&#931;</a
  ><a name="5410"
  >     </a
  ><a name="5415" class="Symbol"
  >=</a
  ><a name="5416"
  > </a
  ><a name="5417" href="Session.html#3940" class="InductiveConstructor"
  >`&#931;</a
  ><a name="5419"
  >
</a
  ><a name="5420" href="Session.html#5136" class="Function Operator"
  >[</a
  ><a name="5421"
  > </a
  ><a name="5422" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5423"
  > </a
  ><a name="5424" href="Session.html#5136" class="Function Operator"
  >]&#931;</a
  ><a name="5426"
  >     </a
  ><a name="5431" class="Symbol"
  >=</a
  ><a name="5432"
  > </a
  ><a name="5433" href="Session.html#3943" class="InductiveConstructor"
  >`&#928;</a
  ><a name="5435"
  >
</a
  ><a name="5436" href="Session.html#5143" class="Function Operator"
  >[</a
  ><a name="5437"
  > </a
  ><a name="5438" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5439"
  > </a
  ><a name="5440" href="Session.html#5143" class="Function Operator"
  >]&#928;</a
  ><a name="5442"
  >     </a
  ><a name="5447" class="Symbol"
  >=</a
  ><a name="5448"
  > </a
  ><a name="5449" href="Session.html#3943" class="InductiveConstructor"
  >`&#928;</a
  ><a name="5451"
  > 
</a
  ><a name="5453" href="Session.html#5143" class="Function Operator"
  >[</a
  ><a name="5454"
  > </a
  ><a name="5455" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5456"
  > </a
  ><a name="5457" href="Session.html#5143" class="Function Operator"
  >]&#928;</a
  ><a name="5459"
  >     </a
  ><a name="5464" class="Symbol"
  >=</a
  ><a name="5465"
  > </a
  ><a name="5466" href="Session.html#3940" class="InductiveConstructor"
  >`&#931;</a
  ><a name="5468"
  > 
</a
  ><a name="5470" href="Session.html#5203" class="Function Operator"
  >[</a
  ><a name="5471"
  > </a
  ><a name="5472" href="Session.html#5472" class="Bound"
  >s</a
  ><a name="5473"
  > </a
  ><a name="5474" href="Session.html#5203" class="Function Operator"
  >]&#931;^</a
  ><a name="5477"
  > </a
  ><a name="5478" href="Session.html#5478" class="Bound"
  >S</a
  ><a name="5479"
  > </a
  ><a name="5480" href="Session.html#5480" class="Bound"
  >T</a
  ><a name="5481"
  > </a
  ><a name="5482" class="Symbol"
  >=</a
  ><a name="5483"
  > </a
  ><a name="5484" href="Session.html#5136" class="Function Operator"
  >[</a
  ><a name="5485"
  > </a
  ><a name="5486" href="Session.html#5472" class="Bound"
  >s</a
  ><a name="5487"
  > </a
  ><a name="5488" href="Session.html#5136" class="Function Operator"
  >]&#931;</a
  ><a name="5490"
  > </a
  ><a name="5491" href="Session.html#5478" class="Bound"
  >S</a
  ><a name="5492"
  > </a
  ><a name="5493" class="Symbol"
  >(</a
  ><a name="5494" href="Session.html#4060" class="InductiveConstructor"
  >`^</a
  ><a name="5496"
  > </a
  ><a name="5497" href="Session.html#5480" class="Bound"
  >T</a
  ><a name="5498" class="Symbol"
  >)</a
  ><a name="5499"
  >
</a
  ><a name="5500" href="Session.html#5210" class="Function Operator"
  >[</a
  ><a name="5501"
  > </a
  ><a name="5502" href="Session.html#5502" class="Bound"
  >s</a
  ><a name="5503"
  > </a
  ><a name="5504" href="Session.html#5210" class="Function Operator"
  >]&#928;^</a
  ><a name="5507"
  > </a
  ><a name="5508" href="Session.html#5508" class="Bound"
  >S</a
  ><a name="5509"
  > </a
  ><a name="5510" href="Session.html#5510" class="Bound"
  >T</a
  ><a name="5511"
  > </a
  ><a name="5512" class="Symbol"
  >=</a
  ><a name="5513"
  > </a
  ><a name="5514" href="Session.html#5143" class="Function Operator"
  >[</a
  ><a name="5515"
  > </a
  ><a name="5516" href="Session.html#5502" class="Bound"
  >s</a
  ><a name="5517"
  > </a
  ><a name="5518" href="Session.html#5143" class="Function Operator"
  >]&#928;</a
  ><a name="5520"
  > </a
  ><a name="5521" href="Session.html#5508" class="Bound"
  >S</a
  ><a name="5522"
  > </a
  ><a name="5523" class="Symbol"
  >(</a
  ><a name="5524" href="Session.html#4060" class="InductiveConstructor"
  >`^</a
  ><a name="5526"
  > </a
  ><a name="5527" href="Session.html#5510" class="Bound"
  >T</a
  ><a name="5528" class="Symbol"
  >)</a
  ><a name="5529"
  >
</a
  ><a name="5530" href="Session.html#5530" class="Bound"
  >L</a
  ><a name="5531"
  > </a
  ><a name="5532" href="Session.html#5270" class="Function Operator"
  >[</a
  ><a name="5533"
  > </a
  ><a name="5534" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5535"
  > </a
  ><a name="5536" href="Session.html#5270" class="Function Operator"
  >]&#8855;</a
  ><a name="5538"
  > </a
  ><a name="5539" href="Session.html#5539" class="Bound"
  >R</a
  ><a name="5540"
  > </a
  ><a name="5541" class="Symbol"
  >=</a
  ><a name="5542"
  > </a
  ><a name="5543" href="Session.html#5530" class="Bound"
  >L</a
  ><a name="5544"
  > </a
  ><a name="5545" href="Session.html#4169" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="5546"
  > </a
  ><a name="5547" href="Session.html#5539" class="Bound"
  >R</a
  ><a name="5548"
  >
</a
  ><a name="5549" href="Session.html#5549" class="Bound"
  >L</a
  ><a name="5550"
  > </a
  ><a name="5551" href="Session.html#5270" class="Function Operator"
  >[</a
  ><a name="5552"
  > </a
  ><a name="5553" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5554"
  > </a
  ><a name="5555" href="Session.html#5270" class="Function Operator"
  >]&#8855;</a
  ><a name="5557"
  > </a
  ><a name="5558" href="Session.html#5558" class="Bound"
  >R</a
  ><a name="5559"
  > </a
  ><a name="5560" class="Symbol"
  >=</a
  ><a name="5561"
  > </a
  ><a name="5562" href="Session.html#5549" class="Bound"
  >L</a
  ><a name="5563"
  > </a
  ><a name="5564" href="Session.html#4173" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="5565"
  > </a
  ><a name="5566" href="Session.html#5558" class="Bound"
  >R</a
  ><a name="5567"
  >
</a
  ><a name="5568" href="Session.html#5568" class="Bound"
  >L</a
  ><a name="5569"
  > </a
  ><a name="5570" href="Session.html#5277" class="Function Operator"
  >[</a
  ><a name="5571"
  > </a
  ><a name="5572" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5573"
  > </a
  ><a name="5574" href="Session.html#5277" class="Function Operator"
  >]&#8523;</a
  ><a name="5576"
  > </a
  ><a name="5577" href="Session.html#5577" class="Bound"
  >R</a
  ><a name="5578"
  > </a
  ><a name="5579" class="Symbol"
  >=</a
  ><a name="5580"
  > </a
  ><a name="5581" href="Session.html#5568" class="Bound"
  >L</a
  ><a name="5582"
  > </a
  ><a name="5583" href="Session.html#4173" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="5584"
  > </a
  ><a name="5585" href="Session.html#5577" class="Bound"
  >R</a
  ><a name="5586"
  >
</a
  ><a name="5587" href="Session.html#5587" class="Bound"
  >L</a
  ><a name="5588"
  > </a
  ><a name="5589" href="Session.html#5277" class="Function Operator"
  >[</a
  ><a name="5590"
  > </a
  ><a name="5591" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5592"
  > </a
  ><a name="5593" href="Session.html#5277" class="Function Operator"
  >]&#8523;</a
  ><a name="5595"
  > </a
  ><a name="5596" href="Session.html#5596" class="Bound"
  >R</a
  ><a name="5597"
  > </a
  ><a name="5598" class="Symbol"
  >=</a
  ><a name="5599"
  > </a
  ><a name="5600" href="Session.html#5587" class="Bound"
  >L</a
  ><a name="5601"
  > </a
  ><a name="5602" href="Session.html#4169" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="5603"
  > </a
  ><a name="5604" href="Session.html#5596" class="Bound"
  >R</a
  ><a name="5605"
  >
</a
  ><a name="5606" href="Session.html#5337" class="Function Operator"
  >[</a
  ><a name="5607"
  > </a
  ><a name="5608" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5609"
  > </a
  ><a name="5610" href="Session.html#5337" class="Function Operator"
  >]&#161;</a
  ><a name="5612"
  > </a
  ><a name="5613" href="Session.html#5613" class="Bound"
  >F</a
  ><a name="5614"
  >   </a
  ><a name="5617" class="Symbol"
  >=</a
  ><a name="5618"
  > </a
  ><a name="5619" href="Session.html#4267" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="5620"
  > </a
  ><a name="5621" href="Session.html#5613" class="Bound"
  >F</a
  ><a name="5622"
  >    
</a
  ><a name="5627" href="Session.html#5337" class="Function Operator"
  >[</a
  ><a name="5628"
  > </a
  ><a name="5629" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5630"
  > </a
  ><a name="5631" href="Session.html#5337" class="Function Operator"
  >]&#161;</a
  ><a name="5633"
  > </a
  ><a name="5634" href="Session.html#5634" class="Bound"
  >F</a
  ><a name="5635"
  >   </a
  ><a name="5638" class="Symbol"
  >=</a
  ><a name="5639"
  > </a
  ><a name="5640" href="Session.html#4270" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="5641"
  > </a
  ><a name="5642" href="Session.html#5634" class="Bound"
  >F</a
  ><a name="5643"
  >    
</a
  ><a name="5648" href="Session.html#5344" class="Function Operator"
  >[</a
  ><a name="5649"
  > </a
  ><a name="5650" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5651"
  > </a
  ><a name="5652" href="Session.html#5344" class="Function Operator"
  >]&#191;</a
  ><a name="5654"
  > </a
  ><a name="5655" href="Session.html#5655" class="Bound"
  >F</a
  ><a name="5656"
  >   </a
  ><a name="5659" class="Symbol"
  >=</a
  ><a name="5660"
  > </a
  ><a name="5661" href="Session.html#4270" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="5662"
  > </a
  ><a name="5663" href="Session.html#5655" class="Bound"
  >F</a
  ><a name="5664"
  >     
</a
  ><a name="5670" href="Session.html#5344" class="Function Operator"
  >[</a
  ><a name="5671"
  > </a
  ><a name="5672" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5673"
  > </a
  ><a name="5674" href="Session.html#5344" class="Function Operator"
  >]&#191;</a
  ><a name="5676"
  > </a
  ><a name="5677" href="Session.html#5677" class="Bound"
  >F</a
  ><a name="5678"
  >   </a
  ><a name="5681" class="Symbol"
  >=</a
  ><a name="5682"
  > </a
  ><a name="5683" href="Session.html#4267" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="5684"
  > </a
  ><a name="5685" href="Session.html#5677" class="Bound"
  >F</a
  ><a name="5686"
  ></pre>
<h3 id="contexts">Contexts</h3>
<p>A context is a simple list of entries, i.e. codes paired with an optional side. Absence of the side corresponds to the session not being started yet: in this situation we say that the channel is &quot;new&quot;.</p>
<pre></a
  ><a name="5929" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="5931"
  > </a
  ><a name="5932" class="Symbol"
  >=</a
  ><a name="5933"
  > </a
  ><a name="5934" href="Data.List.html#659" class="Datatype"
  >List</a
  ><a name="5938"
  > </a
  ><a name="5939" href="Session.html#3725" class="Function"
  >Entry</a
  ><a name="5944"
  ></pre>
<p><code>is¿</code> means &quot;is it safe to duplicate this entry?&quot;.</p>
<pre></a
  ><a name="6022" href="Session.html#6022" class="Function"
  >is&#191;</a
  ><a name="6025"
  > </a
  ><a name="6026" class="Symbol"
  >:</a
  ><a name="6027"
  > </a
  ><a name="6028" href="Session.html#3725" class="Function"
  >Entry</a
  ><a name="6033"
  > </a
  ><a name="6034" class="Symbol"
  >&#8594;</a
  ><a name="6035"
  > </a
  ><a name="6036" class="PrimitiveType"
  >Set</a
  ><a name="6039"
  >
</a
  ><a name="6040" href="Session.html#6022" class="Function"
  >is&#191;</a
  ><a name="6043"
  > </a
  ><a name="6044" class="Symbol"
  >(</a
  ><a name="6045" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6046"
  > </a
  ><a name="6047" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="6048"
  > </a
  ><a name="6049" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6050"
  > </a
  ><a name="6051" class="Symbol"
  >(_</a
  ><a name="6053"
  > </a
  ><a name="6054" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6055"
  > </a
  ><a name="6056" class="Symbol"
  >_</a
  ><a name="6057"
  > </a
  ><a name="6058" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6059"
  > </a
  ><a name="6060" href="Session.html#4270" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="6061"
  > </a
  ><a name="6062" href="Session.html#6062" class="Bound"
  >F</a
  ><a name="6063" class="Symbol"
  >))</a
  ><a name="6065"
  > </a
  ><a name="6066" class="Symbol"
  >=</a
  ><a name="6067"
  > </a
  ><a name="6068" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="6069"
  >
</a
  ><a name="6070" href="Session.html#6022" class="Function"
  >is&#191;</a
  ><a name="6073"
  > </a
  ><a name="6074" class="Symbol"
  >(</a
  ><a name="6075" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6076"
  > </a
  ><a name="6077" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="6078"
  > </a
  ><a name="6079" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6080"
  > </a
  ><a name="6081" class="Symbol"
  >(_</a
  ><a name="6083"
  > </a
  ><a name="6084" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6085"
  > </a
  ><a name="6086" class="Symbol"
  >_</a
  ><a name="6087"
  > </a
  ><a name="6088" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6089"
  > </a
  ><a name="6090" href="Session.html#4267" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="6091"
  > </a
  ><a name="6092" href="Session.html#6092" class="Bound"
  >F</a
  ><a name="6093" class="Symbol"
  >))</a
  ><a name="6095"
  > </a
  ><a name="6096" class="Symbol"
  >=</a
  ><a name="6097"
  > </a
  ><a name="6098" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="6099"
  >
</a
  ><a name="6100" href="Session.html#6022" class="Function"
  >is&#191;</a
  ><a name="6103"
  >  </a
  ><a name="6105" class="Symbol"
  >_</a
  ><a name="6106"
  >                    </a
  ><a name="6126" class="Symbol"
  >=</a
  ><a name="6127"
  > </a
  ><a name="6128" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="6129"
  ></pre>
<p>To construct a server we must check (at compile time) that it will be safe to duplicate all the channels that its runtime copies will have access to: <code>All¿</code> is the predicate over contexts which corresponds to this condition.</p>
<pre></a
  ><a name="6381" href="Session.html#6381" class="Function"
  >All&#191;</a
  ><a name="6385"
  > </a
  ><a name="6386" class="Symbol"
  >:</a
  ><a name="6387"
  > </a
  ><a name="6388" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="6390"
  > </a
  ><a name="6391" class="Symbol"
  >&#8594;</a
  ><a name="6392"
  > </a
  ><a name="6393" class="PrimitiveType"
  >Set</a
  ><a name="6396"
  > </a
  ><a name="6397" class="Symbol"
  >_</a
  ><a name="6398"
  >
</a
  ><a name="6399" href="Session.html#6381" class="Function"
  >All&#191;</a
  ><a name="6403"
  > </a
  ><a name="6404" class="Symbol"
  >=</a
  ><a name="6405"
  > </a
  ><a name="6406" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="6409"
  > </a
  ><a name="6410" href="Session.html#6022" class="Function"
  >is&#191;</a
  ><a name="6413"
  ></pre>
<h3 id="splitting-contexts">Splitting contexts</h3>
<p>We need to define what it means to split an (input) context in two.</p>
<pre></a
  ><a name="6532" class="Keyword"
  >data</a
  ><a name="6536"
  > </a
  ><a name="6537" href="Session.html#6537" class="Datatype"
  >SplitNew</a
  ><a name="6545"
  > </a
  ><a name="6546" class="Symbol"
  >:</a
  ><a name="6547"
  > </a
  ><a name="6548" class="PrimitiveType"
  >Set</a
  ><a name="6551"
  > </a
  ><a name="6552" class="Keyword"
  >where</a
  ><a name="6557"
  > 
  </a
  ><a name="6561" href="Session.html#6561" class="InductiveConstructor"
  >+</a
  ><a name="6562"
  > </a
  ><a name="6563" href="Session.html#6563" class="InductiveConstructor"
  >-</a
  ><a name="6564"
  > </a
  ><a name="6565" href="Session.html#6565" class="InductiveConstructor"
  >+-</a
  ><a name="6567"
  > </a
  ><a name="6568" href="Session.html#6568" class="InductiveConstructor"
  >-+</a
  ><a name="6570"
  > </a
  ><a name="6571" class="Symbol"
  >:</a
  ><a name="6572"
  > </a
  ><a name="6573" href="Session.html#6537" class="Datatype"
  >SplitNew</a
  ><a name="6581"
  >

</a
  ><a name="6583" href="Session.html#6583" class="Function"
  >Split</a
  ><a name="6588"
  > </a
  ><a name="6589" class="Symbol"
  >:</a
  ><a name="6590"
  > </a
  ><a name="6591" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="6593"
  > </a
  ><a name="6594" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="6598"
  > </a
  ><a name="6599" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6600"
  > </a
  ><a name="6601" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="6605"
  > </a
  ><a name="6606" class="Symbol"
  >&#8594;</a
  ><a name="6607"
  > </a
  ><a name="6608" class="PrimitiveType"
  >Set</a
  ><a name="6611"
  >
</a
  ><a name="6612" href="Session.html#6583" class="Function"
  >Split</a
  ><a name="6617"
  > </a
  ><a name="6618" class="Symbol"
  >(</a
  ><a name="6619" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6620"
  > </a
  ><a name="6621" class="Symbol"
  >_</a
  ><a name="6622"
  > </a
  ><a name="6623" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6624"
  > </a
  ><a name="6625" href="Session.html#6625" class="Bound"
  >x</a
  ><a name="6626" class="Symbol"
  >)</a
  ><a name="6627"
  > </a
  ><a name="6628" class="Symbol"
  >=</a
  ><a name="6629"
  > </a
  ><a name="6630" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="6634"
  >
</a
  ><a name="6635" href="Session.html#6583" class="Function"
  >Split</a
  ><a name="6640"
  > </a
  ><a name="6641" class="Symbol"
  >(</a
  ><a name="6642" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6643"
  >   </a
  ><a name="6646" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6647"
  > </a
  ><a name="6648" href="Session.html#6648" class="Bound"
  >x</a
  ><a name="6649" class="Symbol"
  >)</a
  ><a name="6650"
  > </a
  ><a name="6651" class="Symbol"
  >=</a
  ><a name="6652"
  > </a
  ><a name="6653" href="Session.html#6537" class="Datatype"
  >SplitNew</a
  ><a name="6661"
  >

</a
  ><a name="6663" href="Session.html#6663" class="Function"
  >split</a
  ><a name="6668"
  > </a
  ><a name="6669" class="Symbol"
  >:</a
  ><a name="6670"
  > </a
  ><a name="6671" class="Symbol"
  >(</a
  ><a name="6672" href="Session.html#6672" class="Bound"
  >&#964;</a
  ><a name="6673"
  > </a
  ><a name="6674" class="Symbol"
  >:</a
  ><a name="6675"
  > </a
  ><a name="6676" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="6678"
  > </a
  ><a name="6679" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="6683"
  > </a
  ><a name="6684" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6685"
  > </a
  ><a name="6686" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="6690" class="Symbol"
  >)</a
  ><a name="6691"
  > </a
  ><a name="6692" class="Symbol"
  >&#8594;</a
  ><a name="6693"
  > </a
  ><a name="6694" href="Session.html#6583" class="Function"
  >Split</a
  ><a name="6699"
  > </a
  ><a name="6700" href="Session.html#6672" class="Bound"
  >&#964;</a
  ><a name="6701"
  > </a
  ><a name="6702" class="Symbol"
  >&#8594;</a
  ><a name="6703"
  > </a
  ><a name="6704" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="6706"
  > </a
  ><a name="6707" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6708"
  > </a
  ><a name="6709" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="6711"
  > </a
  ><a name="6712" class="Symbol"
  >&#8594;</a
  ><a name="6713"
  > </a
  ><a name="6714" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="6716"
  > </a
  ><a name="6717" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6718"
  > </a
  ><a name="6719" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="6721"
  >
</a
  ><a name="6722" href="Session.html#6663" class="Function"
  >split</a
  ><a name="6727"
  > </a
  ><a name="6728" class="Symbol"
  >(</a
  ><a name="6729" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6730"
  > </a
  ><a name="6731" href="Session.html#6731" class="Bound"
  >s</a
  ><a name="6732"
  > </a
  ><a name="6733" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6734"
  > </a
  ><a name="6735" href="Session.html#6735" class="Bound"
  >C</a
  ><a name="6736" class="Symbol"
  >)</a
  ><a name="6737"
  >  </a
  ><a name="6739" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="6740"
  > </a
  ><a name="6741" class="Symbol"
  >(</a
  ><a name="6742" href="Session.html#6742" class="Bound"
  >L</a
  ><a name="6743"
  > </a
  ><a name="6744" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6745"
  > </a
  ><a name="6746" href="Session.html#6746" class="Bound"
  >R</a
  ><a name="6747" class="Symbol"
  >)</a
  ><a name="6748"
  > </a
  ><a name="6749" class="Symbol"
  >=</a
  ><a name="6750"
  > </a
  ><a name="6751" class="Symbol"
  >(</a
  ><a name="6752" href="Session.html#6742" class="Bound"
  >L</a
  ><a name="6753"
  > </a
  ><a name="6754" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6755"
  > </a
  ><a name="6756" class="Symbol"
  >(</a
  ><a name="6757" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6758"
  > </a
  ><a name="6759" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="6760"
  > </a
  ><a name="6761" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6762"
  > </a
  ><a name="6763" href="Session.html#6735" class="Bound"
  >C</a
  ><a name="6764" class="Symbol"
  >))</a
  ><a name="6766"
  > </a
  ><a name="6767" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6768"
  >  </a
  ><a name="6770" href="Session.html#6746" class="Bound"
  >R</a
  ><a name="6771"
  >
</a
  ><a name="6772" href="Session.html#6663" class="Function"
  >split</a
  ><a name="6777"
  > </a
  ><a name="6778" class="Symbol"
  >(</a
  ><a name="6779" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6780"
  > </a
  ><a name="6781" href="Session.html#6781" class="Bound"
  >s</a
  ><a name="6782"
  > </a
  ><a name="6783" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6784"
  > </a
  ><a name="6785" href="Session.html#6785" class="Bound"
  >C</a
  ><a name="6786" class="Symbol"
  >)</a
  ><a name="6787"
  >  </a
  ><a name="6789" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="6790"
  > </a
  ><a name="6791" class="Symbol"
  >(</a
  ><a name="6792" href="Session.html#6792" class="Bound"
  >L</a
  ><a name="6793"
  > </a
  ><a name="6794" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6795"
  > </a
  ><a name="6796" href="Session.html#6796" class="Bound"
  >R</a
  ><a name="6797" class="Symbol"
  >)</a
  ><a name="6798"
  > </a
  ><a name="6799" class="Symbol"
  >=</a
  ><a name="6800"
  >  </a
  ><a name="6802" href="Session.html#6792" class="Bound"
  >L</a
  ><a name="6803"
  >              </a
  ><a name="6817" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6818"
  > </a
  ><a name="6819" class="Symbol"
  >(</a
  ><a name="6820" href="Session.html#6796" class="Bound"
  >R</a
  ><a name="6821"
  > </a
  ><a name="6822" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6823"
  > </a
  ><a name="6824" class="Symbol"
  >(</a
  ><a name="6825" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6826"
  > </a
  ><a name="6827" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="6828"
  > </a
  ><a name="6829" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6830"
  > </a
  ><a name="6831" href="Session.html#6785" class="Bound"
  >C</a
  ><a name="6832" class="Symbol"
  >))</a
  ><a name="6834"
  >
</a
  ><a name="6835" href="Session.html#6663" class="Function"
  >split</a
  ><a name="6840"
  > </a
  ><a name="6841" class="Symbol"
  >(</a
  ><a name="6842" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6843"
  >   </a
  ><a name="6846" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6847"
  > </a
  ><a name="6848" href="Session.html#6848" class="Bound"
  >C</a
  ><a name="6849" class="Symbol"
  >)</a
  ><a name="6850"
  >  </a
  ><a name="6852" href="Session.html#6561" class="InductiveConstructor"
  >+</a
  ><a name="6853"
  > </a
  ><a name="6854" class="Symbol"
  >(</a
  ><a name="6855" href="Session.html#6855" class="Bound"
  >L</a
  ><a name="6856"
  > </a
  ><a name="6857" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6858"
  > </a
  ><a name="6859" href="Session.html#6859" class="Bound"
  >R</a
  ><a name="6860" class="Symbol"
  >)</a
  ><a name="6861"
  > </a
  ><a name="6862" class="Symbol"
  >=</a
  ><a name="6863"
  > </a
  ><a name="6864" class="Symbol"
  >(</a
  ><a name="6865" href="Session.html#6855" class="Bound"
  >L</a
  ><a name="6866"
  > </a
  ><a name="6867" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6868"
  > </a
  ><a name="6869" class="Symbol"
  >(</a
  ><a name="6870" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6871"
  >   </a
  ><a name="6874" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6875"
  > </a
  ><a name="6876" href="Session.html#6848" class="Bound"
  >C</a
  ><a name="6877" class="Symbol"
  >))</a
  ><a name="6879"
  > </a
  ><a name="6880" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6881"
  >  </a
  ><a name="6883" href="Session.html#6859" class="Bound"
  >R</a
  ><a name="6884"
  >
</a
  ><a name="6885" href="Session.html#6663" class="Function"
  >split</a
  ><a name="6890"
  > </a
  ><a name="6891" class="Symbol"
  >(</a
  ><a name="6892" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6893"
  >   </a
  ><a name="6896" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6897"
  > </a
  ><a name="6898" href="Session.html#6898" class="Bound"
  >C</a
  ><a name="6899" class="Symbol"
  >)</a
  ><a name="6900"
  >  </a
  ><a name="6902" href="Session.html#6563" class="InductiveConstructor"
  >-</a
  ><a name="6903"
  > </a
  ><a name="6904" class="Symbol"
  >(</a
  ><a name="6905" href="Session.html#6905" class="Bound"
  >L</a
  ><a name="6906"
  > </a
  ><a name="6907" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6908"
  > </a
  ><a name="6909" href="Session.html#6909" class="Bound"
  >R</a
  ><a name="6910" class="Symbol"
  >)</a
  ><a name="6911"
  > </a
  ><a name="6912" class="Symbol"
  >=</a
  ><a name="6913"
  >  </a
  ><a name="6915" href="Session.html#6905" class="Bound"
  >L</a
  ><a name="6916"
  >              </a
  ><a name="6930" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6931"
  > </a
  ><a name="6932" class="Symbol"
  >(</a
  ><a name="6933" href="Session.html#6909" class="Bound"
  >R</a
  ><a name="6934"
  > </a
  ><a name="6935" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6936"
  > </a
  ><a name="6937" class="Symbol"
  >(</a
  ><a name="6938" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6939"
  >   </a
  ><a name="6942" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6943"
  > </a
  ><a name="6944" href="Session.html#6898" class="Bound"
  >C</a
  ><a name="6945" class="Symbol"
  >))</a
  ><a name="6947"
  >
</a
  ><a name="6948" href="Session.html#6663" class="Function"
  >split</a
  ><a name="6953"
  > </a
  ><a name="6954" class="Symbol"
  >(</a
  ><a name="6955" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6956"
  >   </a
  ><a name="6959" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6960"
  > </a
  ><a name="6961" href="Session.html#6961" class="Bound"
  >C</a
  ><a name="6962" class="Symbol"
  >)</a
  ><a name="6963"
  > </a
  ><a name="6964" href="Session.html#6565" class="InductiveConstructor"
  >+-</a
  ><a name="6966"
  > </a
  ><a name="6967" class="Symbol"
  >(</a
  ><a name="6968" href="Session.html#6968" class="Bound"
  >L</a
  ><a name="6969"
  > </a
  ><a name="6970" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6971"
  > </a
  ><a name="6972" href="Session.html#6972" class="Bound"
  >R</a
  ><a name="6973" class="Symbol"
  >)</a
  ><a name="6974"
  > </a
  ><a name="6975" class="Symbol"
  >=</a
  ><a name="6976"
  > </a
  ><a name="6977" class="Symbol"
  >(</a
  ><a name="6978" href="Session.html#6968" class="Bound"
  >L</a
  ><a name="6979"
  > </a
  ><a name="6980" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6981"
  > </a
  ><a name="6982" class="Symbol"
  >(</a
  ><a name="6983" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6984"
  > </a
  ><a name="6985" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="6986"
  > </a
  ><a name="6987" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6988"
  > </a
  ><a name="6989" href="Session.html#6961" class="Bound"
  >C</a
  ><a name="6990" class="Symbol"
  >))</a
  ><a name="6992"
  > </a
  ><a name="6993" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6994"
  > </a
  ><a name="6995" class="Symbol"
  >(</a
  ><a name="6996" href="Session.html#6972" class="Bound"
  >R</a
  ><a name="6997"
  > </a
  ><a name="6998" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6999"
  > </a
  ><a name="7000" class="Symbol"
  >(</a
  ><a name="7001" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="7002"
  > </a
  ><a name="7003" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="7004"
  > </a
  ><a name="7005" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7006"
  > </a
  ><a name="7007" href="Session.html#6961" class="Bound"
  >C</a
  ><a name="7008" class="Symbol"
  >))</a
  ><a name="7010"
  >
</a
  ><a name="7011" href="Session.html#6663" class="Function"
  >split</a
  ><a name="7016"
  > </a
  ><a name="7017" class="Symbol"
  >(</a
  ><a name="7018" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="7019"
  >   </a
  ><a name="7022" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7023"
  > </a
  ><a name="7024" href="Session.html#7024" class="Bound"
  >C</a
  ><a name="7025" class="Symbol"
  >)</a
  ><a name="7026"
  > </a
  ><a name="7027" href="Session.html#6568" class="InductiveConstructor"
  >-+</a
  ><a name="7029"
  > </a
  ><a name="7030" class="Symbol"
  >(</a
  ><a name="7031" href="Session.html#7031" class="Bound"
  >L</a
  ><a name="7032"
  > </a
  ><a name="7033" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7034"
  > </a
  ><a name="7035" href="Session.html#7035" class="Bound"
  >R</a
  ><a name="7036" class="Symbol"
  >)</a
  ><a name="7037"
  > </a
  ><a name="7038" class="Symbol"
  >=</a
  ><a name="7039"
  > </a
  ><a name="7040" class="Symbol"
  >(</a
  ><a name="7041" href="Session.html#7031" class="Bound"
  >L</a
  ><a name="7042"
  > </a
  ><a name="7043" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7044"
  > </a
  ><a name="7045" class="Symbol"
  >(</a
  ><a name="7046" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="7047"
  > </a
  ><a name="7048" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="7049"
  > </a
  ><a name="7050" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7051"
  > </a
  ><a name="7052" href="Session.html#7024" class="Bound"
  >C</a
  ><a name="7053" class="Symbol"
  >))</a
  ><a name="7055"
  > </a
  ><a name="7056" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7057"
  > </a
  ><a name="7058" class="Symbol"
  >(</a
  ><a name="7059" href="Session.html#7035" class="Bound"
  >R</a
  ><a name="7060"
  > </a
  ><a name="7061" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7062"
  > </a
  ><a name="7063" class="Symbol"
  >(</a
  ><a name="7064" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="7065"
  > </a
  ><a name="7066" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="7067"
  > </a
  ><a name="7068" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7069"
  > </a
  ><a name="7070" href="Session.html#7024" class="Bound"
  >C</a
  ><a name="7071" class="Symbol"
  >))</a
  ><a name="7073"
  ></pre>
<p>At <code>fork</code> time, if <code>Γ</code> is the input context, the user is asked to inhabit a <code>Splits Γ</code>, whose meaning as a pair of contexts is given by <code>splits</code>.</p>
<pre></a
  ><a name="7246" href="Session.html#7246" class="Function"
  >Splits</a
  ><a name="7252"
  > </a
  ><a name="7253" class="Symbol"
  >:</a
  ><a name="7254"
  > </a
  ><a name="7255" class="Symbol"
  >&#8704;</a
  ><a name="7256"
  > </a
  ><a name="7257" href="Session.html#7257" class="Bound"
  >&#915;</a
  ><a name="7258"
  > </a
  ><a name="7259" class="Symbol"
  >&#8594;</a
  ><a name="7260"
  > </a
  ><a name="7261" class="PrimitiveType"
  >Set</a
  ><a name="7264"
  > </a
  ><a name="7265" class="Symbol"
  >_</a
  ><a name="7266"
  >
</a
  ><a name="7267" href="Session.html#7246" class="Function"
  >Splits</a
  ><a name="7273"
  > </a
  ><a name="7274" class="Symbol"
  >=</a
  ><a name="7275"
  > </a
  ><a name="7276" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7279"
  > </a
  ><a name="7280" href="Session.html#6583" class="Function"
  >Split</a
  ><a name="7285"
  >

</a
  ><a name="7287" href="Session.html#7287" class="Function"
  >splits</a
  ><a name="7293"
  > </a
  ><a name="7294" class="Symbol"
  >:</a
  ><a name="7295"
  > </a
  ><a name="7296" class="Symbol"
  >&#8704;</a
  ><a name="7297"
  > </a
  ><a name="7298" class="Symbol"
  >{</a
  ><a name="7299" href="Session.html#7299" class="Bound"
  >&#915;</a
  ><a name="7300" class="Symbol"
  >}</a
  ><a name="7301"
  > </a
  ><a name="7302" class="Symbol"
  >&#8594;</a
  ><a name="7303"
  > </a
  ><a name="7304" href="Session.html#7246" class="Function"
  >Splits</a
  ><a name="7310"
  > </a
  ><a name="7311" href="Session.html#7299" class="Bound"
  >&#915;</a
  ><a name="7312"
  > </a
  ><a name="7313" class="Symbol"
  >&#8594;</a
  ><a name="7314"
  > </a
  ><a name="7315" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="7317"
  > </a
  ><a name="7318" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="7319"
  > </a
  ><a name="7320" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="7322"
  >
</a
  ><a name="7323" href="Session.html#7287" class="Function"
  >splits</a
  ><a name="7329"
  > </a
  ><a name="7330" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7332"
  >       </a
  ><a name="7339" class="Symbol"
  >=</a
  ><a name="7340"
  > </a
  ><a name="7341" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="7343"
  > </a
  ><a name="7344" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7345"
  > </a
  ><a name="7346" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="7348"
  >
</a
  ><a name="7349" href="Session.html#7287" class="Function"
  >splits</a
  ><a name="7355"
  > </a
  ><a name="7356" class="Symbol"
  >(</a
  ><a name="7357" href="Session.html#7357" class="Bound"
  >ds</a
  ><a name="7359"
  > </a
  ><a name="7360" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="7362"
  > </a
  ><a name="7363" href="Session.html#7363" class="Bound"
  >s</a
  ><a name="7364" class="Symbol"
  >)</a
  ><a name="7365"
  > </a
  ><a name="7366" class="Symbol"
  >=</a
  ><a name="7367"
  > </a
  ><a name="7368" href="Session.html#6663" class="Function"
  >split</a
  ><a name="7373"
  > </a
  ><a name="7374" class="Symbol"
  >_</a
  ><a name="7375"
  > </a
  ><a name="7376" href="Session.html#7363" class="Bound"
  >s</a
  ><a name="7377"
  > </a
  ><a name="7378" class="Symbol"
  >(</a
  ><a name="7379" href="Session.html#7287" class="Function"
  >splits</a
  ><a name="7385"
  > </a
  ><a name="7386" href="Session.html#7357" class="Bound"
  >ds</a
  ><a name="7388" class="Symbol"
  >)</a
  ><a name="7389"
  ></pre>
<p><code>all-splits</code> is a generic functions which allows to lift <code>splits</code> to &quot;boxed&quot; predicates.</p>
<pre></a
  ><a name="7505" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="7515"
  > </a
  ><a name="7516" class="Symbol"
  >:</a
  ><a name="7517"
  > </a
  ><a name="7518" class="Symbol"
  >&#8704;</a
  ><a name="7519"
  > </a
  ><a name="7520" class="Symbol"
  >{</a
  ><a name="7521" href="Session.html#7521" class="Bound"
  >lP</a
  ><a name="7523" class="Symbol"
  >}{</a
  ><a name="7525" href="Session.html#7525" class="Bound"
  >P</a
  ><a name="7526"
  > </a
  ><a name="7527" class="Symbol"
  >:</a
  ><a name="7528"
  > </a
  ><a name="7529" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="7533"
  > </a
  ><a name="7534" class="Symbol"
  >&#8594;</a
  ><a name="7535"
  > </a
  ><a name="7536" class="PrimitiveType"
  >Set</a
  ><a name="7539"
  > </a
  ><a name="7540" href="Session.html#7521" class="Bound"
  >lP</a
  ><a name="7542" class="Symbol"
  >}{</a
  ><a name="7544" href="Session.html#7544" class="Bound"
  >&#915;</a
  ><a name="7545" class="Symbol"
  >}</a
  ><a name="7546"
  > </a
  ><a name="7547" class="Symbol"
  >&#8594;</a
  ><a name="7548"
  >
                     </a
  ><a name="7570" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7573"
  > </a
  ><a name="7574" class="Symbol"
  >(</a
  ><a name="7575" href="Session.html#7525" class="Bound"
  >P</a
  ><a name="7576"
  > </a
  ><a name="7577" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="7578"
  > </a
  ><a name="7579" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7582" class="Symbol"
  >)</a
  ><a name="7583"
  > </a
  ><a name="7584" href="Session.html#7544" class="Bound"
  >&#915;</a
  ><a name="7585"
  > </a
  ><a name="7586" class="Symbol"
  >&#8594;</a
  ><a name="7587"
  >
                </a
  ><a name="7604" class="Symbol"
  >(</a
  ><a name="7605" href="Session.html#7605" class="Bound"
  >d</a
  ><a name="7606"
  > </a
  ><a name="7607" class="Symbol"
  >:</a
  ><a name="7608"
  > </a
  ><a name="7609" href="Session.html#7246" class="Function"
  >Splits</a
  ><a name="7615"
  > </a
  ><a name="7616" href="Session.html#7544" class="Bound"
  >&#915;</a
  ><a name="7617" class="Symbol"
  >)</a
  ><a name="7618"
  >       </a
  ><a name="7625" class="Symbol"
  >&#8594;</a
  ><a name="7626"
  > 
                     </a
  ><a name="7649" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7652"
  > </a
  ><a name="7653" class="Symbol"
  >(</a
  ><a name="7654" href="Session.html#7525" class="Bound"
  >P</a
  ><a name="7655"
  > </a
  ><a name="7656" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="7657"
  > </a
  ><a name="7658" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7661" class="Symbol"
  >)</a
  ><a name="7662"
  > </a
  ><a name="7663" class="Symbol"
  >(</a
  ><a name="7664" href="Data.Product.html#525" class="Field"
  >fst</a
  ><a name="7667"
  > </a
  ><a name="7668" class="Symbol"
  >(</a
  ><a name="7669" href="Session.html#7287" class="Function"
  >splits</a
  ><a name="7675"
  > </a
  ><a name="7676" href="Session.html#7605" class="Bound"
  >d</a
  ><a name="7677" class="Symbol"
  >))</a
  ><a name="7679"
  >
                   </a
  ><a name="7699" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="7700"
  > </a
  ><a name="7701" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7704"
  > </a
  ><a name="7705" class="Symbol"
  >(</a
  ><a name="7706" href="Session.html#7525" class="Bound"
  >P</a
  ><a name="7707"
  > </a
  ><a name="7708" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="7709"
  > </a
  ><a name="7710" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7713" class="Symbol"
  >)</a
  ><a name="7714"
  > </a
  ><a name="7715" class="Symbol"
  >(</a
  ><a name="7716" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7719"
  > </a
  ><a name="7720" class="Symbol"
  >(</a
  ><a name="7721" href="Session.html#7287" class="Function"
  >splits</a
  ><a name="7727"
  > </a
  ><a name="7728" href="Session.html#7605" class="Bound"
  >d</a
  ><a name="7729" class="Symbol"
  >))</a
  ><a name="7731"
  >
</a
  ><a name="7732" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="7742"
  >                      </a
  ><a name="7764" href="Session.html#7764" class="Bound"
  >ps</a
  ><a name="7766"
  >       </a
  ><a name="7773" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7775"
  >         </a
  ><a name="7784" class="Symbol"
  >=</a
  ><a name="7785"
  >
  </a
  ><a name="7788" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7790"
  > </a
  ><a name="7791" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7792"
  > </a
  ><a name="7793" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7795"
  >
</a
  ><a name="7796" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="7806"
  > </a
  ><a name="7807" class="Symbol"
  >{</a
  ><a name="7808"
  >&#915; </a
  ><a name="7810" class="Symbol"
  >=</a
  ><a name="7811"
  > </a
  ><a name="7812" href="Session.html#7812" class="Bound"
  >&#915;</a
  ><a name="7813"
  > </a
  ><a name="7814" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7815"
  > </a
  ><a name="7816" class="Symbol"
  >(</a
  ><a name="7817" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="7818"
  >   </a
  ><a name="7821" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7822"
  > </a
  ><a name="7823" href="Session.html#7823" class="Bound"
  >C</a
  ><a name="7824" class="Symbol"
  >)}</a
  ><a name="7826"
  > </a
  ><a name="7827" class="Symbol"
  >(</a
  ><a name="7828" href="Session.html#7828" class="Bound"
  >ps</a
  ><a name="7830"
  > </a
  ><a name="7831" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="7833"
  > </a
  ><a name="7834" href="Session.html#7834" class="Bound"
  >p</a
  ><a name="7835" class="Symbol"
  >)</a
  ><a name="7836"
  > </a
  ><a name="7837" class="Symbol"
  >(</a
  ><a name="7838" href="Session.html#7838" class="Bound"
  >ds</a
  ><a name="7840"
  > </a
  ><a name="7841" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="7843"
  >    </a
  ><a name="7847" href="Session.html#6561" class="InductiveConstructor"
  >+</a
  ><a name="7848" class="Symbol"
  >)</a
  ><a name="7849"
  > </a
  ><a name="7850" class="Symbol"
  >=</a
  ><a name="7851"
  >
  </a
  ><a name="7854" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="7859"
  > </a
  ><a name="7860" class="Symbol"
  >(</a
  ><a name="7861" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="7865"
  > </a
  ><a name="7866" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="7870"
  > </a
  ><a name="7871" href="Session.html#7834" class="Bound"
  >p</a
  ><a name="7872" class="Symbol"
  >)</a
  ><a name="7873"
  >  </a
  ><a name="7875" href="Function.html#1006" class="Function"
  >id</a
  ><a name="7877"
  >          </a
  ><a name="7887" class="Symbol"
  >(</a
  ><a name="7888" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="7898"
  > </a
  ><a name="7899" href="Session.html#7828" class="Bound"
  >ps</a
  ><a name="7901"
  > </a
  ><a name="7902" href="Session.html#7838" class="Bound"
  >ds</a
  ><a name="7904" class="Symbol"
  >)</a
  ><a name="7905"
  >
</a
  ><a name="7906" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="7916"
  > </a
  ><a name="7917" class="Symbol"
  >{</a
  ><a name="7918"
  >&#915; </a
  ><a name="7920" class="Symbol"
  >=</a
  ><a name="7921"
  > </a
  ><a name="7922" href="Session.html#7922" class="Bound"
  >&#915;</a
  ><a name="7923"
  > </a
  ><a name="7924" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7925"
  > </a
  ><a name="7926" class="Symbol"
  >(</a
  ><a name="7927" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="7928"
  >   </a
  ><a name="7931" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7932"
  > </a
  ><a name="7933" href="Session.html#7933" class="Bound"
  >C</a
  ><a name="7934" class="Symbol"
  >)}</a
  ><a name="7936"
  > </a
  ><a name="7937" class="Symbol"
  >(</a
  ><a name="7938" href="Session.html#7938" class="Bound"
  >ps</a
  ><a name="7940"
  > </a
  ><a name="7941" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="7943"
  > </a
  ><a name="7944" href="Session.html#7944" class="Bound"
  >p</a
  ><a name="7945" class="Symbol"
  >)</a
  ><a name="7946"
  > </a
  ><a name="7947" class="Symbol"
  >(</a
  ><a name="7948" href="Session.html#7948" class="Bound"
  >ds</a
  ><a name="7950"
  > </a
  ><a name="7951" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="7953"
  >    </a
  ><a name="7957" href="Session.html#6563" class="InductiveConstructor"
  >-</a
  ><a name="7958" class="Symbol"
  >)</a
  ><a name="7959"
  > </a
  ><a name="7960" class="Symbol"
  >=</a
  ><a name="7961"
  >
  </a
  ><a name="7964" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="7969"
  >  </a
  ><a name="7971" href="Function.html#1006" class="Function"
  >id</a
  ><a name="7973"
  >          </a
  ><a name="7983" class="Symbol"
  >(</a
  ><a name="7984" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="7988"
  > </a
  ><a name="7989" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="7993"
  > </a
  ><a name="7994" href="Session.html#7944" class="Bound"
  >p</a
  ><a name="7995" class="Symbol"
  >)</a
  ><a name="7996"
  > </a
  ><a name="7997" class="Symbol"
  >(</a
  ><a name="7998" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="8008"
  > </a
  ><a name="8009" href="Session.html#7938" class="Bound"
  >ps</a
  ><a name="8011"
  > </a
  ><a name="8012" href="Session.html#7948" class="Bound"
  >ds</a
  ><a name="8014" class="Symbol"
  >)</a
  ><a name="8015"
  >
</a
  ><a name="8016" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="8026"
  > </a
  ><a name="8027" class="Symbol"
  >{</a
  ><a name="8028"
  >&#915; </a
  ><a name="8030" class="Symbol"
  >=</a
  ><a name="8031"
  > </a
  ><a name="8032" href="Session.html#8032" class="Bound"
  >&#915;</a
  ><a name="8033"
  > </a
  ><a name="8034" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8035"
  > </a
  ><a name="8036" class="Symbol"
  >(</a
  ><a name="8037" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="8038"
  >   </a
  ><a name="8041" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8042"
  > </a
  ><a name="8043" href="Session.html#8043" class="Bound"
  >C</a
  ><a name="8044" class="Symbol"
  >)}</a
  ><a name="8046"
  > </a
  ><a name="8047" class="Symbol"
  >(</a
  ><a name="8048" href="Session.html#8048" class="Bound"
  >ps</a
  ><a name="8050"
  > </a
  ><a name="8051" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8053"
  > </a
  ><a name="8054" href="Session.html#8054" class="Bound"
  >p</a
  ><a name="8055" class="Symbol"
  >)</a
  ><a name="8056"
  > </a
  ><a name="8057" class="Symbol"
  >(</a
  ><a name="8058" href="Session.html#8058" class="Bound"
  >ds</a
  ><a name="8060"
  > </a
  ><a name="8061" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8063"
  >   </a
  ><a name="8066" href="Session.html#6565" class="InductiveConstructor"
  >+-</a
  ><a name="8068" class="Symbol"
  >)</a
  ><a name="8069"
  > </a
  ><a name="8070" class="Symbol"
  >=</a
  ><a name="8071"
  > 
  </a
  ><a name="8075" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8080"
  > </a
  ><a name="8081" class="Symbol"
  >(</a
  ><a name="8082" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8086"
  > </a
  ><a name="8087" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8091"
  > </a
  ><a name="8092" href="Session.html#8054" class="Bound"
  >p</a
  ><a name="8093" class="Symbol"
  >)</a
  ><a name="8094"
  > </a
  ><a name="8095" class="Symbol"
  >(</a
  ><a name="8096" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8100"
  > </a
  ><a name="8101" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8105"
  > </a
  ><a name="8106" href="Session.html#8054" class="Bound"
  >p</a
  ><a name="8107" class="Symbol"
  >)</a
  ><a name="8108"
  > </a
  ><a name="8109" class="Symbol"
  >(</a
  ><a name="8110" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="8120"
  > </a
  ><a name="8121" href="Session.html#8048" class="Bound"
  >ps</a
  ><a name="8123"
  > </a
  ><a name="8124" href="Session.html#8058" class="Bound"
  >ds</a
  ><a name="8126" class="Symbol"
  >)</a
  ><a name="8127"
  >
</a
  ><a name="8128" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="8138"
  > </a
  ><a name="8139" class="Symbol"
  >{</a
  ><a name="8140"
  >&#915; </a
  ><a name="8142" class="Symbol"
  >=</a
  ><a name="8143"
  > </a
  ><a name="8144" href="Session.html#8144" class="Bound"
  >&#915;</a
  ><a name="8145"
  > </a
  ><a name="8146" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8147"
  > </a
  ><a name="8148" class="Symbol"
  >(</a
  ><a name="8149" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="8150"
  >   </a
  ><a name="8153" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8154"
  > </a
  ><a name="8155" href="Session.html#8155" class="Bound"
  >C</a
  ><a name="8156" class="Symbol"
  >)}</a
  ><a name="8158"
  > </a
  ><a name="8159" class="Symbol"
  >(</a
  ><a name="8160" href="Session.html#8160" class="Bound"
  >ps</a
  ><a name="8162"
  > </a
  ><a name="8163" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8165"
  > </a
  ><a name="8166" href="Session.html#8166" class="Bound"
  >p</a
  ><a name="8167" class="Symbol"
  >)</a
  ><a name="8168"
  > </a
  ><a name="8169" class="Symbol"
  >(</a
  ><a name="8170" href="Session.html#8170" class="Bound"
  >ds</a
  ><a name="8172"
  > </a
  ><a name="8173" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8175"
  >   </a
  ><a name="8178" href="Session.html#6568" class="InductiveConstructor"
  >-+</a
  ><a name="8180" class="Symbol"
  >)</a
  ><a name="8181"
  > </a
  ><a name="8182" class="Symbol"
  >=</a
  ><a name="8183"
  >
  </a
  ><a name="8186" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8191"
  > </a
  ><a name="8192" class="Symbol"
  >(</a
  ><a name="8193" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8197"
  > </a
  ><a name="8198" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8202"
  > </a
  ><a name="8203" href="Session.html#8166" class="Bound"
  >p</a
  ><a name="8204" class="Symbol"
  >)</a
  ><a name="8205"
  > </a
  ><a name="8206" class="Symbol"
  >(</a
  ><a name="8207" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8211"
  > </a
  ><a name="8212" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8216"
  > </a
  ><a name="8217" href="Session.html#8166" class="Bound"
  >p</a
  ><a name="8218" class="Symbol"
  >)</a
  ><a name="8219"
  > </a
  ><a name="8220" class="Symbol"
  >(</a
  ><a name="8221" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="8231"
  > </a
  ><a name="8232" href="Session.html#8160" class="Bound"
  >ps</a
  ><a name="8234"
  > </a
  ><a name="8235" href="Session.html#8170" class="Bound"
  >ds</a
  ><a name="8237" class="Symbol"
  >)</a
  ><a name="8238"
  >
</a
  ><a name="8239" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="8249"
  > </a
  ><a name="8250" class="Symbol"
  >{</a
  ><a name="8251"
  >&#915; </a
  ><a name="8253" class="Symbol"
  >=</a
  ><a name="8254"
  > </a
  ><a name="8255" href="Session.html#8255" class="Bound"
  >&#915;</a
  ><a name="8256"
  > </a
  ><a name="8257" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8258"
  > </a
  ><a name="8259" class="Symbol"
  >(</a
  ><a name="8260" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="8261"
  > </a
  ><a name="8262" class="Symbol"
  >_</a
  ><a name="8263"
  > </a
  ><a name="8264" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8265"
  > </a
  ><a name="8266" href="Session.html#8266" class="Bound"
  >C</a
  ><a name="8267" class="Symbol"
  >)}</a
  ><a name="8269"
  > </a
  ><a name="8270" class="Symbol"
  >(</a
  ><a name="8271" href="Session.html#8271" class="Bound"
  >ps</a
  ><a name="8273"
  > </a
  ><a name="8274" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8276"
  > </a
  ><a name="8277" href="Session.html#8277" class="Bound"
  >p</a
  ><a name="8278" class="Symbol"
  >)</a
  ><a name="8279"
  > </a
  ><a name="8280" class="Symbol"
  >(</a
  ><a name="8281" href="Session.html#8281" class="Bound"
  >ds</a
  ><a name="8283"
  > </a
  ><a name="8284" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8286"
  >    </a
  ><a name="8290" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="8291" class="Symbol"
  >)</a
  ><a name="8292"
  > </a
  ><a name="8293" class="Symbol"
  >=</a
  ><a name="8294"
  > 
  </a
  ><a name="8298" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8303"
  > </a
  ><a name="8304" class="Symbol"
  >(</a
  ><a name="8305" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8309"
  > </a
  ><a name="8310" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8314"
  > </a
  ><a name="8315" href="Session.html#8277" class="Bound"
  >p</a
  ><a name="8316" class="Symbol"
  >)</a
  ><a name="8317"
  >  </a
  ><a name="8319" href="Function.html#1006" class="Function"
  >id</a
  ><a name="8321"
  >          </a
  ><a name="8331" class="Symbol"
  >(</a
  ><a name="8332" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="8342"
  > </a
  ><a name="8343" href="Session.html#8271" class="Bound"
  >ps</a
  ><a name="8345"
  > </a
  ><a name="8346" href="Session.html#8281" class="Bound"
  >ds</a
  ><a name="8348" class="Symbol"
  >)</a
  ><a name="8349"
  >
</a
  ><a name="8350" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="8360"
  > </a
  ><a name="8361" class="Symbol"
  >{</a
  ><a name="8362"
  >&#915; </a
  ><a name="8364" class="Symbol"
  >=</a
  ><a name="8365"
  > </a
  ><a name="8366" href="Session.html#8366" class="Bound"
  >&#915;</a
  ><a name="8367"
  > </a
  ><a name="8368" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8369"
  > </a
  ><a name="8370" class="Symbol"
  >(</a
  ><a name="8371" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="8372"
  > </a
  ><a name="8373" class="Symbol"
  >_</a
  ><a name="8374"
  > </a
  ><a name="8375" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8376"
  > </a
  ><a name="8377" href="Session.html#8377" class="Bound"
  >C</a
  ><a name="8378" class="Symbol"
  >)}</a
  ><a name="8380"
  > </a
  ><a name="8381" class="Symbol"
  >(</a
  ><a name="8382" href="Session.html#8382" class="Bound"
  >ps</a
  ><a name="8384"
  > </a
  ><a name="8385" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8387"
  > </a
  ><a name="8388" href="Session.html#8388" class="Bound"
  >p</a
  ><a name="8389" class="Symbol"
  >)</a
  ><a name="8390"
  > </a
  ><a name="8391" class="Symbol"
  >(</a
  ><a name="8392" href="Session.html#8392" class="Bound"
  >ds</a
  ><a name="8394"
  > </a
  ><a name="8395" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8397"
  >    </a
  ><a name="8401" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="8402" class="Symbol"
  >)</a
  ><a name="8403"
  > </a
  ><a name="8404" class="Symbol"
  >=</a
  ><a name="8405"
  > 
  </a
  ><a name="8409" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8414"
  >  </a
  ><a name="8416" href="Function.html#1006" class="Function"
  >id</a
  ><a name="8418"
  >          </a
  ><a name="8428" class="Symbol"
  >(</a
  ><a name="8429" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8433"
  > </a
  ><a name="8434" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8438"
  > </a
  ><a name="8439" href="Session.html#8388" class="Bound"
  >p</a
  ><a name="8440" class="Symbol"
  >)</a
  ><a name="8441"
  > </a
  ><a name="8442" class="Symbol"
  >(</a
  ><a name="8443" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="8453"
  > </a
  ><a name="8454" href="Session.html#8382" class="Bound"
  >ps</a
  ><a name="8456"
  > </a
  ><a name="8457" href="Session.html#8392" class="Bound"
  >ds</a
  ><a name="8459" class="Symbol"
  >)</a
  ><a name="8460"
  ></pre>
<p>We use some patterns to deal more easily with dependent tuples and objects of type <code>Entry</code>.</p>
<pre></a
  ><a name="8579" class="Keyword"
  >pattern</a
  ><a name="8586"
  > </a
  ><a name="8587" href="Session.html#8587" class="InductiveConstructor Operator"
  >%_</a
  ><a name="8589"
  >  </a
  ><a name="8591" href="Session.html#8599" class="Bound"
  >x</a
  ><a name="8592"
  > </a
  ><a name="8593" class="Symbol"
  >=</a
  ><a name="8594"
  > </a
  ><a name="8595" class="Symbol"
  >_</a
  ><a name="8596"
  > </a
  ><a name="8597" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8598"
  > </a
  ><a name="8599" href="Session.html#8599" class="Bound"
  >x</a
  ><a name="8600"
  >
</a
  ><a name="8601" class="Keyword"
  >pattern</a
  ><a name="8608"
  > </a
  ><a name="8609" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2_</a
  ><a name="8612"
  > </a
  ><a name="8613" href="Session.html#8622" class="Bound"
  >x</a
  ><a name="8614"
  > </a
  ><a name="8615" class="Symbol"
  >=</a
  ><a name="8616"
  > </a
  ><a name="8617" href="Session.html#8587" class="InductiveConstructor Operator"
  >%</a
  ><a name="8618"
  > </a
  ><a name="8619" href="Session.html#8587" class="InductiveConstructor Operator"
  >%</a
  ><a name="8620"
  >  </a
  ><a name="8622" href="Session.html#8622" class="Bound"
  >x</a
  ><a name="8623"
  >
</a
  ><a name="8624" class="Keyword"
  >pattern</a
  ><a name="8631"
  > </a
  ><a name="8632" href="Session.html#8632" class="InductiveConstructor Operator"
  >%3_</a
  ><a name="8635"
  > </a
  ><a name="8636" href="Session.html#8645" class="Bound"
  >x</a
  ><a name="8637"
  > </a
  ><a name="8638" class="Symbol"
  >=</a
  ><a name="8639"
  > </a
  ><a name="8640" href="Session.html#8587" class="InductiveConstructor Operator"
  >%</a
  ><a name="8641"
  > </a
  ><a name="8642" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="8644"
  > </a
  ><a name="8645" href="Session.html#8645" class="Bound"
  >x</a
  ><a name="8646"
  >
</a
  ><a name="8647" class="Keyword"
  >pattern</a
  ><a name="8654"
  > </a
  ><a name="8655" href="Session.html#8655" class="InductiveConstructor Operator"
  >%4_</a
  ><a name="8658"
  > </a
  ><a name="8659" href="Session.html#8668" class="Bound"
  >x</a
  ><a name="8660"
  > </a
  ><a name="8661" class="Symbol"
  >=</a
  ><a name="8662"
  > </a
  ><a name="8663" href="Session.html#8587" class="InductiveConstructor Operator"
  >%</a
  ><a name="8664"
  > </a
  ><a name="8665" href="Session.html#8632" class="InductiveConstructor Operator"
  >%3</a
  ><a name="8667"
  > </a
  ><a name="8668" href="Session.html#8668" class="Bound"
  >x</a
  ><a name="8669"
  >

</a
  ><a name="8671" class="Keyword"
  >pattern</a
  ><a name="8678"
  > </a
  ><a name="8679" href="Session.html#8679" class="InductiveConstructor Operator"
  >&#187;&#187;_</a
  ><a name="8682"
  > </a
  ><a name="8683" href="Session.html#8696" class="Bound"
  >x</a
  ><a name="8684"
  > </a
  ><a name="8685" class="Symbol"
  >=</a
  ><a name="8686"
  > </a
  ><a name="8687" class="InductiveConstructor"
  >&gt;</a
  ><a name="8688"
  > </a
  ><a name="8689" class="InductiveConstructor"
  >+</a
  ><a name="8690"
  > </a
  ><a name="8691" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8692"
  > </a
  ><a name="8693" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="8695"
  > </a
  ><a name="8696" href="Session.html#8696" class="Bound"
  >x</a
  ><a name="8697"
  >
</a
  ><a name="8698" class="Keyword"
  >pattern</a
  ><a name="8705"
  > </a
  ><a name="8706" href="Session.html#8706" class="InductiveConstructor Operator"
  >_&#171;&#171;</a
  ><a name="8709"
  > </a
  ><a name="8710" href="Session.html#8723" class="Bound"
  >x</a
  ><a name="8711"
  > </a
  ><a name="8712" class="Symbol"
  >=</a
  ><a name="8713"
  > </a
  ><a name="8714" class="InductiveConstructor"
  >&gt;</a
  ><a name="8715"
  > </a
  ><a name="8716" class="InductiveConstructor"
  >-</a
  ><a name="8717"
  > </a
  ><a name="8718" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="8719"
  > </a
  ><a name="8720" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="8722"
  > </a
  ><a name="8723" href="Session.html#8723" class="Bound"
  >x</a
  ><a name="8724"
  ></pre>
<h2 id="terms">Terms</h2>
<h2 id="introduction">Introduction</h2>
<p>Here we would like to provide a human-readable representation of the syntax which is encoded below, also discussing the choice of encoding.</p>
<p>For now we limit ourselves to illustrating the Agda code step-by-step.</p>
<h3 id="functors">Functors</h3>
<p>We define several (indexed) functors: we will obtain our process syntax by taking their fixpoint. While in the future we plan to move to codes for a universe of functors such as the ones cited above, for the purpose of illustrating the method we do not want to add further complications.</p>
<p>Most of the productions are non-recursive, so we will first define some families in <code>Ty</code>.</p>
<pre></a
  ><a name="9384" class="Keyword"
  >private</a
  ><a name="9391"
  > </a
  ><a name="9392" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="9394"
  > </a
  ><a name="9395" class="Symbol"
  >=</a
  ><a name="9396"
  > </a
  ><a name="9397" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="9399"
  > </a
  ><a name="9400" class="Symbol"
  >&#8594;</a
  ><a name="9401"
  > </a
  ><a name="9402" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="9404"
  > </a
  ><a name="9405" class="Symbol"
  >&#8594;</a
  ><a name="9406"
  > </a
  ><a name="9407" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="9411"
  ></pre>
<p>The functor corresponding to the <code>new</code> grammar production/constructor simply imposes that the output context contains a <em>new</em> channel, i.e. a channel whose side is <code>ε</code> (<code>Maybe.nothing</code>).</p>
<pre></a
  ><a name="9625" href="Session.html#9625" class="Function"
  >New</a
  ><a name="9628"
  > </a
  ><a name="9629" class="Symbol"
  >:</a
  ><a name="9630"
  > </a
  ><a name="9631" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="9633"
  >
</a
  ><a name="9634" href="Session.html#9625" class="Function"
  >New</a
  ><a name="9637"
  > </a
  ><a name="9638" href="Session.html#9638" class="Bound"
  >&#915;</a
  ><a name="9639"
  > </a
  ><a name="9640" href="Session.html#9640" class="Bound"
  >&#916;</a
  ><a name="9641"
  > </a
  ><a name="9642" class="Symbol"
  >=</a
  ><a name="9643"
  > </a
  ><a name="9644" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9645"
  > </a
  ><a name="9646" class="Symbol"
  >_</a
  ><a name="9647"
  > </a
  ><a name="9648" class="Symbol"
  >&#955;</a
  ><a name="9649"
  > </a
  ><a name="9650" href="Session.html#9650" class="Bound"
  >F</a
  ><a name="9651"
  > </a
  ><a name="9652" class="Symbol"
  >&#8594;</a
  ><a name="9653"
  > </a
  ><a name="9654" href="Session.html#9640" class="Bound"
  >&#916;</a
  ><a name="9655"
  > </a
  ><a name="9656" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="9657"
  > </a
  ><a name="9658" href="Session.html#9638" class="Bound"
  >&#915;</a
  ><a name="9659"
  > </a
  ><a name="9660" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="9661"
  > </a
  ><a name="9662" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="9663"
  > </a
  ><a name="9664" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9665"
  > </a
  ><a name="9666" href="Session.html#9650" class="Bound"
  >F</a
  ><a name="9667"
  ></pre>
<p>We can send and receive channels along channels: in the former case the sent session type is omitted from the output context, in the latter the context is extended with the entry corresponding to the received channel.</p>
<pre></a
  ><a name="9912" href="Session.html#9912" class="Function"
  >Send</a
  ><a name="9916"
  > </a
  ><a name="9917" href="Session.html#9917" class="Function"
  >Receive</a
  ><a name="9924"
  > </a
  ><a name="9925" class="Symbol"
  >:</a
  ><a name="9926"
  > </a
  ><a name="9927" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="9929"
  >
</a
  ><a name="9930" href="Session.html#9912" class="Function"
  >Send</a
  ><a name="9934"
  > </a
  ><a name="9935" href="Session.html#9935" class="Bound"
  >&#915;</a
  ><a name="9936"
  > </a
  ><a name="9937" href="Session.html#9937" class="Bound"
  >&#916;</a
  ><a name="9938"
  > </a
  ><a name="9939" class="Symbol"
  >=</a
  ><a name="9940"
  > </a
  ><a name="9941" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9942"
  > </a
  ><a name="9943" class="Symbol"
  >(</a
  ><a name="9944" href="Session.html#3725" class="Function"
  >Entry</a
  ><a name="9949"
  > </a
  ><a name="9950" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="9951"
  > </a
  ><a name="9952" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="9956"
  > </a
  ><a name="9957" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="9958"
  > </a
  ><a name="9959" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="9963" class="Symbol"
  >)</a
  ><a name="9964"
  > </a
  ><a name="9965" class="Symbol"
  >&#955;</a
  ><a name="9966"
  > </a
  ><a name="9967" href="Session.html#9967" class="Bound"
  >W</a
  ><a name="9968"
  > </a
  ><a name="9969" class="Symbol"
  >&#8594;</a
  ><a name="9970"
  >
           </a
  ><a name="9982" class="Keyword"
  >let</a
  ><a name="9985"
  > </a
  ><a name="9986" href="Session.html#9986" class="Bound"
  >L</a
  ><a name="9987"
  > </a
  ><a name="9988" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9989"
  > </a
  ><a name="9990" href="Session.html#9990" class="Bound"
  >s</a
  ><a name="9991"
  > </a
  ><a name="9992" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9993"
  > </a
  ><a name="9994" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="9996"
  > </a
  ><a name="9997" href="Session.html#9997" class="Bound"
  >R</a
  ><a name="9998"
  > </a
  ><a name="9999" class="Symbol"
  >=</a
  ><a name="10000"
  > </a
  ><a name="10001" href="Session.html#9967" class="Bound"
  >W</a
  ><a name="10002"
  > </a
  ><a name="10003" class="Keyword"
  >in</a
  ><a name="10005"
  >
           </a
  ><a name="10017" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10018"
  > </a
  ><a name="10019" class="Symbol"
  >(</a
  ><a name="10020"
  >                      </a
  ><a name="10042" href="Session.html#9986" class="Bound"
  >L</a
  ><a name="10043"
  > </a
  ><a name="10044" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10045"
  > </a
  ><a name="10046" href="Session.html#9935" class="Bound"
  >&#915;</a
  ><a name="10047"
  >   </a
  ><a name="10050" class="Symbol"
  >)</a
  ><a name="10051"
  > </a
  ><a name="10052" class="Symbol"
  >&#955;</a
  ><a name="10053"
  > </a
  ><a name="10054" href="Session.html#10054" class="Bound"
  >i</a
  ><a name="10055"
  > </a
  ><a name="10056" class="Symbol"
  >&#8594;</a
  ><a name="10057"
  >
           </a
  ><a name="10069" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10070"
  > </a
  ><a name="10071" class="Symbol"
  >((</a
  ><a name="10073" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10074"
  > </a
  ><a name="10075" href="Session.html#9990" class="Bound"
  >s</a
  ><a name="10076"
  > </a
  ><a name="10077" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10078"
  > </a
  ><a name="10079" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="10081"
  > </a
  ><a name="10082" class="Symbol"
  >(</a
  ><a name="10083" href="Session.html#9986" class="Bound"
  >L</a
  ><a name="10084"
  > </a
  ><a name="10085" href="Session.html#5270" class="Function Operator"
  >[</a
  ><a name="10086"
  > </a
  ><a name="10087" href="Session.html#9990" class="Bound"
  >s</a
  ><a name="10088"
  > </a
  ><a name="10089" href="Session.html#5270" class="Function Operator"
  >]&#8855;</a
  ><a name="10091"
  > </a
  ><a name="10092" href="Session.html#9997" class="Bound"
  >R</a
  ><a name="10093" class="Symbol"
  >))</a
  ><a name="10095"
  > </a
  ><a name="10096" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10097"
  > </a
  ><a name="10098" href="Session.Base.html#3041" class="Function"
  >rm</a
  ><a name="10100"
  > </a
  ><a name="10101" href="Session.html#10054" class="Bound"
  >i</a
  ><a name="10102" class="Symbol"
  >)</a
  ><a name="10103"
  >
             </a
  ><a name="10117" class="Symbol"
  >(</a
  ><a name="10118" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="10121"
  > </a
  ><a name="10122" href="Session.html#9937" class="Bound"
  >&#916;</a
  ><a name="10123"
  > </a
  ><a name="10124" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="10125"
  > </a
  ><a name="10126" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="10128"
  > </a
  ><a name="10129" class="Symbol"
  >(</a
  ><a name="10130" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10131"
  > </a
  ><a name="10132" href="Session.html#9990" class="Bound"
  >s</a
  ><a name="10133"
  > </a
  ><a name="10134" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10135"
  > </a
  ><a name="10136" class="Symbol"
  >_</a
  ><a name="10137"
  > </a
  ><a name="10138" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10139"
  > </a
  ><a name="10140" class="Symbol"
  >_</a
  ><a name="10141"
  > </a
  ><a name="10142" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10143"
  > </a
  ><a name="10144" href="Session.html#9997" class="Bound"
  >R</a
  ><a name="10145" class="Symbol"
  >))</a
  ><a name="10147"
  >
</a
  ><a name="10148" href="Session.html#9917" class="Function"
  >Receive</a
  ><a name="10155"
  > </a
  ><a name="10156" href="Session.html#10156" class="Bound"
  >&#915;</a
  ><a name="10157"
  > </a
  ><a name="10158" href="Session.html#10158" class="Bound"
  >&#916;</a
  ><a name="10159"
  > </a
  ><a name="10160" class="Symbol"
  >=</a
  ><a name="10161"
  > </a
  ><a name="10162" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10163"
  > </a
  ><a name="10164" class="Symbol"
  >(</a
  ><a name="10165" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="10169"
  > </a
  ><a name="10170" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10171"
  > </a
  ><a name="10172" class="Symbol"
  >_</a
  ><a name="10173"
  > </a
  ><a name="10174" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10175"
  > </a
  ><a name="10176" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="10180" class="Symbol"
  >)</a
  ><a name="10181"
  > </a
  ><a name="10182" class="Symbol"
  >&#955;</a
  ><a name="10183"
  > </a
  ><a name="10184" href="Session.html#10184" class="Bound"
  >W</a
  ><a name="10185"
  > </a
  ><a name="10186" class="Symbol"
  >&#8594;</a
  ><a name="10187"
  >
              </a
  ><a name="10202" class="Keyword"
  >let</a
  ><a name="10205"
  > </a
  ><a name="10206" href="Session.html#10206" class="Bound"
  >s</a
  ><a name="10207"
  > </a
  ><a name="10208" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10209"
  > </a
  ><a name="10210" href="Session.html#10210" class="Bound"
  >L</a
  ><a name="10211"
  > </a
  ><a name="10212" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10213"
  > </a
  ><a name="10214" class="Symbol"
  >_</a
  ><a name="10215"
  > </a
  ><a name="10216" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10217"
  > </a
  ><a name="10218" class="Symbol"
  >_</a
  ><a name="10219"
  > </a
  ><a name="10220" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10221"
  > </a
  ><a name="10222" href="Session.html#10222" class="Bound"
  >R</a
  ><a name="10223"
  > </a
  ><a name="10224" class="Symbol"
  >=</a
  ><a name="10225"
  > </a
  ><a name="10226" href="Session.html#10184" class="Bound"
  >W</a
  ><a name="10227"
  > </a
  ><a name="10228" class="Keyword"
  >in</a
  ><a name="10230"
  >
              </a
  ><a name="10245" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10246"
  > </a
  ><a name="10247" class="Symbol"
  >((</a
  ><a name="10249" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10250"
  > </a
  ><a name="10251" href="Session.html#10206" class="Bound"
  >s</a
  ><a name="10252"
  > </a
  ><a name="10253" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10254"
  > </a
  ><a name="10255" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="10257"
  > </a
  ><a name="10258" class="Symbol"
  >(</a
  ><a name="10259" href="Session.html#10210" class="Bound"
  >L</a
  ><a name="10260"
  > </a
  ><a name="10261" href="Session.html#5277" class="Function Operator"
  >[</a
  ><a name="10262"
  > </a
  ><a name="10263" href="Session.html#10206" class="Bound"
  >s</a
  ><a name="10264"
  > </a
  ><a name="10265" href="Session.html#5277" class="Function Operator"
  >]&#8523;</a
  ><a name="10267"
  > </a
  ><a name="10268" href="Session.html#10222" class="Bound"
  >R</a
  ><a name="10269" class="Symbol"
  >))</a
  ><a name="10271"
  > </a
  ><a name="10272" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10273"
  > </a
  ><a name="10274" href="Session.html#10156" class="Bound"
  >&#915;</a
  ><a name="10275" class="Symbol"
  >)</a
  ><a name="10276"
  > </a
  ><a name="10277" class="Symbol"
  >&#955;</a
  ><a name="10278"
  > </a
  ><a name="10279" href="Session.html#10279" class="Bound"
  >i</a
  ><a name="10280"
  > </a
  ><a name="10281" class="Symbol"
  >&#8594;</a
  ><a name="10282"
  > 
                </a
  ><a name="10300" href="Session.html#10158" class="Bound"
  >&#916;</a
  ><a name="10301"
  > </a
  ><a name="10302" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="10303"
  > </a
  ><a name="10304" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="10306"
  > </a
  ><a name="10307" class="Symbol"
  >(</a
  ><a name="10308" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10309"
  > </a
  ><a name="10310" href="Session.html#10206" class="Bound"
  >s</a
  ><a name="10311"
  > </a
  ><a name="10312" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10313"
  > </a
  ><a name="10314" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="10316"
  > </a
  ><a name="10317" href="Session.html#10222" class="Bound"
  >R</a
  ><a name="10318" class="Symbol"
  >)</a
  ><a name="10319"
  > </a
  ><a name="10320" href="Session.html#10279" class="Bound"
  >i</a
  ><a name="10321"
  > </a
  ><a name="10322" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="10323"
  > </a
  ><a name="10324" href="Session.html#10210" class="Bound"
  >L</a
  ><a name="10325"
  ></pre>
<p>Writing to and reading from channels changes the type accordingly, without necessarily introducing dependencies.</p>
<pre></a
  ><a name="10465" href="Session.html#10465" class="Function"
  >Write</a
  ><a name="10470"
  > </a
  ><a name="10471" href="Session.html#10471" class="Function"
  >Read</a
  ><a name="10475"
  > </a
  ><a name="10476" class="Symbol"
  >:</a
  ><a name="10477"
  > </a
  ><a name="10478" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="10480"
  >
</a
  ><a name="10481" href="Session.html#10465" class="Function"
  >Write</a
  ><a name="10486"
  > </a
  ><a name="10487" href="Session.html#10487" class="Bound"
  >&#915;</a
  ><a name="10488"
  > </a
  ><a name="10489" href="Session.html#10489" class="Bound"
  >&#916;</a
  ><a name="10490"
  > </a
  ><a name="10491" class="Symbol"
  >=</a
  ><a name="10492"
  > </a
  ><a name="10493" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10494"
  > </a
  ><a name="10495" class="Symbol"
  >(</a
  ><a name="10496" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10497"
  > </a
  ><a name="10498" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="10502"
  > </a
  ><a name="10503" class="Symbol"
  >&#955;</a
  ><a name="10504"
  > </a
  ><a name="10505" class="Symbol"
  >{</a
  ><a name="10506"
  > </a
  ><a name="10507" class="Symbol"
  >(</a
  ><a name="10508" href="Session.html#10508" class="Bound"
  >I</a
  ><a name="10509"
  > </a
  ><a name="10510" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10511"
  > </a
  ><a name="10512" href="Session.html#10512" class="Bound"
  >J</a
  ><a name="10513"
  > </a
  ><a name="10514" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10515"
  > </a
  ><a name="10516" href="Session.html#10516" class="Bound"
  >T</a
  ><a name="10517" class="Symbol"
  >)</a
  ><a name="10518"
  > </a
  ><a name="10519" class="Symbol"
  >&#8594;</a
  ><a name="10520"
  > </a
  ><a name="10521" href="Session.html#10512" class="Bound"
  >J</a
  ><a name="10522"
  > </a
  ><a name="10523" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10524"
  > </a
  ><a name="10525" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="10529"
  > </a
  ><a name="10530" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10531"
  > </a
  ><a name="10532" class="PrimitiveType"
  >Set</a
  ><a name="10535"
  > </a
  ><a name="10536" class="Symbol"
  >})</a
  ><a name="10538"
  > </a
  ><a name="10539" class="Symbol"
  >&#955;</a
  ><a name="10540"
  > </a
  ><a name="10541" href="Session.html#10541" class="Bound"
  >W</a
  ><a name="10542"
  > </a
  ><a name="10543" class="Symbol"
  >&#8594;</a
  ><a name="10544"
  >
            </a
  ><a name="10557" class="Keyword"
  >let</a
  ><a name="10560"
  > </a
  ><a name="10561" class="Symbol"
  >(</a
  ><a name="10562" href="Session.html#10562" class="Bound"
  >I</a
  ><a name="10563"
  > </a
  ><a name="10564" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10565"
  > </a
  ><a name="10566" href="Session.html#10566" class="Bound"
  >J</a
  ><a name="10567"
  > </a
  ><a name="10568" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10569"
  > </a
  ><a name="10570" href="Session.html#10570" class="Bound"
  >T</a
  ><a name="10571" class="Symbol"
  >)</a
  ><a name="10572"
  > </a
  ><a name="10573" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10574"
  > </a
  ><a name="10575" href="Session.html#10575" class="Bound"
  >j</a
  ><a name="10576"
  > </a
  ><a name="10577" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10578"
  > </a
  ><a name="10579" href="Session.html#10579" class="Bound"
  >s</a
  ><a name="10580"
  > </a
  ><a name="10581" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10582"
  > </a
  ><a name="10583" href="Session.html#10583" class="Bound"
  >O</a
  ><a name="10584"
  > </a
  ><a name="10585" class="Symbol"
  >=</a
  ><a name="10586"
  > </a
  ><a name="10587" href="Session.html#10541" class="Bound"
  >W</a
  ><a name="10588"
  > </a
  ><a name="10589" class="Keyword"
  >in</a
  ><a name="10591"
  >
            </a
  ><a name="10604" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10605"
  > </a
  ><a name="10606" class="Symbol"
  >((</a
  ><a name="10608" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10609"
  > </a
  ><a name="10610" href="Session.html#10579" class="Bound"
  >s</a
  ><a name="10611"
  > </a
  ><a name="10612" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10613"
  > </a
  ><a name="10614" href="Session.html#10562" class="Bound"
  >I</a
  ><a name="10615"
  > </a
  ><a name="10616" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10617"
  > </a
  ><a name="10618" href="Session.html#10583" class="Bound"
  >O</a
  ><a name="10619"
  > </a
  ><a name="10620" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10621"
  > </a
  ><a name="10622" href="Session.html#5136" class="Function Operator"
  >[</a
  ><a name="10623"
  > </a
  ><a name="10624" href="Session.html#10579" class="Bound"
  >s</a
  ><a name="10625"
  > </a
  ><a name="10626" href="Session.html#5136" class="Function Operator"
  >]&#931;</a
  ><a name="10628"
  > </a
  ><a name="10629" href="Session.html#10566" class="Bound"
  >J</a
  ><a name="10630"
  > </a
  ><a name="10631" href="Session.html#10570" class="Bound"
  >T</a
  ><a name="10632" class="Symbol"
  >)</a
  ><a name="10633"
  > </a
  ><a name="10634" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10635"
  > </a
  ><a name="10636" href="Session.html#10487" class="Bound"
  >&#915;</a
  ><a name="10637" class="Symbol"
  >)</a
  ><a name="10638"
  >
              </a
  ><a name="10653" class="Symbol"
  >(</a
  ><a name="10654" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="10657"
  > </a
  ><a name="10658" href="Session.html#10489" class="Bound"
  >&#916;</a
  ><a name="10659"
  > </a
  ><a name="10660" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="10661"
  > </a
  ><a name="10662" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="10664"
  > </a
  ><a name="10665" class="Symbol"
  >(</a
  ><a name="10666" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10667"
  > </a
  ><a name="10668" href="Session.html#10579" class="Bound"
  >s</a
  ><a name="10669"
  > </a
  ><a name="10670" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10671"
  > </a
  ><a name="10672" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="10674"
  > </a
  ><a name="10675" href="Session.html#10570" class="Bound"
  >T</a
  ><a name="10676" class="Symbol"
  >))</a
  ><a name="10678"
  >
</a
  ><a name="10679" href="Session.html#10471" class="Function"
  >Read</a
  ><a name="10683"
  > </a
  ><a name="10684" href="Session.html#10684" class="Bound"
  >&#915;</a
  ><a name="10685"
  > </a
  ><a name="10686" href="Session.html#10686" class="Bound"
  >&#916;</a
  ><a name="10687"
  > </a
  ><a name="10688" class="Symbol"
  >=</a
  ><a name="10689"
  > </a
  ><a name="10690" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10691"
  > </a
  ><a name="10692" class="Symbol"
  >(</a
  ><a name="10693" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="10697"
  > </a
  ><a name="10698" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10699"
  > </a
  ><a name="10700" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="10704"
  > </a
  ><a name="10705" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10706"
  > </a
  ><a name="10707" class="Symbol"
  >_)</a
  ><a name="10709"
  > </a
  ><a name="10710" class="Symbol"
  >&#955;</a
  ><a name="10711"
  > </a
  ><a name="10712" href="Session.html#10712" class="Bound"
  >W</a
  ><a name="10713"
  > </a
  ><a name="10714" class="Symbol"
  >&#8594;</a
  ><a name="10715"
  >
           </a
  ><a name="10727" class="Keyword"
  >let</a
  ><a name="10730"
  > </a
  ><a name="10731" class="Symbol"
  >(</a
  ><a name="10732" href="Session.html#10732" class="Bound"
  >I</a
  ><a name="10733"
  > </a
  ><a name="10734" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10735"
  > </a
  ><a name="10736" href="Session.html#10736" class="Bound"
  >J</a
  ><a name="10737"
  > </a
  ><a name="10738" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10739"
  > </a
  ><a name="10740" href="Session.html#10740" class="Bound"
  >T</a
  ><a name="10741" class="Symbol"
  >)</a
  ><a name="10742"
  > </a
  ><a name="10743" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10744"
  > </a
  ><a name="10745" href="Session.html#10745" class="Bound"
  >s</a
  ><a name="10746"
  > </a
  ><a name="10747" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10748"
  > </a
  ><a name="10749" href="Session.html#10749" class="Bound"
  >O</a
  ><a name="10750"
  > </a
  ><a name="10751" class="Symbol"
  >=</a
  ><a name="10752"
  > </a
  ><a name="10753" href="Session.html#10712" class="Bound"
  >W</a
  ><a name="10754"
  > </a
  ><a name="10755" class="Keyword"
  >in</a
  ><a name="10757"
  >
           </a
  ><a name="10769" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10770"
  > </a
  ><a name="10771" class="Symbol"
  >((</a
  ><a name="10773" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10774"
  > </a
  ><a name="10775" href="Session.html#10745" class="Bound"
  >s</a
  ><a name="10776"
  > </a
  ><a name="10777" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10778"
  > </a
  ><a name="10779" href="Session.html#10732" class="Bound"
  >I</a
  ><a name="10780"
  > </a
  ><a name="10781" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10782"
  > </a
  ><a name="10783" href="Session.html#10749" class="Bound"
  >O</a
  ><a name="10784"
  > </a
  ><a name="10785" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10786"
  > </a
  ><a name="10787" href="Session.html#5143" class="Function Operator"
  >[</a
  ><a name="10788"
  > </a
  ><a name="10789" href="Session.html#10745" class="Bound"
  >s</a
  ><a name="10790"
  > </a
  ><a name="10791" href="Session.html#5143" class="Function Operator"
  >]&#928;</a
  ><a name="10793"
  > </a
  ><a name="10794" href="Session.html#10736" class="Bound"
  >J</a
  ><a name="10795"
  > </a
  ><a name="10796" href="Session.html#10740" class="Bound"
  >T</a
  ><a name="10797" class="Symbol"
  >)</a
  ><a name="10798"
  > </a
  ><a name="10799" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10800"
  > </a
  ><a name="10801" href="Session.html#10684" class="Bound"
  >&#915;</a
  ><a name="10802" class="Symbol"
  >)</a
  ><a name="10803"
  >
             </a
  ><a name="10817" class="Symbol"
  >(</a
  ><a name="10818" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="10821"
  > </a
  ><a name="10822" href="Session.html#10686" class="Bound"
  >&#916;</a
  ><a name="10823"
  > </a
  ><a name="10824" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="10825"
  > </a
  ><a name="10826" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="10828"
  > </a
  ><a name="10829" class="Symbol"
  >(</a
  ><a name="10830" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10831"
  > </a
  ><a name="10832" href="Session.html#10745" class="Bound"
  >s</a
  ><a name="10833"
  > </a
  ><a name="10834" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10835"
  > </a
  ><a name="10836" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="10838"
  > </a
  ><a name="10839" href="Session.html#10740" class="Bound"
  >T</a
  ><a name="10840" class="Symbol"
  >))</a
  ><a name="10842"
  ></pre>
<p>This functor &quot;consumes&quot; <code>`^</code> from the session type: it &quot;allows&quot; you to choose a value from which the rest of the type is dependent, but <em>most often</em> this value will be forced by the type.</p>
<pre></a
  ><a name="11061" href="Session.html#11061" class="Function"
  >At</a
  ><a name="11063"
  > </a
  ><a name="11064" class="Symbol"
  >:</a
  ><a name="11065"
  > </a
  ><a name="11066" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="11068"
  >
</a
  ><a name="11069" href="Session.html#11061" class="Function"
  >At</a
  ><a name="11071"
  > </a
  ><a name="11072" href="Session.html#11072" class="Bound"
  >&#915;</a
  ><a name="11073"
  > </a
  ><a name="11074" href="Session.html#11074" class="Bound"
  >&#916;</a
  ><a name="11075"
  > </a
  ><a name="11076" class="Symbol"
  >=</a
  ><a name="11077"
  > </a
  ><a name="11078" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11079"
  > </a
  ><a name="11080" class="Symbol"
  >(</a
  ><a name="11081" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11082"
  > </a
  ><a name="11083" class="Symbol"
  >_</a
  ><a name="11084"
  > </a
  ><a name="11085" class="Symbol"
  >&#955;</a
  ><a name="11086"
  > </a
  ><a name="11087" href="Session.html#11087" class="Bound"
  >I</a
  ><a name="11088"
  > </a
  ><a name="11089" class="Symbol"
  >&#8594;</a
  ><a name="11090"
  > </a
  ><a name="11091" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11092"
  > </a
  ><a name="11093" class="Symbol"
  >_</a
  ><a name="11094"
  > </a
  ><a name="11095" class="Symbol"
  >&#955;</a
  ><a name="11096"
  > </a
  ><a name="11097" href="Session.html#11097" class="Bound"
  >O</a
  ><a name="11098"
  > </a
  ><a name="11099" class="Symbol"
  >&#8594;</a
  ><a name="11100"
  > </a
  ><a name="11101" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11102"
  > </a
  ><a name="11103" class="Symbol"
  >(</a
  ><a name="11104" href="Session.html#11097" class="Bound"
  >O</a
  ><a name="11105"
  > </a
  ><a name="11106" class="Symbol"
  >&#8594;</a
  ><a name="11107"
  > </a
  ><a name="11108" href="Session.html#3667" class="Function"
  >De</a
  ><a name="11110"
  > </a
  ><a name="11111" href="Session.html#11087" class="Bound"
  >I</a
  ><a name="11112" class="Symbol"
  >)</a
  ><a name="11113"
  > </a
  ><a name="11114" class="Symbol"
  >&#955;</a
  ><a name="11115"
  > </a
  ><a name="11116" href="Session.html#11116" class="Bound"
  >_</a
  ><a name="11117"
  > </a
  ><a name="11118" class="Symbol"
  >&#8594;</a
  ><a name="11119"
  > </a
  ><a name="11120" href="Session.html#11097" class="Bound"
  >O</a
  ><a name="11121"
  > </a
  ><a name="11122" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="11123"
  > </a
  ><a name="11124" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="11128" class="Symbol"
  >)</a
  ><a name="11129"
  > </a
  ><a name="11130" class="Symbol"
  >&#955;</a
  ><a name="11131"
  > </a
  ><a name="11132" href="Session.html#11132" class="Bound"
  >W</a
  ><a name="11133"
  > </a
  ><a name="11134" class="Symbol"
  >&#8594;</a
  ><a name="11135"
  >
         </a
  ><a name="11145" class="Keyword"
  >let</a
  ><a name="11148"
  > </a
  ><a name="11149" href="Session.html#11149" class="Bound"
  >I</a
  ><a name="11150"
  > </a
  ><a name="11151" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11152"
  > </a
  ><a name="11153" href="Session.html#11153" class="Bound"
  >O</a
  ><a name="11154"
  > </a
  ><a name="11155" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11156"
  > </a
  ><a name="11157" href="Session.html#11157" class="Bound"
  >T</a
  ><a name="11158"
  > </a
  ><a name="11159" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11160"
  > </a
  ><a name="11161" href="Session.html#11161" class="Bound"
  >o</a
  ><a name="11162"
  > </a
  ><a name="11163" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11164"
  > </a
  ><a name="11165" href="Session.html#11165" class="Bound"
  >s</a
  ><a name="11166"
  > </a
  ><a name="11167" class="Symbol"
  >=</a
  ><a name="11168"
  > </a
  ><a name="11169" href="Session.html#11132" class="Bound"
  >W</a
  ><a name="11170"
  > </a
  ><a name="11171" class="Keyword"
  >in</a
  ><a name="11173"
  >
         </a
  ><a name="11183" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11184"
  > </a
  ><a name="11185" class="Symbol"
  >((</a
  ><a name="11187" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11188"
  > </a
  ><a name="11189" href="Session.html#11165" class="Bound"
  >s</a
  ><a name="11190"
  > </a
  ><a name="11191" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11192"
  > </a
  ><a name="11193" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="11195"
  > </a
  ><a name="11196" href="Session.html#4060" class="InductiveConstructor"
  >`^</a
  ><a name="11198"
  > </a
  ><a name="11199" href="Session.html#11157" class="Bound"
  >T</a
  ><a name="11200" class="Symbol"
  >)</a
  ><a name="11201"
  > </a
  ><a name="11202" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="11203"
  > </a
  ><a name="11204" href="Session.html#11072" class="Bound"
  >&#915;</a
  ><a name="11205" class="Symbol"
  >)</a
  ><a name="11206"
  >
            </a
  ><a name="11219" class="Symbol"
  >(</a
  ><a name="11220" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="11223"
  > </a
  ><a name="11224" href="Session.html#11074" class="Bound"
  >&#916;</a
  ><a name="11225"
  > </a
  ><a name="11226" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="11227"
  > </a
  ><a name="11228" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="11230"
  > </a
  ><a name="11231" class="Symbol"
  >(</a
  ><a name="11232" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11233"
  > </a
  ><a name="11234" href="Session.html#11165" class="Bound"
  >s</a
  ><a name="11235"
  > </a
  ><a name="11236" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11237"
  > </a
  ><a name="11238" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="11240"
  > </a
  ><a name="11241" href="Session.html#11157" class="Bound"
  >T</a
  ><a name="11242"
  > </a
  ><a name="11243" href="Session.html#11161" class="Bound"
  >o</a
  ><a name="11244" class="Symbol"
  >))</a
  ><a name="11246"
  ></pre>
<p>Session types have &quot;identity&quot; codes <code>`I</code> as leaves, so to end a session we need to consume it and remove the type from the context.</p>
<pre></a
  ><a name="11409" href="Session.html#11409" class="Function"
  >End</a
  ><a name="11412"
  > </a
  ><a name="11413" class="Symbol"
  >:</a
  ><a name="11414"
  > </a
  ><a name="11415" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="11417"
  >
</a
  ><a name="11418" href="Session.html#11409" class="Function"
  >End</a
  ><a name="11421"
  > </a
  ><a name="11422" href="Session.html#11422" class="Bound"
  >&#915;</a
  ><a name="11423"
  > </a
  ><a name="11424" href="Session.html#11424" class="Bound"
  >&#916;</a
  ><a name="11425"
  > </a
  ><a name="11426" class="Symbol"
  >=</a
  ><a name="11427"
  > </a
  ><a name="11428" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11429"
  > </a
  ><a name="11430" class="Symbol"
  >(</a
  ><a name="11431" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11432"
  > </a
  ><a name="11433" class="PrimitiveType"
  >Set</a
  ><a name="11436"
  > </a
  ><a name="11437" class="Symbol"
  >&#955;</a
  ><a name="11438"
  > </a
  ><a name="11439" href="Session.html#11439" class="Bound"
  >I</a
  ><a name="11440"
  > </a
  ><a name="11441" class="Symbol"
  >&#8594;</a
  ><a name="11442"
  > </a
  ><a name="11443" class="PrimitiveType"
  >Set</a
  ><a name="11446"
  > </a
  ><a name="11447" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="11448"
  > </a
  ><a name="11449" href="Session.html#11439" class="Bound"
  >I</a
  ><a name="11450"
  > </a
  ><a name="11451" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="11452"
  > </a
  ><a name="11453" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="11457" class="Symbol"
  >)</a
  ><a name="11458"
  > </a
  ><a name="11459" class="Symbol"
  >&#955;</a
  ><a name="11460"
  > </a
  ><a name="11461" href="Session.html#11461" class="Bound"
  >W</a
  ><a name="11462"
  > </a
  ><a name="11463" class="Symbol"
  >&#8594;</a
  ><a name="11464"
  >
          </a
  ><a name="11475" class="Keyword"
  >let</a
  ><a name="11478"
  > </a
  ><a name="11479" href="Session.html#11479" class="Bound"
  >I</a
  ><a name="11480"
  > </a
  ><a name="11481" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11482"
  > </a
  ><a name="11483" href="Session.html#11483" class="Bound"
  >O</a
  ><a name="11484"
  > </a
  ><a name="11485" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11486"
  > </a
  ><a name="11487" href="Session.html#11487" class="Bound"
  >i</a
  ><a name="11488"
  > </a
  ><a name="11489" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11490"
  > </a
  ><a name="11491" href="Session.html#11491" class="Bound"
  >s</a
  ><a name="11492"
  > </a
  ><a name="11493" class="Symbol"
  >=</a
  ><a name="11494"
  > </a
  ><a name="11495" href="Session.html#11461" class="Bound"
  >W</a
  ><a name="11496"
  > </a
  ><a name="11497" class="Keyword"
  >in</a
  ><a name="11499"
  >
          </a
  ><a name="11510" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11511"
  > </a
  ><a name="11512" class="Symbol"
  >((</a
  ><a name="11514" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11515"
  > </a
  ><a name="11516" href="Session.html#11491" class="Bound"
  >s</a
  ><a name="11517"
  > </a
  ><a name="11518" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11519"
  > </a
  ><a name="11520" class="Symbol"
  >(</a
  ><a name="11521" href="Session.html#11479" class="Bound"
  >I</a
  ><a name="11522"
  > </a
  ><a name="11523" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11524"
  > </a
  ><a name="11525" href="Session.html#11483" class="Bound"
  >O</a
  ><a name="11526"
  > </a
  ><a name="11527" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11528"
  > </a
  ><a name="11529" href="Session.html#3835" class="InductiveConstructor"
  >`I</a
  ><a name="11531"
  > </a
  ><a name="11532" href="Session.html#11487" class="Bound"
  >i</a
  ><a name="11533" class="Symbol"
  >))</a
  ><a name="11535"
  > </a
  ><a name="11536" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="11537"
  > </a
  ><a name="11538" href="Session.html#11422" class="Bound"
  >&#915;</a
  ><a name="11539" class="Symbol"
  >)</a
  ><a name="11540"
  >
            </a
  ><a name="11553" class="Symbol"
  >(</a
  ><a name="11554" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="11557"
  > </a
  ><a name="11558" href="Session.html#11424" class="Bound"
  >&#916;</a
  ><a name="11559"
  > </a
  ><a name="11560" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="11561"
  > </a
  ><a name="11562" href="Session.Base.html#3041" class="Function"
  >rm</a
  ><a name="11564" class="Symbol"
  >)</a
  ><a name="11565"
  ></pre>
<p>The following definitions are actual (strictly positive) indexed functors: calls to the <code>F</code> argument correspond to recursion in the grammar.</p>
<p>When forking, we need to split the input context sensibly (see <code>Splits</code> above): the child must do <em>all</em> <code>ΓR</code>, the continuation must do <code>ΓL</code>.</p>
<pre></a
  ><a name="11875" href="Session.html#11875" class="Function"
  >Fork</a
  ><a name="11879"
  > </a
  ><a name="11880" class="Symbol"
  >:</a
  ><a name="11881"
  > </a
  ><a name="11882" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="11884"
  > </a
  ><a name="11885" class="Symbol"
  >&#8594;</a
  ><a name="11886"
  > </a
  ><a name="11887" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="11889"
  >
</a
  ><a name="11890" href="Session.html#11875" class="Function"
  >Fork</a
  ><a name="11894"
  > </a
  ><a name="11895" href="Session.html#11895" class="Bound"
  >F</a
  ><a name="11896"
  > </a
  ><a name="11897" href="Session.html#11897" class="Bound"
  >&#915;</a
  ><a name="11898"
  > </a
  ><a name="11899" href="Session.html#11899" class="Bound"
  >&#916;</a
  ><a name="11900"
  > </a
  ><a name="11901" class="Symbol"
  >=</a
  ><a name="11902"
  > </a
  ><a name="11903" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11904"
  > </a
  ><a name="11905" class="Symbol"
  >(</a
  ><a name="11906" href="Session.html#7246" class="Function"
  >Splits</a
  ><a name="11912"
  > </a
  ><a name="11913" href="Session.html#11897" class="Bound"
  >&#915;</a
  ><a name="11914" class="Symbol"
  >)</a
  ><a name="11915"
  > </a
  ><a name="11916" class="Symbol"
  >&#955;</a
  ><a name="11917"
  > </a
  ><a name="11918" href="Session.html#11918" class="Bound"
  >ds</a
  ><a name="11920"
  > </a
  ><a name="11921" class="Symbol"
  >&#8594;</a
  ><a name="11922"
  >
             </a
  ><a name="11936" class="Keyword"
  >let</a
  ><a name="11939"
  > </a
  ><a name="11940" href="Session.html#11940" class="Bound"
  >&#915;L</a
  ><a name="11942"
  > </a
  ><a name="11943" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11944"
  > </a
  ><a name="11945" href="Session.html#11945" class="Bound"
  >&#915;R</a
  ><a name="11947"
  > </a
  ><a name="11948" class="Symbol"
  >=</a
  ><a name="11949"
  > </a
  ><a name="11950" href="Session.html#7287" class="Function"
  >splits</a
  ><a name="11956"
  > </a
  ><a name="11957" href="Session.html#11918" class="Bound"
  >ds</a
  ><a name="11959"
  > </a
  ><a name="11960" class="Keyword"
  >in</a
  ><a name="11962"
  >
               </a
  ><a name="11978" href="Session.html#11895" class="Bound"
  >F</a
  ><a name="11979"
  > </a
  ><a name="11980" href="Session.html#11945" class="Bound"
  >&#915;R</a
  ><a name="11982"
  > </a
  ><a name="11983" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="11985"
  >
             </a
  ><a name="11999" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12000"
  > </a
  ><a name="12001" href="Session.html#11899" class="Bound"
  >&#916;</a
  ><a name="12002"
  > </a
  ><a name="12003" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="12004"
  > </a
  ><a name="12005" href="Session.html#11940" class="Bound"
  >&#915;L</a
  ><a name="12007"
  ></pre>
<p>A server process can only be launched in a context where it is possible to duplicate all channels.</p>
<p>The server is located on the <code>+</code> side of the channel.</p>
<pre></a
  ><a name="12188" href="Session.html#12188" class="Function"
  >Server</a
  ><a name="12194"
  > </a
  ><a name="12195" class="Symbol"
  >:</a
  ><a name="12196"
  > </a
  ><a name="12197" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="12199"
  > </a
  ><a name="12200" class="Symbol"
  >&#8594;</a
  ><a name="12201"
  > </a
  ><a name="12202" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="12204"
  >
</a
  ><a name="12205" href="Session.html#12188" class="Function"
  >Server</a
  ><a name="12211"
  > </a
  ><a name="12212" href="Session.html#12212" class="Bound"
  >F</a
  ><a name="12213"
  > </a
  ><a name="12214" href="Session.html#12214" class="Bound"
  >&#915;</a
  ><a name="12215"
  > </a
  ><a name="12216" href="Session.html#12216" class="Bound"
  >&#916;</a
  ><a name="12217"
  > </a
  ><a name="12218" class="Symbol"
  >=</a
  ><a name="12219"
  > </a
  ><a name="12220" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12221"
  > </a
  ><a name="12222" class="Symbol"
  >(</a
  ><a name="12223" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="12227"
  > </a
  ><a name="12228" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12229"
  > </a
  ><a name="12230" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="12234"
  > </a
  ><a name="12235" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12236"
  > </a
  ><a name="12237" class="Symbol"
  >_)</a
  ><a name="12239"
  > </a
  ><a name="12240" class="Symbol"
  >&#955;</a
  ><a name="12241"
  > </a
  ><a name="12242" href="Session.html#12242" class="Bound"
  >W</a
  ><a name="12243"
  > </a
  ><a name="12244" class="Symbol"
  >&#8594;</a
  ><a name="12245"
  > </a
  ><a name="12246" class="Keyword"
  >let</a
  ><a name="12249"
  > </a
  ><a name="12250" href="Session.html#12250" class="Bound"
  >A</a
  ><a name="12251"
  > </a
  ><a name="12252" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12253"
  > </a
  ><a name="12254" href="Session.html#12254" class="Bound"
  >s</a
  ><a name="12255"
  > </a
  ><a name="12256" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12257"
  > </a
  ><a name="12258" href="Session.html#12258" class="Bound"
  >I</a
  ><a name="12259"
  > </a
  ><a name="12260" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12261"
  > </a
  ><a name="12262" href="Session.html#12262" class="Bound"
  >O</a
  ><a name="12263"
  > </a
  ><a name="12264" class="Symbol"
  >=</a
  ><a name="12265"
  > </a
  ><a name="12266" href="Session.html#12242" class="Bound"
  >W</a
  ><a name="12267"
  > </a
  ><a name="12268" class="Keyword"
  >in</a
  ><a name="12270"
  >
               </a
  ><a name="12286" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12287"
  > </a
  ><a name="12288" class="Symbol"
  >((</a
  ><a name="12290" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12291"
  > </a
  ><a name="12292" href="Session.html#12254" class="Bound"
  >s</a
  ><a name="12293"
  > </a
  ><a name="12294" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12295"
  > </a
  ><a name="12296" href="Session.html#12258" class="Bound"
  >I</a
  ><a name="12297"
  > </a
  ><a name="12298" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12299"
  > </a
  ><a name="12300" href="Session.html#12262" class="Bound"
  >O</a
  ><a name="12301"
  > </a
  ><a name="12302" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12303"
  > </a
  ><a name="12304" href="Session.html#5337" class="Function Operator"
  >[</a
  ><a name="12305"
  > </a
  ><a name="12306" href="Session.html#12254" class="Bound"
  >s</a
  ><a name="12307"
  > </a
  ><a name="12308" href="Session.html#5337" class="Function Operator"
  >]&#161;</a
  ><a name="12310"
  > </a
  ><a name="12311" href="Session.html#12250" class="Bound"
  >A</a
  ><a name="12312" class="Symbol"
  >)</a
  ><a name="12313"
  > </a
  ><a name="12314" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="12315"
  > </a
  ><a name="12316" href="Session.html#12214" class="Bound"
  >&#915;</a
  ><a name="12317" class="Symbol"
  >)</a
  ><a name="12318"
  > </a
  ><a name="12319" class="Symbol"
  >&#955;</a
  ><a name="12320"
  > </a
  ><a name="12321" href="Session.html#12321" class="Bound"
  >i</a
  ><a name="12322"
  > </a
  ><a name="12323" class="Symbol"
  >&#8594;</a
  ><a name="12324"
  >
                 </a
  ><a name="12342" href="Session.html#6381" class="Function"
  >All&#191;</a
  ><a name="12346"
  > </a
  ><a name="12347" href="Session.html#12216" class="Bound"
  >&#916;</a
  ><a name="12348"
  >
               </a
  ><a name="12364" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12365"
  > </a
  ><a name="12366" href="Session.html#12212" class="Bound"
  >F</a
  ><a name="12367"
  > </a
  ><a name="12368" class="Symbol"
  >(</a
  ><a name="12369" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="12371"
  > </a
  ><a name="12372" class="Symbol"
  >(</a
  ><a name="12373" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12374"
  > </a
  ><a name="12375" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="12376"
  > </a
  ><a name="12377" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12378"
  > </a
  ><a name="12379" href="Session.html#12250" class="Bound"
  >A</a
  ><a name="12380" class="Symbol"
  >)</a
  ><a name="12381"
  > </a
  ><a name="12382" href="Session.html#12321" class="Bound"
  >i</a
  ><a name="12383" class="Symbol"
  >)</a
  ><a name="12384"
  > </a
  ><a name="12385" href="Session.html#12216" class="Bound"
  >&#916;</a
  ><a name="12386"
  >
               </a
  ><a name="12402" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12403"
  > </a
  ><a name="12404" href="Session.html#12216" class="Bound"
  >&#916;</a
  ><a name="12405"
  > </a
  ><a name="12406" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="12407"
  > </a
  ><a name="12408" href="Session.Base.html#3041" class="Function"
  >rm</a
  ><a name="12410"
  > </a
  ><a name="12411" href="Session.html#12321" class="Bound"
  >i</a
  ><a name="12412"
  ></pre>
<p>The client is positioned on the <code>-</code> side of the channel.</p>
<p>In this case execution is synchronous: we account for the fact that the client might also interact on some other channels by passing <code>Δ</code> to <code>F</code>.</p>
<pre></a
  ><a name="12642" href="Session.html#12642" class="Function"
  >Client</a
  ><a name="12648"
  > </a
  ><a name="12649" class="Symbol"
  >:</a
  ><a name="12650"
  > </a
  ><a name="12651" class="Symbol"
  >(</a
  ><a name="12652" class="PrimitiveType"
  >Set</a
  ><a name="12655"
  > </a
  ><a name="12656" class="Symbol"
  >&#8594;</a
  ><a name="12657"
  > </a
  ><a name="12658" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="12660" class="Symbol"
  >)</a
  ><a name="12661"
  > </a
  ><a name="12662" class="Symbol"
  >&#8594;</a
  ><a name="12663"
  > </a
  ><a name="12664" class="PrimitiveType"
  >Set</a
  ><a name="12667"
  > </a
  ><a name="12668" class="Symbol"
  >&#8594;</a
  ><a name="12669"
  > </a
  ><a name="12670" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="12672"
  >
</a
  ><a name="12673" href="Session.html#12642" class="Function"
  >Client</a
  ><a name="12679"
  > </a
  ><a name="12680" href="Session.html#12680" class="Bound"
  >F</a
  ><a name="12681"
  > </a
  ><a name="12682" href="Session.html#12682" class="Bound"
  >X</a
  ><a name="12683"
  > </a
  ><a name="12684" href="Session.html#12684" class="Bound"
  >&#915;</a
  ><a name="12685"
  > </a
  ><a name="12686" href="Session.html#12686" class="Bound"
  >&#916;</a
  ><a name="12687"
  > </a
  ><a name="12688" class="Symbol"
  >=</a
  ><a name="12689"
  > </a
  ><a name="12690" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12691"
  > </a
  ><a name="12692" class="Symbol"
  >(</a
  ><a name="12693" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="12697"
  > </a
  ><a name="12698" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12699"
  > </a
  ><a name="12700" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="12704"
  > </a
  ><a name="12705" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12706"
  > </a
  ><a name="12707" class="Symbol"
  >_)</a
  ><a name="12709"
  > </a
  ><a name="12710" class="Symbol"
  >&#955;</a
  ><a name="12711"
  > </a
  ><a name="12712" href="Session.html#12712" class="Bound"
  >W</a
  ><a name="12713"
  > </a
  ><a name="12714" class="Symbol"
  >&#8594;</a
  ><a name="12715"
  > </a
  ><a name="12716" class="Keyword"
  >let</a
  ><a name="12719"
  > </a
  ><a name="12720" href="Session.html#12720" class="Bound"
  >A</a
  ><a name="12721"
  > </a
  ><a name="12722" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12723"
  > </a
  ><a name="12724" href="Session.html#12724" class="Bound"
  >s</a
  ><a name="12725"
  > </a
  ><a name="12726" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12727"
  > </a
  ><a name="12728" href="Session.html#12728" class="Bound"
  >I</a
  ><a name="12729"
  > </a
  ><a name="12730" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12731"
  > </a
  ><a name="12732" href="Session.html#12732" class="Bound"
  >O</a
  ><a name="12733"
  > </a
  ><a name="12734" class="Symbol"
  >=</a
  ><a name="12735"
  > </a
  ><a name="12736" href="Session.html#12712" class="Bound"
  >W</a
  ><a name="12737"
  > </a
  ><a name="12738" class="Keyword"
  >in</a
  ><a name="12740"
  >
                 </a
  ><a name="12758" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12759"
  > </a
  ><a name="12760" class="Symbol"
  >((</a
  ><a name="12762" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12763"
  > </a
  ><a name="12764" href="Session.html#12724" class="Bound"
  >s</a
  ><a name="12765"
  > </a
  ><a name="12766" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12767"
  > </a
  ><a name="12768" href="Session.html#12728" class="Bound"
  >I</a
  ><a name="12769"
  > </a
  ><a name="12770" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12771"
  > </a
  ><a name="12772" href="Session.html#12732" class="Bound"
  >O</a
  ><a name="12773"
  > </a
  ><a name="12774" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12775"
  > </a
  ><a name="12776" href="Session.html#5344" class="Function Operator"
  >[</a
  ><a name="12777"
  > </a
  ><a name="12778" href="Session.html#12724" class="Bound"
  >s</a
  ><a name="12779"
  > </a
  ><a name="12780" href="Session.html#5344" class="Function Operator"
  >]&#191;</a
  ><a name="12782"
  > </a
  ><a name="12783" href="Session.html#12720" class="Bound"
  >A</a
  ><a name="12784" class="Symbol"
  >)</a
  ><a name="12785"
  > </a
  ><a name="12786" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="12787"
  > </a
  ><a name="12788" href="Session.html#12684" class="Bound"
  >&#915;</a
  ><a name="12789" class="Symbol"
  >)</a
  ><a name="12790"
  > </a
  ><a name="12791" class="Symbol"
  >&#955;</a
  ><a name="12792"
  > </a
  ><a name="12793" href="Session.html#12793" class="Bound"
  >i</a
  ><a name="12794"
  > </a
  ><a name="12795" class="Symbol"
  >&#8594;</a
  ><a name="12796"
  >
                   </a
  ><a name="12816" href="Session.html#12680" class="Bound"
  >F</a
  ><a name="12817"
  > </a
  ><a name="12818" href="Session.html#12682" class="Bound"
  >X</a
  ><a name="12819"
  > </a
  ><a name="12820" class="Symbol"
  >(</a
  ><a name="12821" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="12823"
  > </a
  ><a name="12824" class="Symbol"
  >(</a
  ><a name="12825" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12826"
  > </a
  ><a name="12827" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="12828"
  > </a
  ><a name="12829" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12830"
  > </a
  ><a name="12831" href="Session.html#12720" class="Bound"
  >A</a
  ><a name="12832" class="Symbol"
  >)</a
  ><a name="12833"
  > </a
  ><a name="12834" href="Session.html#12793" class="Bound"
  >i</a
  ><a name="12835" class="Symbol"
  >)</a
  ><a name="12836"
  > </a
  ><a name="12837" href="Session.html#12686" class="Bound"
  >&#916;</a
  ><a name="12838"
  ></pre>
<p>We are free to run clients as many times as we want (<code>Ctr</code>), or even refrain from doing so (<code>Wk</code>).</p>
<pre></a
  ><a name="12964" href="Session.html#12964" class="Function"
  >Wk</a
  ><a name="12966"
  > </a
  ><a name="12967" href="Session.html#12967" class="Function"
  >Ctr</a
  ><a name="12970"
  > </a
  ><a name="12971" class="Symbol"
  >:</a
  ><a name="12972"
  > </a
  ><a name="12973" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="12975"
  >
</a
  ><a name="12976" href="Session.html#12964" class="Function"
  >Wk</a
  ><a name="12978"
  > </a
  ><a name="12979" href="Session.html#12979" class="Bound"
  >&#915;</a
  ><a name="12980"
  > </a
  ><a name="12981" href="Session.html#12981" class="Bound"
  >&#916;</a
  ><a name="12982"
  > </a
  ><a name="12983" class="Symbol"
  >=</a
  ><a name="12984"
  > </a
  ><a name="12985" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12986"
  > </a
  ><a name="12987" class="Symbol"
  >(</a
  ><a name="12988" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="12992"
  > </a
  ><a name="12993" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12994"
  > </a
  ><a name="12995" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="12999"
  > </a
  ><a name="13000" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13001"
  > </a
  ><a name="13002" class="Symbol"
  >_)</a
  ><a name="13004"
  > </a
  ><a name="13005" class="Symbol"
  >&#955;</a
  ><a name="13006"
  > </a
  ><a name="13007" href="Session.html#13007" class="Bound"
  >W</a
  ><a name="13008"
  > </a
  ><a name="13009" class="Symbol"
  >&#8594;</a
  ><a name="13010"
  >
         </a
  ><a name="13020" class="Keyword"
  >let</a
  ><a name="13023"
  > </a
  ><a name="13024" href="Session.html#13024" class="Bound"
  >A</a
  ><a name="13025"
  > </a
  ><a name="13026" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13027"
  > </a
  ><a name="13028" href="Session.html#13028" class="Bound"
  >s</a
  ><a name="13029"
  > </a
  ><a name="13030" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13031"
  > </a
  ><a name="13032" href="Session.html#13032" class="Bound"
  >I</a
  ><a name="13033"
  > </a
  ><a name="13034" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13035"
  > </a
  ><a name="13036" href="Session.html#13036" class="Bound"
  >O</a
  ><a name="13037"
  > </a
  ><a name="13038" class="Symbol"
  >=</a
  ><a name="13039"
  > </a
  ><a name="13040" href="Session.html#13007" class="Bound"
  >W</a
  ><a name="13041"
  > </a
  ><a name="13042" class="Keyword"
  >in</a
  ><a name="13044"
  >
         </a
  ><a name="13054" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13055"
  > </a
  ><a name="13056" class="Symbol"
  >((</a
  ><a name="13058" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="13059"
  > </a
  ><a name="13060" href="Session.html#13028" class="Bound"
  >s</a
  ><a name="13061"
  > </a
  ><a name="13062" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13063"
  > </a
  ><a name="13064" href="Session.html#13032" class="Bound"
  >I</a
  ><a name="13065"
  > </a
  ><a name="13066" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13067"
  > </a
  ><a name="13068" href="Session.html#13036" class="Bound"
  >O</a
  ><a name="13069"
  > </a
  ><a name="13070" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13071"
  > </a
  ><a name="13072" href="Session.html#5344" class="Function Operator"
  >[</a
  ><a name="13073"
  > </a
  ><a name="13074" href="Session.html#13028" class="Bound"
  >s</a
  ><a name="13075"
  > </a
  ><a name="13076" href="Session.html#5344" class="Function Operator"
  >]&#191;</a
  ><a name="13078"
  > </a
  ><a name="13079" href="Session.html#13024" class="Bound"
  >A</a
  ><a name="13080" class="Symbol"
  >)</a
  ><a name="13081"
  > </a
  ><a name="13082" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="13083"
  > </a
  ><a name="13084" href="Session.html#12979" class="Bound"
  >&#915;</a
  ><a name="13085" class="Symbol"
  >)</a
  ><a name="13086"
  >
           </a
  ><a name="13098" class="Symbol"
  >(</a
  ><a name="13099" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="13102"
  > </a
  ><a name="13103" href="Session.html#12981" class="Bound"
  >&#916;</a
  ><a name="13104"
  > </a
  ><a name="13105" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="13106"
  > </a
  ><a name="13107" href="Session.Base.html#3041" class="Function"
  >rm</a
  ><a name="13109" class="Symbol"
  >)</a
  ><a name="13110"
  >
</a
  ><a name="13111" href="Session.html#12967" class="Function"
  >Ctr</a
  ><a name="13114"
  > </a
  ><a name="13115" href="Session.html#13115" class="Bound"
  >&#915;</a
  ><a name="13116"
  > </a
  ><a name="13117" href="Session.html#13117" class="Bound"
  >&#916;</a
  ><a name="13118"
  > </a
  ><a name="13119" class="Symbol"
  >=</a
  ><a name="13120"
  > </a
  ><a name="13121" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13122"
  > </a
  ><a name="13123" class="Symbol"
  >(</a
  ><a name="13124" href="Session.html#3689" class="Function"
  >Code</a
  ><a name="13128"
  > </a
  ><a name="13129" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13130"
  > </a
  ><a name="13131" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="13135"
  > </a
  ><a name="13136" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13137"
  > </a
  ><a name="13138" class="Symbol"
  >_)</a
  ><a name="13140"
  > </a
  ><a name="13141" class="Symbol"
  >&#955;</a
  ><a name="13142"
  > </a
  ><a name="13143" href="Session.html#13143" class="Bound"
  >W</a
  ><a name="13144"
  > </a
  ><a name="13145" class="Symbol"
  >&#8594;</a
  ><a name="13146"
  >
          </a
  ><a name="13157" class="Keyword"
  >let</a
  ><a name="13160"
  > </a
  ><a name="13161" href="Session.html#13161" class="Bound"
  >A</a
  ><a name="13162"
  > </a
  ><a name="13163" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13164"
  > </a
  ><a name="13165" href="Session.html#13165" class="Bound"
  >s</a
  ><a name="13166"
  > </a
  ><a name="13167" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13168"
  > </a
  ><a name="13169" href="Session.html#13169" class="Bound"
  >I</a
  ><a name="13170"
  > </a
  ><a name="13171" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13172"
  > </a
  ><a name="13173" href="Session.html#13173" class="Bound"
  >O</a
  ><a name="13174"
  > </a
  ><a name="13175" class="Symbol"
  >=</a
  ><a name="13176"
  > </a
  ><a name="13177" href="Session.html#13143" class="Bound"
  >W</a
  ><a name="13178"
  > </a
  ><a name="13179" class="Keyword"
  >in</a
  ><a name="13181"
  >
          </a
  ><a name="13192" class="Keyword"
  >let</a
  ><a name="13195"
  > </a
  ><a name="13196" href="Session.html#13196" class="Bound"
  >&#964;</a
  ><a name="13197"
  > </a
  ><a name="13198" class="Symbol"
  >=</a
  ><a name="13199"
  > </a
  ><a name="13200" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="13201"
  > </a
  ><a name="13202" href="Session.html#13165" class="Bound"
  >s</a
  ><a name="13203"
  > </a
  ><a name="13204" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13205"
  > </a
  ><a name="13206" href="Session.html#13169" class="Bound"
  >I</a
  ><a name="13207"
  > </a
  ><a name="13208" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13209"
  > </a
  ><a name="13210" href="Session.html#13173" class="Bound"
  >O</a
  ><a name="13211"
  > </a
  ><a name="13212" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13213"
  > </a
  ><a name="13214" href="Session.html#5344" class="Function Operator"
  >[</a
  ><a name="13215"
  > </a
  ><a name="13216" href="Session.html#13165" class="Bound"
  >s</a
  ><a name="13217"
  > </a
  ><a name="13218" href="Session.html#5344" class="Function Operator"
  >]&#191;</a
  ><a name="13220"
  > </a
  ><a name="13221" href="Session.html#13161" class="Bound"
  >A</a
  ><a name="13222"
  > </a
  ><a name="13223" class="Keyword"
  >in</a
  ><a name="13225"
  >
            </a
  ><a name="13238" href="Session.html#13196" class="Bound"
  >&#964;</a
  ><a name="13239"
  > </a
  ><a name="13240" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="13241"
  > </a
  ><a name="13242" href="Session.html#13115" class="Bound"
  >&#915;</a
  ><a name="13243"
  >
          </a
  ><a name="13254" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13255"
  > </a
  ><a name="13256" href="Session.html#13117" class="Bound"
  >&#916;</a
  ><a name="13257"
  > </a
  ><a name="13258" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13259"
  > </a
  ><a name="13260" href="Session.html#13115" class="Bound"
  >&#915;</a
  ><a name="13261"
  > </a
  ><a name="13262" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="13263"
  > </a
  ><a name="13264" href="Session.html#13196" class="Bound"
  >&#964;</a
  ><a name="13265"
  ></pre>
<p>To add corecursion, we must first define what we consider a <em>guarded</em> (hence, hopefully, <em>productive</em>) session.</p>
<pre></a
  ><a name="13404" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13411"
  > </a
  ><a name="13412" class="Symbol"
  >:</a
  ><a name="13413"
  > </a
  ><a name="13414" class="Symbol"
  >&#8704;</a
  ><a name="13415"
  > </a
  ><a name="13416" class="Symbol"
  >{</a
  ><a name="13417" href="Session.html#13417" class="Bound"
  >I</a
  ><a name="13418"
  > </a
  ><a name="13419" href="Session.html#13419" class="Bound"
  >O</a
  ><a name="13420" class="Symbol"
  >}</a
  ><a name="13421"
  > </a
  ><a name="13422" class="Symbol"
  >&#8594;</a
  ><a name="13423"
  > </a
  ><a name="13424" href="Session.html#13417" class="Bound"
  >I</a
  ><a name="13425"
  > </a
  ><a name="13426" href="Session.html#3756" class="Datatype Operator"
  >&#9657;</a
  ><a name="13427"
  > </a
  ><a name="13428" href="Session.html#13419" class="Bound"
  >O</a
  ><a name="13429"
  > </a
  ><a name="13430" class="Symbol"
  >&#8594;</a
  ><a name="13431"
  > </a
  ><a name="13432" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="13436"
  >
</a
  ><a name="13437" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13444"
  > </a
  ><a name="13445" class="Symbol"
  >(</a
  ><a name="13446" href="Session.html#3835" class="InductiveConstructor"
  >`I</a
  ><a name="13448"
  > </a
  ><a name="13449" href="Session.html#13449" class="Bound"
  >i</a
  ><a name="13450"
  >    </a
  ><a name="13454" class="Symbol"
  >)</a
  ><a name="13455"
  > </a
  ><a name="13456" class="Symbol"
  >=</a
  ><a name="13457"
  > </a
  ><a name="13458" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="13459"
  >
</a
  ><a name="13460" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13467"
  > </a
  ><a name="13468" class="Symbol"
  >(</a
  ><a name="13469" href="Session.html#3940" class="InductiveConstructor"
  >`&#931;</a
  ><a name="13471"
  > </a
  ><a name="13472" href="Session.html#13472" class="Bound"
  >S</a
  ><a name="13473"
  > </a
  ><a name="13474" href="Session.html#13474" class="Bound"
  >T</a
  ><a name="13475"
  >  </a
  ><a name="13477" class="Symbol"
  >)</a
  ><a name="13478"
  > </a
  ><a name="13479" class="Symbol"
  >=</a
  ><a name="13480"
  > </a
  ><a name="13481" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13482"
  >
</a
  ><a name="13483" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13490"
  > </a
  ><a name="13491" class="Symbol"
  >(</a
  ><a name="13492" href="Session.html#3943" class="InductiveConstructor"
  >`&#928;</a
  ><a name="13494"
  > </a
  ><a name="13495" href="Session.html#13495" class="Bound"
  >S</a
  ><a name="13496"
  > </a
  ><a name="13497" href="Session.html#13497" class="Bound"
  >T</a
  ><a name="13498"
  >  </a
  ><a name="13500" class="Symbol"
  >)</a
  ><a name="13501"
  > </a
  ><a name="13502" class="Symbol"
  >=</a
  ><a name="13503"
  > </a
  ><a name="13504" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13505"
  >
</a
  ><a name="13506" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13513"
  > </a
  ><a name="13514" class="Symbol"
  >(</a
  ><a name="13515" href="Session.html#4060" class="InductiveConstructor"
  >`^</a
  ><a name="13517"
  > </a
  ><a name="13518" href="Session.html#13518" class="Bound"
  >T</a
  ><a name="13519"
  >    </a
  ><a name="13523" class="Symbol"
  >)</a
  ><a name="13524"
  > </a
  ><a name="13525" class="Symbol"
  >=</a
  ><a name="13526"
  > </a
  ><a name="13527" class="Symbol"
  >&#8704;</a
  ><a name="13528"
  > </a
  ><a name="13529" href="Session.html#13529" class="Bound"
  >s</a
  ><a name="13530"
  > </a
  ><a name="13531" class="Symbol"
  >&#8594;</a
  ><a name="13532"
  > </a
  ><a name="13533" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13540"
  > </a
  ><a name="13541" class="Symbol"
  >(</a
  ><a name="13542" href="Session.html#13518" class="Bound"
  >T</a
  ><a name="13543"
  > </a
  ><a name="13544" href="Session.html#13529" class="Bound"
  >s</a
  ><a name="13545" class="Symbol"
  >)</a
  ><a name="13546"
  >
</a
  ><a name="13547" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13554"
  > </a
  ><a name="13555" class="Symbol"
  >(</a
  ><a name="13556" href="Session.html#8632" class="InductiveConstructor Operator"
  >%3</a
  ><a name="13558"
  > </a
  ><a name="13559" href="Session.html#13559" class="Bound"
  >L</a
  ><a name="13560"
  > </a
  ><a name="13561" href="Session.html#4169" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="13562"
  > </a
  ><a name="13563" href="Session.html#13563" class="Bound"
  >R</a
  ><a name="13564" class="Symbol"
  >)</a
  ><a name="13565"
  > </a
  ><a name="13566" class="Symbol"
  >=</a
  ><a name="13567"
  > </a
  ><a name="13568" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13575"
  > </a
  ><a name="13576" href="Session.html#13563" class="Bound"
  >R</a
  ><a name="13577"
  >
</a
  ><a name="13578" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13585"
  > </a
  ><a name="13586" class="Symbol"
  >(</a
  ><a name="13587" href="Session.html#8632" class="InductiveConstructor Operator"
  >%3</a
  ><a name="13589"
  > </a
  ><a name="13590" href="Session.html#13590" class="Bound"
  >L</a
  ><a name="13591"
  > </a
  ><a name="13592" href="Session.html#4173" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="13593"
  > </a
  ><a name="13594" href="Session.html#13594" class="Bound"
  >R</a
  ><a name="13595" class="Symbol"
  >)</a
  ><a name="13596"
  > </a
  ><a name="13597" class="Symbol"
  >=</a
  ><a name="13598"
  > </a
  ><a name="13599" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13606"
  > </a
  ><a name="13607" href="Session.html#13594" class="Bound"
  >R</a
  ><a name="13608"
  >
</a
  ><a name="13609" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13616"
  > </a
  ><a name="13617" class="Symbol"
  >(</a
  ><a name="13618" href="Session.html#4267" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="13619"
  > </a
  ><a name="13620" href="Session.html#13620" class="Bound"
  >F</a
  ><a name="13621"
  >     </a
  ><a name="13626" class="Symbol"
  >)</a
  ><a name="13627"
  > </a
  ><a name="13628" class="Symbol"
  >=</a
  ><a name="13629"
  > </a
  ><a name="13630" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="13631"
  >
</a
  ><a name="13632" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13639"
  > </a
  ><a name="13640" class="Symbol"
  >(</a
  ><a name="13641" href="Session.html#4270" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="13642"
  > </a
  ><a name="13643" href="Session.html#13643" class="Bound"
  >F</a
  ><a name="13644"
  >     </a
  ><a name="13649" class="Symbol"
  >)</a
  ><a name="13650"
  > </a
  ><a name="13651" class="Symbol"
  >=</a
  ><a name="13652"
  > </a
  ><a name="13653" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="13654"
  >
</a
  ><a name="13655" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13662"
  > </a
  ><a name="13663" class="Symbol"
  >(</a
  ><a name="13664" href="Session.html#4357" class="InductiveConstructor"
  >`&#957;</a
  ><a name="13666"
  > </a
  ><a name="13667" href="Session.html#13667" class="Bound"
  >F</a
  ><a name="13668"
  > </a
  ><a name="13669" class="Symbol"
  >_</a
  ><a name="13670"
  >  </a
  ><a name="13672" class="Symbol"
  >)</a
  ><a name="13673"
  > </a
  ><a name="13674" class="Symbol"
  >=</a
  ><a name="13675"
  > </a
  ><a name="13676" class="Symbol"
  >&#8704;</a
  ><a name="13677"
  > </a
  ><a name="13678" href="Session.html#13678" class="Bound"
  >o</a
  ><a name="13679"
  > </a
  ><a name="13680" class="Symbol"
  >&#8594;</a
  ><a name="13681"
  > </a
  ><a name="13682" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="13689"
  > </a
  ><a name="13690" class="Symbol"
  >(</a
  ><a name="13691" href="Session.html#13667" class="Bound"
  >F</a
  ><a name="13692"
  > </a
  ><a name="13693" href="Session.html#13678" class="Bound"
  >o</a
  ><a name="13694" class="Symbol"
  >)</a
  ><a name="13695"
  ></pre>
<p>To provide syntax to productive nested loops that run for a possibly infinite amount of time, we use the following definition:</p>
<pre></a
  ><a name="13849" href="Session.html#13849" class="Function"
  >CoRec</a
  ><a name="13854"
  > </a
  ><a name="13855" class="Symbol"
  >:</a
  ><a name="13856"
  > </a
  ><a name="13857" class="Symbol"
  >(</a
  ><a name="13858" class="PrimitiveType"
  >Set</a
  ><a name="13861"
  > </a
  ><a name="13862" class="Symbol"
  >&#8594;</a
  ><a name="13863"
  > </a
  ><a name="13864" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="13866" class="Symbol"
  >)</a
  ><a name="13867"
  > </a
  ><a name="13868" class="Symbol"
  >&#8594;</a
  ><a name="13869"
  > </a
  ><a name="13870" class="PrimitiveType"
  >Set</a
  ><a name="13873"
  > </a
  ><a name="13874" class="Symbol"
  >&#8594;</a
  ><a name="13875"
  > </a
  ><a name="13876" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="13878"
  >
</a
  ><a name="13879" href="Session.html#13849" class="Function"
  >CoRec</a
  ><a name="13884"
  > </a
  ><a name="13885" href="Session.html#13885" class="Bound"
  >F</a
  ><a name="13886"
  > </a
  ><a name="13887" href="Session.html#13887" class="Bound"
  >X</a
  ><a name="13888"
  > </a
  ><a name="13889" href="Session.html#13889" class="Bound"
  >&#915;</a
  ><a name="13890"
  > </a
  ><a name="13891" href="Session.html#13891" class="Bound"
  >&#916;</a
  ><a name="13892"
  > </a
  ><a name="13893" class="Symbol"
  >=</a
  ><a name="13894"
  > </a
  ><a name="13895" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13896"
  > </a
  ><a name="13897" class="Symbol"
  >(</a
  ><a name="13898" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="13902"
  > </a
  ><a name="13903" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13904"
  > </a
  ><a name="13905" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13906"
  > </a
  ><a name="13907" class="Symbol"
  >_</a
  ><a name="13908"
  > </a
  ><a name="13909" class="Symbol"
  >&#955;</a
  ><a name="13910"
  > </a
  ><a name="13911" href="Session.html#13911" class="Bound"
  >I</a
  ><a name="13912"
  > </a
  ><a name="13913" class="Symbol"
  >&#8594;</a
  ><a name="13914"
  > </a
  ><a name="13915" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13916"
  > </a
  ><a name="13917" class="Symbol"
  >_</a
  ><a name="13918"
  > </a
  ><a name="13919" class="Symbol"
  >&#955;</a
  ><a name="13920"
  > </a
  ><a name="13921" href="Session.html#13921" class="Bound"
  >O</a
  ><a name="13922"
  > </a
  ><a name="13923" class="Symbol"
  >&#8594;</a
  ><a name="13924"
  > </a
  ><a name="13925" class="Symbol"
  >(</a
  ><a name="13926" href="Session.html#13921" class="Bound"
  >O</a
  ><a name="13927"
  > </a
  ><a name="13928" class="Symbol"
  >&#8594;</a
  ><a name="13929"
  > </a
  ><a name="13930" href="Session.html#3667" class="Function"
  >De</a
  ><a name="13932"
  > </a
  ><a name="13933" class="Symbol"
  >(</a
  ><a name="13934" href="Session.html#13911" class="Bound"
  >I</a
  ><a name="13935"
  > </a
  ><a name="13936" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="13937"
  > </a
  ><a name="13938" href="Session.html#13921" class="Bound"
  >O</a
  ><a name="13939" class="Symbol"
  >))</a
  ><a name="13941"
  > </a
  ><a name="13942" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13943"
  > </a
  ><a name="13944" href="Session.html#13921" class="Bound"
  >O</a
  ><a name="13945" class="Symbol"
  >)</a
  ><a name="13946"
  > </a
  ><a name="13947" class="Symbol"
  >&#955;</a
  ><a name="13948"
  > </a
  ><a name="13949" href="Session.html#13949" class="Bound"
  >W</a
  ><a name="13950"
  > </a
  ><a name="13951" class="Symbol"
  >&#8594;</a
  ><a name="13952"
  >
                </a
  ><a name="13969" class="Keyword"
  >let</a
  ><a name="13972"
  > </a
  ><a name="13973" href="Session.html#13973" class="Bound"
  >s</a
  ><a name="13974"
  > </a
  ><a name="13975" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13976"
  > </a
  ><a name="13977" href="Session.html#13977" class="Bound"
  >I</a
  ><a name="13978"
  > </a
  ><a name="13979" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13980"
  > </a
  ><a name="13981" href="Session.html#13981" class="Bound"
  >O</a
  ><a name="13982"
  > </a
  ><a name="13983" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13984"
  > </a
  ><a name="13985" href="Session.html#13985" class="Bound"
  >T</a
  ><a name="13986"
  > </a
  ><a name="13987" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13988"
  > </a
  ><a name="13989" href="Session.html#13989" class="Bound"
  >o</a
  ><a name="13990"
  > </a
  ><a name="13991" class="Symbol"
  >=</a
  ><a name="13992"
  > </a
  ><a name="13993" href="Session.html#13949" class="Bound"
  >W</a
  ><a name="13994"
  > </a
  ><a name="13995" class="Keyword"
  >in</a
  ><a name="13997"
  > 
                </a
  ><a name="14015" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14016"
  > </a
  ><a name="14017" class="Symbol"
  >((</a
  ><a name="14019" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="14020"
  > </a
  ><a name="14021" href="Session.html#13973" class="Bound"
  >s</a
  ><a name="14022"
  > </a
  ><a name="14023" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14024"
  > </a
  ><a name="14025" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="14027"
  > </a
  ><a name="14028" href="Session.html#4357" class="InductiveConstructor"
  >`&#957;</a
  ><a name="14030"
  > </a
  ><a name="14031" href="Session.html#13985" class="Bound"
  >T</a
  ><a name="14032"
  > </a
  ><a name="14033" href="Session.html#13989" class="Bound"
  >o</a
  ><a name="14034" class="Symbol"
  >)</a
  ><a name="14035"
  > </a
  ><a name="14036" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="14037"
  > </a
  ><a name="14038" href="Session.html#13889" class="Bound"
  >&#915;</a
  ><a name="14039" class="Symbol"
  >)</a
  ><a name="14040"
  > </a
  ><a name="14041" class="Symbol"
  >&#955;</a
  ><a name="14042"
  > </a
  ><a name="14043" href="Session.html#14043" class="Bound"
  >i</a
  ><a name="14044"
  > </a
  ><a name="14045" class="Symbol"
  >&#8594;</a
  ><a name="14046"
  >
                  </a
  ><a name="14065" class="Symbol"
  >((</a
  ><a name="14067" href="Session.html#14067" class="Bound"
  >o</a
  ><a name="14068"
  > </a
  ><a name="14069" class="Symbol"
  >:</a
  ><a name="14070"
  > </a
  ><a name="14071" href="Session.html#13981" class="Bound"
  >O</a
  ><a name="14072" class="Symbol"
  >)</a
  ><a name="14073"
  > </a
  ><a name="14074" class="Symbol"
  >&#8594;</a
  ><a name="14075"
  >   </a
  ><a name="14078" href="Session.html#13404" class="Function"
  >Guarded</a
  ><a name="14085"
  > </a
  ><a name="14086" class="Symbol"
  >(</a
  ><a name="14087" href="Session.html#13985" class="Bound"
  >T</a
  ><a name="14088"
  > </a
  ><a name="14089" href="Session.html#14067" class="Bound"
  >o</a
  ><a name="14090" class="Symbol"
  >)</a
  ><a name="14091"
  >
                             </a
  ><a name="14121" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14122"
  > </a
  ><a name="14123" href="Session.html#13885" class="Bound"
  >F</a
  ><a name="14124"
  > </a
  ><a name="14125" class="Symbol"
  >(</a
  ><a name="14126" href="Session.html#13887" class="Bound"
  >X</a
  ><a name="14127"
  > </a
  ><a name="14128" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="14129"
  > </a
  ><a name="14130" href="Session.html#13981" class="Bound"
  >O</a
  ><a name="14131" class="Symbol"
  >)</a
  ><a name="14132"
  > </a
  ><a name="14133" class="Symbol"
  >(</a
  ><a name="14134" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="14136"
  > </a
  ><a name="14137" class="Symbol"
  >(</a
  ><a name="14138" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="14139"
  > </a
  ><a name="14140" href="Session.html#13973" class="Bound"
  >s</a
  ><a name="14141"
  > </a
  ><a name="14142" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14143"
  > </a
  ><a name="14144" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="14146"
  > </a
  ><a name="14147" href="Session.html#13985" class="Bound"
  >T</a
  ><a name="14148"
  > </a
  ><a name="14149" href="Session.html#14067" class="Bound"
  >o</a
  ><a name="14150" class="Symbol"
  >)</a
  ><a name="14151"
  > </a
  ><a name="14152" href="Session.html#14043" class="Bound"
  >i</a
  ><a name="14153" class="Symbol"
  >)</a
  ><a name="14154"
  > </a
  ><a name="14155" href="Session.html#13891" class="Bound"
  >&#916;</a
  ><a name="14156" class="Symbol"
  >)</a
  ><a name="14157"
  >
                </a
  ><a name="14174" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14175"
  > </a
  ><a name="14176" href="Session.html#13891" class="Bound"
  >&#916;</a
  ><a name="14177"
  > </a
  ><a name="14178" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="14179"
  > </a
  ><a name="14180" href="Session.Base.html#3041" class="Function"
  >rm</a
  ><a name="14182"
  > </a
  ><a name="14183" href="Session.html#14043" class="Bound"
  >i</a
  ><a name="14184"
  ></pre>
<h3 id="tags">Tags</h3>
<p>We adopt a &quot;tagful&quot; syntax, where nodes of the syntax tree are made of dependent pairs whose first component is of type <code>Tag</code>.</p>
<pre></a
  ><a name="14348" class="Keyword"
  >module</a
  ><a name="14354"
  > </a
  ><a name="14355" href="Session.html#14355" class="Module"
  >T</a
  ><a name="14356"
  > </a
  ><a name="14357" class="Keyword"
  >where</a
  ><a name="14362"
  >

  </a
  ><a name="14366" class="Keyword"
  >data</a
  ><a name="14370"
  > </a
  ><a name="14371" href="Session.html#14371" class="Datatype"
  >Tag</a
  ><a name="14374"
  > </a
  ><a name="14375" class="Symbol"
  >:</a
  ><a name="14376"
  > </a
  ><a name="14377" class="PrimitiveType"
  >Set</a
  ><a name="14380"
  > </a
  ><a name="14381" class="Keyword"
  >where</a
  ><a name="14386"
  >
    </a
  ><a name="14391" href="Session.html#14391" class="InductiveConstructor"
  >new</a
  ><a name="14394"
  > </a
  ><a name="14395" href="Session.html#14395" class="InductiveConstructor"
  >fork</a
  ><a name="14399"
  >       </a
  ><a name="14406" class="Symbol"
  >:</a
  ><a name="14407"
  > </a
  ><a name="14408" href="Session.html#14371" class="Datatype"
  >Tag</a
  ><a name="14411"
  >
    </a
  ><a name="14416" href="Session.html#14416" class="InductiveConstructor"
  >send</a
  ><a name="14420"
  > </a
  ><a name="14421" href="Session.html#14421" class="InductiveConstructor"
  >recv</a
  ><a name="14425"
  >      </a
  ><a name="14431" class="Symbol"
  >:</a
  ><a name="14432"
  > </a
  ><a name="14433" href="Session.html#14371" class="Datatype"
  >Tag</a
  ><a name="14436"
  >
    </a
  ><a name="14441" href="Session.html#14441" class="InductiveConstructor"
  >!!</a
  ><a name="14443"
  > </a
  ><a name="14444" href="Session.html#14444" class="InductiveConstructor"
  >??</a
  ><a name="14446"
  > </a
  ><a name="14447" href="Session.html#14447" class="InductiveConstructor"
  >wk</a
  ><a name="14449"
  > </a
  ><a name="14450" href="Session.html#14450" class="InductiveConstructor"
  >ctr</a
  ><a name="14453"
  >   </a
  ><a name="14456" class="Symbol"
  >:</a
  ><a name="14457"
  > </a
  ><a name="14458" href="Session.html#14371" class="Datatype"
  >Tag</a
  ><a name="14461"
  >
    </a
  ><a name="14466" href="Session.html#14466" class="InductiveConstructor"
  >corec</a
  ><a name="14471"
  >          </a
  ><a name="14481" class="Symbol"
  >:</a
  ><a name="14482"
  > </a
  ><a name="14483" href="Session.html#14371" class="Datatype"
  >Tag</a
  ><a name="14486"
  >
    </a
  ><a name="14491" href="Session.html#14491" class="InductiveConstructor"
  >write</a
  ><a name="14496"
  > </a
  ><a name="14497" href="Session.html#14497" class="InductiveConstructor"
  >read</a
  ><a name="14501"
  >     </a
  ><a name="14506" class="Symbol"
  >:</a
  ><a name="14507"
  > </a
  ><a name="14508" href="Session.html#14371" class="Datatype"
  >Tag</a
  ><a name="14511"
  >
    </a
  ><a name="14516" href="Session.html#14516" class="InductiveConstructor"
  >at</a
  ><a name="14518"
  >             </a
  ><a name="14531" class="Symbol"
  >:</a
  ><a name="14532"
  > </a
  ><a name="14533" href="Session.html#14371" class="Datatype"
  >Tag</a
  ><a name="14536"
  >
    </a
  ><a name="14541" href="Session.html#14541" class="InductiveConstructor"
  >end</a
  ><a name="14544"
  >            </a
  ><a name="14556" class="Symbol"
  >:</a
  ><a name="14557"
  > </a
  ><a name="14558" href="Session.html#14371" class="Datatype"
  >Tag</a
  ><a name="14561"
  >

</a
  ><a name="14563" class="Keyword"
  >open</a
  ><a name="14567"
  > </a
  ><a name="14568" href="Session.html#14355" class="Module"
  >T</a
  ><a name="14569"
  > </a
  ><a name="14570" class="Keyword"
  >using</a
  ><a name="14575"
  > </a
  ><a name="14576" class="Symbol"
  >(</a
  ><a name="14577"
  >Tag</a
  ><a name="14580" class="Symbol"
  >)</a
  ><a name="14581"
  ></pre>
<h3 id="the-tagged-family-of-functors">The tagged family of functors</h3>
<p>The type of the second component is given by the following family, which groups all the above functors.</p>
<pre></a
  ><a name="14747" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="14748"
  > </a
  ><a name="14749" class="Symbol"
  >:</a
  ><a name="14750"
  > </a
  ><a name="14751" href="Session.html#14371" class="Datatype"
  >Tag</a
  ><a name="14754"
  > </a
  ><a name="14755" class="Symbol"
  >&#8594;</a
  ><a name="14756"
  > </a
  ><a name="14757" class="Symbol"
  >(</a
  ><a name="14758" class="PrimitiveType"
  >Set</a
  ><a name="14761"
  > </a
  ><a name="14762" class="Symbol"
  >&#8594;</a
  ><a name="14763"
  > </a
  ><a name="14764" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="14766" class="Symbol"
  >)</a
  ><a name="14767"
  > </a
  ><a name="14768" class="Symbol"
  >&#8594;</a
  ><a name="14769"
  > </a
  ><a name="14770" class="PrimitiveType"
  >Set</a
  ><a name="14773"
  > </a
  ><a name="14774" class="Symbol"
  >&#8594;</a
  ><a name="14775"
  > </a
  ><a name="14776" href="Session.html#9392" class="Function"
  >Ty</a
  ><a name="14778"
  >
</a
  ><a name="14779" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="14780"
  > </a
  ><a name="14781" href="Session.html#14391" class="InductiveConstructor"
  >T.new</a
  ><a name="14786"
  >   </a
  ><a name="14789" href="Session.html#14789" class="Bound"
  >T</a
  ><a name="14790"
  > </a
  ><a name="14791" href="Session.html#14791" class="Bound"
  >X</a
  ><a name="14792"
  > </a
  ><a name="14793" href="Session.html#14793" class="Bound"
  >&#915;</a
  ><a name="14794"
  > </a
  ><a name="14795" href="Session.html#14795" class="Bound"
  >&#916;</a
  ><a name="14796"
  > </a
  ><a name="14797" class="Symbol"
  >=</a
  ><a name="14798"
  > </a
  ><a name="14799" href="Session.html#9625" class="Function"
  >New</a
  ><a name="14802"
  >          </a
  ><a name="14812" href="Session.html#14793" class="Bound"
  >&#915;</a
  ><a name="14813"
  > </a
  ><a name="14814" href="Session.html#14795" class="Bound"
  >&#916;</a
  ><a name="14815"
  >                 </a
  ><a name="14832" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14833"
  > </a
  ><a name="14834" href="Session.html#14791" class="Bound"
  >X</a
  ><a name="14835"
  > </a
  ><a name="14836" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="14837"
  > </a
  ><a name="14838" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="14839"
  >
</a
  ><a name="14840" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="14841"
  > </a
  ><a name="14842" href="Session.html#14395" class="InductiveConstructor"
  >T.fork</a
  ><a name="14848"
  >  </a
  ><a name="14850" href="Session.html#14850" class="Bound"
  >T</a
  ><a name="14851"
  > </a
  ><a name="14852" href="Session.html#14852" class="Bound"
  >X</a
  ><a name="14853"
  > </a
  ><a name="14854" href="Session.html#14854" class="Bound"
  >&#915;</a
  ><a name="14855"
  > </a
  ><a name="14856" href="Session.html#14856" class="Bound"
  >&#916;</a
  ><a name="14857"
  > </a
  ><a name="14858" class="Symbol"
  >=</a
  ><a name="14859"
  > </a
  ><a name="14860" href="Session.html#11875" class="Function"
  >Fork</a
  ><a name="14864"
  >   </a
  ><a name="14867" class="Symbol"
  >(</a
  ><a name="14868" href="Session.html#14850" class="Bound"
  >T</a
  ><a name="14869"
  > </a
  ><a name="14870" href="Session.html#14852" class="Bound"
  >X</a
  ><a name="14871" class="Symbol"
  >)</a
  ><a name="14872"
  > </a
  ><a name="14873" href="Session.html#14854" class="Bound"
  >&#915;</a
  ><a name="14874"
  > </a
  ><a name="14875" href="Session.html#14856" class="Bound"
  >&#916;</a
  ><a name="14876"
  >                 </a
  ><a name="14893" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14894"
  > </a
  ><a name="14895" href="Session.html#14852" class="Bound"
  >X</a
  ><a name="14896"
  > </a
  ><a name="14897" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="14898"
  > </a
  ><a name="14899" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="14900"
  >
</a
  ><a name="14901" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="14902"
  > </a
  ><a name="14903" href="Session.html#14416" class="InductiveConstructor"
  >T.send</a
  ><a name="14909"
  >  </a
  ><a name="14911" href="Session.html#14911" class="Bound"
  >T</a
  ><a name="14912"
  > </a
  ><a name="14913" href="Session.html#14913" class="Bound"
  >X</a
  ><a name="14914"
  > </a
  ><a name="14915" href="Session.html#14915" class="Bound"
  >&#915;</a
  ><a name="14916"
  > </a
  ><a name="14917" href="Session.html#14917" class="Bound"
  >&#916;</a
  ><a name="14918"
  > </a
  ><a name="14919" class="Symbol"
  >=</a
  ><a name="14920"
  > </a
  ><a name="14921" href="Session.html#9912" class="Function"
  >Send</a
  ><a name="14925"
  >         </a
  ><a name="14934" href="Session.html#14915" class="Bound"
  >&#915;</a
  ><a name="14935"
  > </a
  ><a name="14936" href="Session.html#14917" class="Bound"
  >&#916;</a
  ><a name="14937"
  >                 </a
  ><a name="14954" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14955"
  > </a
  ><a name="14956" href="Session.html#14913" class="Bound"
  >X</a
  ><a name="14957"
  > </a
  ><a name="14958" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="14959"
  > </a
  ><a name="14960" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="14961"
  >
</a
  ><a name="14962" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="14963"
  > </a
  ><a name="14964" href="Session.html#14421" class="InductiveConstructor"
  >T.recv</a
  ><a name="14970"
  >  </a
  ><a name="14972" href="Session.html#14972" class="Bound"
  >T</a
  ><a name="14973"
  > </a
  ><a name="14974" href="Session.html#14974" class="Bound"
  >X</a
  ><a name="14975"
  > </a
  ><a name="14976" href="Session.html#14976" class="Bound"
  >&#915;</a
  ><a name="14977"
  > </a
  ><a name="14978" href="Session.html#14978" class="Bound"
  >&#916;</a
  ><a name="14979"
  > </a
  ><a name="14980" class="Symbol"
  >=</a
  ><a name="14981"
  > </a
  ><a name="14982" href="Session.html#9917" class="Function"
  >Receive</a
  ><a name="14989"
  >      </a
  ><a name="14995" href="Session.html#14976" class="Bound"
  >&#915;</a
  ><a name="14996"
  > </a
  ><a name="14997" href="Session.html#14978" class="Bound"
  >&#916;</a
  ><a name="14998"
  >                 </a
  ><a name="15015" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="15016"
  > </a
  ><a name="15017" href="Session.html#14974" class="Bound"
  >X</a
  ><a name="15018"
  > </a
  ><a name="15019" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15020"
  > </a
  ><a name="15021" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15022"
  >
</a
  ><a name="15023" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="15024"
  > </a
  ><a name="15025" href="Session.html#14441" class="InductiveConstructor"
  >T.!!</a
  ><a name="15029"
  >    </a
  ><a name="15033" href="Session.html#15033" class="Bound"
  >T</a
  ><a name="15034"
  > </a
  ><a name="15035" href="Session.html#15035" class="Bound"
  >X</a
  ><a name="15036"
  > </a
  ><a name="15037" href="Session.html#15037" class="Bound"
  >&#915;</a
  ><a name="15038"
  > </a
  ><a name="15039" href="Session.html#15039" class="Bound"
  >&#916;</a
  ><a name="15040"
  > </a
  ><a name="15041" class="Symbol"
  >=</a
  ><a name="15042"
  > </a
  ><a name="15043" href="Session.html#12188" class="Function"
  >Server</a
  ><a name="15049"
  > </a
  ><a name="15050" class="Symbol"
  >(</a
  ><a name="15051" href="Session.html#15033" class="Bound"
  >T</a
  ><a name="15052"
  > </a
  ><a name="15053" href="Session.html#15035" class="Bound"
  >X</a
  ><a name="15054" class="Symbol"
  >)</a
  ><a name="15055"
  > </a
  ><a name="15056" href="Session.html#15037" class="Bound"
  >&#915;</a
  ><a name="15057"
  > </a
  ><a name="15058" href="Session.html#15039" class="Bound"
  >&#916;</a
  ><a name="15059"
  >                 </a
  ><a name="15076" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="15077"
  > </a
  ><a name="15078" href="Session.html#15035" class="Bound"
  >X</a
  ><a name="15079"
  > </a
  ><a name="15080" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15081"
  > </a
  ><a name="15082" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15083"
  >
</a
  ><a name="15084" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="15085"
  > </a
  ><a name="15086" href="Session.html#14444" class="InductiveConstructor"
  >T.??</a
  ><a name="15090"
  >    </a
  ><a name="15094" href="Session.html#15094" class="Bound"
  >T</a
  ><a name="15095"
  > </a
  ><a name="15096" href="Session.html#15096" class="Bound"
  >X</a
  ><a name="15097"
  > </a
  ><a name="15098" href="Session.html#15098" class="Bound"
  >&#915;</a
  ><a name="15099"
  > </a
  ><a name="15100" href="Session.html#15100" class="Bound"
  >&#916;</a
  ><a name="15101"
  > </a
  ><a name="15102" class="Symbol"
  >=</a
  ><a name="15103"
  > </a
  ><a name="15104" href="Session.html#12642" class="Function"
  >Client</a
  ><a name="15110"
  >  </a
  ><a name="15112" href="Session.html#15094" class="Bound"
  >T</a
  ><a name="15113"
  > </a
  ><a name="15114" href="Session.html#15096" class="Bound"
  >X</a
  ><a name="15115"
  >  </a
  ><a name="15117" href="Session.html#15098" class="Bound"
  >&#915;</a
  ><a name="15118"
  > </a
  ><a name="15119" href="Session.html#15100" class="Bound"
  >&#916;</a
  ><a name="15120"
  >
</a
  ><a name="15121" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="15122"
  > </a
  ><a name="15123" href="Session.html#14447" class="InductiveConstructor"
  >T.wk</a
  ><a name="15127"
  >    </a
  ><a name="15131" href="Session.html#15131" class="Bound"
  >T</a
  ><a name="15132"
  > </a
  ><a name="15133" href="Session.html#15133" class="Bound"
  >X</a
  ><a name="15134"
  > </a
  ><a name="15135" href="Session.html#15135" class="Bound"
  >&#915;</a
  ><a name="15136"
  > </a
  ><a name="15137" href="Session.html#15137" class="Bound"
  >&#916;</a
  ><a name="15138"
  > </a
  ><a name="15139" class="Symbol"
  >=</a
  ><a name="15140"
  > </a
  ><a name="15141" href="Session.html#12964" class="Function"
  >Wk</a
  ><a name="15143"
  >           </a
  ><a name="15154" href="Session.html#15135" class="Bound"
  >&#915;</a
  ><a name="15155"
  > </a
  ><a name="15156" href="Session.html#15137" class="Bound"
  >&#916;</a
  ><a name="15157"
  >                 </a
  ><a name="15174" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="15175"
  > </a
  ><a name="15176" href="Session.html#15133" class="Bound"
  >X</a
  ><a name="15177"
  > </a
  ><a name="15178" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15179"
  > </a
  ><a name="15180" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15181"
  >
</a
  ><a name="15182" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="15183"
  > </a
  ><a name="15184" href="Session.html#14450" class="InductiveConstructor"
  >T.ctr</a
  ><a name="15189"
  >   </a
  ><a name="15192" href="Session.html#15192" class="Bound"
  >T</a
  ><a name="15193"
  > </a
  ><a name="15194" href="Session.html#15194" class="Bound"
  >X</a
  ><a name="15195"
  > </a
  ><a name="15196" href="Session.html#15196" class="Bound"
  >&#915;</a
  ><a name="15197"
  > </a
  ><a name="15198" href="Session.html#15198" class="Bound"
  >&#916;</a
  ><a name="15199"
  > </a
  ><a name="15200" class="Symbol"
  >=</a
  ><a name="15201"
  > </a
  ><a name="15202" href="Session.html#12967" class="Function"
  >Ctr</a
  ><a name="15205"
  >          </a
  ><a name="15215" href="Session.html#15196" class="Bound"
  >&#915;</a
  ><a name="15216"
  > </a
  ><a name="15217" href="Session.html#15198" class="Bound"
  >&#916;</a
  ><a name="15218"
  >                 </a
  ><a name="15235" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="15236"
  > </a
  ><a name="15237" href="Session.html#15194" class="Bound"
  >X</a
  ><a name="15238"
  > </a
  ><a name="15239" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15240"
  > </a
  ><a name="15241" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15242"
  >
</a
  ><a name="15243" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="15244"
  > </a
  ><a name="15245" href="Session.html#14466" class="InductiveConstructor"
  >T.corec</a
  ><a name="15252"
  > </a
  ><a name="15253" href="Session.html#15253" class="Bound"
  >T</a
  ><a name="15254"
  > </a
  ><a name="15255" href="Session.html#15255" class="Bound"
  >X</a
  ><a name="15256"
  > </a
  ><a name="15257" href="Session.html#15257" class="Bound"
  >&#915;</a
  ><a name="15258"
  > </a
  ><a name="15259" href="Session.html#15259" class="Bound"
  >&#916;</a
  ><a name="15260"
  > </a
  ><a name="15261" class="Symbol"
  >=</a
  ><a name="15262"
  > </a
  ><a name="15263" href="Session.html#13849" class="Function"
  >CoRec</a
  ><a name="15268"
  >   </a
  ><a name="15271" href="Session.html#15253" class="Bound"
  >T</a
  ><a name="15272"
  > </a
  ><a name="15273" href="Session.html#15255" class="Bound"
  >X</a
  ><a name="15274"
  >  </a
  ><a name="15276" href="Session.html#15257" class="Bound"
  >&#915;</a
  ><a name="15277"
  > </a
  ><a name="15278" href="Session.html#15259" class="Bound"
  >&#916;</a
  ><a name="15279"
  >
</a
  ><a name="15280" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="15281"
  > </a
  ><a name="15282" href="Session.html#14491" class="InductiveConstructor"
  >T.write</a
  ><a name="15289"
  > </a
  ><a name="15290" href="Session.html#15290" class="Bound"
  >T</a
  ><a name="15291"
  > </a
  ><a name="15292" href="Session.html#15292" class="Bound"
  >X</a
  ><a name="15293"
  > </a
  ><a name="15294" href="Session.html#15294" class="Bound"
  >&#915;</a
  ><a name="15295"
  > </a
  ><a name="15296" href="Session.html#15296" class="Bound"
  >&#916;</a
  ><a name="15297"
  > </a
  ><a name="15298" class="Symbol"
  >=</a
  ><a name="15299"
  > </a
  ><a name="15300" href="Session.html#10465" class="Function"
  >Write</a
  ><a name="15305"
  >        </a
  ><a name="15313" href="Session.html#15294" class="Bound"
  >&#915;</a
  ><a name="15314"
  > </a
  ><a name="15315" href="Session.html#15296" class="Bound"
  >&#916;</a
  ><a name="15316"
  >                 </a
  ><a name="15333" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="15334"
  > </a
  ><a name="15335" href="Session.html#15292" class="Bound"
  >X</a
  ><a name="15336"
  > </a
  ><a name="15337" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15338"
  > </a
  ><a name="15339" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15340"
  >
</a
  ><a name="15341" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="15342"
  > </a
  ><a name="15343" href="Session.html#14497" class="InductiveConstructor"
  >T.read</a
  ><a name="15349"
  >  </a
  ><a name="15351" href="Session.html#15351" class="Bound"
  >T</a
  ><a name="15352"
  > </a
  ><a name="15353" href="Session.html#15353" class="Bound"
  >X</a
  ><a name="15354"
  > </a
  ><a name="15355" href="Session.html#15355" class="Bound"
  >&#915;</a
  ><a name="15356"
  > </a
  ><a name="15357" href="Session.html#15357" class="Bound"
  >&#916;</a
  ><a name="15358"
  > </a
  ><a name="15359" class="Symbol"
  >=</a
  ><a name="15360"
  > </a
  ><a name="15361" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="15362"
  > </a
  ><a name="15363" class="Symbol"
  >(</a
  ><a name="15364" href="Session.html#10471" class="Function"
  >Read</a
  ><a name="15368"
  > </a
  ><a name="15369" href="Session.html#15355" class="Bound"
  >&#915;</a
  ><a name="15370"
  > </a
  ><a name="15371" href="Session.html#15357" class="Bound"
  >&#916;</a
  ><a name="15372" class="Symbol"
  >)</a
  ><a name="15373"
  > </a
  ><a name="15374" class="Symbol"
  >&#955;</a
  ><a name="15375"
  > </a
  ><a name="15376" href="Session.html#15376" class="Bound"
  >p</a
  ><a name="15377"
  > </a
  ><a name="15378" class="Symbol"
  >&#8594;</a
  ><a name="15379"
  >                          
                    </a
  ><a name="15426" class="Keyword"
  >let</a
  ><a name="15429"
  > </a
  ><a name="15430" class="Symbol"
  >((_</a
  ><a name="15433"
  > </a
  ><a name="15434" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15435"
  > </a
  ><a name="15436" href="Session.html#15436" class="Bound"
  >J</a
  ><a name="15437"
  > </a
  ><a name="15438" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15439"
  > </a
  ><a name="15440" class="Symbol"
  >_)</a
  ><a name="15442"
  > </a
  ><a name="15443" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15444"
  > </a
  ><a name="15445" class="Symbol"
  >_)</a
  ><a name="15447"
  > </a
  ><a name="15448" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15449"
  > </a
  ><a name="15450" class="Symbol"
  >_</a
  ><a name="15451"
  > </a
  ><a name="15452" class="Symbol"
  >=</a
  ><a name="15453"
  > </a
  ><a name="15454" href="Session.html#15376" class="Bound"
  >p</a
  ><a name="15455"
  > </a
  ><a name="15456" class="Keyword"
  >in</a
  ><a name="15458"
  >   </a
  ><a name="15461" href="Session.html#15353" class="Bound"
  >X</a
  ><a name="15462"
  > </a
  ><a name="15463" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15464"
  > </a
  ><a name="15465" href="Session.html#15436" class="Bound"
  >J</a
  ><a name="15466"
  >       
</a
  ><a name="15474" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="15475"
  > </a
  ><a name="15476" href="Session.html#14516" class="InductiveConstructor"
  >T.at</a
  ><a name="15480"
  >    </a
  ><a name="15484" href="Session.html#15484" class="Bound"
  >T</a
  ><a name="15485"
  > </a
  ><a name="15486" href="Session.html#15486" class="Bound"
  >X</a
  ><a name="15487"
  > </a
  ><a name="15488" href="Session.html#15488" class="Bound"
  >&#915;</a
  ><a name="15489"
  > </a
  ><a name="15490" href="Session.html#15490" class="Bound"
  >&#916;</a
  ><a name="15491"
  > </a
  ><a name="15492" class="Symbol"
  >=</a
  ><a name="15493"
  > </a
  ><a name="15494" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="15495"
  > </a
  ><a name="15496" class="Symbol"
  >(</a
  ><a name="15497" href="Session.html#11061" class="Function"
  >At</a
  ><a name="15499"
  > </a
  ><a name="15500" href="Session.html#15488" class="Bound"
  >&#915;</a
  ><a name="15501"
  > </a
  ><a name="15502" href="Session.html#15490" class="Bound"
  >&#916;</a
  ><a name="15503" class="Symbol"
  >)</a
  ><a name="15504"
  > </a
  ><a name="15505" class="Symbol"
  >&#955;</a
  ><a name="15506"
  > </a
  ><a name="15507" href="Session.html#15507" class="Bound"
  >p</a
  ><a name="15508"
  > </a
  ><a name="15509" class="Symbol"
  >&#8594;</a
  ><a name="15510"
  >
                    </a
  ><a name="15531" class="Keyword"
  >let</a
  ><a name="15534"
  > </a
  ><a name="15535" class="Symbol"
  >(_</a
  ><a name="15537"
  > </a
  ><a name="15538" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15539"
  > </a
  ><a name="15540" href="Session.html#15540" class="Bound"
  >O</a
  ><a name="15541"
  > </a
  ><a name="15542" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15543"
  > </a
  ><a name="15544" class="Symbol"
  >_)</a
  ><a name="15546"
  > </a
  ><a name="15547" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15548"
  > </a
  ><a name="15549" class="Symbol"
  >_</a
  ><a name="15550"
  > </a
  ><a name="15551" class="Symbol"
  >=</a
  ><a name="15552"
  > </a
  ><a name="15553" href="Session.html#15507" class="Bound"
  >p</a
  ><a name="15554"
  > </a
  ><a name="15555" class="Keyword"
  >in</a
  ><a name="15557"
  >         </a
  ><a name="15566" href="Session.html#15486" class="Bound"
  >X</a
  ><a name="15567"
  > </a
  ><a name="15568" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15569"
  > </a
  ><a name="15570" href="Session.html#15540" class="Bound"
  >O</a
  ><a name="15571"
  >
</a
  ><a name="15572" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="15573"
  > </a
  ><a name="15574" href="Session.html#14541" class="InductiveConstructor"
  >T.end</a
  ><a name="15579"
  >   </a
  ><a name="15582" href="Session.html#15582" class="Bound"
  >T</a
  ><a name="15583"
  > </a
  ><a name="15584" href="Session.html#15584" class="Bound"
  >X</a
  ><a name="15585"
  > </a
  ><a name="15586" href="Session.html#15586" class="Bound"
  >&#915;</a
  ><a name="15587"
  > </a
  ><a name="15588" href="Session.html#15588" class="Bound"
  >&#916;</a
  ><a name="15589"
  > </a
  ><a name="15590" class="Symbol"
  >=</a
  ><a name="15591"
  > </a
  ><a name="15592" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="15593"
  > </a
  ><a name="15594" class="Symbol"
  >(</a
  ><a name="15595" href="Session.html#11409" class="Function"
  >End</a
  ><a name="15598"
  >  </a
  ><a name="15600" href="Session.html#15586" class="Bound"
  >&#915;</a
  ><a name="15601"
  > </a
  ><a name="15602" href="Session.html#15588" class="Bound"
  >&#916;</a
  ><a name="15603" class="Symbol"
  >)</a
  ><a name="15604"
  > </a
  ><a name="15605" class="Symbol"
  >&#955;</a
  ><a name="15606"
  > </a
  ><a name="15607" href="Session.html#15607" class="Bound"
  >p</a
  ><a name="15608"
  > </a
  ><a name="15609" class="Symbol"
  >&#8594;</a
  ><a name="15610"
  >                             
                    </a
  ><a name="15660" class="Keyword"
  >let</a
  ><a name="15663"
  > </a
  ><a name="15664" class="Symbol"
  >(</a
  ><a name="15665" href="Session.html#15665" class="Bound"
  >I</a
  ><a name="15666"
  > </a
  ><a name="15667" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15668"
  > </a
  ><a name="15669" class="Symbol"
  >_</a
  ><a name="15670"
  > </a
  ><a name="15671" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15672"
  > </a
  ><a name="15673" class="Symbol"
  >_)</a
  ><a name="15675"
  > </a
  ><a name="15676" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15677"
  > </a
  ><a name="15678" class="Symbol"
  >_</a
  ><a name="15679"
  > </a
  ><a name="15680" class="Symbol"
  >=</a
  ><a name="15681"
  > </a
  ><a name="15682" href="Session.html#15607" class="Bound"
  >p</a
  ><a name="15683"
  > </a
  ><a name="15684" class="Keyword"
  >in</a
  ><a name="15686"
  >         </a
  ><a name="15695" href="Session.html#15584" class="Bound"
  >X</a
  ><a name="15696"
  > </a
  ><a name="15697" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15698"
  > </a
  ><a name="15699" href="Session.html#15665" class="Bound"
  >I</a
  ><a name="15700"
  ></pre>
<h3 id="process-terms">Process terms</h3>
<p>As already stated, we plan to adopt codes for indexed functors instead of defining those directly. We could then simply use a generic indexed free monad construction, as in McBride's &quot;Kleisli Arrows of Outrageous Fortune&quot;, encoding our &quot;Atkey-style&quot; parameterisation in the way described there.</p>
<p>To make things simpler we use the following definition for now: this is neither a monad nor a monad transfomer, it is just convenient temporary syntax.</p>
<pre></a
  ><a name="16194" class="Keyword"
  >module</a
  ><a name="16200"
  > </a
  ><a name="16201" href="Session.html#16201" class="Module"
  >Process</a
  ><a name="16208"
  > </a
  ><a name="16209" class="Keyword"
  >where</a
  ><a name="16214"
  >

  </a
  ><a name="16218" class="Keyword"
  >infix</a
  ><a name="16223"
  > </a
  ><a name="16224" class="Number"
  >2</a
  ><a name="16225"
  > _[_&#8866;_]&gt;_

  </a
  ><a name="16238" href="Session.html#16238" class="Function"
  >F</a
  ><a name="16239"
  > </a
  ><a name="16240" class="Symbol"
  >=</a
  ><a name="16241"
  > </a
  ><a name="16242" class="Symbol"
  >&#955;</a
  ><a name="16243"
  > </a
  ><a name="16244" href="Session.html#16244" class="Bound"
  >T</a
  ><a name="16245"
  > </a
  ><a name="16246" href="Session.html#16246" class="Bound"
  >X</a
  ><a name="16247"
  > </a
  ><a name="16248" href="Session.html#16248" class="Bound"
  >&#915;</a
  ><a name="16249"
  > </a
  ><a name="16250" href="Session.html#16250" class="Bound"
  >&#916;</a
  ><a name="16251"
  > </a
  ><a name="16252" class="Symbol"
  >&#8594;</a
  ><a name="16253"
  > </a
  ><a name="16254" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="16255"
  > </a
  ><a name="16256" href="Session.html#14371" class="Datatype"
  >T.Tag</a
  ><a name="16261"
  > </a
  ><a name="16262" class="Symbol"
  >&#955;</a
  ><a name="16263"
  > </a
  ><a name="16264" href="Session.html#16264" class="Bound"
  >t</a
  ><a name="16265"
  > </a
  ><a name="16266" class="Symbol"
  >&#8594;</a
  ><a name="16267"
  > </a
  ><a name="16268" href="Session.html#14747" class="Function"
  >&#960;</a
  ><a name="16269"
  > </a
  ><a name="16270" href="Session.html#16264" class="Bound"
  >t</a
  ><a name="16271"
  > </a
  ><a name="16272" href="Session.html#16244" class="Bound"
  >T</a
  ><a name="16273"
  > </a
  ><a name="16274" href="Session.html#16246" class="Bound"
  >X</a
  ><a name="16275"
  > </a
  ><a name="16276" href="Session.html#16248" class="Bound"
  >&#915;</a
  ><a name="16277"
  > </a
  ><a name="16278" href="Session.html#16250" class="Bound"
  >&#916;</a
  ><a name="16279"
  >

  </a
  ><a name="16283" class="Keyword"
  >data</a
  ><a name="16287"
  > </a
  ><a name="16288" href="Session.html#16288" class="Datatype Operator"
  >_[_&#8866;_]&gt;_</a
  ><a name="16296"
  > </a
  ><a name="16297" href="Session.html#16297" class="Bound"
  >&#915;</a
  ><a name="16298"
  > </a
  ><a name="16299" class="Symbol"
  >(</a
  ><a name="16300" href="Session.html#16300" class="Bound"
  >M</a
  ><a name="16301"
  > </a
  ><a name="16302" class="Symbol"
  >:</a
  ><a name="16303"
  > </a
  ><a name="16304" class="PrimitiveType"
  >Set</a
  ><a name="16307"
  > </a
  ><a name="16308" class="Symbol"
  >&#8594;</a
  ><a name="16309"
  > </a
  ><a name="16310" class="PrimitiveType"
  >Set</a
  ><a name="16313" class="Symbol"
  >)</a
  ><a name="16314"
  > </a
  ><a name="16315" href="Session.html#16315" class="Bound"
  >X</a
  ><a name="16316"
  > </a
  ><a name="16317" class="Symbol"
  >:</a
  ><a name="16318"
  > </a
  ><a name="16319" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="16321"
  > </a
  ><a name="16322" class="Symbol"
  >&#8594;</a
  ><a name="16323"
  > </a
  ><a name="16324" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="16328"
  > </a
  ><a name="16329" class="Keyword"
  >where</a
  ><a name="16334"
  >
    </a
  ><a name="16339" href="Session.html#16339" class="InductiveConstructor Operator"
  >&#8657;_</a
  ><a name="16341"
  >    </a
  ><a name="16345" class="Symbol"
  >:</a
  ><a name="16346"
  >             </a
  ><a name="16359" href="Session.html#16300" class="Bound"
  >M</a
  ><a name="16360"
  > </a
  ><a name="16361" href="Session.html#16315" class="Bound"
  >X</a
  ><a name="16362"
  >                                </a
  ><a name="16394" class="Symbol"
  >&#8594;</a
  ><a name="16395"
  > </a
  ><a name="16396" href="Session.html#16297" class="Bound"
  >&#915;</a
  ><a name="16397"
  > </a
  ><a name="16398" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="16399"
  > </a
  ><a name="16400" href="Session.html#16300" class="Bound"
  >M</a
  ><a name="16401"
  > </a
  ><a name="16402" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="16403"
  > </a
  ><a name="16404" href="Session.html#16315" class="Bound"
  >X</a
  ><a name="16405"
  > </a
  ><a name="16406" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="16408"
  > </a
  ><a name="16409" href="Session.html#16297" class="Bound"
  >&#915;</a
  ><a name="16410"
  >
    </a
  ><a name="16415" href="Session.html#16415" class="InductiveConstructor Operator"
  >[_]</a
  ><a name="16418"
  >   </a
  ><a name="16421" class="Symbol"
  >:</a
  ><a name="16422"
  > </a
  ><a name="16423" class="Symbol"
  >&#8704;</a
  ><a name="16424"
  > </a
  ><a name="16425" class="Symbol"
  >{</a
  ><a name="16426" href="Session.html#16426" class="Bound"
  >&#916;</a
  ><a name="16427" class="Symbol"
  >}</a
  ><a name="16428"
  >     </a
  ><a name="16433" class="Symbol"
  >&#8594;</a
  ><a name="16434"
  > </a
  ><a name="16435" href="Session.html#16238" class="Function"
  >F</a
  ><a name="16436"
  > </a
  ><a name="16437" class="Symbol"
  >(&#955;</a
  ><a name="16439"
  > </a
  ><a name="16440" href="Session.html#16440" class="Bound"
  >Z</a
  ><a name="16441"
  > </a
  ><a name="16442" href="Session.html#16442" class="Bound"
  >A</a
  ><a name="16443"
  > </a
  ><a name="16444" href="Session.html#16444" class="Bound"
  >B</a
  ><a name="16445"
  > </a
  ><a name="16446" class="Symbol"
  >&#8594;</a
  ><a name="16447"
  > </a
  ><a name="16448" href="Session.html#16442" class="Bound"
  >A</a
  ><a name="16449"
  > </a
  ><a name="16450" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="16451"
  > </a
  ><a name="16452" href="Session.html#16300" class="Bound"
  >M</a
  ><a name="16453"
  > </a
  ><a name="16454" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="16455"
  > </a
  ><a name="16456" href="Session.html#16440" class="Bound"
  >Z</a
  ><a name="16457"
  > </a
  ><a name="16458" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="16460"
  > </a
  ><a name="16461" href="Session.html#16444" class="Bound"
  >B</a
  ><a name="16462" class="Symbol"
  >)</a
  ><a name="16463"
  > </a
  ><a name="16464" href="Session.html#16315" class="Bound"
  >X</a
  ><a name="16465"
  > </a
  ><a name="16466" href="Session.html#16297" class="Bound"
  >&#915;</a
  ><a name="16467"
  > </a
  ><a name="16468" href="Session.html#16426" class="Bound"
  >&#916;</a
  ><a name="16469"
  > </a
  ><a name="16470" class="Symbol"
  >&#8594;</a
  ><a name="16471"
  > </a
  ><a name="16472" href="Session.html#16297" class="Bound"
  >&#915;</a
  ><a name="16473"
  > </a
  ><a name="16474" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="16475"
  > </a
  ><a name="16476" href="Session.html#16300" class="Bound"
  >M</a
  ><a name="16477"
  > </a
  ><a name="16478" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="16479"
  > </a
  ><a name="16480" href="Session.html#16315" class="Bound"
  >X</a
  ><a name="16481"
  > </a
  ><a name="16482" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="16484"
  > </a
  ><a name="16485" href="Session.html#16426" class="Bound"
  >&#916;</a
  ><a name="16486"
  >
    </a
  ><a name="16491" href="Session.html#16491" class="InductiveConstructor Operator"
  >_&#187;=_</a
  ><a name="16495"
  >  </a
  ><a name="16497" class="Symbol"
  >:</a
  ><a name="16498"
  > </a
  ><a name="16499" class="Symbol"
  >&#8704;</a
  ><a name="16500"
  > </a
  ><a name="16501" class="Symbol"
  >{</a
  ><a name="16502" href="Session.html#16502" class="Bound"
  >&#926;</a
  ><a name="16503"
  > </a
  ><a name="16504" href="Session.html#16504" class="Bound"
  >&#916;</a
  ><a name="16505"
  > </a
  ><a name="16506" href="Session.html#16506" class="Bound"
  >Y</a
  ><a name="16507" class="Symbol"
  >}</a
  ><a name="16508"
  > </a
  ><a name="16509" class="Symbol"
  >&#8594;</a
  ><a name="16510"
  > </a
  ><a name="16511" href="Session.html#16297" class="Bound"
  >&#915;</a
  ><a name="16512"
  > </a
  ><a name="16513" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="16514"
  > </a
  ><a name="16515" href="Session.html#16300" class="Bound"
  >M</a
  ><a name="16516"
  > </a
  ><a name="16517" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="16518"
  > </a
  ><a name="16519" href="Session.html#16506" class="Bound"
  >Y</a
  ><a name="16520"
  > </a
  ><a name="16521" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="16523"
  > </a
  ><a name="16524" href="Session.html#16502" class="Bound"
  >&#926;</a
  ><a name="16525"
  >                     </a
  ><a name="16546" class="Symbol"
  >&#8594;</a
  ><a name="16547"
  > 
                   </a
  ><a name="16568" class="Symbol"
  >(</a
  ><a name="16569" href="Session.html#16506" class="Bound"
  >Y</a
  ><a name="16570"
  > </a
  ><a name="16571" class="Symbol"
  >&#8594;</a
  ><a name="16572"
  > </a
  ><a name="16573" href="Session.html#16502" class="Bound"
  >&#926;</a
  ><a name="16574"
  > </a
  ><a name="16575" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="16576"
  > </a
  ><a name="16577" href="Session.html#16300" class="Bound"
  >M</a
  ><a name="16578"
  > </a
  ><a name="16579" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="16580"
  > </a
  ><a name="16581" href="Session.html#16315" class="Bound"
  >X</a
  ><a name="16582"
  > </a
  ><a name="16583" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="16585"
  > </a
  ><a name="16586" href="Session.html#16504" class="Bound"
  >&#916;</a
  ><a name="16587" class="Symbol"
  >)</a
  ><a name="16588"
  >                    </a
  ><a name="16608" class="Symbol"
  >&#8594;</a
  ><a name="16609"
  > </a
  ><a name="16610" href="Session.html#16297" class="Bound"
  >&#915;</a
  ><a name="16611"
  > </a
  ><a name="16612" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="16613"
  > </a
  ><a name="16614" href="Session.html#16300" class="Bound"
  >M</a
  ><a name="16615"
  > </a
  ><a name="16616" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="16617"
  > </a
  ><a name="16618" href="Session.html#16315" class="Bound"
  >X</a
  ><a name="16619"
  > </a
  ><a name="16620" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="16622"
  > </a
  ><a name="16623" href="Session.html#16504" class="Bound"
  >&#916;</a
  ><a name="16624"
  >

</a
  ><a name="16626" class="Keyword"
  >open</a
  ><a name="16630"
  > </a
  ><a name="16631" href="Session.html#16201" class="Module"
  >Process</a
  ><a name="16638"
  > </a
  ><a name="16639" class="Keyword"
  >using</a
  ><a name="16644"
  > </a
  ><a name="16645" class="Symbol"
  >(</a
  ><a name="16646"
  >_[_&#8866;_]&gt;_ </a
  ><a name="16655" class="Symbol"
  >;</a
  ><a name="16656"
  > &#8657;_ </a
  ><a name="16660" class="Symbol"
  >;</a
  ><a name="16661"
  > _&#187;=_ </a
  ><a name="16667" class="Symbol"
  >;</a
  ><a name="16668"
  > [_]</a
  ><a name="16672" class="Symbol"
  >)</a
  ><a name="16673"
  > </a
  ><a name="16674" class="Keyword"
  >public</a
  ><a name="16680"
  ></pre>
<p>Note that referring to the above operators as &quot;strictly positive functors&quot; as we did, while very reasonable from their definitions, is also justified by the fact that Agda's positivity checker accepts <code>_[_⊢_]&gt;_</code>.</p>
<h3 id="syntactic-sugar">Syntactic sugar</h3>
<h4 id="patterns">Patterns</h4>
<p>To construct and pattern match on processes we make extensive use of Agda's <code>pattern</code> facility.</p>
<pre></a
  ><a name="17053" class="Keyword"
  >pattern</a
  ><a name="17060"
  > </a
  ><a name="17061" href="Session.html#17061" class="InductiveConstructor"
  >fork</a
  ><a name="17065"
  >    </a
  ><a name="17069" href="Session.html#17091" class="Bound"
  >d</a
  ><a name="17070"
  > </a
  ><a name="17071" href="Session.html#17095" class="Bound"
  >x</a
  ><a name="17072"
  >    </a
  ><a name="17076" class="Symbol"
  >=</a
  ><a name="17077"
  > </a
  ><a name="17078" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17079"
  > </a
  ><a name="17080" href="Session.html#14395" class="InductiveConstructor"
  >T.fork</a
  ><a name="17086"
  >  </a
  ><a name="17088" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17089"
  > </a
  ><a name="17090" class="Symbol"
  >(</a
  ><a name="17091" href="Session.html#17091" class="Bound"
  >d</a
  ><a name="17092"
  > </a
  ><a name="17093" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17094"
  > </a
  ><a name="17095" href="Session.html#17095" class="Bound"
  >x</a
  ><a name="17096"
  > </a
  ><a name="17097" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17098"
  > </a
  ><a name="17099" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17101" class="Symbol"
  >)</a
  ><a name="17102"
  >                 </a
  ><a name="17119" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17120"
  > </a
  ><a name="17121" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17123"
  > </a
  ><a name="17124" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17125"
  > 
</a
  ><a name="17127" class="Keyword"
  >pattern</a
  ><a name="17134"
  > </a
  ><a name="17135" href="Session.html#17135" class="InductiveConstructor"
  >new</a
  ><a name="17138"
  >            </a
  ><a name="17150" class="Symbol"
  >=</a
  ><a name="17151"
  > </a
  ><a name="17152" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17153"
  > </a
  ><a name="17154" href="Session.html#14391" class="InductiveConstructor"
  >T.new</a
  ><a name="17159"
  >   </a
  ><a name="17162" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17163"
  > </a
  ><a name="17164" class="Symbol"
  >(_</a
  ><a name="17166"
  > </a
  ><a name="17167" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17168"
  > </a
  ><a name="17169" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17171" class="Symbol"
  >)</a
  ><a name="17172"
  >                     </a
  ><a name="17193" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17194"
  > </a
  ><a name="17195" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17197"
  > </a
  ><a name="17198" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17199"
  > 
</a
  ><a name="17201" class="Keyword"
  >pattern</a
  ><a name="17208"
  > </a
  ><a name="17209" href="Session.html#17209" class="InductiveConstructor"
  >send</a
  ><a name="17213"
  >    </a
  ><a name="17217" href="Session.html#17241" class="Bound"
  >i</a
  ><a name="17218"
  > </a
  ><a name="17219" href="Session.html#17245" class="Bound"
  >j</a
  ><a name="17220"
  >    </a
  ><a name="17224" class="Symbol"
  >=</a
  ><a name="17225"
  > </a
  ><a name="17226" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17227"
  > </a
  ><a name="17228" href="Session.html#14416" class="InductiveConstructor"
  >T.send</a
  ><a name="17234"
  >  </a
  ><a name="17236" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17237"
  > </a
  ><a name="17238" href="Session.html#8587" class="InductiveConstructor Operator"
  >%</a
  ><a name="17239"
  > </a
  ><a name="17240" class="Symbol"
  >(</a
  ><a name="17241" href="Session.html#17241" class="Bound"
  >i</a
  ><a name="17242"
  > </a
  ><a name="17243" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17244"
  > </a
  ><a name="17245" href="Session.html#17245" class="Bound"
  >j</a
  ><a name="17246"
  > </a
  ><a name="17247" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17248"
  > </a
  ><a name="17249" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17251" class="Symbol"
  >)</a
  ><a name="17252"
  >               </a
  ><a name="17267" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17268"
  > </a
  ><a name="17269" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17271"
  > </a
  ><a name="17272" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17273"
  > 
</a
  ><a name="17275" class="Keyword"
  >pattern</a
  ><a name="17282"
  > </a
  ><a name="17283" href="Session.html#17283" class="InductiveConstructor"
  >receive</a
  ><a name="17290"
  > </a
  ><a name="17291" href="Session.html#17315" class="Bound"
  >i</a
  ><a name="17292"
  >      </a
  ><a name="17298" class="Symbol"
  >=</a
  ><a name="17299"
  > </a
  ><a name="17300" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17301"
  > </a
  ><a name="17302" href="Session.html#14421" class="InductiveConstructor"
  >T.recv</a
  ><a name="17308"
  >  </a
  ><a name="17310" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17311"
  > </a
  ><a name="17312" href="Session.html#8587" class="InductiveConstructor Operator"
  >%</a
  ><a name="17313"
  > </a
  ><a name="17314" class="Symbol"
  >(</a
  ><a name="17315" href="Session.html#17315" class="Bound"
  >i</a
  ><a name="17316"
  > </a
  ><a name="17317" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17318"
  > </a
  ><a name="17319" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17321" class="Symbol"
  >)</a
  ><a name="17322"
  >                   </a
  ><a name="17341" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17342"
  > </a
  ><a name="17343" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17345"
  > </a
  ><a name="17346" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17347"
  > 
</a
  ><a name="17349" class="Keyword"
  >pattern</a
  ><a name="17356"
  > </a
  ><a name="17357" href="Session.html#17357" class="InductiveConstructor"
  >accept</a
  ><a name="17363"
  >  </a
  ><a name="17365" href="Session.html#17389" class="Bound"
  >i</a
  ><a name="17366"
  > </a
  ><a name="17367" href="Session.html#17393" class="Bound"
  >a</a
  ><a name="17368"
  > </a
  ><a name="17369" href="Session.html#17397" class="Bound"
  >p</a
  ><a name="17370"
  >  </a
  ><a name="17372" class="Symbol"
  >=</a
  ><a name="17373"
  > </a
  ><a name="17374" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17375"
  > </a
  ><a name="17376" href="Session.html#14441" class="InductiveConstructor"
  >T.!!</a
  ><a name="17380"
  >    </a
  ><a name="17384" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17385"
  > </a
  ><a name="17386" href="Session.html#8587" class="InductiveConstructor Operator"
  >%</a
  ><a name="17387"
  > </a
  ><a name="17388" class="Symbol"
  >(</a
  ><a name="17389" href="Session.html#17389" class="Bound"
  >i</a
  ><a name="17390"
  > </a
  ><a name="17391" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17392"
  > </a
  ><a name="17393" href="Session.html#17393" class="Bound"
  >a</a
  ><a name="17394"
  > </a
  ><a name="17395" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17396"
  > </a
  ><a name="17397" href="Session.html#17397" class="Bound"
  >p</a
  ><a name="17398"
  > </a
  ><a name="17399" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17400"
  > </a
  ><a name="17401" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17403" class="Symbol"
  >)</a
  ><a name="17404"
  >           </a
  ><a name="17415" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17416"
  > </a
  ><a name="17417" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17419"
  > </a
  ><a name="17420" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17421"
  > 
</a
  ><a name="17423" class="Keyword"
  >pattern</a
  ><a name="17430"
  > </a
  ><a name="17431" href="Session.html#17431" class="InductiveConstructor"
  >connect</a
  ><a name="17438"
  > </a
  ><a name="17439" href="Session.html#17463" class="Bound"
  >i</a
  ><a name="17440"
  >   </a
  ><a name="17443" href="Session.html#17467" class="Bound"
  >p</a
  ><a name="17444"
  >  </a
  ><a name="17446" class="Symbol"
  >=</a
  ><a name="17447"
  > </a
  ><a name="17448" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17449"
  > </a
  ><a name="17450" href="Session.html#14444" class="InductiveConstructor"
  >T.??</a
  ><a name="17454"
  >    </a
  ><a name="17458" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17459"
  > </a
  ><a name="17460" href="Session.html#8587" class="InductiveConstructor Operator"
  >%</a
  ><a name="17461"
  > </a
  ><a name="17462" class="Symbol"
  >(</a
  ><a name="17463" href="Session.html#17463" class="Bound"
  >i</a
  ><a name="17464"
  > </a
  ><a name="17465" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17466"
  > </a
  ><a name="17467" href="Session.html#17467" class="Bound"
  >p</a
  ><a name="17468" class="Symbol"
  >)</a
  ><a name="17469"
  >                         </a
  ><a name="17494" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17495"
  > 
</a
  ><a name="17497" class="Keyword"
  >pattern</a
  ><a name="17504"
  > </a
  ><a name="17505" href="Session.html#17505" class="InductiveConstructor"
  >wont</a
  ><a name="17509"
  >    </a
  ><a name="17513" href="Session.html#17537" class="Bound"
  >i</a
  ><a name="17514"
  >      </a
  ><a name="17520" class="Symbol"
  >=</a
  ><a name="17521"
  > </a
  ><a name="17522" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17523"
  > </a
  ><a name="17524" href="Session.html#14447" class="InductiveConstructor"
  >T.wk</a
  ><a name="17528"
  >    </a
  ><a name="17532" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17533"
  > </a
  ><a name="17534" href="Session.html#8587" class="InductiveConstructor Operator"
  >%</a
  ><a name="17535"
  > </a
  ><a name="17536" class="Symbol"
  >(</a
  ><a name="17537" href="Session.html#17537" class="Bound"
  >i</a
  ><a name="17538"
  > </a
  ><a name="17539" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17540"
  > </a
  ><a name="17541" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17543" class="Symbol"
  >)</a
  ><a name="17544"
  >                   </a
  ><a name="17563" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17564"
  > </a
  ><a name="17565" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17567"
  > </a
  ><a name="17568" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17569"
  > 
</a
  ><a name="17571" class="Keyword"
  >pattern</a
  ><a name="17578"
  > </a
  ><a name="17579" href="Session.html#17579" class="InductiveConstructor"
  >twice</a
  ><a name="17584"
  >   </a
  ><a name="17587" href="Session.html#17611" class="Bound"
  >i</a
  ><a name="17588"
  >      </a
  ><a name="17594" class="Symbol"
  >=</a
  ><a name="17595"
  > </a
  ><a name="17596" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17597"
  > </a
  ><a name="17598" href="Session.html#14450" class="InductiveConstructor"
  >T.ctr</a
  ><a name="17603"
  >   </a
  ><a name="17606" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17607"
  > </a
  ><a name="17608" href="Session.html#8587" class="InductiveConstructor Operator"
  >%</a
  ><a name="17609"
  > </a
  ><a name="17610" class="Symbol"
  >(</a
  ><a name="17611" href="Session.html#17611" class="Bound"
  >i</a
  ><a name="17612"
  > </a
  ><a name="17613" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17614"
  > </a
  ><a name="17615" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17617" class="Symbol"
  >)</a
  ><a name="17618"
  >                   </a
  ><a name="17637" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17638"
  > </a
  ><a name="17639" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17641"
  > </a
  ><a name="17642" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17643"
  > 
</a
  ><a name="17645" class="Keyword"
  >pattern</a
  ><a name="17652"
  > </a
  ><a name="17653" href="Session.html#17653" class="InductiveConstructor"
  >write</a
  ><a name="17658"
  >   </a
  ><a name="17661" href="Session.html#17697" class="Bound"
  >i</a
  ><a name="17662"
  > </a
  ><a name="17663" href="Session.html#17688" class="Bound"
  >x</a
  ><a name="17664"
  >    </a
  ><a name="17668" class="Symbol"
  >=</a
  ><a name="17669"
  > </a
  ><a name="17670" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17671"
  > </a
  ><a name="17672" href="Session.html#14491" class="InductiveConstructor"
  >T.write</a
  ><a name="17679"
  > </a
  ><a name="17680" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17681"
  > </a
  ><a name="17682" class="Symbol"
  >((_</a
  ><a name="17685"
  > </a
  ><a name="17686" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17687"
  > </a
  ><a name="17688" href="Session.html#17688" class="Bound"
  >x</a
  ><a name="17689"
  > </a
  ><a name="17690" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17691"
  > </a
  ><a name="17692" class="Symbol"
  >_)</a
  ><a name="17694"
  > </a
  ><a name="17695" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17696"
  > </a
  ><a name="17697" href="Session.html#17697" class="Bound"
  >i</a
  ><a name="17698"
  > </a
  ><a name="17699" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17700"
  > </a
  ><a name="17701" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17703" class="Symbol"
  >)</a
  ><a name="17704"
  >       </a
  ><a name="17711" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17712"
  > </a
  ><a name="17713" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17715"
  > </a
  ><a name="17716" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17717"
  > 
</a
  ><a name="17719" class="Keyword"
  >pattern</a
  ><a name="17726"
  > </a
  ><a name="17727" href="Session.html#17727" class="InductiveConstructor"
  >read</a
  ><a name="17731"
  >    </a
  ><a name="17735" href="Session.html#17759" class="Bound"
  >i</a
  ><a name="17736"
  >      </a
  ><a name="17742" class="Symbol"
  >=</a
  ><a name="17743"
  > </a
  ><a name="17744" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17745"
  > </a
  ><a name="17746" href="Session.html#14497" class="InductiveConstructor"
  >T.read</a
  ><a name="17752"
  >  </a
  ><a name="17754" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17755"
  > </a
  ><a name="17756" href="Session.html#8587" class="InductiveConstructor Operator"
  >%</a
  ><a name="17757"
  > </a
  ><a name="17758" class="Symbol"
  >(</a
  ><a name="17759" href="Session.html#17759" class="Bound"
  >i</a
  ><a name="17760"
  > </a
  ><a name="17761" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17762"
  > </a
  ><a name="17763" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17765" class="Symbol"
  >)</a
  ><a name="17766"
  >                   </a
  ><a name="17785" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17786"
  > </a
  ><a name="17787" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17789"
  > </a
  ><a name="17790" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17791"
  > 
</a
  ><a name="17793" class="Keyword"
  >pattern</a
  ><a name="17800"
  > </a
  ><a name="17801" href="Session.html#17801" class="InductiveConstructor"
  >end/</a
  ><a name="17805"
  >    </a
  ><a name="17809" href="Session.html#17850" class="Bound"
  >i</a
  ><a name="17810"
  > </a
  ><a name="17811" href="Session.html#17840" class="Bound"
  >r</a
  ><a name="17812"
  >    </a
  ><a name="17816" class="Symbol"
  >=</a
  ><a name="17817"
  > </a
  ><a name="17818" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17819"
  > </a
  ><a name="17820" href="Session.html#14541" class="InductiveConstructor"
  >T.end</a
  ><a name="17825"
  >   </a
  ><a name="17828" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17829"
  > </a
  ><a name="17830" class="Symbol"
  >((_</a
  ><a name="17833"
  > </a
  ><a name="17834" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17835"
  > </a
  ><a name="17836" class="Symbol"
  >_</a
  ><a name="17837"
  > </a
  ><a name="17838" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17839"
  > </a
  ><a name="17840" href="Session.html#17840" class="Bound"
  >r</a
  ><a name="17841"
  > </a
  ><a name="17842" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17843"
  > </a
  ><a name="17844" class="Symbol"
  >_)</a
  ><a name="17846"
  > </a
  ><a name="17847" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17848"
  > </a
  ><a name="17849" class="Symbol"
  >(</a
  ><a name="17850" href="Session.html#17850" class="Bound"
  >i</a
  ><a name="17851"
  > </a
  ><a name="17852" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17853"
  > </a
  ><a name="17854" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17856" class="Symbol"
  >))</a
  ><a name="17858"
  > </a
  ><a name="17859" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17860"
  > </a
  ><a name="17861" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17863"
  > </a
  ><a name="17864" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17865"
  > 
</a
  ><a name="17867" class="Keyword"
  >pattern</a
  ><a name="17874"
  > </a
  ><a name="17875" href="Session.html#17875" class="InductiveConstructor"
  >end</a
  ><a name="17878"
  >     </a
  ><a name="17883" href="Session.html#17897" class="Bound"
  >i</a
  ><a name="17884"
  >      </a
  ><a name="17890" class="Symbol"
  >=</a
  ><a name="17891"
  > </a
  ><a name="17892" href="Session.html#17801" class="InductiveConstructor"
  >end/</a
  ><a name="17896"
  > </a
  ><a name="17897" href="Session.html#17897" class="Bound"
  >i</a
  ><a name="17898"
  > </a
  ><a name="17899" class="Symbol"
  >_</a
  ><a name="17900"
  >
</a
  ><a name="17901" class="Keyword"
  >pattern</a
  ><a name="17908"
  > </a
  ><a name="17909" href="Session.html#17909" class="InductiveConstructor"
  >at/</a
  ><a name="17912"
  >     </a
  ><a name="17917" href="Session.html#17954" class="Bound"
  >i</a
  ><a name="17918"
  > </a
  ><a name="17919" href="Session.html#17944" class="Bound"
  >o</a
  ><a name="17920"
  >    </a
  ><a name="17924" class="Symbol"
  >=</a
  ><a name="17925"
  > </a
  ><a name="17926" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="17927"
  > </a
  ><a name="17928" href="Session.html#14516" class="InductiveConstructor"
  >T.at</a
  ><a name="17932"
  >    </a
  ><a name="17936" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17937"
  > </a
  ><a name="17938" class="Symbol"
  >((</a
  ><a name="17940" href="Session.html#8632" class="InductiveConstructor Operator"
  >%3</a
  ><a name="17942"
  > </a
  ><a name="17943" class="Symbol"
  >(</a
  ><a name="17944" href="Session.html#17944" class="Bound"
  >o</a
  ><a name="17945"
  > </a
  ><a name="17946" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17947"
  > </a
  ><a name="17948" class="Symbol"
  >_)</a
  ><a name="17950"
  > </a
  ><a name="17951" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17952"
  > </a
  ><a name="17953" class="Symbol"
  >(</a
  ><a name="17954" href="Session.html#17954" class="Bound"
  >i</a
  ><a name="17955"
  > </a
  ><a name="17956" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17957"
  > </a
  ><a name="17958" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17960" class="Symbol"
  >)))</a
  ><a name="17963"
  >    </a
  ><a name="17967" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="17968"
  > </a
  ><a name="17969" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="17971"
  > </a
  ><a name="17972" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="17973"
  > 
</a
  ><a name="17975" class="Keyword"
  >pattern</a
  ><a name="17982"
  > </a
  ><a name="17983" href="Session.html#17983" class="InductiveConstructor"
  >at</a
  ><a name="17985"
  >      </a
  ><a name="17991" href="Session.html#18004" class="Bound"
  >i</a
  ><a name="17992"
  >      </a
  ><a name="17998" class="Symbol"
  >=</a
  ><a name="17999"
  > </a
  ><a name="18000" href="Session.html#17909" class="InductiveConstructor"
  >at/</a
  ><a name="18003"
  > </a
  ><a name="18004" href="Session.html#18004" class="Bound"
  >i</a
  ><a name="18005"
  > </a
  ><a name="18006" class="Symbol"
  >_</a
  ><a name="18007"
  >                                         
</a
  ><a name="18049" class="Keyword"
  >pattern</a
  ><a name="18056"
  > </a
  ><a name="18057" href="Session.html#18057" class="InductiveConstructor"
  >corec</a
  ><a name="18062"
  >   </a
  ><a name="18065" href="Session.html#18096" class="Bound"
  >i</a
  ><a name="18066"
  > </a
  ><a name="18067" href="Session.html#18090" class="Bound"
  >o</a
  ><a name="18068"
  > </a
  ><a name="18069" href="Session.html#18101" class="Bound"
  >gp</a
  ><a name="18071"
  > </a
  ><a name="18072" class="Symbol"
  >=</a
  ><a name="18073"
  > </a
  ><a name="18074" href="Session.html#16415" class="InductiveConstructor Operator"
  >[</a
  ><a name="18075"
  > </a
  ><a name="18076" href="Session.html#14466" class="InductiveConstructor"
  >T.corec</a
  ><a name="18083"
  > </a
  ><a name="18084" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="18085"
  > </a
  ><a name="18086" class="Symbol"
  >(</a
  ><a name="18087" href="Session.html#8655" class="InductiveConstructor Operator"
  >%4</a
  ><a name="18089"
  > </a
  ><a name="18090" href="Session.html#18090" class="Bound"
  >o</a
  ><a name="18091" class="Symbol"
  >)</a
  ><a name="18092"
  > </a
  ><a name="18093" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="18094"
  > </a
  ><a name="18095" class="Symbol"
  >(</a
  ><a name="18096" href="Session.html#18096" class="Bound"
  >i</a
  ><a name="18097"
  > </a
  ><a name="18098" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="18099"
  > </a
  ><a name="18100" class="Symbol"
  >(</a
  ><a name="18101" href="Session.html#18101" class="Bound"
  >gp</a
  ><a name="18103"
  > </a
  ><a name="18104" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="18105"
  > </a
  ><a name="18106" href="Relation.Binary.Core.html#4651" class="InductiveConstructor"
  >&lt;&gt;</a
  ><a name="18108" class="Symbol"
  >))</a
  ><a name="18110"
  >          </a
  ><a name="18120" href="Session.html#16415" class="InductiveConstructor Operator"
  >]</a
  ><a name="18121"
  ></pre>
<p>(We plan to also define a view for these patterns, so that Agda's interactive splitting (<code>C-c C-c</code>) can be recovered after a <code>with</code>)</p>
<h4 id="monadic-binding-notation">Monadic binding notation</h4>
<p>For the binding operator we mimic Haskell's <code>do</code>-notation with a <code>syntax</code> declaration.</p>
<pre></a
  ><a name="18400" class="Keyword"
  >infixr</a
  ><a name="18406"
  > </a
  ><a name="18407" class="Number"
  >5</a
  ><a name="18408"
  > bind
</a
  ><a name="18414" href="Session.html#18414" class="Function"
  >bind</a
  ><a name="18418"
  > </a
  ><a name="18419" class="Symbol"
  >:</a
  ><a name="18420"
  > </a
  ><a name="18421" class="Symbol"
  >&#8704;</a
  ><a name="18422"
  > </a
  ><a name="18423" class="Symbol"
  >{</a
  ><a name="18424" href="Session.html#18424" class="Bound"
  >M</a
  ><a name="18425"
  > </a
  ><a name="18426" href="Session.html#18426" class="Bound"
  >&#915;</a
  ><a name="18427"
  > </a
  ><a name="18428" href="Session.html#18428" class="Bound"
  >&#926;</a
  ><a name="18429"
  > </a
  ><a name="18430" href="Session.html#18430" class="Bound"
  >&#916;</a
  ><a name="18431"
  > </a
  ><a name="18432" href="Session.html#18432" class="Bound"
  >X</a
  ><a name="18433"
  > </a
  ><a name="18434" href="Session.html#18434" class="Bound"
  >Y</a
  ><a name="18435" class="Symbol"
  >}</a
  ><a name="18436"
  > </a
  ><a name="18437" class="Symbol"
  >&#8594;</a
  ><a name="18438"
  > </a
  ><a name="18439" href="Session.html#18426" class="Bound"
  >&#915;</a
  ><a name="18440"
  > </a
  ><a name="18441" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="18442"
  > </a
  ><a name="18443" href="Session.html#18424" class="Bound"
  >M</a
  ><a name="18444"
  > </a
  ><a name="18445" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="18446"
  > </a
  ><a name="18447" href="Session.html#18434" class="Bound"
  >Y</a
  ><a name="18448"
  > </a
  ><a name="18449" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="18451"
  > </a
  ><a name="18452" href="Session.html#18428" class="Bound"
  >&#926;</a
  ><a name="18453"
  >  </a
  ><a name="18455" class="Symbol"
  >&#8594;</a
  ><a name="18456"
  > 
                    </a
  ><a name="18478" class="Symbol"
  >(</a
  ><a name="18479" href="Session.html#18434" class="Bound"
  >Y</a
  ><a name="18480"
  > </a
  ><a name="18481" class="Symbol"
  >&#8594;</a
  ><a name="18482"
  > </a
  ><a name="18483" href="Session.html#18428" class="Bound"
  >&#926;</a
  ><a name="18484"
  > </a
  ><a name="18485" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="18486"
  > </a
  ><a name="18487" href="Session.html#18424" class="Bound"
  >M</a
  ><a name="18488"
  > </a
  ><a name="18489" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="18490"
  > </a
  ><a name="18491" href="Session.html#18432" class="Bound"
  >X</a
  ><a name="18492"
  > </a
  ><a name="18493" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="18495"
  > </a
  ><a name="18496" href="Session.html#18430" class="Bound"
  >&#916;</a
  ><a name="18497" class="Symbol"
  >)</a
  ><a name="18498"
  > </a
  ><a name="18499" class="Symbol"
  >&#8594;</a
  ><a name="18500"
  > </a
  ><a name="18501" href="Session.html#18426" class="Bound"
  >&#915;</a
  ><a name="18502"
  > </a
  ><a name="18503" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="18504"
  > </a
  ><a name="18505" href="Session.html#18424" class="Bound"
  >M</a
  ><a name="18506"
  > </a
  ><a name="18507" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="18508"
  > </a
  ><a name="18509" href="Session.html#18432" class="Bound"
  >X</a
  ><a name="18510"
  > </a
  ><a name="18511" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="18513"
  > </a
  ><a name="18514" href="Session.html#18430" class="Bound"
  >&#916;</a
  ><a name="18515"
  >
</a
  ><a name="18516" href="Session.html#18414" class="Function"
  >bind</a
  ><a name="18520"
  > </a
  ><a name="18521" class="Symbol"
  >=</a
  ><a name="18522"
  > </a
  ><a name="18523" href="Session.html#16491" class="InductiveConstructor Operator"
  >_&#187;=_</a
  ><a name="18527"
  >
</a
  ><a name="18528" class="Keyword"
  >syntax</a
  ><a name="18534"
  > bind m </a
  ><a name="18542" class="Symbol"
  >(&#955;</a
  ><a name="18544"
  > x </a
  ><a name="18547" class="Symbol"
  >&#8594;</a
  ><a name="18548"
  > y</a
  ><a name="18550" class="Symbol"
  >)</a
  ><a name="18551"
  > </a
  ><a name="18552" class="Symbol"
  >=</a
  ><a name="18553"
  > x &lt;- m &#8943; y</pre>

<pre></a
  ><a name="18590" class="Keyword"
  >infixr</a
  ><a name="18596"
  > </a
  ><a name="18597" class="Number"
  >5</a
  ><a name="18598"
  > _&#187;_
</a
  ><a name="18603" href="Session.html#18603" class="Function Operator"
  >_&#187;_</a
  ><a name="18606"
  > </a
  ><a name="18607" class="Symbol"
  >:</a
  ><a name="18608"
  > </a
  ><a name="18609" class="Symbol"
  >&#8704;</a
  ><a name="18610"
  > </a
  ><a name="18611" class="Symbol"
  >{</a
  ><a name="18612" href="Session.html#18612" class="Bound"
  >M</a
  ><a name="18613"
  > </a
  ><a name="18614" href="Session.html#18614" class="Bound"
  >&#915;</a
  ><a name="18615"
  > </a
  ><a name="18616" href="Session.html#18616" class="Bound"
  >&#926;</a
  ><a name="18617"
  > </a
  ><a name="18618" href="Session.html#18618" class="Bound"
  >&#916;</a
  ><a name="18619"
  > </a
  ><a name="18620" href="Session.html#18620" class="Bound"
  >X</a
  ><a name="18621"
  > </a
  ><a name="18622" href="Session.html#18622" class="Bound"
  >Y</a
  ><a name="18623" class="Symbol"
  >}</a
  ><a name="18624"
  > </a
  ><a name="18625" class="Symbol"
  >&#8594;</a
  ><a name="18626"
  > </a
  ><a name="18627" href="Session.html#18614" class="Bound"
  >&#915;</a
  ><a name="18628"
  > </a
  ><a name="18629" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="18630"
  > </a
  ><a name="18631" href="Session.html#18612" class="Bound"
  >M</a
  ><a name="18632"
  > </a
  ><a name="18633" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="18634"
  > </a
  ><a name="18635" href="Session.html#18620" class="Bound"
  >X</a
  ><a name="18636"
  > </a
  ><a name="18637" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="18639"
  > </a
  ><a name="18640" href="Session.html#18616" class="Bound"
  >&#926;</a
  ><a name="18641"
  > </a
  ><a name="18642" class="Symbol"
  >&#8594;</a
  ><a name="18643"
  > </a
  ><a name="18644" href="Session.html#18616" class="Bound"
  >&#926;</a
  ><a name="18645"
  > </a
  ><a name="18646" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="18647"
  > </a
  ><a name="18648" href="Session.html#18612" class="Bound"
  >M</a
  ><a name="18649"
  > </a
  ><a name="18650" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="18651"
  > </a
  ><a name="18652" href="Session.html#18622" class="Bound"
  >Y</a
  ><a name="18653"
  > </a
  ><a name="18654" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="18656"
  > </a
  ><a name="18657" href="Session.html#18618" class="Bound"
  >&#916;</a
  ><a name="18658"
  > </a
  ><a name="18659" class="Symbol"
  >&#8594;</a
  ><a name="18660"
  > </a
  ><a name="18661" href="Session.html#18614" class="Bound"
  >&#915;</a
  ><a name="18662"
  > </a
  ><a name="18663" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="18664"
  > </a
  ><a name="18665" href="Session.html#18612" class="Bound"
  >M</a
  ><a name="18666"
  > </a
  ><a name="18667" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="18668"
  > </a
  ><a name="18669" href="Session.html#18622" class="Bound"
  >Y</a
  ><a name="18670"
  > </a
  ><a name="18671" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="18673"
  > </a
  ><a name="18674" href="Session.html#18618" class="Bound"
  >&#916;</a
  ><a name="18675"
  >
</a
  ><a name="18676" href="Session.html#18676" class="Bound"
  >m</a
  ><a name="18677"
  > </a
  ><a name="18678" href="Session.html#18603" class="Function Operator"
  >&#187;</a
  ><a name="18679"
  > </a
  ><a name="18680" href="Session.html#18680" class="Bound"
  >n</a
  ><a name="18681"
  > </a
  ><a name="18682" class="Symbol"
  >=</a
  ><a name="18683"
  > </a
  ><a name="18684" href="Session.html#18676" class="Bound"
  >m</a
  ><a name="18685"
  > </a
  ><a name="18686" href="Session.html#16491" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="18688"
  > </a
  ><a name="18689" class="Symbol"
  >&#955;</a
  ><a name="18690"
  > </a
  ><a name="18691" href="Session.html#18691" class="Bound"
  >_</a
  ><a name="18692"
  > </a
  ><a name="18693" class="Symbol"
  >&#8594;</a
  ><a name="18694"
  > </a
  ><a name="18695" href="Session.html#18680" class="Bound"
  >n</a
  ><a name="18696"
  ></pre>
<h4 id="write-and-read-dependently"><code>write</code> and <code>read</code> dependently</h4>
<p>We added <code>`^</code> (in Strictly Positive Families we would have used <code>`Δ</code>) to recover the <em>possibility</em> of making use of data exchanged by <code>write</code> and <code>read</code> at the type level.</p>
<pre></a
  ><a name="18940" href="Session.html#18940" class="Function"
  >put</a
  ><a name="18943"
  > </a
  ><a name="18944" class="Symbol"
  >:</a
  ><a name="18945"
  > </a
  ><a name="18946" class="Symbol"
  >&#8704;</a
  ><a name="18947"
  > </a
  ><a name="18948" class="Symbol"
  >{</a
  ><a name="18949" href="Session.html#18949" class="Bound"
  >M</a
  ><a name="18950"
  > </a
  ><a name="18951" href="Session.html#18951" class="Bound"
  >&#915;</a
  ><a name="18952" class="Symbol"
  >}{</a
  ><a name="18954" href="Session.html#18954" class="Bound"
  >I</a
  ><a name="18955"
  > </a
  ><a name="18956" href="Session.html#18956" class="Bound"
  >O</a
  ><a name="18957"
  > </a
  ><a name="18958" href="Session.html#18958" class="Bound"
  >A</a
  ><a name="18959"
  > </a
  ><a name="18960" class="Symbol"
  >:</a
  ><a name="18961"
  > </a
  ><a name="18962" class="PrimitiveType"
  >Set</a
  ><a name="18965" class="Symbol"
  >}{</a
  ><a name="18967" href="Session.html#18967" class="Bound"
  >T</a
  ><a name="18968"
  > </a
  ><a name="18969" class="Symbol"
  >:</a
  ><a name="18970"
  > </a
  ><a name="18971" href="Session.html#18958" class="Bound"
  >A</a
  ><a name="18972"
  > </a
  ><a name="18973" class="Symbol"
  >&#8594;</a
  ><a name="18974"
  > </a
  ><a name="18975" href="Session.html#3667" class="Function"
  >De</a
  ><a name="18977"
  > </a
  ><a name="18978" href="Session.html#18954" class="Bound"
  >I</a
  ><a name="18979" class="Symbol"
  >}{</a
  ><a name="18981" href="Session.html#18981" class="Bound"
  >s</a
  ><a name="18982" class="Symbol"
  >}</a
  ><a name="18983"
  > </a
  ><a name="18984" class="Symbol"
  >&#8594;</a
  ><a name="18985"
  >
      </a
  ><a name="18992" class="Symbol"
  >(</a
  ><a name="18993" href="Session.html#18993" class="Bound"
  >i</a
  ><a name="18994"
  > </a
  ><a name="18995" class="Symbol"
  >:</a
  ><a name="18996"
  > </a
  ><a name="18997" class="Symbol"
  >(</a
  ><a name="18998" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="18999"
  > </a
  ><a name="19000" href="Session.html#18981" class="Bound"
  >s</a
  ><a name="19001"
  > </a
  ><a name="19002" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19003"
  > </a
  ><a name="19004" href="Session.html#18954" class="Bound"
  >I</a
  ><a name="19005"
  > </a
  ><a name="19006" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19007"
  > </a
  ><a name="19008" href="Session.html#18956" class="Bound"
  >O</a
  ><a name="19009"
  > </a
  ><a name="19010" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19011"
  > </a
  ><a name="19012" href="Session.html#5136" class="Function Operator"
  >[</a
  ><a name="19013"
  > </a
  ><a name="19014" href="Session.html#18981" class="Bound"
  >s</a
  ><a name="19015"
  > </a
  ><a name="19016" href="Session.html#5136" class="Function Operator"
  >]&#931;</a
  ><a name="19018"
  > </a
  ><a name="19019" href="Session.html#18958" class="Bound"
  >A</a
  ><a name="19020"
  > </a
  ><a name="19021" class="Symbol"
  >(</a
  ><a name="19022" href="Session.html#4060" class="InductiveConstructor"
  >`^</a
  ><a name="19024"
  > </a
  ><a name="19025" href="Session.html#18967" class="Bound"
  >T</a
  ><a name="19026" class="Symbol"
  >))</a
  ><a name="19028"
  > </a
  ><a name="19029" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="19030"
  > </a
  ><a name="19031" href="Session.html#18951" class="Bound"
  >&#915;</a
  ><a name="19032" class="Symbol"
  >)</a
  ><a name="19033"
  > </a
  ><a name="19034" class="Symbol"
  >&#8594;</a
  ><a name="19035"
  >
      </a
  ><a name="19042" class="Symbol"
  >(</a
  ><a name="19043" href="Session.html#19043" class="Bound"
  >a</a
  ><a name="19044"
  > </a
  ><a name="19045" class="Symbol"
  >:</a
  ><a name="19046"
  > </a
  ><a name="19047" href="Session.html#18958" class="Bound"
  >A</a
  ><a name="19048" class="Symbol"
  >)</a
  ><a name="19049"
  > </a
  ><a name="19050" class="Symbol"
  >&#8594;</a
  ><a name="19051"
  > </a
  ><a name="19052" href="Session.html#18951" class="Bound"
  >&#915;</a
  ><a name="19053"
  > </a
  ><a name="19054" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="19055"
  > </a
  ><a name="19056" href="Session.html#18949" class="Bound"
  >M</a
  ><a name="19057"
  > </a
  ><a name="19058" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="19059"
  > </a
  ><a name="19060" href="Session.html#18958" class="Bound"
  >A</a
  ><a name="19061"
  > </a
  ><a name="19062" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="19064"
  > </a
  ><a name="19065" class="Symbol"
  >(</a
  ><a name="19066" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="19068"
  > </a
  ><a name="19069" class="Symbol"
  >(</a
  ><a name="19070" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="19071"
  > </a
  ><a name="19072" href="Session.html#18981" class="Bound"
  >s</a
  ><a name="19073"
  > </a
  ><a name="19074" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19075"
  > </a
  ><a name="19076" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="19078"
  > </a
  ><a name="19079" href="Session.html#18967" class="Bound"
  >T</a
  ><a name="19080"
  > </a
  ><a name="19081" href="Session.html#19043" class="Bound"
  >a</a
  ><a name="19082" class="Symbol"
  >)</a
  ><a name="19083"
  > </a
  ><a name="19084" class="Symbol"
  >(</a
  ><a name="19085" href="Session.Base.html#3541" class="Function"
  >&#8712;ud</a
  ><a name="19088"
  > </a
  ><a name="19089" href="Session.html#18993" class="Bound"
  >i</a
  ><a name="19090" class="Symbol"
  >))</a
  ><a name="19092"
  >
</a
  ><a name="19093" href="Session.html#18940" class="Function"
  >put</a
  ><a name="19096"
  > </a
  ><a name="19097" href="Session.html#19097" class="Bound"
  >i</a
  ><a name="19098"
  > </a
  ><a name="19099" href="Session.html#19099" class="Bound"
  >a</a
  ><a name="19100"
  > </a
  ><a name="19101" class="Symbol"
  >=</a
  ><a name="19102"
  > </a
  ><a name="19103" href="Session.html#17653" class="InductiveConstructor"
  >write</a
  ><a name="19108"
  > </a
  ><a name="19109" href="Session.html#19097" class="Bound"
  >i</a
  ><a name="19110"
  > </a
  ><a name="19111" href="Session.html#19099" class="Bound"
  >a</a
  ><a name="19112"
  > </a
  ><a name="19113" href="Session.html#16491" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="19115"
  > </a
  ><a name="19116" class="Symbol"
  >&#955;</a
  ><a name="19117"
  > </a
  ><a name="19118" href="Session.html#19118" class="Bound"
  >_</a
  ><a name="19119"
  > </a
  ><a name="19120" class="Symbol"
  >&#8594;</a
  ><a name="19121"
  > </a
  ><a name="19122" href="Session.html#17983" class="InductiveConstructor"
  >at</a
  ><a name="19124"
  > </a
  ><a name="19125" class="Symbol"
  >(</a
  ><a name="19126" href="Session.Base.html#3541" class="Function"
  >&#8712;ud</a
  ><a name="19129"
  > </a
  ><a name="19130" href="Session.html#19097" class="Bound"
  >i</a
  ><a name="19131" class="Symbol"
  >)</a
  ><a name="19132"
  >

</a
  ><a name="19134" href="Session.html#19134" class="Function"
  >get</a
  ><a name="19137"
  > </a
  ><a name="19138" class="Symbol"
  >:</a
  ><a name="19139"
  > </a
  ><a name="19140" class="Symbol"
  >&#8704;</a
  ><a name="19141"
  > </a
  ><a name="19142" class="Symbol"
  >{</a
  ><a name="19143" href="Session.html#19143" class="Bound"
  >M</a
  ><a name="19144"
  > </a
  ><a name="19145" href="Session.html#19145" class="Bound"
  >&#915;</a
  ><a name="19146"
  > </a
  ><a name="19147" href="Session.html#19147" class="Bound"
  >&#916;</a
  ><a name="19148" class="Symbol"
  >}{</a
  ><a name="19150" href="Session.html#19150" class="Bound"
  >I</a
  ><a name="19151"
  > </a
  ><a name="19152" href="Session.html#19152" class="Bound"
  >O</a
  ><a name="19153"
  > </a
  ><a name="19154" href="Session.html#19154" class="Bound"
  >A</a
  ><a name="19155"
  > </a
  ><a name="19156" href="Session.html#19156" class="Bound"
  >B</a
  ><a name="19157"
  > </a
  ><a name="19158" class="Symbol"
  >:</a
  ><a name="19159"
  > </a
  ><a name="19160" class="PrimitiveType"
  >Set</a
  ><a name="19163" class="Symbol"
  >}{</a
  ><a name="19165" href="Session.html#19165" class="Bound"
  >T</a
  ><a name="19166"
  > </a
  ><a name="19167" class="Symbol"
  >:</a
  ><a name="19168"
  > </a
  ><a name="19169" href="Session.html#19154" class="Bound"
  >A</a
  ><a name="19170"
  > </a
  ><a name="19171" class="Symbol"
  >&#8594;</a
  ><a name="19172"
  > </a
  ><a name="19173" href="Session.html#3667" class="Function"
  >De</a
  ><a name="19175"
  > </a
  ><a name="19176" href="Session.html#19150" class="Bound"
  >I</a
  ><a name="19177" class="Symbol"
  >}{</a
  ><a name="19179" href="Session.html#19179" class="Bound"
  >s</a
  ><a name="19180" class="Symbol"
  >}</a
  ><a name="19181"
  >
      </a
  ><a name="19188" class="Symbol"
  >(</a
  ><a name="19189" href="Session.html#19189" class="Bound"
  >i</a
  ><a name="19190"
  > </a
  ><a name="19191" class="Symbol"
  >:</a
  ><a name="19192"
  > </a
  ><a name="19193" class="Symbol"
  >(</a
  ><a name="19194" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="19195"
  > </a
  ><a name="19196" href="Session.html#19179" class="Bound"
  >s</a
  ><a name="19197"
  > </a
  ><a name="19198" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19199"
  > </a
  ><a name="19200" href="Session.html#19150" class="Bound"
  >I</a
  ><a name="19201"
  > </a
  ><a name="19202" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19203"
  > </a
  ><a name="19204" href="Session.html#19152" class="Bound"
  >O</a
  ><a name="19205"
  > </a
  ><a name="19206" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19207"
  > </a
  ><a name="19208" href="Session.html#5143" class="Function Operator"
  >[</a
  ><a name="19209"
  > </a
  ><a name="19210" href="Session.html#19179" class="Bound"
  >s</a
  ><a name="19211"
  > </a
  ><a name="19212" href="Session.html#5143" class="Function Operator"
  >]&#928;</a
  ><a name="19214"
  > </a
  ><a name="19215" href="Session.html#19154" class="Bound"
  >A</a
  ><a name="19216"
  > </a
  ><a name="19217" class="Symbol"
  >(</a
  ><a name="19218" href="Session.html#4060" class="InductiveConstructor"
  >`^</a
  ><a name="19220"
  > </a
  ><a name="19221" href="Session.html#19165" class="Bound"
  >T</a
  ><a name="19222" class="Symbol"
  >))</a
  ><a name="19224"
  > </a
  ><a name="19225" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="19226"
  > </a
  ><a name="19227" href="Session.html#19145" class="Bound"
  >&#915;</a
  ><a name="19228" class="Symbol"
  >)</a
  ><a name="19229"
  > </a
  ><a name="19230" class="Symbol"
  >&#8594;</a
  ><a name="19231"
  >
      </a
  ><a name="19238" class="Symbol"
  >(</a
  ><a name="19239" href="Session.html#19239" class="Bound"
  >f</a
  ><a name="19240"
  > </a
  ><a name="19241" class="Symbol"
  >:</a
  ><a name="19242"
  > </a
  ><a name="19243" class="Symbol"
  >&#8704;</a
  ><a name="19244"
  > </a
  ><a name="19245" href="Session.html#19245" class="Bound"
  >a</a
  ><a name="19246"
  > </a
  ><a name="19247" class="Symbol"
  >&#8594;</a
  ><a name="19248"
  > </a
  ><a name="19249" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="19251"
  > </a
  ><a name="19252" class="Symbol"
  >(</a
  ><a name="19253" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="19254"
  > </a
  ><a name="19255" href="Session.html#19179" class="Bound"
  >s</a
  ><a name="19256"
  > </a
  ><a name="19257" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19258"
  > </a
  ><a name="19259" href="Session.html#8609" class="InductiveConstructor Operator"
  >%2</a
  ><a name="19261"
  > </a
  ><a name="19262" href="Session.html#19165" class="Bound"
  >T</a
  ><a name="19263"
  > </a
  ><a name="19264" href="Session.html#19245" class="Bound"
  >a</a
  ><a name="19265" class="Symbol"
  >)</a
  ><a name="19266"
  > </a
  ><a name="19267" class="Symbol"
  >(</a
  ><a name="19268" href="Session.Base.html#3541" class="Function"
  >&#8712;ud</a
  ><a name="19271"
  > </a
  ><a name="19272" href="Session.html#19189" class="Bound"
  >i</a
  ><a name="19273" class="Symbol"
  >)</a
  ><a name="19274"
  > </a
  ><a name="19275" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="19276"
  > </a
  ><a name="19277" href="Session.html#19143" class="Bound"
  >M</a
  ><a name="19278"
  > </a
  ><a name="19279" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="19280"
  > </a
  ><a name="19281" href="Session.html#19156" class="Bound"
  >B</a
  ><a name="19282"
  > </a
  ><a name="19283" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="19285"
  > </a
  ><a name="19286" href="Session.html#19147" class="Bound"
  >&#916;</a
  ><a name="19287" class="Symbol"
  >)</a
  ><a name="19288"
  > </a
  ><a name="19289" class="Symbol"
  >&#8594;</a
  ><a name="19290"
  >
      </a
  ><a name="19297" href="Session.html#19145" class="Bound"
  >&#915;</a
  ><a name="19298"
  > </a
  ><a name="19299" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="19300"
  > </a
  ><a name="19301" href="Session.html#19143" class="Bound"
  >M</a
  ><a name="19302"
  > </a
  ><a name="19303" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="19304"
  > </a
  ><a name="19305" href="Session.html#19156" class="Bound"
  >B</a
  ><a name="19306"
  > </a
  ><a name="19307" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="19309"
  > </a
  ><a name="19310" href="Session.html#19147" class="Bound"
  >&#916;</a
  ><a name="19311"
  >
</a
  ><a name="19312" href="Session.html#19134" class="Function"
  >get</a
  ><a name="19315"
  > </a
  ><a name="19316" href="Session.html#19316" class="Bound"
  >i</a
  ><a name="19317"
  > </a
  ><a name="19318" href="Session.html#19318" class="Bound"
  >f</a
  ><a name="19319"
  > </a
  ><a name="19320" class="Symbol"
  >=</a
  ><a name="19321"
  > </a
  ><a name="19322" href="Session.html#17727" class="InductiveConstructor"
  >read</a
  ><a name="19326"
  > </a
  ><a name="19327" href="Session.html#19316" class="Bound"
  >i</a
  ><a name="19328"
  > </a
  ><a name="19329" href="Session.html#16491" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="19331"
  > </a
  ><a name="19332" class="Symbol"
  >&#955;</a
  ><a name="19333"
  > </a
  ><a name="19334" href="Session.html#19334" class="Bound"
  >a</a
  ><a name="19335"
  > </a
  ><a name="19336" class="Symbol"
  >&#8594;</a
  ><a name="19337"
  > </a
  ><a name="19338" href="Session.html#17983" class="InductiveConstructor"
  >at</a
  ><a name="19340"
  > </a
  ><a name="19341" class="Symbol"
  >(</a
  ><a name="19342" href="Session.Base.html#3541" class="Function"
  >&#8712;ud</a
  ><a name="19345"
  > </a
  ><a name="19346" href="Session.html#19316" class="Bound"
  >i</a
  ><a name="19347" class="Symbol"
  >)</a
  ><a name="19348"
  > </a
  ><a name="19349" href="Session.html#18603" class="Function Operator"
  >&#187;</a
  ><a name="19350"
  > </a
  ><a name="19351" href="Session.html#19318" class="Bound"
  >f</a
  ><a name="19352"
  > </a
  ><a name="19353" href="Session.html#19334" class="Bound"
  >a</a
  ><a name="19354"
  ></pre>
<h4 id="new-channel-for--indexed-sessions"><code>new</code> channel for ⊤-indexed sessions</h4>
<p>We often create channels for stateful sessions where both index sets are <code>⊤</code>: using <code>new⊤</code> helps inference.</p>
<pre></a
  ><a name="19532" href="Session.html#19532" class="Function"
  >new&#8868;</a
  ><a name="19536"
  > </a
  ><a name="19537" class="Symbol"
  >:</a
  ><a name="19538"
  > </a
  ><a name="19539" class="Symbol"
  >&#8704;</a
  ><a name="19540"
  > </a
  ><a name="19541" class="Symbol"
  >{</a
  ><a name="19542" href="Session.html#19542" class="Bound"
  >&#915;</a
  ><a name="19543"
  > </a
  ><a name="19544" href="Session.html#19544" class="Bound"
  >M</a
  ><a name="19545"
  > </a
  ><a name="19546" href="Session.html#19546" class="Bound"
  >F</a
  ><a name="19547" class="Symbol"
  >}</a
  ><a name="19548"
  > </a
  ><a name="19549" class="Symbol"
  >&#8594;</a
  ><a name="19550"
  > </a
  ><a name="19551" href="Session.html#19542" class="Bound"
  >&#915;</a
  ><a name="19552"
  > </a
  ><a name="19553" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="19554"
  > </a
  ><a name="19555" href="Session.html#19544" class="Bound"
  >M</a
  ><a name="19556"
  > </a
  ><a name="19557" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="19558"
  > </a
  ><a name="19559" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="19560"
  > </a
  ><a name="19561" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="19563"
  > </a
  ><a name="19564" href="Session.html#19542" class="Bound"
  >&#915;</a
  ><a name="19565"
  > </a
  ><a name="19566" href="Session.Base.html#424" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="19567"
  > </a
  ><a name="19568" class="Symbol"
  >(</a
  ><a name="19569" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="19570"
  > </a
  ><a name="19571" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19572"
  > </a
  ><a name="19573" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="19574"
  > </a
  ><a name="19575" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19576"
  > </a
  ><a name="19577" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="19578"
  > </a
  ><a name="19579" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19580"
  > </a
  ><a name="19581" href="Session.html#19546" class="Bound"
  >F</a
  ><a name="19582" class="Symbol"
  >)</a
  ><a name="19583"
  >
</a
  ><a name="19584" href="Session.html#19532" class="Function"
  >new&#8868;</a
  ><a name="19588"
  > </a
  ><a name="19589" class="Symbol"
  >=</a
  ><a name="19590"
  > </a
  ><a name="19591" href="Session.html#17135" class="InductiveConstructor"
  >new</a
  ><a name="19594"
  ></pre>
<h2 id="haskell-evaluator">Haskell evaluator</h2>
<p>To make an efficient use of Haskell channels, while forgetting the data required to compute their &quot;changing&quot; types, we resort to making a <em>sensible</em> use of <strong>unsafe</strong> casts. What follows should therefore be considered as an extension to the <em>trusted base</em>.</p>
<p>We provide <strong>no correctness proof</strong> for this evaluator.</p>
<pre></a
  ><a name="19957" class="Keyword"
  >private</a
  ><a name="19964"
  >

  </a
  ><a name="19968" class="Keyword"
  >postulate</a
  ><a name="19977"
  >
    </a
  ><a name="19982" href="Session.html#19982" class="Postulate"
  >unsafeCoerce</a
  ><a name="19994"
  > </a
  ><a name="19995" class="Symbol"
  >:</a
  ><a name="19996"
  > </a
  ><a name="19997" class="Symbol"
  >&#8704;</a
  ><a name="19998"
  > </a
  ><a name="19999" class="Symbol"
  >{</a
  ><a name="20000" href="Session.html#20000" class="Bound"
  >l1</a
  ><a name="20002" class="Symbol"
  >}{</a
  ><a name="20004" href="Session.html#20004" class="Bound"
  >A</a
  ><a name="20005"
  > </a
  ><a name="20006" class="Symbol"
  >:</a
  ><a name="20007"
  > </a
  ><a name="20008" class="PrimitiveType"
  >Set</a
  ><a name="20011"
  > </a
  ><a name="20012" href="Session.html#20000" class="Bound"
  >l1</a
  ><a name="20014" class="Symbol"
  >}{</a
  ><a name="20016" href="Session.html#20016" class="Bound"
  >l2</a
  ><a name="20018" class="Symbol"
  >}{</a
  ><a name="20020" href="Session.html#20020" class="Bound"
  >B</a
  ><a name="20021"
  > </a
  ><a name="20022" class="Symbol"
  >:</a
  ><a name="20023"
  > </a
  ><a name="20024" class="PrimitiveType"
  >Set</a
  ><a name="20027"
  > </a
  ><a name="20028" href="Session.html#20016" class="Bound"
  >l2</a
  ><a name="20030" class="Symbol"
  >}</a
  ><a name="20031"
  > </a
  ><a name="20032" class="Symbol"
  >&#8594;</a
  ><a name="20033"
  > </a
  ><a name="20034" href="Session.html#20004" class="Bound"
  >A</a
  ><a name="20035"
  > </a
  ><a name="20036" class="Symbol"
  >&#8594;</a
  ><a name="20037"
  > </a
  ><a name="20038" href="Session.html#20020" class="Bound"
  >B</a
  ><a name="20039"
  >

  </a
  ><a name="20043" class="Symbol"
  >{-#</a
  ><a name="20046"
  > </a
  ><a name="20047" class="Keyword"
  >IMPORT</a
  ><a name="20053"
  >   Unsafe.Coerce                                          </a
  ><a name="20111" class="Symbol"
  >#-}</a
  ><a name="20114"
  >
  </a
  ><a name="20117" class="Symbol"
  >{-#</a
  ><a name="20120"
  > </a
  ><a name="20121" class="Keyword"
  >COMPILED</a
  ><a name="20129"
  > </a
  ><a name="20130" href="Session.html#19982" class="Postulate"
  >unsafeCoerce</a
  ><a name="20142"
  > (\ _ _ _ _ -&gt; Unsafe.Coerce.unsafeCoerce) </a
  ><a name="20185" class="Symbol"
  >#-}</a
  ><a name="20188"
  ></pre>

<pre></a
  ><a name="20214" class="Keyword"
  >open</a
  ><a name="20218"
  > </a
  ><a name="20219" class="Keyword"
  >import</a
  ><a name="20225"
  > </a
  ><a name="20226" href="IO.Primitive.html#1" class="Module"
  >IO.Primitive</a
  ><a name="20238"
  > </a
  ><a name="20239" class="Keyword"
  >using</a
  ><a name="20244"
  > </a
  ><a name="20245" class="Symbol"
  >(</a
  ><a name="20246"
  >IO </a
  ><a name="20249" class="Symbol"
  >;</a
  ><a name="20250"
  > return </a
  ><a name="20258" class="Symbol"
  >;</a
  ><a name="20259"
  > _&gt;&gt;=_ </a
  ><a name="20266" class="Symbol"
  >;</a
  ><a name="20267"
  > putStr </a
  ><a name="20275" class="Symbol"
  >;</a
  ><a name="20276"
  > putStrLn</a
  ><a name="20285" class="Symbol"
  >)</a
  ><a name="20286"
  >
</a
  ><a name="20287" class="Keyword"
  >module</a
  ><a name="20293"
  > </a
  ><a name="20294" href="Session.html#20294" class="Module"
  >IO</a
  ><a name="20296"
  > </a
  ><a name="20297" class="Symbol"
  >=</a
  ><a name="20298"
  > </a
  ><a name="20299" href="IO.Primitive.html#1" class="Module"
  >IO.Primitive</a
  ><a name="20311"
  ></pre>

<pre></a
  ><a name="20337" class="Keyword"
  >infix</a
  ><a name="20342"
  > </a
  ><a name="20343" class="Number"
  >2</a
  ><a name="20344"
  > _[IO_]&gt;_
</a
  ><a name="20354" href="Session.html#20354" class="Function Operator"
  >_[IO_]&gt;_</a
  ><a name="20362"
  > </a
  ><a name="20363" class="Symbol"
  >=</a
  ><a name="20364"
  > </a
  ><a name="20365" class="Symbol"
  >&#955;</a
  ><a name="20366"
  > </a
  ><a name="20367" href="Session.html#20367" class="Bound"
  >&#915;</a
  ><a name="20368"
  > </a
  ><a name="20369" href="Session.html#20369" class="Bound"
  >X</a
  ><a name="20370"
  > </a
  ><a name="20371" href="Session.html#20371" class="Bound"
  >&#916;</a
  ><a name="20372"
  > </a
  ><a name="20373" class="Symbol"
  >&#8594;</a
  ><a name="20374"
  > </a
  ><a name="20375" href="Session.html#20367" class="Bound"
  >&#915;</a
  ><a name="20376"
  > </a
  ><a name="20377" href="Session.html#16288" class="Datatype Operator"
  >[</a
  ><a name="20378"
  > </a
  ><a name="20379" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="20381"
  > </a
  ><a name="20382" href="Session.html#16288" class="Datatype Operator"
  >&#8866;</a
  ><a name="20383"
  > </a
  ><a name="20384" href="Session.html#20369" class="Bound"
  >X</a
  ><a name="20385"
  > </a
  ><a name="20386" href="Session.html#16288" class="Datatype Operator"
  >]&gt;</a
  ><a name="20388"
  > </a
  ><a name="20389" href="Session.html#20371" class="Bound"
  >&#916;</a
  ><a name="20390"
  >

</a
  ><a name="20392" href="Session.html#20392" class="Function"
  >IOProc</a
  ><a name="20398"
  > </a
  ><a name="20399" class="Symbol"
  >=</a
  ><a name="20400"
  > </a
  ><a name="20401" class="Symbol"
  >&#955;</a
  ><a name="20402"
  > </a
  ><a name="20403" href="Session.html#20403" class="Bound"
  >X</a
  ><a name="20404"
  > </a
  ><a name="20405" class="Symbol"
  >&#8594;</a
  ><a name="20406"
  > </a
  ><a name="20407" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="20409"
  > </a
  ><a name="20410" href="Session.html#20354" class="Function Operator"
  >[IO</a
  ><a name="20413"
  > </a
  ><a name="20414" href="Session.html#20403" class="Bound"
  >X</a
  ><a name="20415"
  > </a
  ><a name="20416" href="Session.html#20354" class="Function Operator"
  >]&gt;</a
  ><a name="20418"
  > </a
  ><a name="20419" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="20421"
  >

</a
  ><a name="20423" class="Keyword"
  >open</a
  ><a name="20427"
  > </a
  ><a name="20428" class="Keyword"
  >import</a
  ><a name="20434"
  > </a
  ><a name="20435" href="Control.Concurrent.html#1" class="Module"
  >Control.Concurrent</a
  ><a name="20453"
  >
</a
  ><a name="20454" class="Keyword"
  >module</a
  ><a name="20460"
  > </a
  ><a name="20461" href="Session.html#20461" class="Module"
  >C</a
  ><a name="20462"
  >  </a
  ><a name="20464" class="Symbol"
  >=</a
  ><a name="20465"
  > </a
  ><a name="20466" href="Control.Concurrent.html#1" class="Module"
  >Control.Concurrent</a
  ><a name="20484"
  >
</a
  ><a name="20485" class="Keyword"
  >open</a
  ><a name="20489"
  > </a
  ><a name="20490" class="Keyword"
  >import</a
  ><a name="20496"
  > </a
  ><a name="20497" href="Control.Concurrent.Chan.Synchronous.html#1" class="Module"
  >Control.Concurrent.Chan.Synchronous</a
  ><a name="20532"
  >
</a
  ><a name="20533" class="Keyword"
  >module</a
  ><a name="20539"
  > </a
  ><a name="20540" href="Session.html#20540" class="Module"
  >CS</a
  ><a name="20542"
  > </a
  ><a name="20543" class="Symbol"
  >=</a
  ><a name="20544"
  > </a
  ><a name="20545" href="Control.Concurrent.Chan.Synchronous.html#1" class="Module"
  >Control.Concurrent.Chan.Synchronous</a
  ><a name="20580"
  ></pre>
<p>We need our channels to be untyped, to obtain which we postulate an abstract type and use unsafe coercions to and from it.</p>
<p>This is similar to Pucella and Tov's embedding in <a href="http://www.eecs.harvard.edu/~tov/pubs/haskell-session-types/">&quot;Haskell Session Types with (Almost) No Class&quot;</a>.</p>
<pre></a
  ><a name="20893" class="Keyword"
  >postulate</a
  ><a name="20902"
  > </a
  ><a name="20903" href="Session.html#20903" class="Postulate"
  >Abs</a
  ><a name="20906"
  > </a
  ><a name="20907" class="Symbol"
  >:</a
  ><a name="20908"
  > </a
  ><a name="20909" class="PrimitiveType"
  >Set</a
  ><a name="20912"
  >

</a
  ><a name="20914" href="Session.html#20914" class="Function"
  >UChan</a
  ><a name="20919"
  > </a
  ><a name="20920" class="Symbol"
  >=</a
  ><a name="20921"
  > </a
  ><a name="20922" href="Control.Concurrent.Chan.Synchronous.html#131" class="Postulate"
  >Chan</a
  ><a name="20926"
  > </a
  ><a name="20927" href="Session.html#20903" class="Postulate"
  >Abs</a
  ><a name="20930"
  ></pre>
<p>The channels for a context.</p>
<pre></a
  ><a name="20985" href="Session.html#20985" class="Function Operator"
  >&#10214;_&#10215;Cx</a
  ><a name="20990"
  > </a
  ><a name="20991" class="Symbol"
  >:</a
  ><a name="20992"
  > </a
  ><a name="20993" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="20995"
  > </a
  ><a name="20996" class="Symbol"
  >&#8594;</a
  ><a name="20997"
  > </a
  ><a name="20998" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="21002"
  >
</a
  ><a name="21003" href="Session.html#20985" class="Function Operator"
  >&#10214;_&#10215;Cx</a
  ><a name="21008"
  > </a
  ><a name="21009" class="Symbol"
  >=</a
  ><a name="21010"
  > </a
  ><a name="21011" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="21014"
  > </a
  ><a name="21015" class="Symbol"
  >&#955;</a
  ><a name="21016"
  > </a
  ><a name="21017" href="Session.html#21017" class="Bound"
  >_</a
  ><a name="21018"
  > </a
  ><a name="21019" class="Symbol"
  >&#8594;</a
  ><a name="21020"
  > </a
  ><a name="21021" href="Session.html#20914" class="Function"
  >UChan</a
  ><a name="21026"
  ></pre>

<pre></a
  ><a name="21052" href="Session.html#21052" class="Function"
  >lookupUChan</a
  ><a name="21063"
  > </a
  ><a name="21064" class="Symbol"
  >:</a
  ><a name="21065"
  > </a
  ><a name="21066" class="Symbol"
  >&#8704;</a
  ><a name="21067"
  > </a
  ><a name="21068" class="Symbol"
  >{</a
  ><a name="21069" href="Session.html#21069" class="Bound"
  >&#915;</a
  ><a name="21070"
  > </a
  ><a name="21071" href="Session.html#21071" class="Bound"
  >C</a
  ><a name="21072" class="Symbol"
  >}</a
  ><a name="21073"
  > </a
  ><a name="21074" class="Symbol"
  >&#8594;</a
  ><a name="21075"
  > </a
  ><a name="21076" class="Symbol"
  >(</a
  ><a name="21077" href="Session.html#21077" class="Bound"
  >i</a
  ><a name="21078"
  > </a
  ><a name="21079" class="Symbol"
  >:</a
  ><a name="21080"
  > </a
  ><a name="21081" href="Session.html#21071" class="Bound"
  >C</a
  ><a name="21082"
  > </a
  ><a name="21083" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="21084"
  > </a
  ><a name="21085" href="Session.html#21069" class="Bound"
  >&#915;</a
  ><a name="21086" class="Symbol"
  >)</a
  ><a name="21087"
  > </a
  ><a name="21088" class="Symbol"
  >&#8594;</a
  ><a name="21089"
  > </a
  ><a name="21090" href="Session.html#20985" class="Function Operator"
  >&#10214;</a
  ><a name="21091"
  > </a
  ><a name="21092" href="Session.html#21069" class="Bound"
  >&#915;</a
  ><a name="21093"
  > </a
  ><a name="21094" href="Session.html#20985" class="Function Operator"
  >&#10215;Cx</a
  ><a name="21097"
  > </a
  ><a name="21098" class="Symbol"
  >&#8594;</a
  ><a name="21099"
  > </a
  ><a name="21100" href="Session.html#20914" class="Function"
  >UChan</a
  ><a name="21105"
  >
</a
  ><a name="21106" href="Session.html#21052" class="Function"
  >lookupUChan</a
  ><a name="21117"
  > </a
  ><a name="21118" href="Session.html#21118" class="Bound"
  >i</a
  ><a name="21119"
  > </a
  ><a name="21120" href="Session.html#21120" class="Bound"
  >cs</a
  ><a name="21122"
  > </a
  ><a name="21123" class="Symbol"
  >=</a
  ><a name="21124"
  > </a
  ><a name="21125" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="21128"
  > </a
  ><a name="21129" class="Symbol"
  >(</a
  ><a name="21130" href="Session.Base.html#3865" class="Function"
  >lookupAll</a
  ><a name="21139"
  > </a
  ><a name="21140" href="Session.html#21118" class="Bound"
  >i</a
  ><a name="21141"
  > </a
  ><a name="21142" href="Session.html#21120" class="Bound"
  >cs</a
  ><a name="21144" class="Symbol"
  >)</a
  ><a name="21145"
  ></pre>
<p>We need some Haskell helpers.</p>
<p>Note that our channels are ultimately implemented on top of Jesse Tov's <code>synchronous-channels</code> package: for this reason, currently all the interactions are synchronous (blocking).</p>
<pre></a
  ><a name="21383" class="Keyword"
  >infixl</a
  ><a name="21389"
  > </a
  ><a name="21390" class="Number"
  >1</a
  ><a name="21391"
  > _&gt;&gt;_

</a
  ><a name="21398" href="Session.html#21398" class="Function Operator"
  >_&gt;&gt;_</a
  ><a name="21402"
  > </a
  ><a name="21403" class="Symbol"
  >:</a
  ><a name="21404"
  > </a
  ><a name="21405" class="Symbol"
  >&#8704;</a
  ><a name="21406"
  > </a
  ><a name="21407" class="Symbol"
  >{</a
  ><a name="21408" href="Session.html#21408" class="Bound"
  >lA</a
  ><a name="21410"
  > </a
  ><a name="21411" href="Session.html#21411" class="Bound"
  >lB</a
  ><a name="21413" class="Symbol"
  >}{</a
  ><a name="21415" href="Session.html#21415" class="Bound"
  >A</a
  ><a name="21416"
  > </a
  ><a name="21417" class="Symbol"
  >:</a
  ><a name="21418"
  > </a
  ><a name="21419" class="PrimitiveType"
  >Set</a
  ><a name="21422"
  > </a
  ><a name="21423" href="Session.html#21408" class="Bound"
  >lA</a
  ><a name="21425" class="Symbol"
  >}{</a
  ><a name="21427" href="Session.html#21427" class="Bound"
  >B</a
  ><a name="21428"
  > </a
  ><a name="21429" class="Symbol"
  >:</a
  ><a name="21430"
  > </a
  ><a name="21431" class="PrimitiveType"
  >Set</a
  ><a name="21434"
  > </a
  ><a name="21435" href="Session.html#21411" class="Bound"
  >lB</a
  ><a name="21437" class="Symbol"
  >}</a
  ><a name="21438"
  > </a
  ><a name="21439" class="Symbol"
  >&#8594;</a
  ><a name="21440"
  > </a
  ><a name="21441" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21443"
  > </a
  ><a name="21444" href="Session.html#21415" class="Bound"
  >A</a
  ><a name="21445"
  > </a
  ><a name="21446" class="Symbol"
  >&#8594;</a
  ><a name="21447"
  > </a
  ><a name="21448" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21450"
  > </a
  ><a name="21451" href="Session.html#21427" class="Bound"
  >B</a
  ><a name="21452"
  > </a
  ><a name="21453" class="Symbol"
  >&#8594;</a
  ><a name="21454"
  > </a
  ><a name="21455" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21457"
  > </a
  ><a name="21458" href="Session.html#21427" class="Bound"
  >B</a
  ><a name="21459"
  >
</a
  ><a name="21460" href="Session.html#21460" class="Bound"
  >m</a
  ><a name="21461"
  > </a
  ><a name="21462" href="Session.html#21398" class="Function Operator"
  >&gt;&gt;</a
  ><a name="21464"
  > </a
  ><a name="21465" href="Session.html#21465" class="Bound"
  >n</a
  ><a name="21466"
  > </a
  ><a name="21467" class="Symbol"
  >=</a
  ><a name="21468"
  > </a
  ><a name="21469" href="Session.html#21460" class="Bound"
  >m</a
  ><a name="21470"
  > </a
  ><a name="21471" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="21474"
  > </a
  ><a name="21475" class="Symbol"
  >&#955;</a
  ><a name="21476"
  > </a
  ><a name="21477" href="Session.html#21477" class="Bound"
  >_</a
  ><a name="21478"
  > </a
  ><a name="21479" class="Symbol"
  >&#8594;</a
  ><a name="21480"
  > </a
  ><a name="21481" href="Session.html#21465" class="Bound"
  >n</a
  ><a name="21482"
  >

</a
  ><a name="21484" href="Session.html#21484" class="Function"
  >mapIO</a
  ><a name="21489"
  > </a
  ><a name="21490" class="Symbol"
  >:</a
  ><a name="21491"
  > </a
  ><a name="21492" class="Symbol"
  >&#8704;</a
  ><a name="21493"
  > </a
  ><a name="21494" class="Symbol"
  >{</a
  ><a name="21495" href="Session.html#21495" class="Bound"
  >lA</a
  ><a name="21497"
  > </a
  ><a name="21498" href="Session.html#21498" class="Bound"
  >lB</a
  ><a name="21500" class="Symbol"
  >}{</a
  ><a name="21502" href="Session.html#21502" class="Bound"
  >A</a
  ><a name="21503"
  > </a
  ><a name="21504" class="Symbol"
  >:</a
  ><a name="21505"
  > </a
  ><a name="21506" class="PrimitiveType"
  >Set</a
  ><a name="21509"
  > </a
  ><a name="21510" href="Session.html#21495" class="Bound"
  >lA</a
  ><a name="21512" class="Symbol"
  >}{</a
  ><a name="21514" href="Session.html#21514" class="Bound"
  >B</a
  ><a name="21515"
  > </a
  ><a name="21516" class="Symbol"
  >:</a
  ><a name="21517"
  > </a
  ><a name="21518" class="PrimitiveType"
  >Set</a
  ><a name="21521"
  > </a
  ><a name="21522" href="Session.html#21498" class="Bound"
  >lB</a
  ><a name="21524" class="Symbol"
  >}</a
  ><a name="21525"
  > </a
  ><a name="21526" class="Symbol"
  >&#8594;</a
  ><a name="21527"
  > </a
  ><a name="21528" class="Symbol"
  >(</a
  ><a name="21529" href="Session.html#21502" class="Bound"
  >A</a
  ><a name="21530"
  > </a
  ><a name="21531" class="Symbol"
  >&#8594;</a
  ><a name="21532"
  > </a
  ><a name="21533" href="Session.html#21514" class="Bound"
  >B</a
  ><a name="21534" class="Symbol"
  >)</a
  ><a name="21535"
  > </a
  ><a name="21536" class="Symbol"
  >&#8594;</a
  ><a name="21537"
  > </a
  ><a name="21538" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21540"
  > </a
  ><a name="21541" href="Session.html#21502" class="Bound"
  >A</a
  ><a name="21542"
  > </a
  ><a name="21543" class="Symbol"
  >&#8594;</a
  ><a name="21544"
  > </a
  ><a name="21545" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21547"
  > </a
  ><a name="21548" href="Session.html#21514" class="Bound"
  >B</a
  ><a name="21549"
  >
</a
  ><a name="21550" href="Session.html#21484" class="Function"
  >mapIO</a
  ><a name="21555"
  > </a
  ><a name="21556" href="Session.html#21556" class="Bound"
  >f</a
  ><a name="21557"
  > </a
  ><a name="21558" href="Session.html#21558" class="Bound"
  >xs</a
  ><a name="21560"
  > </a
  ><a name="21561" class="Symbol"
  >=</a
  ><a name="21562"
  > </a
  ><a name="21563" href="Session.html#21558" class="Bound"
  >xs</a
  ><a name="21565"
  > </a
  ><a name="21566" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="21569"
  > </a
  ><a name="21570" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="21576"
  > </a
  ><a name="21577" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="21578"
  > </a
  ><a name="21579" href="Session.html#21556" class="Bound"
  >f</a
  ><a name="21580"
  ></pre>
<p>Every communication with the untyped channels uses <code>unsafeCoerce</code>.</p>
<pre></a
  ><a name="21674" href="Session.html#21674" class="Function"
  >writeUChan</a
  ><a name="21684"
  > </a
  ><a name="21685" class="Symbol"
  >:</a
  ><a name="21686"
  > </a
  ><a name="21687" class="Symbol"
  >{</a
  ><a name="21688" href="Session.html#21688" class="Bound"
  >A</a
  ><a name="21689"
  > </a
  ><a name="21690" class="Symbol"
  >:</a
  ><a name="21691"
  > </a
  ><a name="21692" class="PrimitiveType"
  >Set</a
  ><a name="21695" class="Symbol"
  >}</a
  ><a name="21696"
  > </a
  ><a name="21697" class="Symbol"
  >&#8594;</a
  ><a name="21698"
  > </a
  ><a name="21699" href="Session.html#20914" class="Function"
  >UChan</a
  ><a name="21704"
  > </a
  ><a name="21705" class="Symbol"
  >&#8594;</a
  ><a name="21706"
  > </a
  ><a name="21707" href="Session.html#21688" class="Bound"
  >A</a
  ><a name="21708"
  > </a
  ><a name="21709" class="Symbol"
  >&#8594;</a
  ><a name="21710"
  > </a
  ><a name="21711" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21713"
  > </a
  ><a name="21714" href="Unit.html#194" class="Function"
  >C.&lt;&gt;</a
  ><a name="21718"
  >
</a
  ><a name="21719" href="Session.html#21674" class="Function"
  >writeUChan</a
  ><a name="21729"
  > </a
  ><a name="21730" href="Session.html#21730" class="Bound"
  >c</a
  ><a name="21731"
  > </a
  ><a name="21732" class="Symbol"
  >=</a
  ><a name="21733"
  > </a
  ><a name="21734" href="Control.Concurrent.Chan.Synchronous.html#345" class="Postulate"
  >writeChan</a
  ><a name="21743"
  > </a
  ><a name="21744" href="Session.html#21730" class="Bound"
  >c</a
  ><a name="21745"
  > </a
  ><a name="21746" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="21747"
  > </a
  ><a name="21748" href="Session.html#19982" class="Postulate"
  >unsafeCoerce</a
  ><a name="21760"
  >

</a
  ><a name="21762" href="Session.html#21762" class="Function"
  >readUChan</a
  ><a name="21771"
  > </a
  ><a name="21772" class="Symbol"
  >:</a
  ><a name="21773"
  > </a
  ><a name="21774" class="Symbol"
  >{</a
  ><a name="21775" href="Session.html#21775" class="Bound"
  >A</a
  ><a name="21776"
  > </a
  ><a name="21777" class="Symbol"
  >:</a
  ><a name="21778"
  > </a
  ><a name="21779" class="PrimitiveType"
  >Set</a
  ><a name="21782" class="Symbol"
  >}</a
  ><a name="21783"
  > </a
  ><a name="21784" class="Symbol"
  >&#8594;</a
  ><a name="21785"
  > </a
  ><a name="21786" href="Session.html#20914" class="Function"
  >UChan</a
  ><a name="21791"
  > </a
  ><a name="21792" class="Symbol"
  >&#8594;</a
  ><a name="21793"
  > </a
  ><a name="21794" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21796"
  > </a
  ><a name="21797" href="Session.html#21775" class="Bound"
  >A</a
  ><a name="21798"
  >
</a
  ><a name="21799" href="Session.html#21762" class="Function"
  >readUChan</a
  ><a name="21808"
  > </a
  ><a name="21809" class="Symbol"
  >{</a
  ><a name="21810"
  >A </a
  ><a name="21812" class="Symbol"
  >=</a
  ><a name="21813"
  > </a
  ><a name="21814" href="Session.html#21814" class="Bound"
  >A</a
  ><a name="21815" class="Symbol"
  >}</a
  ><a name="21816"
  > </a
  ><a name="21817" href="Session.html#21817" class="Bound"
  >c</a
  ><a name="21818"
  > </a
  ><a name="21819" class="Symbol"
  >=</a
  ><a name="21820"
  > </a
  ><a name="21821" href="Control.Concurrent.Chan.Synchronous.html#397" class="Postulate"
  >readChan</a
  ><a name="21829"
  > </a
  ><a name="21830" href="Session.html#21817" class="Bound"
  >c</a
  ><a name="21831"
  > </a
  ><a name="21832" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="21835"
  > </a
  ><a name="21836" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="21842"
  > </a
  ><a name="21843" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="21844"
  > </a
  ><a name="21845" href="Session.html#19982" class="Postulate"
  >unsafeCoerce</a
  ><a name="21857"
  ></pre>
<p>Here is the actual test evaluator, to implement which we disable termination checking: we already use &quot;unsafe&quot; features so we do not bother defining a <em>coinductive</em> wrapper as in the <code>IO</code> module of Agda's standard library.</p>
<pre></a
  ><a name="22107" class="Symbol"
  >{-#</a
  ><a name="22110"
  > </a
  ><a name="22111" class="Keyword"
  >NO_TERMINATION_CHECK</a
  ><a name="22131"
  > </a
  ><a name="22132" class="Symbol"
  >#-}</a
  ><a name="22135"
  >
</a
  ><a name="22136" href="Session.html#22136" class="Function"
  >run</a
  ><a name="22139"
  > </a
  ><a name="22140" class="Symbol"
  >:</a
  ><a name="22141"
  > </a
  ><a name="22142" class="Symbol"
  >{</a
  ><a name="22143" href="Session.html#22143" class="Bound"
  >&#915;</a
  ><a name="22144"
  > </a
  ><a name="22145" href="Session.html#22145" class="Bound"
  >&#916;</a
  ><a name="22146"
  > </a
  ><a name="22147" class="Symbol"
  >:</a
  ><a name="22148"
  > </a
  ><a name="22149" href="Session.html#5929" class="Function"
  >Cx</a
  ><a name="22151" class="Symbol"
  >}{</a
  ><a name="22153" href="Session.html#22153" class="Bound"
  >X</a
  ><a name="22154"
  > </a
  ><a name="22155" class="Symbol"
  >:</a
  ><a name="22156"
  > </a
  ><a name="22157" class="PrimitiveType"
  >Set</a
  ><a name="22160" class="Symbol"
  >}</a
  ><a name="22161"
  > </a
  ><a name="22162" class="Symbol"
  >&#8594;</a
  ><a name="22163"
  > </a
  ><a name="22164" href="Session.html#22143" class="Bound"
  >&#915;</a
  ><a name="22165"
  > </a
  ><a name="22166" href="Session.html#20354" class="Function Operator"
  >[IO</a
  ><a name="22169"
  > </a
  ><a name="22170" href="Session.html#22153" class="Bound"
  >X</a
  ><a name="22171"
  > </a
  ><a name="22172" href="Session.html#20354" class="Function Operator"
  >]&gt;</a
  ><a name="22174"
  > </a
  ><a name="22175" href="Session.html#22145" class="Bound"
  >&#916;</a
  ><a name="22176"
  > </a
  ><a name="22177" class="Symbol"
  >&#8594;</a
  ><a name="22178"
  > </a
  ><a name="22179" href="Session.html#20985" class="Function Operator"
  >&#10214;</a
  ><a name="22180"
  > </a
  ><a name="22181" href="Session.html#22143" class="Bound"
  >&#915;</a
  ><a name="22182"
  > </a
  ><a name="22183" href="Session.html#20985" class="Function Operator"
  >&#10215;Cx</a
  ><a name="22186"
  > </a
  ><a name="22187" class="Symbol"
  >&#8594;</a
  ><a name="22188"
  > </a
  ><a name="22189" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="22191"
  > </a
  ><a name="22192" class="Symbol"
  >(</a
  ><a name="22193" href="Session.html#22153" class="Bound"
  >X</a
  ><a name="22194"
  > </a
  ><a name="22195" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="22196"
  > </a
  ><a name="22197" href="Session.html#20985" class="Function Operator"
  >&#10214;</a
  ><a name="22198"
  > </a
  ><a name="22199" href="Session.html#22145" class="Bound"
  >&#916;</a
  ><a name="22200"
  > </a
  ><a name="22201" href="Session.html#20985" class="Function Operator"
  >&#10215;Cx</a
  ><a name="22204" class="Symbol"
  >)</a
  ><a name="22205"
  ></pre>
<p>We map the embedded monadic actions to themselves, and the binding syntax to the binding operator for the <code>IO</code> monad.</p>
<pre></a
  ><a name="22350" href="Session.html#22136" class="Function"
  >run</a
  ><a name="22353"
  > </a
  ><a name="22354" class="Symbol"
  >(</a
  ><a name="22355" href="Session.html#16339" class="InductiveConstructor Operator"
  >&#8657;</a
  ><a name="22356"
  > </a
  ><a name="22357" href="Session.html#22357" class="Bound"
  >m</a
  ><a name="22358"
  >           </a
  ><a name="22369" class="Symbol"
  >)</a
  ><a name="22370"
  > </a
  ><a name="22371" href="Session.html#22371" class="Bound"
  >cs</a
  ><a name="22373"
  > </a
  ><a name="22374" class="Symbol"
  >=</a
  ><a name="22375"
  > </a
  ><a name="22376" href="Session.html#21484" class="Function"
  >mapIO</a
  ><a name="22381"
  > </a
  ><a name="22382" class="Symbol"
  >(</a
  ><a name="22383" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="22387"
  > </a
  ><a name="22388" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >_,_</a
  ><a name="22391"
  > </a
  ><a name="22392" href="Session.html#22371" class="Bound"
  >cs</a
  ><a name="22394" class="Symbol"
  >)</a
  ><a name="22395"
  > </a
  ><a name="22396" href="Session.html#22357" class="Bound"
  >m</a
  ><a name="22397"
  >                                           
                                                                                          
</a
  ><a name="22532" href="Session.html#22136" class="Function"
  >run</a
  ><a name="22535"
  > </a
  ><a name="22536" class="Symbol"
  >(</a
  ><a name="22537" href="Session.html#22537" class="Bound"
  >m</a
  ><a name="22538"
  > </a
  ><a name="22539" href="Session.html#16491" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="22541"
  > </a
  ><a name="22542" href="Session.html#22542" class="Bound"
  >f</a
  ><a name="22543"
  >        </a
  ><a name="22551" class="Symbol"
  >)</a
  ><a name="22552"
  > </a
  ><a name="22553" href="Session.html#22553" class="Bound"
  >cs</a
  ><a name="22555"
  > </a
  ><a name="22556" class="Symbol"
  >=</a
  ><a name="22557"
  > </a
  ><a name="22558" href="Session.html#22136" class="Function"
  >run</a
  ><a name="22561"
  > </a
  ><a name="22562" href="Session.html#22537" class="Bound"
  >m</a
  ><a name="22563"
  > </a
  ><a name="22564" href="Session.html#22553" class="Bound"
  >cs</a
  ><a name="22566"
  > </a
  ><a name="22567" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="22570"
  > </a
  ><a name="22571" class="Symbol"
  >&#955;</a
  ><a name="22572"
  > </a
  ><a name="22573" class="Symbol"
  >{</a
  ><a name="22574"
  > </a
  ><a name="22575" class="Symbol"
  >(</a
  ><a name="22576" href="Session.html#22576" class="Bound"
  >x</a
  ><a name="22577"
  > </a
  ><a name="22578" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="22579"
  > </a
  ><a name="22580" href="Session.html#22580" class="Bound"
  >cs</a
  ><a name="22582" class="Symbol"
  >)</a
  ><a name="22583"
  > </a
  ><a name="22584" class="Symbol"
  >&#8594;</a
  ><a name="22585"
  > </a
  ><a name="22586" href="Session.html#22136" class="Function"
  >run</a
  ><a name="22589"
  > </a
  ><a name="22590" class="Symbol"
  >(</a
  ><a name="22591" href="Session.html#22542" class="Bound"
  >f</a
  ><a name="22592"
  > </a
  ><a name="22593" href="Session.html#22576" class="Bound"
  >x</a
  ><a name="22594" class="Symbol"
  >)</a
  ><a name="22595"
  > </a
  ><a name="22596" href="Session.html#22580" class="Bound"
  >cs</a
  ><a name="22598"
  > </a
  ><a name="22599" class="Symbol"
  >}</a
  ><a name="22600"
  >                      </pre>
<p><code>new</code> just creates a new channel.</p>
<pre></a
  ><a name="22841" href="Session.html#22136" class="Function"
  >run</a
  ><a name="22844"
  > </a
  ><a name="22845" class="Symbol"
  >(</a
  ><a name="22846" href="Session.html#17135" class="InductiveConstructor"
  >new</a
  ><a name="22849"
  >           </a
  ><a name="22860" class="Symbol"
  >)</a
  ><a name="22861"
  > </a
  ><a name="22862" href="Session.html#22862" class="Bound"
  >cs</a
  ><a name="22864"
  > </a
  ><a name="22865" class="Symbol"
  >=</a
  ><a name="22866"
  > </a
  ><a name="22867" href="Control.Concurrent.Chan.Synchronous.html#300" class="Postulate"
  >newChan</a
  ><a name="22874"
  > </a
  ><a name="22875" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="22878"
  > </a
  ><a name="22879" class="Symbol"
  >&#955;</a
  ><a name="22880"
  > </a
  ><a name="22881" href="Session.html#22881" class="Bound"
  >c</a
  ><a name="22882"
  > </a
  ><a name="22883" class="Symbol"
  >&#8594;</a
  ><a name="22884"
  > </a
  ><a name="22885" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="22891"
  > </a
  ><a name="22892" class="Symbol"
  >(_</a
  ><a name="22894"
  > </a
  ><a name="22895" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="22896"
  > </a
  ><a name="22897" class="Symbol"
  >(</a
  ><a name="22898" href="Session.html#22862" class="Bound"
  >cs</a
  ><a name="22900"
  > </a
  ><a name="22901" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="22903"
  > </a
  ><a name="22904" href="Session.html#22881" class="Bound"
  >c</a
  ><a name="22905" class="Symbol"
  >))</a
  ><a name="22907"
  ></pre>
<p><code>forks x</code> interprets the <code>Splits</code> in <code>s</code> obtaining two lists of channels <code>ls</code> and <code>rs</code>: it keeps <code>ls</code> for the parent thread and leaves access to <code>rs</code> to the child (<code>x</code>).</p>
<pre></a
  ><a name="23194" href="Session.html#22136" class="Function"
  >run</a
  ><a name="23197"
  > </a
  ><a name="23198" class="Symbol"
  >(</a
  ><a name="23199" href="Session.html#17061" class="InductiveConstructor"
  >fork</a
  ><a name="23203"
  >       </a
  ><a name="23210" href="Session.html#23210" class="Bound"
  >s</a
  ><a name="23211"
  > </a
  ><a name="23212" href="Session.html#23212" class="Bound"
  >x</a
  ><a name="23213" class="Symbol"
  >)</a
  ><a name="23214"
  > </a
  ><a name="23215" href="Session.html#23215" class="Bound"
  >cs</a
  ><a name="23217"
  > </a
  ><a name="23218" class="Symbol"
  >=</a
  ><a name="23219"
  > </a
  ><a name="23220" class="Keyword"
  >let</a
  ><a name="23223"
  > </a
  ><a name="23224" href="Session.html#23224" class="Bound"
  >ls</a
  ><a name="23226"
  > </a
  ><a name="23227" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="23228"
  > </a
  ><a name="23229" href="Session.html#23229" class="Bound"
  >rs</a
  ><a name="23231"
  > </a
  ><a name="23232" class="Symbol"
  >=</a
  ><a name="23233"
  > </a
  ><a name="23234" href="Session.html#7505" class="Function"
  >all-splits</a
  ><a name="23244"
  > </a
  ><a name="23245" href="Session.html#23215" class="Bound"
  >cs</a
  ><a name="23247"
  > </a
  ><a name="23248" href="Session.html#23210" class="Bound"
  >s</a
  ><a name="23249"
  > </a
  ><a name="23250" class="Keyword"
  >in</a
  ><a name="23252"
  >
                          </a
  ><a name="23279" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="23285"
  > </a
  ><a name="23286" class="Symbol"
  >(</a
  ><a name="23287" href="Session.html#22136" class="Function"
  >run</a
  ><a name="23290"
  > </a
  ><a name="23291" href="Session.html#23212" class="Bound"
  >x</a
  ><a name="23292"
  > </a
  ><a name="23293" href="Session.html#23229" class="Bound"
  >rs</a
  ><a name="23295"
  > </a
  ><a name="23296" href="Session.html#21398" class="Function Operator"
  >&gt;&gt;</a
  ><a name="23298"
  > </a
  ><a name="23299" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="23305"
  > </a
  ><a name="23306" href="Unit.html#210" class="Function"
  >&#10216;&#10217;</a
  ><a name="23308" class="Symbol"
  >)</a
  ><a name="23309"
  > </a
  ><a name="23310" href="Session.html#21398" class="Function Operator"
  >&gt;&gt;</a
  ><a name="23312"
  >                               
                          </a
  ><a name="23370" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="23376"
  > </a
  ><a name="23377" class="Symbol"
  >(</a
  ><a name="23378" class="InductiveConstructor"
  >tt</a
  ><a name="23380"
  > </a
  ><a name="23381" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="23382"
  > </a
  ><a name="23383" href="Session.html#23224" class="Bound"
  >ls</a
  ><a name="23385" class="Symbol"
  >)</a
  ><a name="23386"
  >                                                </pre>
<p><code>send i j</code> writes channel <code>i</code> on channel <code>j</code> and frees the continuation from the burden of communicating along <code>i</code>.</p>
<p>We could avoid many uses of <code>unsafeCoerce</code> in the following but we think it is more efficient to avoid calling functions like <code>all-ud</code> as in the commented-out code: they perform no operations on the actual lists of <em>untyped</em> channels.</p>
<p>The usages of <code>unsafeCoerce</code> which are more difficult justify are those inside every call to <code>readUChan</code> and <code>writeUChan</code>.</p>
<pre></a
  ><a name="24095" href="Session.html#22136" class="Function"
  >run</a
  ><a name="24098"
  > </a
  ><a name="24099" class="Symbol"
  >(</a
  ><a name="24100" href="Session.html#17209" class="InductiveConstructor"
  >send</a
  ><a name="24104"
  >       </a
  ><a name="24111" href="Session.html#24111" class="Bound"
  >i</a
  ><a name="24112"
  > </a
  ><a name="24113" href="Session.html#24113" class="Bound"
  >j</a
  ><a name="24114" class="Symbol"
  >)</a
  ><a name="24115"
  > </a
  ><a name="24116" href="Session.html#24116" class="Bound"
  >cs</a
  ><a name="24118"
  > </a
  ><a name="24119" class="Symbol"
  >=</a
  ><a name="24120"
  > </a
  ><a name="24121" class="Keyword"
  >let</a
  ><a name="24124"
  > </a
  ><a name="24125" href="Session.html#24125" class="Bound"
  >chanToSend</a
  ><a name="24135"
  >    </a
  ><a name="24139" class="Symbol"
  >=</a
  ><a name="24140"
  > </a
  ><a name="24141" href="Session.html#21052" class="Function"
  >lookupUChan</a
  ><a name="24152"
  >        </a
  ><a name="24160" href="Session.html#24111" class="Bound"
  >i</a
  ><a name="24161"
  >  </a
  ><a name="24163" href="Session.html#24116" class="Bound"
  >cs</a
  ><a name="24165"
  > </a
  ><a name="24166" class="Keyword"
  >in</a
  ><a name="24168"
  >                 
                          </a
  ><a name="24212" class="Keyword"
  >let</a
  ><a name="24215"
  > </a
  ><a name="24216" href="Session.html#24216" class="Bound"
  >chanToWriteOn</a
  ><a name="24229"
  > </a
  ><a name="24230" class="Symbol"
  >=</a
  ><a name="24231"
  > </a
  ><a name="24232" href="Session.html#21052" class="Function"
  >lookupUChan</a
  ><a name="24243"
  > </a
  ><a name="24244" class="Symbol"
  >(</a
  ><a name="24245" href="Session.Base.html#4047" class="Function"
  >wk/</a
  ><a name="24248"
  > </a
  ><a name="24249" href="Session.html#24111" class="Bound"
  >i</a
  ><a name="24250"
  > </a
  ><a name="24251" href="Session.html#24113" class="Bound"
  >j</a
  ><a name="24252" class="Symbol"
  >)</a
  ><a name="24253"
  > </a
  ><a name="24254" href="Session.html#24116" class="Bound"
  >cs</a
  ><a name="24256"
  > </a
  ><a name="24257" class="Keyword"
  >in</a
  ><a name="24259"
  >                 
                          </a
  ><a name="24303" href="Session.html#21674" class="Function"
  >writeUChan</a
  ><a name="24313"
  > </a
  ><a name="24314" href="Session.html#24216" class="Bound"
  >chanToWriteOn</a
  ><a name="24327"
  > </a
  ><a name="24328" href="Session.html#24125" class="Bound"
  >chanToSend</a
  ><a name="24338"
  > </a
  ><a name="24339" href="Session.html#21398" class="Function Operator"
  >&gt;&gt;</a
  ><a name="24341"
  >
                          </a
  ><a name="24368" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="24374"
  > </a
  ><a name="24375" class="Symbol"
  >(</a
  ><a name="24376" class="InductiveConstructor"
  >tt</a
  ><a name="24378"
  > </a
  ><a name="24379" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="24380"
  > </a
  ><a name="24381" href="Session.html#19982" class="Postulate"
  >unsafeCoerce</a
  ><a name="24393"
  > </a
  ><a name="24394" class="Symbol"
  >(</a
  ><a name="24395" href="Session.Base.html#4259" class="Function"
  >all-rm</a
  ><a name="24401"
  > </a
  ><a name="24402" href="Session.html#24111" class="Bound"
  >i</a
  ><a name="24403"
  > </a
  ><a name="24404" href="Session.html#24116" class="Bound"
  >cs</a
  ><a name="24406" class="Symbol"
  >))</a
  ><a name="24408"
  >
                       </a
  ><a name="24432" class="Comment"
  >-- return (tt , all-ud j (all-rm i cs) chanToWriteOn)</a
  ><a name="24485"
  ></pre>
<p><code>receive</code> receives a channel from channel <code>i</code> and allows/forces the continuation to also take care of it.</p>
<pre></a
  ><a name="24708" href="Session.html#22136" class="Function"
  >run</a
  ><a name="24711"
  > </a
  ><a name="24712" class="Symbol"
  >(</a
  ><a name="24713" href="Session.html#17283" class="InductiveConstructor"
  >receive</a
  ><a name="24720"
  >      </a
  ><a name="24726" href="Session.html#24726" class="Bound"
  >i</a
  ><a name="24727" class="Symbol"
  >)</a
  ><a name="24728"
  > </a
  ><a name="24729" href="Session.html#24729" class="Bound"
  >cs</a
  ><a name="24731"
  > </a
  ><a name="24732" class="Symbol"
  >=</a
  ><a name="24733"
  > </a
  ><a name="24734" class="Keyword"
  >let</a
  ><a name="24737"
  > </a
  ><a name="24738" href="Session.html#24738" class="Bound"
  >chanToReadFrom</a
  ><a name="24752"
  > </a
  ><a name="24753" class="Symbol"
  >=</a
  ><a name="24754"
  > </a
  ><a name="24755" href="Session.html#21052" class="Function"
  >lookupUChan</a
  ><a name="24766"
  > </a
  ><a name="24767" href="Session.html#24726" class="Bound"
  >i</a
  ><a name="24768"
  > </a
  ><a name="24769" href="Session.html#24729" class="Bound"
  >cs</a
  ><a name="24771"
  > </a
  ><a name="24772" class="Keyword"
  >in</a
  ><a name="24774"
  >                        
                          </a
  ><a name="24825" href="Session.html#21762" class="Function"
  >readUChan</a
  ><a name="24834"
  > </a
  ><a name="24835" href="Session.html#24738" class="Bound"
  >chanToReadFrom</a
  ><a name="24849"
  > </a
  ><a name="24850" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="24853"
  > </a
  ><a name="24854" class="Symbol"
  >&#955;</a
  ><a name="24855"
  > </a
  ><a name="24856" href="Session.html#24856" class="Bound"
  >receivedChan</a
  ><a name="24868"
  > </a
  ><a name="24869" class="Symbol"
  >&#8594;</a
  ><a name="24870"
  >                   
                          </a
  ><a name="24916" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="24922"
  > </a
  ><a name="24923" class="Symbol"
  >(</a
  ><a name="24924" class="InductiveConstructor"
  >tt</a
  ><a name="24926"
  > </a
  ><a name="24927" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="24928"
  > </a
  ><a name="24929" class="Symbol"
  >(</a
  ><a name="24930" href="Session.html#19982" class="Postulate"
  >unsafeCoerce</a
  ><a name="24942"
  > </a
  ><a name="24943" href="Session.html#24729" class="Bound"
  >cs</a
  ><a name="24945"
  > </a
  ><a name="24946" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="24948"
  > </a
  ><a name="24949" href="Session.html#24856" class="Bound"
  >receivedChan</a
  ><a name="24961" class="Symbol"
  >))</a
  ><a name="24963"
  >                  </pre>
<p><code>accept i a p</code> forks a process that waits for channels: whenever one is received it spawns a new copy of the server along it.</p>
<pre></a
  ><a name="25212" href="Session.html#22136" class="Function"
  >run</a
  ><a name="25215"
  > </a
  ><a name="25216" class="Symbol"
  >(</a
  ><a name="25217" href="Session.html#17357" class="InductiveConstructor"
  >accept</a
  ><a name="25223"
  >   </a
  ><a name="25226" href="Session.html#25226" class="Bound"
  >i</a
  ><a name="25227"
  > </a
  ><a name="25228" href="Session.html#25228" class="Bound"
  >a</a
  ><a name="25229"
  > </a
  ><a name="25230" href="Session.html#25230" class="Bound"
  >p</a
  ><a name="25231" class="Symbol"
  >)</a
  ><a name="25232"
  > </a
  ><a name="25233" href="Session.html#25233" class="Bound"
  >cs</a
  ><a name="25235"
  > </a
  ><a name="25236" class="Symbol"
  >=</a
  ><a name="25237"
  > </a
  ><a name="25238" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="25244"
  > </a
  ><a name="25245" href="Session.html#25509" class="Function"
  >server</a
  ><a name="25251"
  > </a
  ><a name="25252" href="Session.html#21398" class="Function Operator"
  >&gt;&gt;</a
  ><a name="25254"
  > </a
  ><a name="25255" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="25261"
  > </a
  ><a name="25262" class="Symbol"
  >(</a
  ><a name="25263" class="InductiveConstructor"
  >tt</a
  ><a name="25265"
  > </a
  ><a name="25266" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="25267"
  > </a
  ><a name="25268" href="Session.Base.html#4259" class="Function"
  >all-rm</a
  ><a name="25274"
  > </a
  ><a name="25275" href="Session.html#25226" class="Bound"
  >i</a
  ><a name="25276"
  > </a
  ><a name="25277" href="Session.html#25233" class="Bound"
  >cs</a
  ><a name="25279" class="Symbol"
  >)</a
  ><a name="25280"
  >                   
  </a
  ><a name="25302" class="Keyword"
  >where</a
  ><a name="25307"
  > </a
  ><a name="25308" href="Session.html#25308" class="Function"
  >c</a
  ><a name="25309"
  > </a
  ><a name="25310" class="Symbol"
  >=</a
  ><a name="25311"
  > </a
  ><a name="25312" href="Session.html#21052" class="Function"
  >lookupUChan</a
  ><a name="25323"
  > </a
  ><a name="25324" href="Session.html#25226" class="Bound"
  >i</a
  ><a name="25325"
  > </a
  ><a name="25326" href="Session.html#25233" class="Bound"
  >cs</a
  ><a name="25328"
  >                                            
        </a
  ><a name="25381" href="Session.html#25381" class="Function"
  >service</a
  ><a name="25388"
  > </a
  ><a name="25389" class="Symbol"
  >:</a
  ><a name="25390"
  > </a
  ><a name="25391" href="Session.html#20914" class="Function"
  >UChan</a
  ><a name="25396"
  > </a
  ><a name="25397" class="Symbol"
  >&#8594;</a
  ><a name="25398"
  > </a
  ><a name="25399" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="25401"
  > </a
  ><a name="25402" class="Symbol"
  >_</a
  ><a name="25403"
  >                                          
        </a
  ><a name="25454" href="Session.html#25381" class="Function"
  >service</a
  ><a name="25461"
  > </a
  ><a name="25462" href="Session.html#25462" class="Bound"
  >n</a
  ><a name="25463"
  > </a
  ><a name="25464" class="Symbol"
  >=</a
  ><a name="25465"
  > </a
  ><a name="25466" href="Session.html#22136" class="Function"
  >run</a
  ><a name="25469"
  > </a
  ><a name="25470" href="Session.html#25230" class="Bound"
  >p</a
  ><a name="25471"
  > </a
  ><a name="25472" class="Symbol"
  >(</a
  ><a name="25473" href="Session.Base.html#4407" class="Function"
  >all-ud</a
  ><a name="25479"
  > </a
  ><a name="25480" href="Session.html#25226" class="Bound"
  >i</a
  ><a name="25481"
  > </a
  ><a name="25482" href="Session.html#25233" class="Bound"
  >cs</a
  ><a name="25484"
  > </a
  ><a name="25485" href="Session.html#25462" class="Bound"
  >n</a
  ><a name="25486" class="Symbol"
  >)</a
  ><a name="25487"
  > </a
  ><a name="25488" href="Session.html#21398" class="Function Operator"
  >&gt;&gt;</a
  ><a name="25490"
  > </a
  ><a name="25491" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="25497"
  > </a
  ><a name="25498" href="Unit.html#210" class="Function"
  >&#10216;&#10217;</a
  ><a name="25500"
  >
        </a
  ><a name="25509" href="Session.html#25509" class="Function"
  >server</a
  ><a name="25515"
  > </a
  ><a name="25516" class="Symbol"
  >:</a
  ><a name="25517"
  > </a
  ><a name="25518" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="25520"
  > </a
  ><a name="25521" href="Unit.html#194" class="Function"
  >C.&lt;&gt;</a
  ><a name="25525"
  >                                                
        </a
  ><a name="25582" href="Session.html#25509" class="Function"
  >server</a
  ><a name="25588"
  > </a
  ><a name="25589" class="Symbol"
  >=</a
  ><a name="25590"
  > </a
  ><a name="25591" href="Session.html#21762" class="Function"
  >readUChan</a
  ><a name="25600"
  > </a
  ><a name="25601" href="Session.html#25308" class="Function"
  >c</a
  ><a name="25602"
  >        </a
  ><a name="25610" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="25613"
  > </a
  ><a name="25614" class="Symbol"
  >&#955;</a
  ><a name="25615"
  > </a
  ><a name="25616" href="Session.html#25616" class="Bound"
  >n</a
  ><a name="25617"
  > </a
  ><a name="25618" class="Symbol"
  >&#8594;</a
  ><a name="25619"
  >                           
                 </a
  ><a name="25664" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="25670"
  > </a
  ><a name="25671" class="Symbol"
  >(</a
  ><a name="25672" href="Session.html#25381" class="Function"
  >service</a
  ><a name="25679"
  > </a
  ><a name="25680" href="Session.html#25616" class="Bound"
  >n</a
  ><a name="25681" class="Symbol"
  >)</a
  ><a name="25682"
  > </a
  ><a name="25683" href="Session.html#21398" class="Function Operator"
  >&gt;&gt;</a
  ><a name="25685"
  >                                  
                 </a
  ><a name="25737" href="Session.html#25509" class="Function"
  >server</a
  ><a name="25743"
  >                                                 </pre>
<p><code>connect i p</code> creates a channel and sends it along the channel <code>i</code>, which is (or should be) shared by construction with a server, then it becomes process <code>p</code>.</p>
<pre></a
  ><a name="26068" href="Session.html#22136" class="Function"
  >run</a
  ><a name="26071"
  > </a
  ><a name="26072" class="Symbol"
  >(</a
  ><a name="26073" href="Session.html#17431" class="InductiveConstructor"
  >connect</a
  ><a name="26080"
  >    </a
  ><a name="26084" href="Session.html#26084" class="Bound"
  >i</a
  ><a name="26085"
  > </a
  ><a name="26086" href="Session.html#26086" class="Bound"
  >p</a
  ><a name="26087" class="Symbol"
  >)</a
  ><a name="26088"
  > </a
  ><a name="26089" href="Session.html#26089" class="Bound"
  >cs</a
  ><a name="26091"
  > </a
  ><a name="26092" class="Symbol"
  >=</a
  ><a name="26093"
  > </a
  ><a name="26094" href="Control.Concurrent.Chan.Synchronous.html#300" class="Postulate"
  >newChan</a
  ><a name="26101"
  >                         </a
  ><a name="26126" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="26129"
  > </a
  ><a name="26130" class="Symbol"
  >&#955;</a
  ><a name="26131"
  > </a
  ><a name="26132" href="Session.html#26132" class="Bound"
  >n</a
  ><a name="26133"
  > </a
  ><a name="26134" class="Symbol"
  >&#8594;</a
  ><a name="26135"
  >                       
                          </a
  ><a name="26185" href="Session.html#21674" class="Function"
  >writeUChan</a
  ><a name="26195"
  > </a
  ><a name="26196" class="Symbol"
  >(</a
  ><a name="26197" href="Session.html#21052" class="Function"
  >lookupUChan</a
  ><a name="26208"
  > </a
  ><a name="26209" href="Session.html#26084" class="Bound"
  >i</a
  ><a name="26210"
  > </a
  ><a name="26211" href="Session.html#26089" class="Bound"
  >cs</a
  ><a name="26213" class="Symbol"
  >)</a
  ><a name="26214"
  > </a
  ><a name="26215" href="Session.html#26132" class="Bound"
  >n</a
  ><a name="26216"
  > </a
  ><a name="26217" href="Session.html#21398" class="Function Operator"
  >&gt;&gt;</a
  ><a name="26219"
  >                              
                          </a
  ><a name="26276" href="Session.html#22136" class="Function"
  >run</a
  ><a name="26279"
  > </a
  ><a name="26280" href="Session.html#26086" class="Bound"
  >p</a
  ><a name="26281"
  > </a
  ><a name="26282" class="Symbol"
  >(</a
  ><a name="26283" href="Session.Base.html#4407" class="Function"
  >all-ud</a
  ><a name="26289"
  > </a
  ><a name="26290" href="Session.html#26084" class="Bound"
  >i</a
  ><a name="26291"
  > </a
  ><a name="26292" href="Session.html#26089" class="Bound"
  >cs</a
  ><a name="26294"
  > </a
  ><a name="26295" href="Session.html#26132" class="Bound"
  >n</a
  ><a name="26296" class="Symbol"
  >)</a
  ><a name="26297"
  ></pre>
<p><code>wont i</code> avoids starting the client/server interaction with the server which waits for channels on <code>i</code>.</p>
<pre></a
  ><a name="26518" href="Session.html#22136" class="Function"
  >run</a
  ><a name="26521"
  > </a
  ><a name="26522" class="Symbol"
  >(</a
  ><a name="26523" href="Session.html#17505" class="InductiveConstructor"
  >wont</a
  ><a name="26527"
  >         </a
  ><a name="26536" href="Session.html#26536" class="Bound"
  >i</a
  ><a name="26537" class="Symbol"
  >)</a
  ><a name="26538"
  > </a
  ><a name="26539" href="Session.html#26539" class="Bound"
  >cs</a
  ><a name="26541"
  > </a
  ><a name="26542" class="Symbol"
  >=</a
  ><a name="26543"
  > </a
  ><a name="26544" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="26550"
  > </a
  ><a name="26551" class="Symbol"
  >(</a
  ><a name="26552" class="InductiveConstructor"
  >tt</a
  ><a name="26554"
  > </a
  ><a name="26555" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="26556"
  > </a
  ><a name="26557" href="Session.Base.html#4259" class="Function"
  >all-rm</a
  ><a name="26563"
  > </a
  ><a name="26564" href="Session.html#26536" class="Bound"
  >i</a
  ><a name="26565"
  > </a
  ><a name="26566" href="Session.html#26539" class="Bound"
  >cs</a
  ><a name="26568" class="Symbol"
  >)</a
  ><a name="26569"
  ></pre>
<p><code>twice i</code> duplicates the server which waits for channels on <code>i</code>.</p>
<pre></a
  ><a name="26751" href="Session.html#22136" class="Function"
  >run</a
  ><a name="26754"
  > </a
  ><a name="26755" class="Symbol"
  >(</a
  ><a name="26756" href="Session.html#17579" class="InductiveConstructor"
  >twice</a
  ><a name="26761"
  >        </a
  ><a name="26769" href="Session.html#26769" class="Bound"
  >i</a
  ><a name="26770" class="Symbol"
  >)</a
  ><a name="26771"
  > </a
  ><a name="26772" href="Session.html#26772" class="Bound"
  >cs</a
  ><a name="26774"
  > </a
  ><a name="26775" class="Symbol"
  >=</a
  ><a name="26776"
  > </a
  ><a name="26777" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="26783"
  > </a
  ><a name="26784" class="Symbol"
  >(</a
  ><a name="26785" class="InductiveConstructor"
  >tt</a
  ><a name="26787"
  > </a
  ><a name="26788" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="26789"
  > </a
  ><a name="26790" class="Symbol"
  >(</a
  ><a name="26791" href="Session.html#26772" class="Bound"
  >cs</a
  ><a name="26793"
  > </a
  ><a name="26794" href="Session.Base.html#2124" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="26796"
  > </a
  ><a name="26797" href="Session.html#21052" class="Function"
  >lookupUChan</a
  ><a name="26808"
  > </a
  ><a name="26809" href="Session.html#26769" class="Bound"
  >i</a
  ><a name="26810"
  > </a
  ><a name="26811" href="Session.html#26772" class="Bound"
  >cs</a
  ><a name="26813" class="Symbol"
  >))</a
  ><a name="26815"
  >                           </pre>
<p><code>write i x</code> writes <code>x</code> on channel <code>i</code>.</p>
<pre></a
  ><a name="27076" href="Session.html#22136" class="Function"
  >run</a
  ><a name="27079"
  > </a
  ><a name="27080" class="Symbol"
  >(</a
  ><a name="27081" href="Session.html#17653" class="InductiveConstructor"
  >write</a
  ><a name="27086"
  >      </a
  ><a name="27092" href="Session.html#27092" class="Bound"
  >i</a
  ><a name="27093"
  > </a
  ><a name="27094" href="Session.html#27094" class="Bound"
  >x</a
  ><a name="27095" class="Symbol"
  >)</a
  ><a name="27096"
  > </a
  ><a name="27097" href="Session.html#27097" class="Bound"
  >cs</a
  ><a name="27099"
  > </a
  ><a name="27100" class="Symbol"
  >=</a
  ><a name="27101"
  > </a
  ><a name="27102" class="Keyword"
  >let</a
  ><a name="27105"
  > </a
  ><a name="27106" href="Session.html#27106" class="Bound"
  >c</a
  ><a name="27107"
  > </a
  ><a name="27108" class="Symbol"
  >=</a
  ><a name="27109"
  > </a
  ><a name="27110" href="Session.html#21052" class="Function"
  >lookupUChan</a
  ><a name="27121"
  > </a
  ><a name="27122" href="Session.html#27092" class="Bound"
  >i</a
  ><a name="27123"
  > </a
  ><a name="27124" href="Session.html#27097" class="Bound"
  >cs</a
  ><a name="27126"
  > </a
  ><a name="27127" class="Keyword"
  >in</a
  ><a name="27129"
  >                                     
                          </a
  ><a name="27193" href="Session.html#21674" class="Function"
  >writeUChan</a
  ><a name="27203"
  > </a
  ><a name="27204" href="Session.html#27106" class="Bound"
  >c</a
  ><a name="27205"
  > </a
  ><a name="27206" href="Session.html#27094" class="Bound"
  >x</a
  ><a name="27207"
  > </a
  ><a name="27208" href="Session.html#21398" class="Function Operator"
  >&gt;&gt;</a
  ><a name="27210"
  >                                               
                          </a
  ><a name="27284" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="27290"
  > </a
  ><a name="27291" class="Symbol"
  >(</a
  ><a name="27292" class="InductiveConstructor"
  >tt</a
  ><a name="27294"
  > </a
  ><a name="27295" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="27296"
  > </a
  ><a name="27297" href="Session.html#19982" class="Postulate"
  >unsafeCoerce</a
  ><a name="27309"
  > </a
  ><a name="27310" href="Session.html#27097" class="Bound"
  >cs</a
  ><a name="27312" class="Symbol"
  >)</a
  ><a name="27313"
  >                                   </pre>
<p><code>read i</code> reads from <code>i</code> and returns what it read.</p>
<pre></a
  ><a name="27515" href="Session.html#22136" class="Function"
  >run</a
  ><a name="27518"
  > </a
  ><a name="27519" class="Symbol"
  >(</a
  ><a name="27520" href="Session.html#17727" class="InductiveConstructor"
  >read</a
  ><a name="27524"
  >         </a
  ><a name="27533" href="Session.html#27533" class="Bound"
  >i</a
  ><a name="27534" class="Symbol"
  >)</a
  ><a name="27535"
  > </a
  ><a name="27536" href="Session.html#27536" class="Bound"
  >cs</a
  ><a name="27538"
  > </a
  ><a name="27539" class="Symbol"
  >=</a
  ><a name="27540"
  > </a
  ><a name="27541" class="Keyword"
  >let</a
  ><a name="27544"
  > </a
  ><a name="27545" href="Session.html#27545" class="Bound"
  >c</a
  ><a name="27546"
  > </a
  ><a name="27547" class="Symbol"
  >=</a
  ><a name="27548"
  > </a
  ><a name="27549" href="Session.html#21052" class="Function"
  >lookupUChan</a
  ><a name="27560"
  > </a
  ><a name="27561" href="Session.html#27533" class="Bound"
  >i</a
  ><a name="27562"
  > </a
  ><a name="27563" href="Session.html#27536" class="Bound"
  >cs</a
  ><a name="27565"
  > </a
  ><a name="27566" class="Keyword"
  >in</a
  ><a name="27568"
  >                                     
                          </a
  ><a name="27632" href="Session.html#21762" class="Function"
  >readUChan</a
  ><a name="27641"
  > </a
  ><a name="27642" href="Session.html#27545" class="Bound"
  >c</a
  ><a name="27643"
  > </a
  ><a name="27644" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="27647"
  > </a
  ><a name="27648" class="Symbol"
  >&#955;</a
  ><a name="27649"
  > </a
  ><a name="27650" href="Session.html#27650" class="Bound"
  >x</a
  ><a name="27651"
  > </a
  ><a name="27652" class="Symbol"
  >&#8594;</a
  ><a name="27653"
  >
                          </a
  ><a name="27680" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="27686"
  > </a
  ><a name="27687" class="Symbol"
  >(</a
  ><a name="27688" href="Session.html#27650" class="Bound"
  >x</a
  ><a name="27689"
  > </a
  ><a name="27690" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="27691"
  > </a
  ><a name="27692" href="Session.html#19982" class="Postulate"
  >unsafeCoerce</a
  ><a name="27704"
  > </a
  ><a name="27705" href="Session.html#27536" class="Bound"
  >cs</a
  ><a name="27707" class="Symbol"
  >)</a
  ><a name="27708"
  >                                    </pre>
<p><code>end i</code> terminates the (sub)session</p>
<pre></a
  ><a name="27975" href="Session.html#22136" class="Function"
  >run</a
  ><a name="27978"
  > </a
  ><a name="27979" class="Symbol"
  >(</a
  ><a name="27980" href="Session.html#17801" class="InductiveConstructor"
  >end/</a
  ><a name="27984"
  >       </a
  ><a name="27991" href="Session.html#27991" class="Bound"
  >i</a
  ><a name="27992"
  > </a
  ><a name="27993" href="Session.html#27993" class="Bound"
  >r</a
  ><a name="27994" class="Symbol"
  >)</a
  ><a name="27995"
  > </a
  ><a name="27996" href="Session.html#27996" class="Bound"
  >cs</a
  ><a name="27998"
  > </a
  ><a name="27999" class="Symbol"
  >=</a
  ><a name="28000"
  > </a
  ><a name="28001" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="28007"
  > </a
  ><a name="28008" class="Symbol"
  >(</a
  ><a name="28009" href="Session.html#27993" class="Bound"
  >r</a
  ><a name="28010"
  > </a
  ><a name="28011" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="28012"
  > </a
  ><a name="28013" href="Session.Base.html#4259" class="Function"
  >all-rm</a
  ><a name="28019"
  > </a
  ><a name="28020" href="Session.html#27991" class="Bound"
  >i</a
  ><a name="28021"
  > </a
  ><a name="28022" href="Session.html#27996" class="Bound"
  >cs</a
  ><a name="28024" class="Symbol"
  >)</a
  ><a name="28025"
  >                                     </pre>
<p><code>at/ i o</code> simply returns <code>o</code>.</p>
<pre></a
  ><a name="28119" href="Session.html#22136" class="Function"
  >run</a
  ><a name="28122"
  > </a
  ><a name="28123" class="Symbol"
  >(</a
  ><a name="28124" href="Session.html#17909" class="InductiveConstructor"
  >at/</a
  ><a name="28127"
  >        </a
  ><a name="28135" href="Session.html#28135" class="Bound"
  >i</a
  ><a name="28136"
  > </a
  ><a name="28137" href="Session.html#28137" class="Bound"
  >o</a
  ><a name="28138" class="Symbol"
  >)</a
  ><a name="28139"
  > </a
  ><a name="28140" href="Session.html#28140" class="Bound"
  >cs</a
  ><a name="28142"
  > </a
  ><a name="28143" class="Symbol"
  >=</a
  ><a name="28144"
  > </a
  ><a name="28145" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="28151"
  > </a
  ><a name="28152" class="Symbol"
  >(</a
  ><a name="28153" href="Session.html#28137" class="Bound"
  >o</a
  ><a name="28154"
  > </a
  ><a name="28155" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="28156"
  > </a
  ><a name="28157" href="Session.html#19982" class="Postulate"
  >unsafeCoerce</a
  ><a name="28169"
  > </a
  ><a name="28170" href="Session.html#28140" class="Bound"
  >cs</a
  ><a name="28172" class="Symbol"
  >)</a
  ><a name="28173"
  >                                    </pre>
<p><code>corec</code> enters a loop whose body is contained in <code>gp</code>: the coiteration will possibly be exited whenever the value the process returns is <code>inl x</code> for some <code>x</code>.</p>
<pre></a
  ><a name="28395" href="Session.html#22136" class="Function"
  >run</a
  ><a name="28398"
  > </a
  ><a name="28399" class="Symbol"
  >(</a
  ><a name="28400" href="Session.html#18057" class="InductiveConstructor"
  >corec</a
  ><a name="28405"
  >   </a
  ><a name="28408" href="Session.html#28408" class="Bound"
  >i</a
  ><a name="28409"
  > </a
  ><a name="28410" href="Session.html#28410" class="Bound"
  >o</a
  ><a name="28411"
  > </a
  ><a name="28412" href="Session.html#28412" class="Bound"
  >gp</a
  ><a name="28414" class="Symbol"
  >)</a
  ><a name="28415"
  > </a
  ><a name="28416" href="Session.html#28416" class="Bound"
  >cs</a
  ><a name="28418"
  > </a
  ><a name="28419" class="Symbol"
  >=</a
  ><a name="28420"
  > </a
  ><a name="28421" href="Session.html#28435" class="Function"
  >aux</a
  ><a name="28424"
  > </a
  ><a name="28425" href="Session.html#28410" class="Bound"
  >o</a
  ><a name="28426"
  >
  </a
  ><a name="28429" class="Keyword"
  >where</a
  ><a name="28434"
  > </a
  ><a name="28435" href="Session.html#28435" class="Function"
  >aux</a
  ><a name="28438"
  > </a
  ><a name="28439" class="Symbol"
  >=</a
  ><a name="28440"
  > </a
  ><a name="28441" class="Symbol"
  >&#955;</a
  ><a name="28442"
  > </a
  ><a name="28443" href="Session.html#28443" class="Bound"
  >o</a
  ><a name="28444"
  > </a
  ><a name="28445" class="Symbol"
  >&#8594;</a
  ><a name="28446"
  > </a
  ><a name="28447" href="Session.html#22136" class="Function"
  >run</a
  ><a name="28450"
  > </a
  ><a name="28451" class="Symbol"
  >(</a
  ><a name="28452" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="28455"
  > </a
  ><a name="28456" class="Symbol"
  >(</a
  ><a name="28457" href="Session.html#28412" class="Bound"
  >gp</a
  ><a name="28459"
  > </a
  ><a name="28460" href="Session.html#28443" class="Bound"
  >o</a
  ><a name="28461" class="Symbol"
  >))</a
  ><a name="28463"
  > </a
  ><a name="28464" class="Symbol"
  >(</a
  ><a name="28465" href="Session.html#19982" class="Postulate"
  >unsafeCoerce</a
  ><a name="28477"
  > </a
  ><a name="28478" href="Session.html#28416" class="Bound"
  >cs</a
  ><a name="28480" class="Symbol"
  >)</a
  ><a name="28481"
  > </a
  ><a name="28482" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="28485"
  >
                    </a
  ><a name="28506" href="Data.Product.html#2847" class="Function"
  >uc</a
  ><a name="28508"
  > </a
  ><a name="28509" href="Data.Sum.html#678" class="Function Operator"
  >&#8846;.[</a
  ><a name="28512"
  > </a
  ><a name="28513" href="Data.Product.html#2682" class="Function"
  >cu</a
  ><a name="28515"
  > </a
  ><a name="28516" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="28522"
  > </a
  ><a name="28523" href="Data.Sum.html#678" class="Function Operator"
  >,</a
  ><a name="28524"
  > </a
  ><a name="28525" class="Symbol"
  >(&#955;</a
  ><a name="28527"
  > </a
  ><a name="28528" href="Session.html#28528" class="Bound"
  >o</a
  ><a name="28529"
  > </a
  ><a name="28530" href="Session.html#28530" class="Bound"
  >_</a
  ><a name="28531"
  > </a
  ><a name="28532" class="Symbol"
  >&#8594;</a
  ><a name="28533"
  > </a
  ><a name="28534" href="Session.html#28435" class="Function"
  >aux</a
  ><a name="28537"
  > </a
  ><a name="28538" href="Session.html#28528" class="Bound"
  >o</a
  ><a name="28539" class="Symbol"
  >)</a
  ><a name="28540"
  > </a
  ><a name="28541" href="Data.Sum.html#678" class="Function Operator"
  >]</a
  ><a name="28542"
  ></pre>
<p>Closed processes describe IO computations.</p>
<pre></a
  ><a name="28612" href="Session.html#28612" class="Function"
  >run[]</a
  ><a name="28617"
  > </a
  ><a name="28618" class="Symbol"
  >:</a
  ><a name="28619"
  > </a
  ><a name="28620" class="Symbol"
  >&#8704;</a
  ><a name="28621"
  > </a
  ><a name="28622" class="Symbol"
  >{</a
  ><a name="28623" href="Session.html#28623" class="Bound"
  >X</a
  ><a name="28624" class="Symbol"
  >}</a
  ><a name="28625"
  > </a
  ><a name="28626" class="Symbol"
  >&#8594;</a
  ><a name="28627"
  >  </a
  ><a name="28629" href="Session.html#20392" class="Function"
  >IOProc</a
  ><a name="28635"
  > </a
  ><a name="28636" href="Session.html#28623" class="Bound"
  >X</a
  ><a name="28637"
  > </a
  ><a name="28638" class="Symbol"
  >&#8594;</a
  ><a name="28639"
  > </a
  ><a name="28640" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="28642"
  > </a
  ><a name="28643" href="Session.html#28623" class="Bound"
  >X</a
  ><a name="28644"
  >
</a
  ><a name="28645" href="Session.html#28612" class="Function"
  >run[]</a
  ><a name="28650"
  > </a
  ><a name="28651" href="Session.html#28651" class="Bound"
  >P</a
  ><a name="28652"
  > </a
  ><a name="28653" class="Symbol"
  >=</a
  ><a name="28654"
  > </a
  ><a name="28655" href="Session.html#21484" class="Function"
  >mapIO</a
  ><a name="28660"
  > </a
  ><a name="28661" href="Data.Product.html#525" class="Field"
  >fst</a
  ><a name="28664"
  > </a
  ><a name="28665" class="Symbol"
  >(</a
  ><a name="28666" href="Session.html#22136" class="Function"
  >run</a
  ><a name="28669"
  > </a
  ><a name="28670" href="Session.html#28651" class="Bound"
  >P</a
  ><a name="28671"
  > </a
  ><a name="28672" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="28674" class="Symbol"
  >)</a
  ><a name="28675"
  ></pre>
<p>Note that as the evaluator allows for processes that embed any <code>IO</code> action one could easily add unwanted behaviours: the user is still free to capture a fragment of <code>IO</code> to be considered <em>safe</em> and simply compose this evaluator after a translation phase to <code>IO</code>.</p>
<p>For simplicity, the currently provided <a href="Session.Examples.html">examples</a> just use <code>IO</code> for basic operations like suspending processes for finite amounts of time or accessing the standard output.</p></body></html>