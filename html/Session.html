<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Session</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="Content-Style-Type" content="text/css"/>
<link href="Agda.css" rel="stylesheet" type="text/css"/></head><body><p><a href="https://www.gnu.org/licenses/gpl.html">2013-2014 Matteo Acerbi</a></p>
<h1 id="linear-dependent-session-types-wip">Linear dependent session types [WIP]</h1>
<p>What follows is an incomplete draft: do not read this unless given explicit permission by the author. :-)</p>
<h2 id="introduction">Introduction</h2>
<p>This document describes and contains an Agda implementation of an embedded concurrent language with linear dependent session types.</p>
<p>The reader must be warned that in this work we are using Agda <em>only</em> to try and mimic features typical of a session typed process calculi with a by-construction well-typed representation: we are in no way in the position to prove any correspondence with a logical system.</p>
<p>We nonetheless adopt notations and ideas from more theoretical works in the fields of process algebras and linear logic, in particular from Philip Wadler's &quot;Propositions as Sessions&quot; paper (for the main type and terms constructs), and from the recent line of work by Caires, Pfenning and Toninho (on monadic syntax, corecursion and dependent types).</p>
<p>The immediate goal of this development is not to formalise a typed process calculus, but to allow Agda users to experiment with an <em>embedded</em> concurrency-oriented DSL: before attempting to prove the properties of the system or even of specific processes, we aim at designing a programmer-friendly interface.</p>
<p>We provide an evaluation function making use of the Haskell FFI: it is therefore possible to compile and execute programs in the DSL as Haskell process (see the <a href="http://github.com/ma82/session/">README</a> for instructions on how to attempt compilation). Note that in order to obtain the evaluator (see the end of this file) we had to (locally) disable totality checking and to use <code>unsafeCoerce</code> in several places.</p>
<p>We are currently studying how to define a total non-deterministic reference semantics which will allow formalised reasoning concerning the concurrent execution of processes.</p>
<pre></a
  ><a name="1899" class="Keyword"
  >module</a
  ><a name="1905"
  > </a
  ><a name="1906" href="Session.html#1" class="Module"
  >Session</a
  ><a name="1913"
  > </a
  ><a name="1914" class="Keyword"
  >where</a
  ><a name="1919"
  >

</a
  ><a name="1921" class="Keyword"
  >open</a
  ><a name="1925"
  > </a
  ><a name="1926" class="Keyword"
  >import</a
  ><a name="1932"
  > </a
  ><a name="1933" href="Base.html#1" class="Module"
  >Base</a
  ><a name="1937"
  ></pre>
<h2 id="types">Types</h2>
<p>The syntax for types is heavily inspired by both <em>Strictly Positive Families</em> (the version in Peter Morris's PhD thesis) and (indexed) <em>Descriptions</em> (Chapman et al, &quot;The Gentle Art of Levitation&quot;).</p>
<p>In our case, however, we do not want to describe indexed functors: we just want to be able to close the language under a (greatest) fixpoint operator/binder <code>`nu</code>, allowing nested usages thanks to a &quot;well-typed Bird-Paterson&quot; encoding of binding.</p>
<p>To compare with the cited universes, note that if we tried to give a <code>(I → Set) → (O → Set)</code> semantics to the <code>`I</code>, <code>`Σ</code> , <code>`Π</code> , <code>`ν</code> codes we would have to ignore the input of type <code>O</code>: in any case, such an interpretation would not make much sense here.</p>
<p>As opposed to Wadler's CP, the typing rules for the additional constructors <code>⊗</code>, <code>⅋</code>, <code>¡</code>, <code>¿</code> will not correspond directly to those of classical linear logic: however, the corresponding syntax maintains similar operational meaning (channel transmission and client/server interactions).</p>
<p>We add a type called <code>Side</code> (endpoint of a channel), with two only inhabitants: <code>+</code>, <code>-</code> . <code>Entry</code> is a type of optionally &quot;sided&quot; (session typed) codes, where absence of a side corresponds to the session not having started yet.</p>
<p>When a <code>Side</code> is specified, the <code>Entry</code> corresponds to an obligation for the process that contains it in its (input) context: if it is <code>+</code> then the session type is to be interpreted without changes, otherwise the process must behave along that channel by following the <em>dual</em> obligation (receiving vs sending, reading vs writing, connecting vs accepting).</p>
<p>Note that for what concerns <code>_⊗_</code> and <code>_⅋_</code> a whole <code>Entry</code> is required as the description of how a process participates to a channel needs to be preserved by the transfer.</p>
<pre></a
  ><a name="3747" class="Keyword"
  >mutual</a
  ><a name="3753"
  > 

  </a
  ><a name="3758" href="Session.html#3758" class="Function"
  >De</a
  ><a name="3760"
  >    </a
  ><a name="3764" class="Symbol"
  >=</a
  ><a name="3765"
  > </a
  ><a name="3766" class="Symbol"
  >&#955;</a
  ><a name="3767"
  > </a
  ><a name="3768" href="Session.html#3768" class="Bound"
  >I</a
  ><a name="3769"
  > </a
  ><a name="3770" class="Symbol"
  >&#8594;</a
  ><a name="3771"
  > </a
  ><a name="3772" href="Session.html#3768" class="Bound"
  >I</a
  ><a name="3773"
  > </a
  ><a name="3774" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="3775"
  > </a
  ><a name="3776" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="3777"
  >
  </a
  ><a name="3780" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="3784"
  >  </a
  ><a name="3786" class="Symbol"
  >=</a
  ><a name="3787"
  > </a
  ><a name="3788" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="3789"
  > </a
  ><a name="3790" class="Symbol"
  >_</a
  ><a name="3791"
  > </a
  ><a name="3792" class="Symbol"
  >&#955;</a
  ><a name="3793"
  > </a
  ><a name="3794" href="Session.html#3794" class="Bound"
  >I</a
  ><a name="3795"
  > </a
  ><a name="3796" class="Symbol"
  >&#8594;</a
  ><a name="3797"
  > </a
  ><a name="3798" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="3799"
  > </a
  ><a name="3800" class="Symbol"
  >_</a
  ><a name="3801"
  > </a
  ><a name="3802" class="Symbol"
  >&#955;</a
  ><a name="3803"
  > </a
  ><a name="3804" href="Session.html#3804" class="Bound"
  >O</a
  ><a name="3805"
  > </a
  ><a name="3806" class="Symbol"
  >&#8594;</a
  ><a name="3807"
  > </a
  ><a name="3808" href="Session.html#3794" class="Bound"
  >I</a
  ><a name="3809"
  > </a
  ><a name="3810" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="3811"
  > </a
  ><a name="3812" href="Session.html#3804" class="Bound"
  >O</a
  ><a name="3813"
  >
  </a
  ><a name="3816" href="Session.html#3816" class="Function"
  >Entry</a
  ><a name="3821"
  > </a
  ><a name="3822" class="Symbol"
  >=</a
  ><a name="3823"
  > </a
  ><a name="3824" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="3826"
  > </a
  ><a name="3827" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="3831"
  > </a
  ><a name="3832" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="3833"
  > </a
  ><a name="3834" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="3838"
  >

  </a
  ><a name="3842" class="Keyword"
  >data</a
  ><a name="3846"
  > </a
  ><a name="3847" href="Session.html#3847" class="Datatype Operator"
  >_&#9657;_</a
  ><a name="3850"
  > </a
  ><a name="3851" class="Symbol"
  >(</a
  ><a name="3852" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="3853"
  > </a
  ><a name="3854" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="3855"
  > </a
  ><a name="3856" class="Symbol"
  >:</a
  ><a name="3857"
  > </a
  ><a name="3858" class="PrimitiveType"
  >Set</a
  ><a name="3861" class="Symbol"
  >)</a
  ><a name="3862"
  > </a
  ><a name="3863" class="Symbol"
  >:</a
  ><a name="3864"
  > </a
  ><a name="3865" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="3869"
  > </a
  ><a name="3870" class="Keyword"
  >where</a
  ><a name="3875"
  ></pre>
<ul>
<li>Exiting a session</li>
</ul>
<pre>    </a
  ><a name="3926" href="Session.html#3926" class="InductiveConstructor"
  >`I</a
  ><a name="3928"
  >      </a
  ><a name="3934" class="Symbol"
  >:</a
  ><a name="3935"
  >                     </a
  ><a name="3956" class="Symbol"
  >(</a
  ><a name="3957" href="Session.html#3957" class="Bound"
  >i</a
  ><a name="3958"
  > </a
  ><a name="3959" class="Symbol"
  >:</a
  ><a name="3960"
  > </a
  ><a name="3961" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="3962" class="Symbol"
  >)</a
  ><a name="3963"
  > </a
  ><a name="3964" class="Symbol"
  >&#8594;</a
  ><a name="3965"
  > </a
  ><a name="3966" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="3967"
  > </a
  ><a name="3968" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="3969"
  > </a
  ><a name="3970" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="3971"
  ></pre>
<ul>
<li>Writing and reading values</li>
</ul>
<pre>    </a
  ><a name="4031" href="Session.html#4031" class="InductiveConstructor"
  >`&#931;</a
  ><a name="4033"
  > </a
  ><a name="4034" href="Session.html#4034" class="InductiveConstructor"
  >`&#928;</a
  ><a name="4036"
  >   </a
  ><a name="4039" class="Symbol"
  >:</a
  ><a name="4040"
  > </a
  ><a name="4041" class="Symbol"
  >(</a
  ><a name="4042" href="Session.html#4042" class="Bound"
  >S</a
  ><a name="4043"
  > </a
  ><a name="4044" class="Symbol"
  >:</a
  ><a name="4045"
  > </a
  ><a name="4046" class="PrimitiveType"
  >Set</a
  ><a name="4049" class="Symbol"
  >)(</a
  ><a name="4051" href="Session.html#4051" class="Bound"
  >T</a
  ><a name="4052"
  > </a
  ><a name="4053" class="Symbol"
  >:</a
  ><a name="4054"
  > </a
  ><a name="4055" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="4056"
  > </a
  ><a name="4057" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="4058"
  > </a
  ><a name="4059" href="Session.html#4042" class="Bound"
  >S</a
  ><a name="4060" class="Symbol"
  >)</a
  ><a name="4061"
  >        </a
  ><a name="4069" class="Symbol"
  >&#8594;</a
  ><a name="4070"
  > </a
  ><a name="4071" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="4072"
  > </a
  ><a name="4073" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="4074"
  > </a
  ><a name="4075" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="4076"
  ></pre>
<ul>
<li>Dependency on previously exchanged values</li>
</ul>
<pre>    </a
  ><a name="4151" href="Session.html#4151" class="InductiveConstructor"
  >`^</a
  ><a name="4153"
  >      </a
  ><a name="4159" class="Symbol"
  >:</a
  ><a name="4160"
  > </a
  ><a name="4161" class="Symbol"
  >(</a
  ><a name="4162" href="Session.html#4162" class="Bound"
  >T</a
  ><a name="4163"
  > </a
  ><a name="4164" class="Symbol"
  >:</a
  ><a name="4165"
  > </a
  ><a name="4166" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="4167"
  > </a
  ><a name="4168" class="Symbol"
  >&#8594;</a
  ><a name="4169"
  > </a
  ><a name="4170" href="Session.html#3758" class="Function"
  >De</a
  ><a name="4172"
  > </a
  ><a name="4173" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="4174" class="Symbol"
  >)</a
  ><a name="4175"
  >              </a
  ><a name="4189" class="Symbol"
  >&#8594;</a
  ><a name="4190"
  > </a
  ><a name="4191" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="4192"
  > </a
  ><a name="4193" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="4194"
  > </a
  ><a name="4195" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="4196"
  ></pre>
<ul>
<li>Sending and receiving channels</li>
</ul>
<pre>    </a
  ><a name="4260" href="Session.html#4260" class="InductiveConstructor Operator"
  >_&#8855;_</a
  ><a name="4263"
  > </a
  ><a name="4264" href="Session.html#4264" class="InductiveConstructor Operator"
  >_&#8523;_</a
  ><a name="4267"
  > </a
  ><a name="4268" class="Symbol"
  >:</a
  ><a name="4269"
  > </a
  ><a name="4270" class="Symbol"
  >(</a
  ><a name="4271" href="Session.html#4271" class="Bound"
  >L</a
  ><a name="4272"
  > </a
  ><a name="4273" class="Symbol"
  >:</a
  ><a name="4274"
  > </a
  ><a name="4275" href="Session.html#3816" class="Function"
  >Entry</a
  ><a name="4280" class="Symbol"
  >)(</a
  ><a name="4282" href="Session.html#4282" class="Bound"
  >R</a
  ><a name="4283"
  > </a
  ><a name="4284" class="Symbol"
  >:</a
  ><a name="4285"
  > </a
  ><a name="4286" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="4287"
  > </a
  ><a name="4288" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="4289"
  > </a
  ><a name="4290" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="4291" class="Symbol"
  >)</a
  ><a name="4292"
  >      </a
  ><a name="4298" class="Symbol"
  >&#8594;</a
  ><a name="4299"
  > </a
  ><a name="4300" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="4301"
  > </a
  ><a name="4302" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="4303"
  > </a
  ><a name="4304" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="4305"
  ></pre>
<ul>
<li>Servers and clients</li>
</ul>
<pre>    </a
  ><a name="4358" href="Session.html#4358" class="InductiveConstructor Operator"
  >&#161;_</a
  ><a name="4360"
  > </a
  ><a name="4361" href="Session.html#4361" class="InductiveConstructor Operator"
  >&#191;_</a
  ><a name="4363"
  >   </a
  ><a name="4366" class="Symbol"
  >:</a
  ><a name="4367"
  > </a
  ><a name="4368" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="4372"
  >                        </a
  ><a name="4396" class="Symbol"
  >&#8594;</a
  ><a name="4397"
  > </a
  ><a name="4398" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="4399"
  > </a
  ><a name="4400" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="4401"
  > </a
  ><a name="4402" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="4403"
  ></pre>
<ul>
<li>Corecursion</li>
</ul>
<pre>    </a
  ><a name="4448" href="Session.html#4448" class="InductiveConstructor"
  >`&#957;</a
  ><a name="4450"
  >      </a
  ><a name="4456" class="Symbol"
  >:</a
  ><a name="4457"
  > </a
  ><a name="4458" class="Symbol"
  >(</a
  ><a name="4459" href="Session.html#4459" class="Bound"
  >F</a
  ><a name="4460"
  > </a
  ><a name="4461" class="Symbol"
  >:</a
  ><a name="4462"
  > </a
  ><a name="4463" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="4464"
  > </a
  ><a name="4465" class="Symbol"
  >&#8594;</a
  ><a name="4466"
  > </a
  ><a name="4467" href="Session.html#3758" class="Function"
  >De</a
  ><a name="4469"
  > </a
  ><a name="4470" class="Symbol"
  >(</a
  ><a name="4471" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="4472"
  > </a
  ><a name="4473" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="4474"
  > </a
  ><a name="4475" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="4476" class="Symbol"
  >))(</a
  ><a name="4479" href="Session.html#4479" class="Bound"
  >o</a
  ><a name="4480"
  > </a
  ><a name="4481" class="Symbol"
  >:</a
  ><a name="4482"
  > </a
  ><a name="4483" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="4484" class="Symbol"
  >)</a
  ><a name="4485"
  > </a
  ><a name="4486" class="Symbol"
  >&#8594;</a
  ><a name="4487"
  > </a
  ><a name="4488" href="Session.html#3852" class="Bound"
  >I</a
  ><a name="4489"
  > </a
  ><a name="4490" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="4491"
  > </a
  ><a name="4492" href="Session.html#3854" class="Bound"
  >O</a
  ><a name="4493"
  ></pre>

<pre></a
  ><a name="4519" href="Session.html#4519" class="Function"
  >`&#931;^</a
  ><a name="4522"
  > </a
  ><a name="4523" href="Session.html#4523" class="Function"
  >`&#928;^</a
  ><a name="4526"
  > </a
  ><a name="4527" class="Symbol"
  >:</a
  ><a name="4528"
  > </a
  ><a name="4529" class="Symbol"
  >{</a
  ><a name="4530" href="Session.html#4530" class="Bound"
  >I</a
  ><a name="4531"
  > </a
  ><a name="4532" href="Session.html#4532" class="Bound"
  >O</a
  ><a name="4533"
  > </a
  ><a name="4534" class="Symbol"
  >:</a
  ><a name="4535"
  > </a
  ><a name="4536" class="PrimitiveType"
  >Set</a
  ><a name="4539" class="Symbol"
  >}(</a
  ><a name="4541" href="Session.html#4541" class="Bound"
  >S</a
  ><a name="4542"
  > </a
  ><a name="4543" class="Symbol"
  >:</a
  ><a name="4544"
  > </a
  ><a name="4545" class="PrimitiveType"
  >Set</a
  ><a name="4548" class="Symbol"
  >)(</a
  ><a name="4550" href="Session.html#4550" class="Bound"
  >T</a
  ><a name="4551"
  > </a
  ><a name="4552" class="Symbol"
  >:</a
  ><a name="4553"
  > </a
  ><a name="4554" href="Session.html#4541" class="Bound"
  >S</a
  ><a name="4555"
  > </a
  ><a name="4556" class="Symbol"
  >&#8594;</a
  ><a name="4557"
  > </a
  ><a name="4558" href="Session.html#3758" class="Function"
  >De</a
  ><a name="4560"
  > </a
  ><a name="4561" href="Session.html#4530" class="Bound"
  >I</a
  ><a name="4562" class="Symbol"
  >)</a
  ><a name="4563"
  > </a
  ><a name="4564" class="Symbol"
  >&#8594;</a
  ><a name="4565"
  > </a
  ><a name="4566" href="Session.html#4530" class="Bound"
  >I</a
  ><a name="4567"
  > </a
  ><a name="4568" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="4569"
  > </a
  ><a name="4570" href="Session.html#4532" class="Bound"
  >O</a
  ><a name="4571"
  >
</a
  ><a name="4572" href="Session.html#4519" class="Function"
  >`&#931;^</a
  ><a name="4575"
  > </a
  ><a name="4576" href="Session.html#4576" class="Bound"
  >S</a
  ><a name="4577"
  > </a
  ><a name="4578" href="Session.html#4578" class="Bound"
  >T</a
  ><a name="4579"
  > </a
  ><a name="4580" class="Symbol"
  >=</a
  ><a name="4581"
  > </a
  ><a name="4582" href="Session.html#4031" class="InductiveConstructor"
  >`&#931;</a
  ><a name="4584"
  > </a
  ><a name="4585" href="Session.html#4576" class="Bound"
  >S</a
  ><a name="4586"
  > </a
  ><a name="4587" class="Symbol"
  >(</a
  ><a name="4588" href="Session.html#4151" class="InductiveConstructor"
  >`^</a
  ><a name="4590"
  > </a
  ><a name="4591" href="Session.html#4578" class="Bound"
  >T</a
  ><a name="4592" class="Symbol"
  >)</a
  ><a name="4593"
  >
</a
  ><a name="4594" href="Session.html#4523" class="Function"
  >`&#928;^</a
  ><a name="4597"
  > </a
  ><a name="4598" href="Session.html#4598" class="Bound"
  >S</a
  ><a name="4599"
  > </a
  ><a name="4600" href="Session.html#4600" class="Bound"
  >T</a
  ><a name="4601"
  > </a
  ><a name="4602" class="Symbol"
  >=</a
  ><a name="4603"
  > </a
  ><a name="4604" href="Session.html#4034" class="InductiveConstructor"
  >`&#928;</a
  ><a name="4606"
  > </a
  ><a name="4607" href="Session.html#4598" class="Bound"
  >S</a
  ><a name="4608"
  > </a
  ><a name="4609" class="Symbol"
  >(</a
  ><a name="4610" href="Session.html#4151" class="InductiveConstructor"
  >`^</a
  ><a name="4612"
  > </a
  ><a name="4613" href="Session.html#4600" class="Bound"
  >T</a
  ><a name="4614" class="Symbol"
  >)</a
  ><a name="4615"
  ></pre>

<pre></a
  ><a name="4641" href="Session.html#4641" class="Function Operator"
  >_&#9666;_</a
  ><a name="4644"
  > </a
  ><a name="4645" class="Symbol"
  >:</a
  ><a name="4646"
  > </a
  ><a name="4647" class="PrimitiveType"
  >Set</a
  ><a name="4650"
  > </a
  ><a name="4651" class="Symbol"
  >&#8594;</a
  ><a name="4652"
  > </a
  ><a name="4653" class="PrimitiveType"
  >Set</a
  ><a name="4656"
  > </a
  ><a name="4657" class="Symbol"
  >&#8594;</a
  ><a name="4658"
  > </a
  ><a name="4659" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="4663"
  >
</a
  ><a name="4664" href="Session.html#4664" class="Bound"
  >O</a
  ><a name="4665"
  > </a
  ><a name="4666" href="Session.html#4641" class="Function Operator"
  >&#9666;</a
  ><a name="4667"
  > </a
  ><a name="4668" href="Session.html#4668" class="Bound"
  >I</a
  ><a name="4669"
  > </a
  ><a name="4670" class="Symbol"
  >=</a
  ><a name="4671"
  > </a
  ><a name="4672" href="Session.html#4668" class="Bound"
  >I</a
  ><a name="4673"
  > </a
  ><a name="4674" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="4675"
  > </a
  ><a name="4676" href="Session.html#4664" class="Bound"
  >O</a
  ><a name="4677"
  ></pre>
<p>This representation of the language of types should not be considered definitive but it seems reasonably effective.</p>
<p>Other approaches, where the session types inductive definition <code>_▹_</code> would only have one parameter (as in <em>Descriptions</em>), seemed more difficult to implement and led to more awkward encodings of the syntax: we probably did not try all the possibilities, though.</p>
<h3 id="types-and-sides">Types and sides</h3>
<p>A &quot;sided&quot; type former (code) <code>[_]F</code> is the type former (code) <code>F</code> when the side is <code>+</code>, the <em>dual</em> of <code>F</code> when it is <code>-</code>.</p>
<pre></a
  ><a name="5227" href="Session.html#5227" class="Function Operator"
  >[_]&#931;</a
  ><a name="5231"
  >   </a
  ><a name="5234" href="Session.html#5234" class="Function Operator"
  >[_]&#928;</a
  ><a name="5238"
  >   </a
  ><a name="5241" class="Symbol"
  >:</a
  ><a name="5242"
  > </a
  ><a name="5243" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="5247"
  >  </a
  ><a name="5249" class="Symbol"
  >&#8594;</a
  ><a name="5250"
  > </a
  ><a name="5251" class="Symbol"
  >{</a
  ><a name="5252" href="Session.html#5252" class="Bound"
  >I</a
  ><a name="5253"
  > </a
  ><a name="5254" href="Session.html#5254" class="Bound"
  >O</a
  ><a name="5255"
  > </a
  ><a name="5256" class="Symbol"
  >:</a
  ><a name="5257"
  > </a
  ><a name="5258" class="PrimitiveType"
  >Set</a
  ><a name="5261" class="Symbol"
  >}(</a
  ><a name="5263" href="Session.html#5263" class="Bound"
  >S</a
  ><a name="5264"
  > </a
  ><a name="5265" class="Symbol"
  >:</a
  ><a name="5266"
  > </a
  ><a name="5267" class="PrimitiveType"
  >Set</a
  ><a name="5270" class="Symbol"
  >)(</a
  ><a name="5272" href="Session.html#5272" class="Bound"
  >T</a
  ><a name="5273"
  > </a
  ><a name="5274" class="Symbol"
  >:</a
  ><a name="5275"
  > </a
  ><a name="5276" href="Session.html#5252" class="Bound"
  >I</a
  ><a name="5277"
  > </a
  ><a name="5278" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="5279"
  > </a
  ><a name="5280" href="Session.html#5263" class="Bound"
  >S</a
  ><a name="5281" class="Symbol"
  >)</a
  ><a name="5282"
  >    </a
  ><a name="5286" class="Symbol"
  >&#8594;</a
  ><a name="5287"
  > </a
  ><a name="5288" href="Session.html#5252" class="Bound"
  >I</a
  ><a name="5289"
  > </a
  ><a name="5290" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="5291"
  > </a
  ><a name="5292" href="Session.html#5254" class="Bound"
  >O</a
  ><a name="5293"
  >
</a
  ><a name="5294" href="Session.html#5294" class="Function Operator"
  >[_]&#931;^</a
  ><a name="5299"
  >  </a
  ><a name="5301" href="Session.html#5301" class="Function Operator"
  >[_]&#928;^</a
  ><a name="5306"
  >  </a
  ><a name="5308" class="Symbol"
  >:</a
  ><a name="5309"
  > </a
  ><a name="5310" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="5314"
  >  </a
  ><a name="5316" class="Symbol"
  >&#8594;</a
  ><a name="5317"
  > </a
  ><a name="5318" class="Symbol"
  >{</a
  ><a name="5319" href="Session.html#5319" class="Bound"
  >I</a
  ><a name="5320"
  > </a
  ><a name="5321" href="Session.html#5321" class="Bound"
  >O</a
  ><a name="5322"
  > </a
  ><a name="5323" class="Symbol"
  >:</a
  ><a name="5324"
  > </a
  ><a name="5325" class="PrimitiveType"
  >Set</a
  ><a name="5328" class="Symbol"
  >}(</a
  ><a name="5330" href="Session.html#5330" class="Bound"
  >S</a
  ><a name="5331"
  > </a
  ><a name="5332" class="Symbol"
  >:</a
  ><a name="5333"
  > </a
  ><a name="5334" class="PrimitiveType"
  >Set</a
  ><a name="5337" class="Symbol"
  >)(</a
  ><a name="5339" href="Session.html#5339" class="Bound"
  >T</a
  ><a name="5340"
  > </a
  ><a name="5341" class="Symbol"
  >:</a
  ><a name="5342"
  > </a
  ><a name="5343" href="Session.html#5330" class="Bound"
  >S</a
  ><a name="5344"
  > </a
  ><a name="5345" class="Symbol"
  >&#8594;</a
  ><a name="5346"
  > </a
  ><a name="5347" href="Session.html#3758" class="Function"
  >De</a
  ><a name="5349"
  > </a
  ><a name="5350" href="Session.html#5319" class="Bound"
  >I</a
  ><a name="5351" class="Symbol"
  >)</a
  ><a name="5352"
  > </a
  ><a name="5353" class="Symbol"
  >&#8594;</a
  ><a name="5354"
  > </a
  ><a name="5355" href="Session.html#5319" class="Bound"
  >I</a
  ><a name="5356"
  > </a
  ><a name="5357" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="5358"
  > </a
  ><a name="5359" href="Session.html#5321" class="Bound"
  >O</a
  ><a name="5360"
  >
</a
  ><a name="5361" href="Session.html#5361" class="Function Operator"
  >_[_]&#8855;_</a
  ><a name="5367"
  > </a
  ><a name="5368" href="Session.html#5368" class="Function Operator"
  >_[_]&#8523;_</a
  ><a name="5374"
  > </a
  ><a name="5375" class="Symbol"
  >:</a
  ><a name="5376"
  > </a
  ><a name="5377" href="Session.html#3816" class="Function"
  >Entry</a
  ><a name="5382"
  > </a
  ><a name="5383" class="Symbol"
  >&#8594;</a
  ><a name="5384"
  > </a
  ><a name="5385" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="5389"
  > </a
  ><a name="5390" class="Symbol"
  >&#8594;</a
  ><a name="5391"
  > </a
  ><a name="5392" class="Symbol"
  >{</a
  ><a name="5393" href="Session.html#5393" class="Bound"
  >I</a
  ><a name="5394"
  > </a
  ><a name="5395" href="Session.html#5395" class="Bound"
  >O</a
  ><a name="5396"
  > </a
  ><a name="5397" class="Symbol"
  >:</a
  ><a name="5398"
  > </a
  ><a name="5399" class="PrimitiveType"
  >Set</a
  ><a name="5402" class="Symbol"
  >}</a
  ><a name="5403"
  > </a
  ><a name="5404" class="Symbol"
  >&#8594;</a
  ><a name="5405"
  > </a
  ><a name="5406" href="Session.html#5393" class="Bound"
  >I</a
  ><a name="5407"
  > </a
  ><a name="5408" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="5409"
  > </a
  ><a name="5410" href="Session.html#5395" class="Bound"
  >O</a
  ><a name="5411"
  >         </a
  ><a name="5420" class="Symbol"
  >&#8594;</a
  ><a name="5421"
  > </a
  ><a name="5422" href="Session.html#5393" class="Bound"
  >I</a
  ><a name="5423"
  > </a
  ><a name="5424" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="5425"
  > </a
  ><a name="5426" href="Session.html#5395" class="Bound"
  >O</a
  ><a name="5427"
  >
</a
  ><a name="5428" href="Session.html#5428" class="Function Operator"
  >[_]&#161;_</a
  ><a name="5433"
  >  </a
  ><a name="5435" href="Session.html#5435" class="Function Operator"
  >[_]&#191;_</a
  ><a name="5440"
  >  </a
  ><a name="5442" class="Symbol"
  >:</a
  ><a name="5443"
  > </a
  ><a name="5444" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="5448"
  >  </a
  ><a name="5450" class="Symbol"
  >&#8594;</a
  ><a name="5451"
  > </a
  ><a name="5452" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="5456"
  >  </a
  ><a name="5458" class="Symbol"
  >&#8594;</a
  ><a name="5459"
  > </a
  ><a name="5460" class="Symbol"
  >{</a
  ><a name="5461" href="Session.html#5461" class="Bound"
  >I</a
  ><a name="5462"
  > </a
  ><a name="5463" href="Session.html#5463" class="Bound"
  >O</a
  ><a name="5464"
  > </a
  ><a name="5465" class="Symbol"
  >:</a
  ><a name="5466"
  > </a
  ><a name="5467" class="PrimitiveType"
  >Set</a
  ><a name="5470" class="Symbol"
  >}</a
  ><a name="5471"
  >                </a
  ><a name="5487" class="Symbol"
  >&#8594;</a
  ><a name="5488"
  > </a
  ><a name="5489" href="Session.html#5461" class="Bound"
  >I</a
  ><a name="5490"
  > </a
  ><a name="5491" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="5492"
  > </a
  ><a name="5493" href="Session.html#5463" class="Bound"
  >O</a
  ><a name="5494"
  >
</a
  ><a name="5495" href="Session.html#5227" class="Function Operator"
  >[</a
  ><a name="5496"
  > </a
  ><a name="5497" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="5498"
  > </a
  ><a name="5499" href="Session.html#5227" class="Function Operator"
  >]&#931;</a
  ><a name="5501"
  >     </a
  ><a name="5506" class="Symbol"
  >=</a
  ><a name="5507"
  > </a
  ><a name="5508" href="Session.html#4031" class="InductiveConstructor"
  >`&#931;</a
  ><a name="5510"
  >
</a
  ><a name="5511" href="Session.html#5227" class="Function Operator"
  >[</a
  ><a name="5512"
  > </a
  ><a name="5513" href="Base.html#4797" class="InductiveConstructor"
  >-</a
  ><a name="5514"
  > </a
  ><a name="5515" href="Session.html#5227" class="Function Operator"
  >]&#931;</a
  ><a name="5517"
  >     </a
  ><a name="5522" class="Symbol"
  >=</a
  ><a name="5523"
  > </a
  ><a name="5524" href="Session.html#4034" class="InductiveConstructor"
  >`&#928;</a
  ><a name="5526"
  >
</a
  ><a name="5527" href="Session.html#5234" class="Function Operator"
  >[</a
  ><a name="5528"
  > </a
  ><a name="5529" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="5530"
  > </a
  ><a name="5531" href="Session.html#5234" class="Function Operator"
  >]&#928;</a
  ><a name="5533"
  >     </a
  ><a name="5538" class="Symbol"
  >=</a
  ><a name="5539"
  > </a
  ><a name="5540" href="Session.html#4034" class="InductiveConstructor"
  >`&#928;</a
  ><a name="5542"
  > 
</a
  ><a name="5544" href="Session.html#5234" class="Function Operator"
  >[</a
  ><a name="5545"
  > </a
  ><a name="5546" href="Base.html#4797" class="InductiveConstructor"
  >-</a
  ><a name="5547"
  > </a
  ><a name="5548" href="Session.html#5234" class="Function Operator"
  >]&#928;</a
  ><a name="5550"
  >     </a
  ><a name="5555" class="Symbol"
  >=</a
  ><a name="5556"
  > </a
  ><a name="5557" href="Session.html#4031" class="InductiveConstructor"
  >`&#931;</a
  ><a name="5559"
  > 
</a
  ><a name="5561" href="Session.html#5294" class="Function Operator"
  >[</a
  ><a name="5562"
  > </a
  ><a name="5563" href="Session.html#5563" class="Bound"
  >s</a
  ><a name="5564"
  > </a
  ><a name="5565" href="Session.html#5294" class="Function Operator"
  >]&#931;^</a
  ><a name="5568"
  > </a
  ><a name="5569" href="Session.html#5569" class="Bound"
  >S</a
  ><a name="5570"
  > </a
  ><a name="5571" href="Session.html#5571" class="Bound"
  >T</a
  ><a name="5572"
  > </a
  ><a name="5573" class="Symbol"
  >=</a
  ><a name="5574"
  > </a
  ><a name="5575" href="Session.html#5227" class="Function Operator"
  >[</a
  ><a name="5576"
  > </a
  ><a name="5577" href="Session.html#5563" class="Bound"
  >s</a
  ><a name="5578"
  > </a
  ><a name="5579" href="Session.html#5227" class="Function Operator"
  >]&#931;</a
  ><a name="5581"
  > </a
  ><a name="5582" href="Session.html#5569" class="Bound"
  >S</a
  ><a name="5583"
  > </a
  ><a name="5584" class="Symbol"
  >(</a
  ><a name="5585" href="Session.html#4151" class="InductiveConstructor"
  >`^</a
  ><a name="5587"
  > </a
  ><a name="5588" href="Session.html#5571" class="Bound"
  >T</a
  ><a name="5589" class="Symbol"
  >)</a
  ><a name="5590"
  >
</a
  ><a name="5591" href="Session.html#5301" class="Function Operator"
  >[</a
  ><a name="5592"
  > </a
  ><a name="5593" href="Session.html#5593" class="Bound"
  >s</a
  ><a name="5594"
  > </a
  ><a name="5595" href="Session.html#5301" class="Function Operator"
  >]&#928;^</a
  ><a name="5598"
  > </a
  ><a name="5599" href="Session.html#5599" class="Bound"
  >S</a
  ><a name="5600"
  > </a
  ><a name="5601" href="Session.html#5601" class="Bound"
  >T</a
  ><a name="5602"
  > </a
  ><a name="5603" class="Symbol"
  >=</a
  ><a name="5604"
  > </a
  ><a name="5605" href="Session.html#5234" class="Function Operator"
  >[</a
  ><a name="5606"
  > </a
  ><a name="5607" href="Session.html#5593" class="Bound"
  >s</a
  ><a name="5608"
  > </a
  ><a name="5609" href="Session.html#5234" class="Function Operator"
  >]&#928;</a
  ><a name="5611"
  > </a
  ><a name="5612" href="Session.html#5599" class="Bound"
  >S</a
  ><a name="5613"
  > </a
  ><a name="5614" class="Symbol"
  >(</a
  ><a name="5615" href="Session.html#4151" class="InductiveConstructor"
  >`^</a
  ><a name="5617"
  > </a
  ><a name="5618" href="Session.html#5601" class="Bound"
  >T</a
  ><a name="5619" class="Symbol"
  >)</a
  ><a name="5620"
  >
</a
  ><a name="5621" href="Session.html#5621" class="Bound"
  >L</a
  ><a name="5622"
  > </a
  ><a name="5623" href="Session.html#5361" class="Function Operator"
  >[</a
  ><a name="5624"
  > </a
  ><a name="5625" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="5626"
  > </a
  ><a name="5627" href="Session.html#5361" class="Function Operator"
  >]&#8855;</a
  ><a name="5629"
  > </a
  ><a name="5630" href="Session.html#5630" class="Bound"
  >R</a
  ><a name="5631"
  > </a
  ><a name="5632" class="Symbol"
  >=</a
  ><a name="5633"
  > </a
  ><a name="5634" href="Session.html#5621" class="Bound"
  >L</a
  ><a name="5635"
  > </a
  ><a name="5636" href="Session.html#4260" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="5637"
  > </a
  ><a name="5638" href="Session.html#5630" class="Bound"
  >R</a
  ><a name="5639"
  >
</a
  ><a name="5640" href="Session.html#5640" class="Bound"
  >L</a
  ><a name="5641"
  > </a
  ><a name="5642" href="Session.html#5361" class="Function Operator"
  >[</a
  ><a name="5643"
  > </a
  ><a name="5644" href="Base.html#4797" class="InductiveConstructor"
  >-</a
  ><a name="5645"
  > </a
  ><a name="5646" href="Session.html#5361" class="Function Operator"
  >]&#8855;</a
  ><a name="5648"
  > </a
  ><a name="5649" href="Session.html#5649" class="Bound"
  >R</a
  ><a name="5650"
  > </a
  ><a name="5651" class="Symbol"
  >=</a
  ><a name="5652"
  > </a
  ><a name="5653" href="Session.html#5640" class="Bound"
  >L</a
  ><a name="5654"
  > </a
  ><a name="5655" href="Session.html#4264" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="5656"
  > </a
  ><a name="5657" href="Session.html#5649" class="Bound"
  >R</a
  ><a name="5658"
  >
</a
  ><a name="5659" href="Session.html#5659" class="Bound"
  >L</a
  ><a name="5660"
  > </a
  ><a name="5661" href="Session.html#5368" class="Function Operator"
  >[</a
  ><a name="5662"
  > </a
  ><a name="5663" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="5664"
  > </a
  ><a name="5665" href="Session.html#5368" class="Function Operator"
  >]&#8523;</a
  ><a name="5667"
  > </a
  ><a name="5668" href="Session.html#5668" class="Bound"
  >R</a
  ><a name="5669"
  > </a
  ><a name="5670" class="Symbol"
  >=</a
  ><a name="5671"
  > </a
  ><a name="5672" href="Session.html#5659" class="Bound"
  >L</a
  ><a name="5673"
  > </a
  ><a name="5674" href="Session.html#4264" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="5675"
  > </a
  ><a name="5676" href="Session.html#5668" class="Bound"
  >R</a
  ><a name="5677"
  >
</a
  ><a name="5678" href="Session.html#5678" class="Bound"
  >L</a
  ><a name="5679"
  > </a
  ><a name="5680" href="Session.html#5368" class="Function Operator"
  >[</a
  ><a name="5681"
  > </a
  ><a name="5682" href="Base.html#4797" class="InductiveConstructor"
  >-</a
  ><a name="5683"
  > </a
  ><a name="5684" href="Session.html#5368" class="Function Operator"
  >]&#8523;</a
  ><a name="5686"
  > </a
  ><a name="5687" href="Session.html#5687" class="Bound"
  >R</a
  ><a name="5688"
  > </a
  ><a name="5689" class="Symbol"
  >=</a
  ><a name="5690"
  > </a
  ><a name="5691" href="Session.html#5678" class="Bound"
  >L</a
  ><a name="5692"
  > </a
  ><a name="5693" href="Session.html#4260" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="5694"
  > </a
  ><a name="5695" href="Session.html#5687" class="Bound"
  >R</a
  ><a name="5696"
  >
</a
  ><a name="5697" href="Session.html#5428" class="Function Operator"
  >[</a
  ><a name="5698"
  > </a
  ><a name="5699" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="5700"
  > </a
  ><a name="5701" href="Session.html#5428" class="Function Operator"
  >]&#161;</a
  ><a name="5703"
  > </a
  ><a name="5704" href="Session.html#5704" class="Bound"
  >F</a
  ><a name="5705"
  >   </a
  ><a name="5708" class="Symbol"
  >=</a
  ><a name="5709"
  > </a
  ><a name="5710" href="Session.html#4358" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="5711"
  > </a
  ><a name="5712" href="Session.html#5704" class="Bound"
  >F</a
  ><a name="5713"
  >    
</a
  ><a name="5718" href="Session.html#5428" class="Function Operator"
  >[</a
  ><a name="5719"
  > </a
  ><a name="5720" href="Base.html#4797" class="InductiveConstructor"
  >-</a
  ><a name="5721"
  > </a
  ><a name="5722" href="Session.html#5428" class="Function Operator"
  >]&#161;</a
  ><a name="5724"
  > </a
  ><a name="5725" href="Session.html#5725" class="Bound"
  >F</a
  ><a name="5726"
  >   </a
  ><a name="5729" class="Symbol"
  >=</a
  ><a name="5730"
  > </a
  ><a name="5731" href="Session.html#4361" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="5732"
  > </a
  ><a name="5733" href="Session.html#5725" class="Bound"
  >F</a
  ><a name="5734"
  >    
</a
  ><a name="5739" href="Session.html#5435" class="Function Operator"
  >[</a
  ><a name="5740"
  > </a
  ><a name="5741" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="5742"
  > </a
  ><a name="5743" href="Session.html#5435" class="Function Operator"
  >]&#191;</a
  ><a name="5745"
  > </a
  ><a name="5746" href="Session.html#5746" class="Bound"
  >F</a
  ><a name="5747"
  >   </a
  ><a name="5750" class="Symbol"
  >=</a
  ><a name="5751"
  > </a
  ><a name="5752" href="Session.html#4361" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="5753"
  > </a
  ><a name="5754" href="Session.html#5746" class="Bound"
  >F</a
  ><a name="5755"
  >     
</a
  ><a name="5761" href="Session.html#5435" class="Function Operator"
  >[</a
  ><a name="5762"
  > </a
  ><a name="5763" href="Base.html#4797" class="InductiveConstructor"
  >-</a
  ><a name="5764"
  > </a
  ><a name="5765" href="Session.html#5435" class="Function Operator"
  >]&#191;</a
  ><a name="5767"
  > </a
  ><a name="5768" href="Session.html#5768" class="Bound"
  >F</a
  ><a name="5769"
  >   </a
  ><a name="5772" class="Symbol"
  >=</a
  ><a name="5773"
  > </a
  ><a name="5774" href="Session.html#4358" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="5775"
  > </a
  ><a name="5776" href="Session.html#5768" class="Bound"
  >F</a
  ><a name="5777"
  ></pre>
<h3 id="contexts">Contexts</h3>
<p>A context is a simple list of entries, i.e. codes paired with an optional side. Absence of the side corresponds to the session not being started yet: in this situation we say that the channel is &quot;new&quot;.</p>
<pre></a
  ><a name="6020" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="6022"
  > </a
  ><a name="6023" class="Symbol"
  >=</a
  ><a name="6024"
  > </a
  ><a name="6025" href="Data.List.html#659" class="Datatype"
  >List</a
  ><a name="6029"
  > </a
  ><a name="6030" href="Session.html#3816" class="Function"
  >Entry</a
  ><a name="6035"
  ></pre>
<p><code>is¿</code> means &quot;is it safe to duplicate this entry?&quot;.</p>
<pre></a
  ><a name="6113" href="Session.html#6113" class="Function"
  >is&#191;</a
  ><a name="6116"
  > </a
  ><a name="6117" class="Symbol"
  >:</a
  ><a name="6118"
  > </a
  ><a name="6119" href="Session.html#3816" class="Function"
  >Entry</a
  ><a name="6124"
  > </a
  ><a name="6125" class="Symbol"
  >&#8594;</a
  ><a name="6126"
  > </a
  ><a name="6127" class="PrimitiveType"
  >Set</a
  ><a name="6130"
  >
</a
  ><a name="6131" href="Session.html#6113" class="Function"
  >is&#191;</a
  ><a name="6134"
  > </a
  ><a name="6135" class="Symbol"
  >(</a
  ><a name="6136" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6137"
  > </a
  ><a name="6138" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="6139"
  > </a
  ><a name="6140" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6141"
  > </a
  ><a name="6142" class="Symbol"
  >(_</a
  ><a name="6144"
  > </a
  ><a name="6145" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6146"
  > </a
  ><a name="6147" class="Symbol"
  >_</a
  ><a name="6148"
  > </a
  ><a name="6149" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6150"
  > </a
  ><a name="6151" href="Session.html#4361" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="6152"
  > </a
  ><a name="6153" href="Session.html#6153" class="Bound"
  >F</a
  ><a name="6154" class="Symbol"
  >))</a
  ><a name="6156"
  > </a
  ><a name="6157" class="Symbol"
  >=</a
  ><a name="6158"
  > </a
  ><a name="6159" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="6160"
  >
</a
  ><a name="6161" href="Session.html#6113" class="Function"
  >is&#191;</a
  ><a name="6164"
  > </a
  ><a name="6165" class="Symbol"
  >(</a
  ><a name="6166" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6167"
  > </a
  ><a name="6168" href="Base.html#4797" class="InductiveConstructor"
  >-</a
  ><a name="6169"
  > </a
  ><a name="6170" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6171"
  > </a
  ><a name="6172" class="Symbol"
  >(_</a
  ><a name="6174"
  > </a
  ><a name="6175" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6176"
  > </a
  ><a name="6177" class="Symbol"
  >_</a
  ><a name="6178"
  > </a
  ><a name="6179" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6180"
  > </a
  ><a name="6181" href="Session.html#4358" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="6182"
  > </a
  ><a name="6183" href="Session.html#6183" class="Bound"
  >F</a
  ><a name="6184" class="Symbol"
  >))</a
  ><a name="6186"
  > </a
  ><a name="6187" class="Symbol"
  >=</a
  ><a name="6188"
  > </a
  ><a name="6189" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="6190"
  >
</a
  ><a name="6191" href="Session.html#6113" class="Function"
  >is&#191;</a
  ><a name="6194"
  >  </a
  ><a name="6196" class="Symbol"
  >_</a
  ><a name="6197"
  >                    </a
  ><a name="6217" class="Symbol"
  >=</a
  ><a name="6218"
  > </a
  ><a name="6219" href="Base.html#84" class="Datatype"
  >&#8869;</a
  ><a name="6220"
  ></pre>
<p>To construct a server we must check (at compile time) that it will be safe to duplicate all the channels that its runtime copies will have access to: <code>All¿</code> is the predicate over contexts which corresponds to this condition.</p>
<pre></a
  ><a name="6472" href="Session.html#6472" class="Function"
  >All&#191;</a
  ><a name="6476"
  > </a
  ><a name="6477" class="Symbol"
  >:</a
  ><a name="6478"
  > </a
  ><a name="6479" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="6481"
  > </a
  ><a name="6482" class="Symbol"
  >&#8594;</a
  ><a name="6483"
  > </a
  ><a name="6484" class="PrimitiveType"
  >Set</a
  ><a name="6487"
  > </a
  ><a name="6488" class="Symbol"
  >_</a
  ><a name="6489"
  >
</a
  ><a name="6490" href="Session.html#6472" class="Function"
  >All&#191;</a
  ><a name="6494"
  > </a
  ><a name="6495" class="Symbol"
  >=</a
  ><a name="6496"
  > </a
  ><a name="6497" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="6500"
  > </a
  ><a name="6501" href="Session.html#6113" class="Function"
  >is&#191;</a
  ><a name="6504"
  ></pre>
<h3 id="splitting-contexts">Splitting contexts</h3>
<p>We need to define what it means to split an (input) context in two.</p>
<pre></a
  ><a name="6623" class="Keyword"
  >data</a
  ><a name="6627"
  > </a
  ><a name="6628" href="Session.html#6628" class="Datatype"
  >SplitNew</a
  ><a name="6636"
  > </a
  ><a name="6637" class="Symbol"
  >:</a
  ><a name="6638"
  > </a
  ><a name="6639" class="PrimitiveType"
  >Set</a
  ><a name="6642"
  > </a
  ><a name="6643" class="Keyword"
  >where</a
  ><a name="6648"
  > 
  </a
  ><a name="6652" href="Session.html#6652" class="InductiveConstructor"
  >+</a
  ><a name="6653"
  > </a
  ><a name="6654" href="Session.html#6654" class="InductiveConstructor"
  >-</a
  ><a name="6655"
  > </a
  ><a name="6656" href="Session.html#6656" class="InductiveConstructor"
  >+-</a
  ><a name="6658"
  > </a
  ><a name="6659" href="Session.html#6659" class="InductiveConstructor"
  >-+</a
  ><a name="6661"
  > </a
  ><a name="6662" class="Symbol"
  >:</a
  ><a name="6663"
  > </a
  ><a name="6664" href="Session.html#6628" class="Datatype"
  >SplitNew</a
  ><a name="6672"
  >

</a
  ><a name="6674" href="Session.html#6674" class="Function"
  >Split</a
  ><a name="6679"
  > </a
  ><a name="6680" class="Symbol"
  >:</a
  ><a name="6681"
  > </a
  ><a name="6682" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="6684"
  > </a
  ><a name="6685" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="6689"
  > </a
  ><a name="6690" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6691"
  > </a
  ><a name="6692" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="6696"
  > </a
  ><a name="6697" class="Symbol"
  >&#8594;</a
  ><a name="6698"
  > </a
  ><a name="6699" class="PrimitiveType"
  >Set</a
  ><a name="6702"
  >
</a
  ><a name="6703" href="Session.html#6674" class="Function"
  >Split</a
  ><a name="6708"
  > </a
  ><a name="6709" class="Symbol"
  >(</a
  ><a name="6710" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6711"
  > </a
  ><a name="6712" class="Symbol"
  >_</a
  ><a name="6713"
  > </a
  ><a name="6714" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6715"
  > </a
  ><a name="6716" href="Session.html#6716" class="Bound"
  >x</a
  ><a name="6717" class="Symbol"
  >)</a
  ><a name="6718"
  > </a
  ><a name="6719" class="Symbol"
  >=</a
  ><a name="6720"
  > </a
  ><a name="6721" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="6725"
  >
</a
  ><a name="6726" href="Session.html#6674" class="Function"
  >Split</a
  ><a name="6731"
  > </a
  ><a name="6732" class="Symbol"
  >(</a
  ><a name="6733" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6734"
  >   </a
  ><a name="6737" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6738"
  > </a
  ><a name="6739" href="Session.html#6739" class="Bound"
  >x</a
  ><a name="6740" class="Symbol"
  >)</a
  ><a name="6741"
  > </a
  ><a name="6742" class="Symbol"
  >=</a
  ><a name="6743"
  > </a
  ><a name="6744" href="Session.html#6628" class="Datatype"
  >SplitNew</a
  ><a name="6752"
  >

</a
  ><a name="6754" href="Session.html#6754" class="Function"
  >split</a
  ><a name="6759"
  > </a
  ><a name="6760" class="Symbol"
  >:</a
  ><a name="6761"
  > </a
  ><a name="6762" class="Symbol"
  >(</a
  ><a name="6763" href="Session.html#6763" class="Bound"
  >&#964;</a
  ><a name="6764"
  > </a
  ><a name="6765" class="Symbol"
  >:</a
  ><a name="6766"
  > </a
  ><a name="6767" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="6769"
  > </a
  ><a name="6770" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="6774"
  > </a
  ><a name="6775" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6776"
  > </a
  ><a name="6777" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="6781" class="Symbol"
  >)</a
  ><a name="6782"
  > </a
  ><a name="6783" class="Symbol"
  >&#8594;</a
  ><a name="6784"
  > </a
  ><a name="6785" href="Session.html#6674" class="Function"
  >Split</a
  ><a name="6790"
  > </a
  ><a name="6791" href="Session.html#6763" class="Bound"
  >&#964;</a
  ><a name="6792"
  > </a
  ><a name="6793" class="Symbol"
  >&#8594;</a
  ><a name="6794"
  > </a
  ><a name="6795" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="6797"
  > </a
  ><a name="6798" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6799"
  > </a
  ><a name="6800" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="6802"
  > </a
  ><a name="6803" class="Symbol"
  >&#8594;</a
  ><a name="6804"
  > </a
  ><a name="6805" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="6807"
  > </a
  ><a name="6808" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6809"
  > </a
  ><a name="6810" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="6812"
  >
</a
  ><a name="6813" href="Session.html#6754" class="Function"
  >split</a
  ><a name="6818"
  > </a
  ><a name="6819" class="Symbol"
  >(</a
  ><a name="6820" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6821"
  > </a
  ><a name="6822" href="Session.html#6822" class="Bound"
  >s</a
  ><a name="6823"
  > </a
  ><a name="6824" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6825"
  > </a
  ><a name="6826" href="Session.html#6826" class="Bound"
  >C</a
  ><a name="6827" class="Symbol"
  >)</a
  ><a name="6828"
  >  </a
  ><a name="6830" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="6831"
  > </a
  ><a name="6832" class="Symbol"
  >(</a
  ><a name="6833" href="Session.html#6833" class="Bound"
  >L</a
  ><a name="6834"
  > </a
  ><a name="6835" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6836"
  > </a
  ><a name="6837" href="Session.html#6837" class="Bound"
  >R</a
  ><a name="6838" class="Symbol"
  >)</a
  ><a name="6839"
  > </a
  ><a name="6840" class="Symbol"
  >=</a
  ><a name="6841"
  > </a
  ><a name="6842" class="Symbol"
  >(</a
  ><a name="6843" href="Session.html#6833" class="Bound"
  >L</a
  ><a name="6844"
  > </a
  ><a name="6845" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6846"
  > </a
  ><a name="6847" class="Symbol"
  >(</a
  ><a name="6848" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6849"
  > </a
  ><a name="6850" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="6851"
  > </a
  ><a name="6852" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6853"
  > </a
  ><a name="6854" href="Session.html#6826" class="Bound"
  >C</a
  ><a name="6855" class="Symbol"
  >))</a
  ><a name="6857"
  > </a
  ><a name="6858" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6859"
  >  </a
  ><a name="6861" href="Session.html#6837" class="Bound"
  >R</a
  ><a name="6862"
  >
</a
  ><a name="6863" href="Session.html#6754" class="Function"
  >split</a
  ><a name="6868"
  > </a
  ><a name="6869" class="Symbol"
  >(</a
  ><a name="6870" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6871"
  > </a
  ><a name="6872" href="Session.html#6872" class="Bound"
  >s</a
  ><a name="6873"
  > </a
  ><a name="6874" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6875"
  > </a
  ><a name="6876" href="Session.html#6876" class="Bound"
  >C</a
  ><a name="6877" class="Symbol"
  >)</a
  ><a name="6878"
  >  </a
  ><a name="6880" href="Base.html#4797" class="InductiveConstructor"
  >-</a
  ><a name="6881"
  > </a
  ><a name="6882" class="Symbol"
  >(</a
  ><a name="6883" href="Session.html#6883" class="Bound"
  >L</a
  ><a name="6884"
  > </a
  ><a name="6885" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6886"
  > </a
  ><a name="6887" href="Session.html#6887" class="Bound"
  >R</a
  ><a name="6888" class="Symbol"
  >)</a
  ><a name="6889"
  > </a
  ><a name="6890" class="Symbol"
  >=</a
  ><a name="6891"
  >  </a
  ><a name="6893" href="Session.html#6883" class="Bound"
  >L</a
  ><a name="6894"
  >              </a
  ><a name="6908" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6909"
  > </a
  ><a name="6910" class="Symbol"
  >(</a
  ><a name="6911" href="Session.html#6887" class="Bound"
  >R</a
  ><a name="6912"
  > </a
  ><a name="6913" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6914"
  > </a
  ><a name="6915" class="Symbol"
  >(</a
  ><a name="6916" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6917"
  > </a
  ><a name="6918" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="6919"
  > </a
  ><a name="6920" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6921"
  > </a
  ><a name="6922" href="Session.html#6876" class="Bound"
  >C</a
  ><a name="6923" class="Symbol"
  >))</a
  ><a name="6925"
  >
</a
  ><a name="6926" href="Session.html#6754" class="Function"
  >split</a
  ><a name="6931"
  > </a
  ><a name="6932" class="Symbol"
  >(</a
  ><a name="6933" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6934"
  >   </a
  ><a name="6937" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6938"
  > </a
  ><a name="6939" href="Session.html#6939" class="Bound"
  >C</a
  ><a name="6940" class="Symbol"
  >)</a
  ><a name="6941"
  >  </a
  ><a name="6943" href="Session.html#6652" class="InductiveConstructor"
  >+</a
  ><a name="6944"
  > </a
  ><a name="6945" class="Symbol"
  >(</a
  ><a name="6946" href="Session.html#6946" class="Bound"
  >L</a
  ><a name="6947"
  > </a
  ><a name="6948" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6949"
  > </a
  ><a name="6950" href="Session.html#6950" class="Bound"
  >R</a
  ><a name="6951" class="Symbol"
  >)</a
  ><a name="6952"
  > </a
  ><a name="6953" class="Symbol"
  >=</a
  ><a name="6954"
  > </a
  ><a name="6955" class="Symbol"
  >(</a
  ><a name="6956" href="Session.html#6946" class="Bound"
  >L</a
  ><a name="6957"
  > </a
  ><a name="6958" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6959"
  > </a
  ><a name="6960" class="Symbol"
  >(</a
  ><a name="6961" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6962"
  >   </a
  ><a name="6965" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6966"
  > </a
  ><a name="6967" href="Session.html#6939" class="Bound"
  >C</a
  ><a name="6968" class="Symbol"
  >))</a
  ><a name="6970"
  > </a
  ><a name="6971" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6972"
  >  </a
  ><a name="6974" href="Session.html#6950" class="Bound"
  >R</a
  ><a name="6975"
  >
</a
  ><a name="6976" href="Session.html#6754" class="Function"
  >split</a
  ><a name="6981"
  > </a
  ><a name="6982" class="Symbol"
  >(</a
  ><a name="6983" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6984"
  >   </a
  ><a name="6987" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6988"
  > </a
  ><a name="6989" href="Session.html#6989" class="Bound"
  >C</a
  ><a name="6990" class="Symbol"
  >)</a
  ><a name="6991"
  >  </a
  ><a name="6993" href="Session.html#6654" class="InductiveConstructor"
  >-</a
  ><a name="6994"
  > </a
  ><a name="6995" class="Symbol"
  >(</a
  ><a name="6996" href="Session.html#6996" class="Bound"
  >L</a
  ><a name="6997"
  > </a
  ><a name="6998" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6999"
  > </a
  ><a name="7000" href="Session.html#7000" class="Bound"
  >R</a
  ><a name="7001" class="Symbol"
  >)</a
  ><a name="7002"
  > </a
  ><a name="7003" class="Symbol"
  >=</a
  ><a name="7004"
  >  </a
  ><a name="7006" href="Session.html#6996" class="Bound"
  >L</a
  ><a name="7007"
  >              </a
  ><a name="7021" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7022"
  > </a
  ><a name="7023" class="Symbol"
  >(</a
  ><a name="7024" href="Session.html#7000" class="Bound"
  >R</a
  ><a name="7025"
  > </a
  ><a name="7026" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7027"
  > </a
  ><a name="7028" class="Symbol"
  >(</a
  ><a name="7029" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="7030"
  >   </a
  ><a name="7033" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7034"
  > </a
  ><a name="7035" href="Session.html#6989" class="Bound"
  >C</a
  ><a name="7036" class="Symbol"
  >))</a
  ><a name="7038"
  >
</a
  ><a name="7039" href="Session.html#6754" class="Function"
  >split</a
  ><a name="7044"
  > </a
  ><a name="7045" class="Symbol"
  >(</a
  ><a name="7046" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="7047"
  >   </a
  ><a name="7050" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7051"
  > </a
  ><a name="7052" href="Session.html#7052" class="Bound"
  >C</a
  ><a name="7053" class="Symbol"
  >)</a
  ><a name="7054"
  > </a
  ><a name="7055" href="Session.html#6656" class="InductiveConstructor"
  >+-</a
  ><a name="7057"
  > </a
  ><a name="7058" class="Symbol"
  >(</a
  ><a name="7059" href="Session.html#7059" class="Bound"
  >L</a
  ><a name="7060"
  > </a
  ><a name="7061" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7062"
  > </a
  ><a name="7063" href="Session.html#7063" class="Bound"
  >R</a
  ><a name="7064" class="Symbol"
  >)</a
  ><a name="7065"
  > </a
  ><a name="7066" class="Symbol"
  >=</a
  ><a name="7067"
  > </a
  ><a name="7068" class="Symbol"
  >(</a
  ><a name="7069" href="Session.html#7059" class="Bound"
  >L</a
  ><a name="7070"
  > </a
  ><a name="7071" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7072"
  > </a
  ><a name="7073" class="Symbol"
  >(</a
  ><a name="7074" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="7075"
  > </a
  ><a name="7076" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="7077"
  > </a
  ><a name="7078" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7079"
  > </a
  ><a name="7080" href="Session.html#7052" class="Bound"
  >C</a
  ><a name="7081" class="Symbol"
  >))</a
  ><a name="7083"
  > </a
  ><a name="7084" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7085"
  > </a
  ><a name="7086" class="Symbol"
  >(</a
  ><a name="7087" href="Session.html#7063" class="Bound"
  >R</a
  ><a name="7088"
  > </a
  ><a name="7089" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7090"
  > </a
  ><a name="7091" class="Symbol"
  >(</a
  ><a name="7092" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="7093"
  > </a
  ><a name="7094" href="Base.html#4797" class="InductiveConstructor"
  >-</a
  ><a name="7095"
  > </a
  ><a name="7096" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7097"
  > </a
  ><a name="7098" href="Session.html#7052" class="Bound"
  >C</a
  ><a name="7099" class="Symbol"
  >))</a
  ><a name="7101"
  >
</a
  ><a name="7102" href="Session.html#6754" class="Function"
  >split</a
  ><a name="7107"
  > </a
  ><a name="7108" class="Symbol"
  >(</a
  ><a name="7109" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="7110"
  >   </a
  ><a name="7113" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7114"
  > </a
  ><a name="7115" href="Session.html#7115" class="Bound"
  >C</a
  ><a name="7116" class="Symbol"
  >)</a
  ><a name="7117"
  > </a
  ><a name="7118" href="Session.html#6659" class="InductiveConstructor"
  >-+</a
  ><a name="7120"
  > </a
  ><a name="7121" class="Symbol"
  >(</a
  ><a name="7122" href="Session.html#7122" class="Bound"
  >L</a
  ><a name="7123"
  > </a
  ><a name="7124" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7125"
  > </a
  ><a name="7126" href="Session.html#7126" class="Bound"
  >R</a
  ><a name="7127" class="Symbol"
  >)</a
  ><a name="7128"
  > </a
  ><a name="7129" class="Symbol"
  >=</a
  ><a name="7130"
  > </a
  ><a name="7131" class="Symbol"
  >(</a
  ><a name="7132" href="Session.html#7122" class="Bound"
  >L</a
  ><a name="7133"
  > </a
  ><a name="7134" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7135"
  > </a
  ><a name="7136" class="Symbol"
  >(</a
  ><a name="7137" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="7138"
  > </a
  ><a name="7139" href="Base.html#4797" class="InductiveConstructor"
  >-</a
  ><a name="7140"
  > </a
  ><a name="7141" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7142"
  > </a
  ><a name="7143" href="Session.html#7115" class="Bound"
  >C</a
  ><a name="7144" class="Symbol"
  >))</a
  ><a name="7146"
  > </a
  ><a name="7147" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7148"
  > </a
  ><a name="7149" class="Symbol"
  >(</a
  ><a name="7150" href="Session.html#7126" class="Bound"
  >R</a
  ><a name="7151"
  > </a
  ><a name="7152" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7153"
  > </a
  ><a name="7154" class="Symbol"
  >(</a
  ><a name="7155" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="7156"
  > </a
  ><a name="7157" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="7158"
  > </a
  ><a name="7159" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7160"
  > </a
  ><a name="7161" href="Session.html#7115" class="Bound"
  >C</a
  ><a name="7162" class="Symbol"
  >))</a
  ><a name="7164"
  ></pre>
<p>At <code>fork</code> time, if <code>Γ</code> is the input context, the user is asked to inhabit a <code>Splits Γ</code>, whose meaning as a pair of contexts is given by <code>splits</code>.</p>
<pre></a
  ><a name="7337" href="Session.html#7337" class="Function"
  >Splits</a
  ><a name="7343"
  > </a
  ><a name="7344" class="Symbol"
  >:</a
  ><a name="7345"
  > </a
  ><a name="7346" class="Symbol"
  >&#8704;</a
  ><a name="7347"
  > </a
  ><a name="7348" href="Session.html#7348" class="Bound"
  >&#915;</a
  ><a name="7349"
  > </a
  ><a name="7350" class="Symbol"
  >&#8594;</a
  ><a name="7351"
  > </a
  ><a name="7352" class="PrimitiveType"
  >Set</a
  ><a name="7355"
  > </a
  ><a name="7356" class="Symbol"
  >_</a
  ><a name="7357"
  >
</a
  ><a name="7358" href="Session.html#7337" class="Function"
  >Splits</a
  ><a name="7364"
  > </a
  ><a name="7365" class="Symbol"
  >=</a
  ><a name="7366"
  > </a
  ><a name="7367" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7370"
  > </a
  ><a name="7371" href="Session.html#6674" class="Function"
  >Split</a
  ><a name="7376"
  >

</a
  ><a name="7378" href="Session.html#7378" class="Function"
  >splits</a
  ><a name="7384"
  > </a
  ><a name="7385" class="Symbol"
  >:</a
  ><a name="7386"
  > </a
  ><a name="7387" class="Symbol"
  >&#8704;</a
  ><a name="7388"
  > </a
  ><a name="7389" class="Symbol"
  >{</a
  ><a name="7390" href="Session.html#7390" class="Bound"
  >&#915;</a
  ><a name="7391" class="Symbol"
  >}</a
  ><a name="7392"
  > </a
  ><a name="7393" class="Symbol"
  >&#8594;</a
  ><a name="7394"
  > </a
  ><a name="7395" href="Session.html#7337" class="Function"
  >Splits</a
  ><a name="7401"
  > </a
  ><a name="7402" href="Session.html#7390" class="Bound"
  >&#915;</a
  ><a name="7403"
  > </a
  ><a name="7404" class="Symbol"
  >&#8594;</a
  ><a name="7405"
  > </a
  ><a name="7406" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="7408"
  > </a
  ><a name="7409" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="7410"
  > </a
  ><a name="7411" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="7413"
  >
</a
  ><a name="7414" href="Session.html#7378" class="Function"
  >splits</a
  ><a name="7420"
  > </a
  ><a name="7421" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7423"
  >       </a
  ><a name="7430" class="Symbol"
  >=</a
  ><a name="7431"
  > </a
  ><a name="7432" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="7434"
  > </a
  ><a name="7435" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7436"
  > </a
  ><a name="7437" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="7439"
  >
</a
  ><a name="7440" href="Session.html#7378" class="Function"
  >splits</a
  ><a name="7446"
  > </a
  ><a name="7447" class="Symbol"
  >(</a
  ><a name="7448" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="7450"
  > </a
  ><a name="7451" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="7453"
  > </a
  ><a name="7454" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >s</a
  ><a name="7455" class="Symbol"
  >)</a
  ><a name="7456"
  > </a
  ><a name="7457" class="Symbol"
  >=</a
  ><a name="7458"
  > </a
  ><a name="7459" href="Session.html#6754" class="Function"
  >split</a
  ><a name="7464"
  > </a
  ><a name="7465" class="Symbol"
  >_</a
  ><a name="7466"
  > </a
  ><a name="7467" href="Session.html#7454" class="Bound"
  >s</a
  ><a name="7468"
  > </a
  ><a name="7469" class="Symbol"
  >(</a
  ><a name="7470" href="Session.html#7378" class="Function"
  >splits</a
  ><a name="7476"
  > </a
  ><a name="7477" href="Session.html#7448" class="Bound"
  >ds</a
  ><a name="7479" class="Symbol"
  >)</a
  ><a name="7480"
  ></pre>
<p><code>all-splits</code> is a generic functions which allows to lift <code>splits</code> to &quot;boxed&quot; predicates.</p>
<pre></a
  ><a name="7596" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="7606"
  > </a
  ><a name="7607" class="Symbol"
  >:</a
  ><a name="7608"
  > </a
  ><a name="7609" class="Symbol"
  >&#8704;</a
  ><a name="7610"
  > </a
  ><a name="7611" class="Symbol"
  >{</a
  ><a name="7612" href="Session.html#7612" class="Bound"
  >lP</a
  ><a name="7614" class="Symbol"
  >}{</a
  ><a name="7616" href="Session.html#7616" class="Bound"
  >P</a
  ><a name="7617"
  > </a
  ><a name="7618" class="Symbol"
  >:</a
  ><a name="7619"
  > </a
  ><a name="7620" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="7624"
  > </a
  ><a name="7625" class="Symbol"
  >&#8594;</a
  ><a name="7626"
  > </a
  ><a name="7627" class="PrimitiveType"
  >Set</a
  ><a name="7630"
  > </a
  ><a name="7631" href="Session.html#7612" class="Bound"
  >lP</a
  ><a name="7633" class="Symbol"
  >}{</a
  ><a name="7635" href="Session.html#7635" class="Bound"
  >&#915;</a
  ><a name="7636" class="Symbol"
  >}</a
  ><a name="7637"
  > </a
  ><a name="7638" class="Symbol"
  >&#8594;</a
  ><a name="7639"
  >
                     </a
  ><a name="7661" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7664"
  > </a
  ><a name="7665" class="Symbol"
  >(</a
  ><a name="7666" href="Session.html#7616" class="Bound"
  >P</a
  ><a name="7667"
  > </a
  ><a name="7668" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="7669"
  > </a
  ><a name="7670" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7673" class="Symbol"
  >)</a
  ><a name="7674"
  > </a
  ><a name="7675" href="Session.html#7635" class="Bound"
  >&#915;</a
  ><a name="7676"
  > </a
  ><a name="7677" class="Symbol"
  >&#8594;</a
  ><a name="7678"
  >
                </a
  ><a name="7695" class="Symbol"
  >(</a
  ><a name="7696" href="Session.html#7696" class="Bound"
  >d</a
  ><a name="7697"
  > </a
  ><a name="7698" class="Symbol"
  >:</a
  ><a name="7699"
  > </a
  ><a name="7700" href="Session.html#7337" class="Function"
  >Splits</a
  ><a name="7706"
  > </a
  ><a name="7707" href="Session.html#7635" class="Bound"
  >&#915;</a
  ><a name="7708" class="Symbol"
  >)</a
  ><a name="7709"
  >       </a
  ><a name="7716" class="Symbol"
  >&#8594;</a
  ><a name="7717"
  > 
                     </a
  ><a name="7740" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7743"
  > </a
  ><a name="7744" class="Symbol"
  >(</a
  ><a name="7745" href="Session.html#7616" class="Bound"
  >P</a
  ><a name="7746"
  > </a
  ><a name="7747" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="7748"
  > </a
  ><a name="7749" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7752" class="Symbol"
  >)</a
  ><a name="7753"
  > </a
  ><a name="7754" class="Symbol"
  >(</a
  ><a name="7755" href="Data.Product.html#525" class="Field"
  >fst</a
  ><a name="7758"
  > </a
  ><a name="7759" class="Symbol"
  >(</a
  ><a name="7760" href="Session.html#7378" class="Function"
  >splits</a
  ><a name="7766"
  > </a
  ><a name="7767" href="Session.html#7696" class="Bound"
  >d</a
  ><a name="7768" class="Symbol"
  >))</a
  ><a name="7770"
  >
                   </a
  ><a name="7790" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="7791"
  > </a
  ><a name="7792" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7795"
  > </a
  ><a name="7796" class="Symbol"
  >(</a
  ><a name="7797" href="Session.html#7616" class="Bound"
  >P</a
  ><a name="7798"
  > </a
  ><a name="7799" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="7800"
  > </a
  ><a name="7801" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7804" class="Symbol"
  >)</a
  ><a name="7805"
  > </a
  ><a name="7806" class="Symbol"
  >(</a
  ><a name="7807" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7810"
  > </a
  ><a name="7811" class="Symbol"
  >(</a
  ><a name="7812" href="Session.html#7378" class="Function"
  >splits</a
  ><a name="7818"
  > </a
  ><a name="7819" href="Session.html#7696" class="Bound"
  >d</a
  ><a name="7820" class="Symbol"
  >))</a
  ><a name="7822"
  >
</a
  ><a name="7823" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="7833"
  >                      </a
  ><a name="7855" href="Session.html#7855" class="Bound"
  >ps</a
  ><a name="7857"
  >       </a
  ><a name="7864" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7866"
  >         </a
  ><a name="7875" class="Symbol"
  >=</a
  ><a name="7876"
  >
  </a
  ><a name="7879" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7881"
  > </a
  ><a name="7882" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7883"
  > </a
  ><a name="7884" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7886"
  >
</a
  ><a name="7887" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="7897"
  > </a
  ><a name="7898" class="Symbol"
  >{</a
  ><a name="7899"
  >&#915; </a
  ><a name="7901" class="Symbol"
  >=</a
  ><a name="7902"
  > </a
  ><a name="7903" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="7904"
  > </a
  ><a name="7905" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7906"
  > </a
  ><a name="7907" class="Symbol"
  >(</a
  ><a name="7908" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#949;</a
  ><a name="7909"
  >   </a
  ><a name="7912" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="7913"
  > </a
  ><a name="7914" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="7915" class="Symbol"
  >)}</a
  ><a name="7917"
  > </a
  ><a name="7918" class="Symbol"
  >(</a
  ><a name="7919" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="7921"
  > </a
  ><a name="7922" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="7924"
  > </a
  ><a name="7925" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="7926" class="Symbol"
  >)</a
  ><a name="7927"
  > </a
  ><a name="7928" class="Symbol"
  >(</a
  ><a name="7929" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="7931"
  > </a
  ><a name="7932" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="7934"
  >    </a
  ><a name="7938" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >+</a
  ><a name="7939" class="Symbol"
  >)</a
  ><a name="7940"
  > </a
  ><a name="7941" class="Symbol"
  >=</a
  ><a name="7942"
  >
  </a
  ><a name="7945" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="7950"
  > </a
  ><a name="7951" class="Symbol"
  >(</a
  ><a name="7952" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="7956"
  > </a
  ><a name="7957" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="7961"
  > </a
  ><a name="7962" href="Session.html#7925" class="Bound"
  >p</a
  ><a name="7963" class="Symbol"
  >)</a
  ><a name="7964"
  >  </a
  ><a name="7966" href="Function.html#1006" class="Function"
  >id</a
  ><a name="7968"
  >          </a
  ><a name="7978" class="Symbol"
  >(</a
  ><a name="7979" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="7989"
  > </a
  ><a name="7990" href="Session.html#7919" class="Bound"
  >ps</a
  ><a name="7992"
  > </a
  ><a name="7993" href="Session.html#7929" class="Bound"
  >ds</a
  ><a name="7995" class="Symbol"
  >)</a
  ><a name="7996"
  >
</a
  ><a name="7997" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="8007"
  > </a
  ><a name="8008" class="Symbol"
  >{</a
  ><a name="8009"
  >&#915; </a
  ><a name="8011" class="Symbol"
  >=</a
  ><a name="8012"
  > </a
  ><a name="8013" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="8014"
  > </a
  ><a name="8015" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8016"
  > </a
  ><a name="8017" class="Symbol"
  >(</a
  ><a name="8018" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#949;</a
  ><a name="8019"
  >   </a
  ><a name="8022" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="8023"
  > </a
  ><a name="8024" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="8025" class="Symbol"
  >)}</a
  ><a name="8027"
  > </a
  ><a name="8028" class="Symbol"
  >(</a
  ><a name="8029" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="8031"
  > </a
  ><a name="8032" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8034"
  > </a
  ><a name="8035" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="8036" class="Symbol"
  >)</a
  ><a name="8037"
  > </a
  ><a name="8038" class="Symbol"
  >(</a
  ><a name="8039" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="8041"
  > </a
  ><a name="8042" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8044"
  >    </a
  ><a name="8048" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >-</a
  ><a name="8049" class="Symbol"
  >)</a
  ><a name="8050"
  > </a
  ><a name="8051" class="Symbol"
  >=</a
  ><a name="8052"
  >
  </a
  ><a name="8055" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8060"
  >  </a
  ><a name="8062" href="Function.html#1006" class="Function"
  >id</a
  ><a name="8064"
  >          </a
  ><a name="8074" class="Symbol"
  >(</a
  ><a name="8075" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8079"
  > </a
  ><a name="8080" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8084"
  > </a
  ><a name="8085" href="Session.html#8035" class="Bound"
  >p</a
  ><a name="8086" class="Symbol"
  >)</a
  ><a name="8087"
  > </a
  ><a name="8088" class="Symbol"
  >(</a
  ><a name="8089" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="8099"
  > </a
  ><a name="8100" href="Session.html#8029" class="Bound"
  >ps</a
  ><a name="8102"
  > </a
  ><a name="8103" href="Session.html#8039" class="Bound"
  >ds</a
  ><a name="8105" class="Symbol"
  >)</a
  ><a name="8106"
  >
</a
  ><a name="8107" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="8117"
  > </a
  ><a name="8118" class="Symbol"
  >{</a
  ><a name="8119"
  >&#915; </a
  ><a name="8121" class="Symbol"
  >=</a
  ><a name="8122"
  > </a
  ><a name="8123" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="8124"
  > </a
  ><a name="8125" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8126"
  > </a
  ><a name="8127" class="Symbol"
  >(</a
  ><a name="8128" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#949;</a
  ><a name="8129"
  >   </a
  ><a name="8132" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="8133"
  > </a
  ><a name="8134" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="8135" class="Symbol"
  >)}</a
  ><a name="8137"
  > </a
  ><a name="8138" class="Symbol"
  >(</a
  ><a name="8139" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="8141"
  > </a
  ><a name="8142" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8144"
  > </a
  ><a name="8145" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="8146" class="Symbol"
  >)</a
  ><a name="8147"
  > </a
  ><a name="8148" class="Symbol"
  >(</a
  ><a name="8149" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="8151"
  > </a
  ><a name="8152" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8154"
  >   </a
  ><a name="8157" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >+-</a
  ><a name="8159" class="Symbol"
  >)</a
  ><a name="8160"
  > </a
  ><a name="8161" class="Symbol"
  >=</a
  ><a name="8162"
  > 
  </a
  ><a name="8166" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8171"
  > </a
  ><a name="8172" class="Symbol"
  >(</a
  ><a name="8173" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8177"
  > </a
  ><a name="8178" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8182"
  > </a
  ><a name="8183" href="Session.html#8145" class="Bound"
  >p</a
  ><a name="8184" class="Symbol"
  >)</a
  ><a name="8185"
  > </a
  ><a name="8186" class="Symbol"
  >(</a
  ><a name="8187" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8191"
  > </a
  ><a name="8192" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8196"
  > </a
  ><a name="8197" href="Session.html#8145" class="Bound"
  >p</a
  ><a name="8198" class="Symbol"
  >)</a
  ><a name="8199"
  > </a
  ><a name="8200" class="Symbol"
  >(</a
  ><a name="8201" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="8211"
  > </a
  ><a name="8212" href="Session.html#8139" class="Bound"
  >ps</a
  ><a name="8214"
  > </a
  ><a name="8215" href="Session.html#8149" class="Bound"
  >ds</a
  ><a name="8217" class="Symbol"
  >)</a
  ><a name="8218"
  >
</a
  ><a name="8219" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="8229"
  > </a
  ><a name="8230" class="Symbol"
  >{</a
  ><a name="8231"
  >&#915; </a
  ><a name="8233" class="Symbol"
  >=</a
  ><a name="8234"
  > </a
  ><a name="8235" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="8236"
  > </a
  ><a name="8237" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8238"
  > </a
  ><a name="8239" class="Symbol"
  >(</a
  ><a name="8240" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#949;</a
  ><a name="8241"
  >   </a
  ><a name="8244" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="8245"
  > </a
  ><a name="8246" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="8247" class="Symbol"
  >)}</a
  ><a name="8249"
  > </a
  ><a name="8250" class="Symbol"
  >(</a
  ><a name="8251" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="8253"
  > </a
  ><a name="8254" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8256"
  > </a
  ><a name="8257" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="8258" class="Symbol"
  >)</a
  ><a name="8259"
  > </a
  ><a name="8260" class="Symbol"
  >(</a
  ><a name="8261" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="8263"
  > </a
  ><a name="8264" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8266"
  >   </a
  ><a name="8269" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >-+</a
  ><a name="8271" class="Symbol"
  >)</a
  ><a name="8272"
  > </a
  ><a name="8273" class="Symbol"
  >=</a
  ><a name="8274"
  >
  </a
  ><a name="8277" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8282"
  > </a
  ><a name="8283" class="Symbol"
  >(</a
  ><a name="8284" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8288"
  > </a
  ><a name="8289" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8293"
  > </a
  ><a name="8294" href="Session.html#8257" class="Bound"
  >p</a
  ><a name="8295" class="Symbol"
  >)</a
  ><a name="8296"
  > </a
  ><a name="8297" class="Symbol"
  >(</a
  ><a name="8298" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8302"
  > </a
  ><a name="8303" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8307"
  > </a
  ><a name="8308" href="Session.html#8257" class="Bound"
  >p</a
  ><a name="8309" class="Symbol"
  >)</a
  ><a name="8310"
  > </a
  ><a name="8311" class="Symbol"
  >(</a
  ><a name="8312" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="8322"
  > </a
  ><a name="8323" href="Session.html#8251" class="Bound"
  >ps</a
  ><a name="8325"
  > </a
  ><a name="8326" href="Session.html#8261" class="Bound"
  >ds</a
  ><a name="8328" class="Symbol"
  >)</a
  ><a name="8329"
  >
</a
  ><a name="8330" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="8340"
  > </a
  ><a name="8341" class="Symbol"
  >{</a
  ><a name="8342"
  >&#915; </a
  ><a name="8344" class="Symbol"
  >=</a
  ><a name="8345"
  > </a
  ><a name="8346" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="8347"
  > </a
  ><a name="8348" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8349"
  > </a
  ><a name="8350" class="Symbol"
  >(</a
  ><a name="8351" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&gt;</a
  ><a name="8352"
  > </a
  ><a name="8353" href="Data.List.html#711" class="InductiveConstructor Operator"
  >_</a
  ><a name="8354"
  > </a
  ><a name="8355" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="8356"
  > </a
  ><a name="8357" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="8358" class="Symbol"
  >)}</a
  ><a name="8360"
  > </a
  ><a name="8361" class="Symbol"
  >(</a
  ><a name="8362" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="8364"
  > </a
  ><a name="8365" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8367"
  > </a
  ><a name="8368" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="8369" class="Symbol"
  >)</a
  ><a name="8370"
  > </a
  ><a name="8371" class="Symbol"
  >(</a
  ><a name="8372" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="8374"
  > </a
  ><a name="8375" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8377"
  >    </a
  ><a name="8381" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >+</a
  ><a name="8382" class="Symbol"
  >)</a
  ><a name="8383"
  > </a
  ><a name="8384" class="Symbol"
  >=</a
  ><a name="8385"
  > 
  </a
  ><a name="8389" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8394"
  > </a
  ><a name="8395" class="Symbol"
  >(</a
  ><a name="8396" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8400"
  > </a
  ><a name="8401" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8405"
  > </a
  ><a name="8406" href="Session.html#8368" class="Bound"
  >p</a
  ><a name="8407" class="Symbol"
  >)</a
  ><a name="8408"
  >  </a
  ><a name="8410" href="Function.html#1006" class="Function"
  >id</a
  ><a name="8412"
  >          </a
  ><a name="8422" class="Symbol"
  >(</a
  ><a name="8423" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="8433"
  > </a
  ><a name="8434" href="Session.html#8362" class="Bound"
  >ps</a
  ><a name="8436"
  > </a
  ><a name="8437" href="Session.html#8372" class="Bound"
  >ds</a
  ><a name="8439" class="Symbol"
  >)</a
  ><a name="8440"
  >
</a
  ><a name="8441" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="8451"
  > </a
  ><a name="8452" class="Symbol"
  >{</a
  ><a name="8453"
  >&#915; </a
  ><a name="8455" class="Symbol"
  >=</a
  ><a name="8456"
  > </a
  ><a name="8457" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="8458"
  > </a
  ><a name="8459" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8460"
  > </a
  ><a name="8461" class="Symbol"
  >(</a
  ><a name="8462" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&gt;</a
  ><a name="8463"
  > </a
  ><a name="8464" href="Data.List.html#711" class="InductiveConstructor Operator"
  >_</a
  ><a name="8465"
  > </a
  ><a name="8466" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="8467"
  > </a
  ><a name="8468" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="8469" class="Symbol"
  >)}</a
  ><a name="8471"
  > </a
  ><a name="8472" class="Symbol"
  >(</a
  ><a name="8473" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="8475"
  > </a
  ><a name="8476" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8478"
  > </a
  ><a name="8479" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="8480" class="Symbol"
  >)</a
  ><a name="8481"
  > </a
  ><a name="8482" class="Symbol"
  >(</a
  ><a name="8483" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="8485"
  > </a
  ><a name="8486" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8488"
  >    </a
  ><a name="8492" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >-</a
  ><a name="8493" class="Symbol"
  >)</a
  ><a name="8494"
  > </a
  ><a name="8495" class="Symbol"
  >=</a
  ><a name="8496"
  > 
  </a
  ><a name="8500" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8505"
  >  </a
  ><a name="8507" href="Function.html#1006" class="Function"
  >id</a
  ><a name="8509"
  >          </a
  ><a name="8519" class="Symbol"
  >(</a
  ><a name="8520" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8524"
  > </a
  ><a name="8525" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8529"
  > </a
  ><a name="8530" href="Session.html#8479" class="Bound"
  >p</a
  ><a name="8531" class="Symbol"
  >)</a
  ><a name="8532"
  > </a
  ><a name="8533" class="Symbol"
  >(</a
  ><a name="8534" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="8544"
  > </a
  ><a name="8545" href="Session.html#8473" class="Bound"
  >ps</a
  ><a name="8547"
  > </a
  ><a name="8548" href="Session.html#8483" class="Bound"
  >ds</a
  ><a name="8550" class="Symbol"
  >)</a
  ><a name="8551"
  ></pre>
<p>We use some patterns to deal more easily with dependent tuples and objects of type <code>Entry</code>.</p>
<pre></a
  ><a name="8670" class="Keyword"
  >pattern</a
  ><a name="8677"
  > %_  x </a
  ><a name="8684" class="Symbol"
  >=</a
  ><a name="8685"
  > </a
  ><a name="8686" class="Symbol"
  >_</a
  ><a name="8687"
  > , x
</a
  ><a name="8692" class="Keyword"
  >pattern</a
  ><a name="8699"
  > %2_ x </a
  ><a name="8706" class="Symbol"
  >=</a
  ><a name="8707"
  > % %  x
</a
  ><a name="8715" class="Keyword"
  >pattern</a
  ><a name="8722"
  > %3_ x </a
  ><a name="8729" class="Symbol"
  >=</a
  ><a name="8730"
  > % %2 x
</a
  ><a name="8738" class="Keyword"
  >pattern</a
  ><a name="8745"
  > %4_ x </a
  ><a name="8752" class="Symbol"
  >=</a
  ><a name="8753"
  > % %3 x

</a
  ><a name="8762" class="Keyword"
  >pattern</a
  ><a name="8769"
  > &#187;&#187;_ x </a
  ><a name="8776" class="Symbol"
  >=</a
  ><a name="8777"
  > &gt; + , %2 x
</a
  ><a name="8789" class="Keyword"
  >pattern</a
  ><a name="8796"
  > _&#171;&#171; x </a
  ><a name="8803" class="Symbol"
  >=</a
  ><a name="8804"
  > &gt; - , %2 x</pre>
<h2 id="terms">Terms</h2>
<h2 id="introduction">Introduction</h2>
<p>Here we would like to provide a human-readable representation of the syntax which is encoded below, also discussing the choice of encoding.</p>
<p>For now we limit ourselves to illustrating the Agda code step-by-step.</p>
<h3 id="functors">Functors</h3>
<p>We define several (indexed) functors: we will obtain our process syntax by taking their fixpoint. While in the future we plan to move to codes for a universe of functors such as the ones cited above, for the purpose of illustrating the method we do not want to add further complications.</p>
<p>Most of the productions are non-recursive, so we will first define some families in <code>Ty</code>.</p>
<pre></a
  ><a name="9475" class="Keyword"
  >private</a
  ><a name="9482"
  > </a
  ><a name="9483" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="9485"
  > </a
  ><a name="9486" class="Symbol"
  >=</a
  ><a name="9487"
  > </a
  ><a name="9488" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="9490"
  > </a
  ><a name="9491" class="Symbol"
  >&#8594;</a
  ><a name="9492"
  > </a
  ><a name="9493" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="9495"
  > </a
  ><a name="9496" class="Symbol"
  >&#8594;</a
  ><a name="9497"
  > </a
  ><a name="9498" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="9502"
  ></pre>
<p>The functor corresponding to the <code>new</code> grammar production/constructor simply imposes that the output context contains a <em>new</em> channel, i.e. a channel whose side is <code>ε</code> (<code>Maybe.nothing</code>).</p>
<pre></a
  ><a name="9716" href="Session.html#9716" class="Function"
  >New</a
  ><a name="9719"
  > </a
  ><a name="9720" class="Symbol"
  >:</a
  ><a name="9721"
  > </a
  ><a name="9722" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="9724"
  >
</a
  ><a name="9725" href="Session.html#9716" class="Function"
  >New</a
  ><a name="9728"
  > </a
  ><a name="9729" href="Session.html#9729" class="Bound"
  >&#915;</a
  ><a name="9730"
  > </a
  ><a name="9731" href="Session.html#9731" class="Bound"
  >&#916;</a
  ><a name="9732"
  > </a
  ><a name="9733" class="Symbol"
  >=</a
  ><a name="9734"
  > </a
  ><a name="9735" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9736"
  > </a
  ><a name="9737" class="Symbol"
  >_</a
  ><a name="9738"
  > </a
  ><a name="9739" class="Symbol"
  >&#955;</a
  ><a name="9740"
  > </a
  ><a name="9741" href="Session.html#9741" class="Bound"
  >F</a
  ><a name="9742"
  > </a
  ><a name="9743" class="Symbol"
  >&#8594;</a
  ><a name="9744"
  > </a
  ><a name="9745" href="Session.html#9731" class="Bound"
  >&#916;</a
  ><a name="9746"
  > </a
  ><a name="9747" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="9748"
  > </a
  ><a name="9749" href="Session.html#9729" class="Bound"
  >&#915;</a
  ><a name="9750"
  > </a
  ><a name="9751" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="9752"
  > </a
  ><a name="9753" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="9754"
  > </a
  ><a name="9755" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9756"
  > </a
  ><a name="9757" href="Session.html#9741" class="Bound"
  >F</a
  ><a name="9758"
  ></pre>
<p>We can send and receive channels along channels: in the former case the sent session type is omitted from the output context, in the latter the context is extended with the entry corresponding to the received channel.</p>
<pre></a
  ><a name="10003" href="Session.html#10003" class="Function"
  >Send</a
  ><a name="10007"
  > </a
  ><a name="10008" href="Session.html#10008" class="Function"
  >Receive</a
  ><a name="10015"
  > </a
  ><a name="10016" class="Symbol"
  >:</a
  ><a name="10017"
  > </a
  ><a name="10018" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="10020"
  >
</a
  ><a name="10021" href="Session.html#10003" class="Function"
  >Send</a
  ><a name="10025"
  > </a
  ><a name="10026" href="Session.html#10026" class="Bound"
  >&#915;</a
  ><a name="10027"
  > </a
  ><a name="10028" href="Session.html#10028" class="Bound"
  >&#916;</a
  ><a name="10029"
  > </a
  ><a name="10030" class="Symbol"
  >=</a
  ><a name="10031"
  > </a
  ><a name="10032" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10033"
  > </a
  ><a name="10034" class="Symbol"
  >(</a
  ><a name="10035" href="Session.html#3816" class="Function"
  >Entry</a
  ><a name="10040"
  > </a
  ><a name="10041" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10042"
  > </a
  ><a name="10043" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="10047"
  > </a
  ><a name="10048" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10049"
  > </a
  ><a name="10050" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="10054" class="Symbol"
  >)</a
  ><a name="10055"
  > </a
  ><a name="10056" class="Symbol"
  >&#955;</a
  ><a name="10057"
  > </a
  ><a name="10058" href="Session.html#10058" class="Bound"
  >W</a
  ><a name="10059"
  > </a
  ><a name="10060" class="Symbol"
  >&#8594;</a
  ><a name="10061"
  >
           </a
  ><a name="10073" class="Keyword"
  >let</a
  ><a name="10076"
  > </a
  ><a name="10077" href="Session.html#10077" class="Bound"
  >L</a
  ><a name="10078"
  > </a
  ><a name="10079" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10080"
  > </a
  ><a name="10081" href="Session.html#10081" class="Bound"
  >s</a
  ><a name="10082"
  > </a
  ><a name="10083" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10084"
  > </a
  ><a name="10085" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="10087"
  > </a
  ><a name="10088" href="Session.html#10088" class="Bound"
  >R</a
  ><a name="10089"
  > </a
  ><a name="10090" class="Symbol"
  >=</a
  ><a name="10091"
  > </a
  ><a name="10092" href="Session.html#10058" class="Bound"
  >W</a
  ><a name="10093"
  > </a
  ><a name="10094" class="Keyword"
  >in</a
  ><a name="10096"
  >
           </a
  ><a name="10108" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10109"
  > </a
  ><a name="10110" class="Symbol"
  >(</a
  ><a name="10111"
  >                      </a
  ><a name="10133" href="Session.html#10077" class="Bound"
  >L</a
  ><a name="10134"
  > </a
  ><a name="10135" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10136"
  > </a
  ><a name="10137" href="Session.html#10026" class="Bound"
  >&#915;</a
  ><a name="10138"
  >   </a
  ><a name="10141" class="Symbol"
  >)</a
  ><a name="10142"
  > </a
  ><a name="10143" class="Symbol"
  >&#955;</a
  ><a name="10144"
  > </a
  ><a name="10145" href="Session.html#10145" class="Bound"
  >i</a
  ><a name="10146"
  > </a
  ><a name="10147" class="Symbol"
  >&#8594;</a
  ><a name="10148"
  >
           </a
  ><a name="10160" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10161"
  > </a
  ><a name="10162" class="Symbol"
  >((</a
  ><a name="10164" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10165"
  > </a
  ><a name="10166" href="Session.html#10081" class="Bound"
  >s</a
  ><a name="10167"
  > </a
  ><a name="10168" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10169"
  > </a
  ><a name="10170" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="10172"
  > </a
  ><a name="10173" class="Symbol"
  >(</a
  ><a name="10174" href="Session.html#10077" class="Bound"
  >L</a
  ><a name="10175"
  > </a
  ><a name="10176" href="Session.html#5361" class="Function Operator"
  >[</a
  ><a name="10177"
  > </a
  ><a name="10178" href="Session.html#10081" class="Bound"
  >s</a
  ><a name="10179"
  > </a
  ><a name="10180" href="Session.html#5361" class="Function Operator"
  >]&#8855;</a
  ><a name="10182"
  > </a
  ><a name="10183" href="Session.html#10088" class="Bound"
  >R</a
  ><a name="10184" class="Symbol"
  >))</a
  ><a name="10186"
  > </a
  ><a name="10187" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10188"
  > </a
  ><a name="10189" href="Base.html#2957" class="Function"
  >rm</a
  ><a name="10191"
  > </a
  ><a name="10192" href="Session.html#10145" class="Bound"
  >i</a
  ><a name="10193" class="Symbol"
  >)</a
  ><a name="10194"
  >
             </a
  ><a name="10208" class="Symbol"
  >(</a
  ><a name="10209" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="10212"
  > </a
  ><a name="10213" href="Session.html#10028" class="Bound"
  >&#916;</a
  ><a name="10214"
  > </a
  ><a name="10215" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="10216"
  > </a
  ><a name="10217" href="Base.html#3336" class="Function"
  >ud</a
  ><a name="10219"
  > </a
  ><a name="10220" class="Symbol"
  >(</a
  ><a name="10221" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10222"
  > </a
  ><a name="10223" href="Session.html#10081" class="Bound"
  >s</a
  ><a name="10224"
  > </a
  ><a name="10225" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10226"
  > </a
  ><a name="10227" class="Symbol"
  >_</a
  ><a name="10228"
  > </a
  ><a name="10229" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10230"
  > </a
  ><a name="10231" class="Symbol"
  >_</a
  ><a name="10232"
  > </a
  ><a name="10233" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10234"
  > </a
  ><a name="10235" href="Session.html#10088" class="Bound"
  >R</a
  ><a name="10236" class="Symbol"
  >))</a
  ><a name="10238"
  >
</a
  ><a name="10239" href="Session.html#10008" class="Function"
  >Receive</a
  ><a name="10246"
  > </a
  ><a name="10247" href="Session.html#10247" class="Bound"
  >&#915;</a
  ><a name="10248"
  > </a
  ><a name="10249" href="Session.html#10249" class="Bound"
  >&#916;</a
  ><a name="10250"
  > </a
  ><a name="10251" class="Symbol"
  >=</a
  ><a name="10252"
  > </a
  ><a name="10253" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10254"
  > </a
  ><a name="10255" class="Symbol"
  >(</a
  ><a name="10256" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="10260"
  > </a
  ><a name="10261" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10262"
  > </a
  ><a name="10263" class="Symbol"
  >_</a
  ><a name="10264"
  > </a
  ><a name="10265" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10266"
  > </a
  ><a name="10267" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="10271" class="Symbol"
  >)</a
  ><a name="10272"
  > </a
  ><a name="10273" class="Symbol"
  >&#955;</a
  ><a name="10274"
  > </a
  ><a name="10275" href="Session.html#10275" class="Bound"
  >W</a
  ><a name="10276"
  > </a
  ><a name="10277" class="Symbol"
  >&#8594;</a
  ><a name="10278"
  >
              </a
  ><a name="10293" class="Keyword"
  >let</a
  ><a name="10296"
  > </a
  ><a name="10297" href="Session.html#10297" class="Bound"
  >s</a
  ><a name="10298"
  > </a
  ><a name="10299" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10300"
  > </a
  ><a name="10301" href="Session.html#10301" class="Bound"
  >L</a
  ><a name="10302"
  > </a
  ><a name="10303" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10304"
  > </a
  ><a name="10305" class="Symbol"
  >_</a
  ><a name="10306"
  > </a
  ><a name="10307" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10308"
  > </a
  ><a name="10309" class="Symbol"
  >_</a
  ><a name="10310"
  > </a
  ><a name="10311" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10312"
  > </a
  ><a name="10313" href="Session.html#10313" class="Bound"
  >R</a
  ><a name="10314"
  > </a
  ><a name="10315" class="Symbol"
  >=</a
  ><a name="10316"
  > </a
  ><a name="10317" href="Session.html#10275" class="Bound"
  >W</a
  ><a name="10318"
  > </a
  ><a name="10319" class="Keyword"
  >in</a
  ><a name="10321"
  >
              </a
  ><a name="10336" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10337"
  > </a
  ><a name="10338" class="Symbol"
  >((</a
  ><a name="10340" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10341"
  > </a
  ><a name="10342" href="Session.html#10297" class="Bound"
  >s</a
  ><a name="10343"
  > </a
  ><a name="10344" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10345"
  > </a
  ><a name="10346" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="10348"
  > </a
  ><a name="10349" class="Symbol"
  >(</a
  ><a name="10350" href="Session.html#10301" class="Bound"
  >L</a
  ><a name="10351"
  > </a
  ><a name="10352" href="Session.html#5368" class="Function Operator"
  >[</a
  ><a name="10353"
  > </a
  ><a name="10354" href="Session.html#10297" class="Bound"
  >s</a
  ><a name="10355"
  > </a
  ><a name="10356" href="Session.html#5368" class="Function Operator"
  >]&#8523;</a
  ><a name="10358"
  > </a
  ><a name="10359" href="Session.html#10313" class="Bound"
  >R</a
  ><a name="10360" class="Symbol"
  >))</a
  ><a name="10362"
  > </a
  ><a name="10363" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10364"
  > </a
  ><a name="10365" href="Session.html#10247" class="Bound"
  >&#915;</a
  ><a name="10366" class="Symbol"
  >)</a
  ><a name="10367"
  > </a
  ><a name="10368" class="Symbol"
  >&#955;</a
  ><a name="10369"
  > </a
  ><a name="10370" href="Session.html#10370" class="Bound"
  >i</a
  ><a name="10371"
  > </a
  ><a name="10372" class="Symbol"
  >&#8594;</a
  ><a name="10373"
  > 
                </a
  ><a name="10391" href="Session.html#10249" class="Bound"
  >&#916;</a
  ><a name="10392"
  > </a
  ><a name="10393" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="10394"
  > </a
  ><a name="10395" href="Base.html#3336" class="Function"
  >ud</a
  ><a name="10397"
  > </a
  ><a name="10398" class="Symbol"
  >(</a
  ><a name="10399" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10400"
  > </a
  ><a name="10401" href="Session.html#10297" class="Bound"
  >s</a
  ><a name="10402"
  > </a
  ><a name="10403" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10404"
  > </a
  ><a name="10405" href="Session.html#8700" class="Operator"
  >%2</a
  ><a name="10407"
  > </a
  ><a name="10408" href="Session.html#10313" class="Bound"
  >R</a
  ><a name="10409" class="Symbol"
  >)</a
  ><a name="10410"
  > </a
  ><a name="10411" href="Session.html#10370" class="Bound"
  >i</a
  ><a name="10412"
  > </a
  ><a name="10413" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="10414"
  > </a
  ><a name="10415" href="Session.html#10301" class="Bound"
  >L</a
  ><a name="10416"
  ></pre>
<p>Writing to and reading from channels changes the type accordingly, without necessarily introducing dependencies.</p>
<pre></a
  ><a name="10556" href="Session.html#10556" class="Function"
  >Write</a
  ><a name="10561"
  > </a
  ><a name="10562" href="Session.html#10562" class="Function"
  >Read</a
  ><a name="10566"
  > </a
  ><a name="10567" class="Symbol"
  >:</a
  ><a name="10568"
  > </a
  ><a name="10569" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="10571"
  >
</a
  ><a name="10572" href="Session.html#10556" class="Function"
  >Write</a
  ><a name="10577"
  > </a
  ><a name="10578" href="Session.html#10578" class="Bound"
  >&#915;</a
  ><a name="10579"
  > </a
  ><a name="10580" href="Session.html#10580" class="Bound"
  >&#916;</a
  ><a name="10581"
  > </a
  ><a name="10582" class="Symbol"
  >=</a
  ><a name="10583"
  > </a
  ><a name="10584" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10585"
  > </a
  ><a name="10586" class="Symbol"
  >(</a
  ><a name="10587" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10588"
  > </a
  ><a name="10589" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="10593"
  > </a
  ><a name="10594" class="Symbol"
  >&#955;</a
  ><a name="10595"
  > </a
  ><a name="10596" class="Symbol"
  >{</a
  ><a name="10597"
  > </a
  ><a name="10598" class="Symbol"
  >(</a
  ><a name="10599" href="Session.html#10599" class="Bound"
  >I</a
  ><a name="10600"
  > </a
  ><a name="10601" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10602"
  > </a
  ><a name="10603" href="Session.html#10603" class="Bound"
  >J</a
  ><a name="10604"
  > </a
  ><a name="10605" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10606"
  > </a
  ><a name="10607" href="Session.html#10607" class="Bound"
  >T</a
  ><a name="10608" class="Symbol"
  >)</a
  ><a name="10609"
  > </a
  ><a name="10610" class="Symbol"
  >&#8594;</a
  ><a name="10611"
  > </a
  ><a name="10612" href="Session.html#10603" class="Bound"
  >J</a
  ><a name="10613"
  > </a
  ><a name="10614" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10615"
  > </a
  ><a name="10616" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="10620"
  > </a
  ><a name="10621" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10622"
  > </a
  ><a name="10623" class="PrimitiveType"
  >Set</a
  ><a name="10626"
  > </a
  ><a name="10627" class="Symbol"
  >})</a
  ><a name="10629"
  > </a
  ><a name="10630" class="Symbol"
  >&#955;</a
  ><a name="10631"
  > </a
  ><a name="10632" href="Session.html#10632" class="Bound"
  >W</a
  ><a name="10633"
  > </a
  ><a name="10634" class="Symbol"
  >&#8594;</a
  ><a name="10635"
  >
            </a
  ><a name="10648" class="Keyword"
  >let</a
  ><a name="10651"
  > </a
  ><a name="10652" class="Symbol"
  >(</a
  ><a name="10653" href="Session.html#10653" class="Bound"
  >I</a
  ><a name="10654"
  > </a
  ><a name="10655" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10656"
  > </a
  ><a name="10657" href="Session.html#10657" class="Bound"
  >J</a
  ><a name="10658"
  > </a
  ><a name="10659" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10660"
  > </a
  ><a name="10661" href="Session.html#10661" class="Bound"
  >T</a
  ><a name="10662" class="Symbol"
  >)</a
  ><a name="10663"
  > </a
  ><a name="10664" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10665"
  > </a
  ><a name="10666" href="Session.html#10666" class="Bound"
  >j</a
  ><a name="10667"
  > </a
  ><a name="10668" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10669"
  > </a
  ><a name="10670" href="Session.html#10670" class="Bound"
  >s</a
  ><a name="10671"
  > </a
  ><a name="10672" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10673"
  > </a
  ><a name="10674" href="Session.html#10674" class="Bound"
  >O</a
  ><a name="10675"
  > </a
  ><a name="10676" class="Symbol"
  >=</a
  ><a name="10677"
  > </a
  ><a name="10678" href="Session.html#10632" class="Bound"
  >W</a
  ><a name="10679"
  > </a
  ><a name="10680" class="Keyword"
  >in</a
  ><a name="10682"
  >
            </a
  ><a name="10695" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10696"
  > </a
  ><a name="10697" class="Symbol"
  >((</a
  ><a name="10699" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10700"
  > </a
  ><a name="10701" href="Session.html#10670" class="Bound"
  >s</a
  ><a name="10702"
  > </a
  ><a name="10703" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10704"
  > </a
  ><a name="10705" href="Session.html#10653" class="Bound"
  >I</a
  ><a name="10706"
  > </a
  ><a name="10707" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10708"
  > </a
  ><a name="10709" href="Session.html#10674" class="Bound"
  >O</a
  ><a name="10710"
  > </a
  ><a name="10711" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10712"
  > </a
  ><a name="10713" href="Session.html#5227" class="Function Operator"
  >[</a
  ><a name="10714"
  > </a
  ><a name="10715" href="Session.html#10670" class="Bound"
  >s</a
  ><a name="10716"
  > </a
  ><a name="10717" href="Session.html#5227" class="Function Operator"
  >]&#931;</a
  ><a name="10719"
  > </a
  ><a name="10720" href="Session.html#10657" class="Bound"
  >J</a
  ><a name="10721"
  > </a
  ><a name="10722" href="Session.html#10661" class="Bound"
  >T</a
  ><a name="10723" class="Symbol"
  >)</a
  ><a name="10724"
  > </a
  ><a name="10725" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10726"
  > </a
  ><a name="10727" href="Session.html#10578" class="Bound"
  >&#915;</a
  ><a name="10728" class="Symbol"
  >)</a
  ><a name="10729"
  >
              </a
  ><a name="10744" class="Symbol"
  >(</a
  ><a name="10745" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="10748"
  > </a
  ><a name="10749" href="Session.html#10580" class="Bound"
  >&#916;</a
  ><a name="10750"
  > </a
  ><a name="10751" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="10752"
  > </a
  ><a name="10753" href="Base.html#3336" class="Function"
  >ud</a
  ><a name="10755"
  > </a
  ><a name="10756" class="Symbol"
  >(</a
  ><a name="10757" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10758"
  > </a
  ><a name="10759" href="Session.html#10670" class="Bound"
  >s</a
  ><a name="10760"
  > </a
  ><a name="10761" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10762"
  > </a
  ><a name="10763" href="Session.html#8700" class="Operator"
  >%2</a
  ><a name="10765"
  > </a
  ><a name="10766" href="Session.html#10661" class="Bound"
  >T</a
  ><a name="10767" class="Symbol"
  >))</a
  ><a name="10769"
  >
</a
  ><a name="10770" href="Session.html#10562" class="Function"
  >Read</a
  ><a name="10774"
  > </a
  ><a name="10775" href="Session.html#10775" class="Bound"
  >&#915;</a
  ><a name="10776"
  > </a
  ><a name="10777" href="Session.html#10777" class="Bound"
  >&#916;</a
  ><a name="10778"
  > </a
  ><a name="10779" class="Symbol"
  >=</a
  ><a name="10780"
  > </a
  ><a name="10781" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10782"
  > </a
  ><a name="10783" class="Symbol"
  >(</a
  ><a name="10784" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="10788"
  > </a
  ><a name="10789" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10790"
  > </a
  ><a name="10791" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="10795"
  > </a
  ><a name="10796" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10797"
  > </a
  ><a name="10798" class="Symbol"
  >_)</a
  ><a name="10800"
  > </a
  ><a name="10801" class="Symbol"
  >&#955;</a
  ><a name="10802"
  > </a
  ><a name="10803" href="Session.html#10803" class="Bound"
  >W</a
  ><a name="10804"
  > </a
  ><a name="10805" class="Symbol"
  >&#8594;</a
  ><a name="10806"
  >
           </a
  ><a name="10818" class="Keyword"
  >let</a
  ><a name="10821"
  > </a
  ><a name="10822" class="Symbol"
  >(</a
  ><a name="10823" href="Session.html#10823" class="Bound"
  >I</a
  ><a name="10824"
  > </a
  ><a name="10825" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10826"
  > </a
  ><a name="10827" href="Session.html#10827" class="Bound"
  >J</a
  ><a name="10828"
  > </a
  ><a name="10829" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10830"
  > </a
  ><a name="10831" href="Session.html#10831" class="Bound"
  >T</a
  ><a name="10832" class="Symbol"
  >)</a
  ><a name="10833"
  > </a
  ><a name="10834" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10835"
  > </a
  ><a name="10836" href="Session.html#10836" class="Bound"
  >s</a
  ><a name="10837"
  > </a
  ><a name="10838" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10839"
  > </a
  ><a name="10840" href="Session.html#10840" class="Bound"
  >O</a
  ><a name="10841"
  > </a
  ><a name="10842" class="Symbol"
  >=</a
  ><a name="10843"
  > </a
  ><a name="10844" href="Session.html#10803" class="Bound"
  >W</a
  ><a name="10845"
  > </a
  ><a name="10846" class="Keyword"
  >in</a
  ><a name="10848"
  >
           </a
  ><a name="10860" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10861"
  > </a
  ><a name="10862" class="Symbol"
  >((</a
  ><a name="10864" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10865"
  > </a
  ><a name="10866" href="Session.html#10836" class="Bound"
  >s</a
  ><a name="10867"
  > </a
  ><a name="10868" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10869"
  > </a
  ><a name="10870" href="Session.html#10823" class="Bound"
  >I</a
  ><a name="10871"
  > </a
  ><a name="10872" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10873"
  > </a
  ><a name="10874" href="Session.html#10840" class="Bound"
  >O</a
  ><a name="10875"
  > </a
  ><a name="10876" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10877"
  > </a
  ><a name="10878" href="Session.html#5234" class="Function Operator"
  >[</a
  ><a name="10879"
  > </a
  ><a name="10880" href="Session.html#10836" class="Bound"
  >s</a
  ><a name="10881"
  > </a
  ><a name="10882" href="Session.html#5234" class="Function Operator"
  >]&#928;</a
  ><a name="10884"
  > </a
  ><a name="10885" href="Session.html#10827" class="Bound"
  >J</a
  ><a name="10886"
  > </a
  ><a name="10887" href="Session.html#10831" class="Bound"
  >T</a
  ><a name="10888" class="Symbol"
  >)</a
  ><a name="10889"
  > </a
  ><a name="10890" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10891"
  > </a
  ><a name="10892" href="Session.html#10775" class="Bound"
  >&#915;</a
  ><a name="10893" class="Symbol"
  >)</a
  ><a name="10894"
  >
             </a
  ><a name="10908" class="Symbol"
  >(</a
  ><a name="10909" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="10912"
  > </a
  ><a name="10913" href="Session.html#10777" class="Bound"
  >&#916;</a
  ><a name="10914"
  > </a
  ><a name="10915" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="10916"
  > </a
  ><a name="10917" href="Base.html#3336" class="Function"
  >ud</a
  ><a name="10919"
  > </a
  ><a name="10920" class="Symbol"
  >(</a
  ><a name="10921" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10922"
  > </a
  ><a name="10923" href="Session.html#10836" class="Bound"
  >s</a
  ><a name="10924"
  > </a
  ><a name="10925" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10926"
  > </a
  ><a name="10927" href="Session.html#8700" class="Operator"
  >%2</a
  ><a name="10929"
  > </a
  ><a name="10930" href="Session.html#10831" class="Bound"
  >T</a
  ><a name="10931" class="Symbol"
  >))</a
  ><a name="10933"
  ></pre>
<p>This functor &quot;consumes&quot; <code>`^</code> from the session type: it &quot;allows&quot; you to choose a value from which the rest of the type is dependent, but <em>most often</em> this value will be forced by the type.</p>
<pre></a
  ><a name="11152" href="Session.html#11152" class="Function"
  >At</a
  ><a name="11154"
  > </a
  ><a name="11155" class="Symbol"
  >:</a
  ><a name="11156"
  > </a
  ><a name="11157" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="11159"
  >
</a
  ><a name="11160" href="Session.html#11152" class="Function"
  >At</a
  ><a name="11162"
  > </a
  ><a name="11163" href="Session.html#11163" class="Bound"
  >&#915;</a
  ><a name="11164"
  > </a
  ><a name="11165" href="Session.html#11165" class="Bound"
  >&#916;</a
  ><a name="11166"
  > </a
  ><a name="11167" class="Symbol"
  >=</a
  ><a name="11168"
  > </a
  ><a name="11169" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11170"
  > </a
  ><a name="11171" class="Symbol"
  >(</a
  ><a name="11172" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11173"
  > </a
  ><a name="11174" class="Symbol"
  >_</a
  ><a name="11175"
  > </a
  ><a name="11176" class="Symbol"
  >&#955;</a
  ><a name="11177"
  > </a
  ><a name="11178" href="Session.html#11178" class="Bound"
  >I</a
  ><a name="11179"
  > </a
  ><a name="11180" class="Symbol"
  >&#8594;</a
  ><a name="11181"
  > </a
  ><a name="11182" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11183"
  > </a
  ><a name="11184" class="Symbol"
  >_</a
  ><a name="11185"
  > </a
  ><a name="11186" class="Symbol"
  >&#955;</a
  ><a name="11187"
  > </a
  ><a name="11188" href="Session.html#11188" class="Bound"
  >O</a
  ><a name="11189"
  > </a
  ><a name="11190" class="Symbol"
  >&#8594;</a
  ><a name="11191"
  > </a
  ><a name="11192" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11193"
  > </a
  ><a name="11194" class="Symbol"
  >(</a
  ><a name="11195" href="Session.html#11188" class="Bound"
  >O</a
  ><a name="11196"
  > </a
  ><a name="11197" class="Symbol"
  >&#8594;</a
  ><a name="11198"
  > </a
  ><a name="11199" href="Session.html#3758" class="Function"
  >De</a
  ><a name="11201"
  > </a
  ><a name="11202" href="Session.html#11178" class="Bound"
  >I</a
  ><a name="11203" class="Symbol"
  >)</a
  ><a name="11204"
  > </a
  ><a name="11205" class="Symbol"
  >&#955;</a
  ><a name="11206"
  > </a
  ><a name="11207" href="Session.html#11207" class="Bound"
  >_</a
  ><a name="11208"
  > </a
  ><a name="11209" class="Symbol"
  >&#8594;</a
  ><a name="11210"
  > </a
  ><a name="11211" href="Session.html#11188" class="Bound"
  >O</a
  ><a name="11212"
  > </a
  ><a name="11213" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="11214"
  > </a
  ><a name="11215" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="11219" class="Symbol"
  >)</a
  ><a name="11220"
  > </a
  ><a name="11221" class="Symbol"
  >&#955;</a
  ><a name="11222"
  > </a
  ><a name="11223" href="Session.html#11223" class="Bound"
  >W</a
  ><a name="11224"
  > </a
  ><a name="11225" class="Symbol"
  >&#8594;</a
  ><a name="11226"
  >
         </a
  ><a name="11236" class="Keyword"
  >let</a
  ><a name="11239"
  > </a
  ><a name="11240" href="Session.html#11240" class="Bound"
  >I</a
  ><a name="11241"
  > </a
  ><a name="11242" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11243"
  > </a
  ><a name="11244" href="Session.html#11244" class="Bound"
  >O</a
  ><a name="11245"
  > </a
  ><a name="11246" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11247"
  > </a
  ><a name="11248" href="Session.html#11248" class="Bound"
  >T</a
  ><a name="11249"
  > </a
  ><a name="11250" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11251"
  > </a
  ><a name="11252" href="Session.html#11252" class="Bound"
  >o</a
  ><a name="11253"
  > </a
  ><a name="11254" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11255"
  > </a
  ><a name="11256" href="Session.html#11256" class="Bound"
  >s</a
  ><a name="11257"
  > </a
  ><a name="11258" class="Symbol"
  >=</a
  ><a name="11259"
  > </a
  ><a name="11260" href="Session.html#11223" class="Bound"
  >W</a
  ><a name="11261"
  > </a
  ><a name="11262" class="Keyword"
  >in</a
  ><a name="11264"
  >
         </a
  ><a name="11274" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11275"
  > </a
  ><a name="11276" class="Symbol"
  >((</a
  ><a name="11278" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11279"
  > </a
  ><a name="11280" href="Session.html#11256" class="Bound"
  >s</a
  ><a name="11281"
  > </a
  ><a name="11282" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11283"
  > </a
  ><a name="11284" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="11286"
  > </a
  ><a name="11287" href="Session.html#4151" class="InductiveConstructor"
  >`^</a
  ><a name="11289"
  > </a
  ><a name="11290" href="Session.html#11248" class="Bound"
  >T</a
  ><a name="11291" class="Symbol"
  >)</a
  ><a name="11292"
  > </a
  ><a name="11293" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="11294"
  > </a
  ><a name="11295" href="Session.html#11163" class="Bound"
  >&#915;</a
  ><a name="11296" class="Symbol"
  >)</a
  ><a name="11297"
  >
            </a
  ><a name="11310" class="Symbol"
  >(</a
  ><a name="11311" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="11314"
  > </a
  ><a name="11315" href="Session.html#11165" class="Bound"
  >&#916;</a
  ><a name="11316"
  > </a
  ><a name="11317" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="11318"
  > </a
  ><a name="11319" href="Base.html#3336" class="Function"
  >ud</a
  ><a name="11321"
  > </a
  ><a name="11322" class="Symbol"
  >(</a
  ><a name="11323" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11324"
  > </a
  ><a name="11325" href="Session.html#11256" class="Bound"
  >s</a
  ><a name="11326"
  > </a
  ><a name="11327" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11328"
  > </a
  ><a name="11329" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="11331"
  > </a
  ><a name="11332" href="Session.html#11248" class="Bound"
  >T</a
  ><a name="11333"
  > </a
  ><a name="11334" href="Session.html#11252" class="Bound"
  >o</a
  ><a name="11335" class="Symbol"
  >))</a
  ><a name="11337"
  ></pre>
<p>Session types have &quot;identity&quot; codes <code>`I</code> as leaves, so to end a session we need to consume it and remove the type from the context.</p>
<pre></a
  ><a name="11500" href="Session.html#11500" class="Function"
  >End</a
  ><a name="11503"
  > </a
  ><a name="11504" class="Symbol"
  >:</a
  ><a name="11505"
  > </a
  ><a name="11506" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="11508"
  >
</a
  ><a name="11509" href="Session.html#11500" class="Function"
  >End</a
  ><a name="11512"
  > </a
  ><a name="11513" href="Session.html#11513" class="Bound"
  >&#915;</a
  ><a name="11514"
  > </a
  ><a name="11515" href="Session.html#11515" class="Bound"
  >&#916;</a
  ><a name="11516"
  > </a
  ><a name="11517" class="Symbol"
  >=</a
  ><a name="11518"
  > </a
  ><a name="11519" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11520"
  > </a
  ><a name="11521" class="Symbol"
  >(</a
  ><a name="11522" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11523"
  > </a
  ><a name="11524" class="PrimitiveType"
  >Set</a
  ><a name="11527"
  > </a
  ><a name="11528" class="Symbol"
  >&#955;</a
  ><a name="11529"
  > </a
  ><a name="11530" href="Session.html#11530" class="Bound"
  >I</a
  ><a name="11531"
  > </a
  ><a name="11532" class="Symbol"
  >&#8594;</a
  ><a name="11533"
  > </a
  ><a name="11534" class="PrimitiveType"
  >Set</a
  ><a name="11537"
  > </a
  ><a name="11538" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="11539"
  > </a
  ><a name="11540" href="Session.html#11530" class="Bound"
  >I</a
  ><a name="11541"
  > </a
  ><a name="11542" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="11543"
  > </a
  ><a name="11544" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="11548" class="Symbol"
  >)</a
  ><a name="11549"
  > </a
  ><a name="11550" class="Symbol"
  >&#955;</a
  ><a name="11551"
  > </a
  ><a name="11552" href="Session.html#11552" class="Bound"
  >W</a
  ><a name="11553"
  > </a
  ><a name="11554" class="Symbol"
  >&#8594;</a
  ><a name="11555"
  >
          </a
  ><a name="11566" class="Keyword"
  >let</a
  ><a name="11569"
  > </a
  ><a name="11570" href="Session.html#11570" class="Bound"
  >I</a
  ><a name="11571"
  > </a
  ><a name="11572" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11573"
  > </a
  ><a name="11574" href="Session.html#11574" class="Bound"
  >O</a
  ><a name="11575"
  > </a
  ><a name="11576" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11577"
  > </a
  ><a name="11578" href="Session.html#11578" class="Bound"
  >i</a
  ><a name="11579"
  > </a
  ><a name="11580" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11581"
  > </a
  ><a name="11582" href="Session.html#11582" class="Bound"
  >s</a
  ><a name="11583"
  > </a
  ><a name="11584" class="Symbol"
  >=</a
  ><a name="11585"
  > </a
  ><a name="11586" href="Session.html#11552" class="Bound"
  >W</a
  ><a name="11587"
  > </a
  ><a name="11588" class="Keyword"
  >in</a
  ><a name="11590"
  >
          </a
  ><a name="11601" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11602"
  > </a
  ><a name="11603" class="Symbol"
  >((</a
  ><a name="11605" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11606"
  > </a
  ><a name="11607" href="Session.html#11582" class="Bound"
  >s</a
  ><a name="11608"
  > </a
  ><a name="11609" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11610"
  > </a
  ><a name="11611" class="Symbol"
  >(</a
  ><a name="11612" href="Session.html#11570" class="Bound"
  >I</a
  ><a name="11613"
  > </a
  ><a name="11614" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11615"
  > </a
  ><a name="11616" href="Session.html#11574" class="Bound"
  >O</a
  ><a name="11617"
  > </a
  ><a name="11618" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11619"
  > </a
  ><a name="11620" href="Session.html#3926" class="InductiveConstructor"
  >`I</a
  ><a name="11622"
  > </a
  ><a name="11623" href="Session.html#11578" class="Bound"
  >i</a
  ><a name="11624" class="Symbol"
  >))</a
  ><a name="11626"
  > </a
  ><a name="11627" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="11628"
  > </a
  ><a name="11629" href="Session.html#11513" class="Bound"
  >&#915;</a
  ><a name="11630" class="Symbol"
  >)</a
  ><a name="11631"
  >
            </a
  ><a name="11644" class="Symbol"
  >(</a
  ><a name="11645" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="11648"
  > </a
  ><a name="11649" href="Session.html#11515" class="Bound"
  >&#916;</a
  ><a name="11650"
  > </a
  ><a name="11651" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="11652"
  > </a
  ><a name="11653" href="Base.html#2957" class="Function"
  >rm</a
  ><a name="11655" class="Symbol"
  >)</a
  ><a name="11656"
  ></pre>
<p>The following definitions are actual (strictly positive) indexed functors: calls to the <code>F</code> argument correspond to recursion in the grammar.</p>
<p>When forking, we need to split the input context sensibly (see <code>Splits</code> above): the child must do <em>all</em> <code>ΓR</code>, the continuation must do <code>ΓL</code>.</p>
<pre></a
  ><a name="11966" href="Session.html#11966" class="Function"
  >Fork</a
  ><a name="11970"
  > </a
  ><a name="11971" class="Symbol"
  >:</a
  ><a name="11972"
  > </a
  ><a name="11973" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="11975"
  > </a
  ><a name="11976" class="Symbol"
  >&#8594;</a
  ><a name="11977"
  > </a
  ><a name="11978" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="11980"
  >
</a
  ><a name="11981" href="Session.html#11966" class="Function"
  >Fork</a
  ><a name="11985"
  > </a
  ><a name="11986" href="Session.html#11986" class="Bound"
  >F</a
  ><a name="11987"
  > </a
  ><a name="11988" href="Session.html#11988" class="Bound"
  >&#915;</a
  ><a name="11989"
  > </a
  ><a name="11990" href="Session.html#11990" class="Bound"
  >&#916;</a
  ><a name="11991"
  > </a
  ><a name="11992" class="Symbol"
  >=</a
  ><a name="11993"
  > </a
  ><a name="11994" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11995"
  > </a
  ><a name="11996" class="Symbol"
  >(</a
  ><a name="11997" href="Session.html#7337" class="Function"
  >Splits</a
  ><a name="12003"
  > </a
  ><a name="12004" href="Session.html#11988" class="Bound"
  >&#915;</a
  ><a name="12005" class="Symbol"
  >)</a
  ><a name="12006"
  > </a
  ><a name="12007" class="Symbol"
  >&#955;</a
  ><a name="12008"
  > </a
  ><a name="12009" href="Session.html#12009" class="Bound"
  >ds</a
  ><a name="12011"
  > </a
  ><a name="12012" class="Symbol"
  >&#8594;</a
  ><a name="12013"
  >
             </a
  ><a name="12027" class="Keyword"
  >let</a
  ><a name="12030"
  > </a
  ><a name="12031" href="Session.html#12031" class="Bound"
  >&#915;L</a
  ><a name="12033"
  > </a
  ><a name="12034" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12035"
  > </a
  ><a name="12036" href="Session.html#12036" class="Bound"
  >&#915;R</a
  ><a name="12038"
  > </a
  ><a name="12039" class="Symbol"
  >=</a
  ><a name="12040"
  > </a
  ><a name="12041" href="Session.html#7378" class="Function"
  >splits</a
  ><a name="12047"
  > </a
  ><a name="12048" href="Session.html#12009" class="Bound"
  >ds</a
  ><a name="12050"
  > </a
  ><a name="12051" class="Keyword"
  >in</a
  ><a name="12053"
  >
               </a
  ><a name="12069" href="Session.html#11986" class="Bound"
  >F</a
  ><a name="12070"
  > </a
  ><a name="12071" href="Session.html#12036" class="Bound"
  >&#915;R</a
  ><a name="12073"
  > </a
  ><a name="12074" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="12076"
  >
             </a
  ><a name="12090" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12091"
  > </a
  ><a name="12092" href="Session.html#11990" class="Bound"
  >&#916;</a
  ><a name="12093"
  > </a
  ><a name="12094" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="12095"
  > </a
  ><a name="12096" href="Session.html#12031" class="Bound"
  >&#915;L</a
  ><a name="12098"
  ></pre>
<p>A server process can only be launched in a context where it is possible to duplicate all channels.</p>
<p>The server is located on the <code>+</code> side of the channel.</p>
<pre></a
  ><a name="12279" href="Session.html#12279" class="Function"
  >Server</a
  ><a name="12285"
  > </a
  ><a name="12286" class="Symbol"
  >:</a
  ><a name="12287"
  > </a
  ><a name="12288" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="12290"
  > </a
  ><a name="12291" class="Symbol"
  >&#8594;</a
  ><a name="12292"
  > </a
  ><a name="12293" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="12295"
  >
</a
  ><a name="12296" href="Session.html#12279" class="Function"
  >Server</a
  ><a name="12302"
  > </a
  ><a name="12303" href="Session.html#12303" class="Bound"
  >F</a
  ><a name="12304"
  > </a
  ><a name="12305" href="Session.html#12305" class="Bound"
  >&#915;</a
  ><a name="12306"
  > </a
  ><a name="12307" href="Session.html#12307" class="Bound"
  >&#916;</a
  ><a name="12308"
  > </a
  ><a name="12309" class="Symbol"
  >=</a
  ><a name="12310"
  > </a
  ><a name="12311" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12312"
  > </a
  ><a name="12313" class="Symbol"
  >(</a
  ><a name="12314" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="12318"
  > </a
  ><a name="12319" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12320"
  > </a
  ><a name="12321" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="12325"
  > </a
  ><a name="12326" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12327"
  > </a
  ><a name="12328" class="Symbol"
  >_)</a
  ><a name="12330"
  > </a
  ><a name="12331" class="Symbol"
  >&#955;</a
  ><a name="12332"
  > </a
  ><a name="12333" href="Session.html#12333" class="Bound"
  >W</a
  ><a name="12334"
  > </a
  ><a name="12335" class="Symbol"
  >&#8594;</a
  ><a name="12336"
  > </a
  ><a name="12337" class="Keyword"
  >let</a
  ><a name="12340"
  > </a
  ><a name="12341" href="Session.html#12341" class="Bound"
  >A</a
  ><a name="12342"
  > </a
  ><a name="12343" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12344"
  > </a
  ><a name="12345" href="Session.html#12345" class="Bound"
  >s</a
  ><a name="12346"
  > </a
  ><a name="12347" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12348"
  > </a
  ><a name="12349" href="Session.html#12349" class="Bound"
  >I</a
  ><a name="12350"
  > </a
  ><a name="12351" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12352"
  > </a
  ><a name="12353" href="Session.html#12353" class="Bound"
  >O</a
  ><a name="12354"
  > </a
  ><a name="12355" class="Symbol"
  >=</a
  ><a name="12356"
  > </a
  ><a name="12357" href="Session.html#12333" class="Bound"
  >W</a
  ><a name="12358"
  > </a
  ><a name="12359" class="Keyword"
  >in</a
  ><a name="12361"
  >
               </a
  ><a name="12377" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12378"
  > </a
  ><a name="12379" class="Symbol"
  >((</a
  ><a name="12381" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12382"
  > </a
  ><a name="12383" href="Session.html#12345" class="Bound"
  >s</a
  ><a name="12384"
  > </a
  ><a name="12385" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12386"
  > </a
  ><a name="12387" href="Session.html#12349" class="Bound"
  >I</a
  ><a name="12388"
  > </a
  ><a name="12389" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12390"
  > </a
  ><a name="12391" href="Session.html#12353" class="Bound"
  >O</a
  ><a name="12392"
  > </a
  ><a name="12393" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12394"
  > </a
  ><a name="12395" href="Session.html#5428" class="Function Operator"
  >[</a
  ><a name="12396"
  > </a
  ><a name="12397" href="Session.html#12345" class="Bound"
  >s</a
  ><a name="12398"
  > </a
  ><a name="12399" href="Session.html#5428" class="Function Operator"
  >]&#161;</a
  ><a name="12401"
  > </a
  ><a name="12402" href="Session.html#12341" class="Bound"
  >A</a
  ><a name="12403" class="Symbol"
  >)</a
  ><a name="12404"
  > </a
  ><a name="12405" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="12406"
  > </a
  ><a name="12407" href="Session.html#12305" class="Bound"
  >&#915;</a
  ><a name="12408" class="Symbol"
  >)</a
  ><a name="12409"
  > </a
  ><a name="12410" class="Symbol"
  >&#955;</a
  ><a name="12411"
  > </a
  ><a name="12412" href="Session.html#12412" class="Bound"
  >i</a
  ><a name="12413"
  > </a
  ><a name="12414" class="Symbol"
  >&#8594;</a
  ><a name="12415"
  >
                 </a
  ><a name="12433" href="Session.html#6472" class="Function"
  >All&#191;</a
  ><a name="12437"
  > </a
  ><a name="12438" href="Session.html#12307" class="Bound"
  >&#916;</a
  ><a name="12439"
  >
               </a
  ><a name="12455" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12456"
  > </a
  ><a name="12457" href="Session.html#12303" class="Bound"
  >F</a
  ><a name="12458"
  > </a
  ><a name="12459" class="Symbol"
  >(</a
  ><a name="12460" href="Base.html#3336" class="Function"
  >ud</a
  ><a name="12462"
  > </a
  ><a name="12463" class="Symbol"
  >(</a
  ><a name="12464" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12465"
  > </a
  ><a name="12466" href="Base.html#4795" class="InductiveConstructor"
  >+</a
  ><a name="12467"
  > </a
  ><a name="12468" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12469"
  > </a
  ><a name="12470" href="Session.html#12341" class="Bound"
  >A</a
  ><a name="12471" class="Symbol"
  >)</a
  ><a name="12472"
  > </a
  ><a name="12473" href="Session.html#12412" class="Bound"
  >i</a
  ><a name="12474" class="Symbol"
  >)</a
  ><a name="12475"
  > </a
  ><a name="12476" href="Session.html#12307" class="Bound"
  >&#916;</a
  ><a name="12477"
  >
               </a
  ><a name="12493" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12494"
  > </a
  ><a name="12495" href="Session.html#12307" class="Bound"
  >&#916;</a
  ><a name="12496"
  > </a
  ><a name="12497" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="12498"
  > </a
  ><a name="12499" href="Base.html#2957" class="Function"
  >rm</a
  ><a name="12501"
  > </a
  ><a name="12502" href="Session.html#12412" class="Bound"
  >i</a
  ><a name="12503"
  ></pre>
<p>The client is positioned on the <code>-</code> side of the channel.</p>
<p>In this case execution is synchronous: we account for the fact that the client might also interact on some other channels by passing <code>Δ</code> to <code>F</code>.</p>
<pre></a
  ><a name="12733" href="Session.html#12733" class="Function"
  >Client</a
  ><a name="12739"
  > </a
  ><a name="12740" class="Symbol"
  >:</a
  ><a name="12741"
  > </a
  ><a name="12742" class="Symbol"
  >(</a
  ><a name="12743" class="PrimitiveType"
  >Set</a
  ><a name="12746"
  > </a
  ><a name="12747" class="Symbol"
  >&#8594;</a
  ><a name="12748"
  > </a
  ><a name="12749" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="12751" class="Symbol"
  >)</a
  ><a name="12752"
  > </a
  ><a name="12753" class="Symbol"
  >&#8594;</a
  ><a name="12754"
  > </a
  ><a name="12755" class="PrimitiveType"
  >Set</a
  ><a name="12758"
  > </a
  ><a name="12759" class="Symbol"
  >&#8594;</a
  ><a name="12760"
  > </a
  ><a name="12761" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="12763"
  >
</a
  ><a name="12764" href="Session.html#12733" class="Function"
  >Client</a
  ><a name="12770"
  > </a
  ><a name="12771" href="Session.html#12771" class="Bound"
  >F</a
  ><a name="12772"
  > </a
  ><a name="12773" href="Session.html#12773" class="Bound"
  >X</a
  ><a name="12774"
  > </a
  ><a name="12775" href="Session.html#12775" class="Bound"
  >&#915;</a
  ><a name="12776"
  > </a
  ><a name="12777" href="Session.html#12777" class="Bound"
  >&#916;</a
  ><a name="12778"
  > </a
  ><a name="12779" class="Symbol"
  >=</a
  ><a name="12780"
  > </a
  ><a name="12781" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12782"
  > </a
  ><a name="12783" class="Symbol"
  >(</a
  ><a name="12784" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="12788"
  > </a
  ><a name="12789" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12790"
  > </a
  ><a name="12791" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="12795"
  > </a
  ><a name="12796" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12797"
  > </a
  ><a name="12798" class="Symbol"
  >_)</a
  ><a name="12800"
  > </a
  ><a name="12801" class="Symbol"
  >&#955;</a
  ><a name="12802"
  > </a
  ><a name="12803" href="Session.html#12803" class="Bound"
  >W</a
  ><a name="12804"
  > </a
  ><a name="12805" class="Symbol"
  >&#8594;</a
  ><a name="12806"
  > </a
  ><a name="12807" class="Keyword"
  >let</a
  ><a name="12810"
  > </a
  ><a name="12811" href="Session.html#12811" class="Bound"
  >A</a
  ><a name="12812"
  > </a
  ><a name="12813" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12814"
  > </a
  ><a name="12815" href="Session.html#12815" class="Bound"
  >s</a
  ><a name="12816"
  > </a
  ><a name="12817" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12818"
  > </a
  ><a name="12819" href="Session.html#12819" class="Bound"
  >I</a
  ><a name="12820"
  > </a
  ><a name="12821" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12822"
  > </a
  ><a name="12823" href="Session.html#12823" class="Bound"
  >O</a
  ><a name="12824"
  > </a
  ><a name="12825" class="Symbol"
  >=</a
  ><a name="12826"
  > </a
  ><a name="12827" href="Session.html#12803" class="Bound"
  >W</a
  ><a name="12828"
  > </a
  ><a name="12829" class="Keyword"
  >in</a
  ><a name="12831"
  >
                 </a
  ><a name="12849" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12850"
  > </a
  ><a name="12851" class="Symbol"
  >((</a
  ><a name="12853" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12854"
  > </a
  ><a name="12855" href="Session.html#12815" class="Bound"
  >s</a
  ><a name="12856"
  > </a
  ><a name="12857" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12858"
  > </a
  ><a name="12859" href="Session.html#12819" class="Bound"
  >I</a
  ><a name="12860"
  > </a
  ><a name="12861" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12862"
  > </a
  ><a name="12863" href="Session.html#12823" class="Bound"
  >O</a
  ><a name="12864"
  > </a
  ><a name="12865" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12866"
  > </a
  ><a name="12867" href="Session.html#5435" class="Function Operator"
  >[</a
  ><a name="12868"
  > </a
  ><a name="12869" href="Session.html#12815" class="Bound"
  >s</a
  ><a name="12870"
  > </a
  ><a name="12871" href="Session.html#5435" class="Function Operator"
  >]&#191;</a
  ><a name="12873"
  > </a
  ><a name="12874" href="Session.html#12811" class="Bound"
  >A</a
  ><a name="12875" class="Symbol"
  >)</a
  ><a name="12876"
  > </a
  ><a name="12877" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="12878"
  > </a
  ><a name="12879" href="Session.html#12775" class="Bound"
  >&#915;</a
  ><a name="12880" class="Symbol"
  >)</a
  ><a name="12881"
  > </a
  ><a name="12882" class="Symbol"
  >&#955;</a
  ><a name="12883"
  > </a
  ><a name="12884" href="Session.html#12884" class="Bound"
  >i</a
  ><a name="12885"
  > </a
  ><a name="12886" class="Symbol"
  >&#8594;</a
  ><a name="12887"
  >
                   </a
  ><a name="12907" href="Session.html#12771" class="Bound"
  >F</a
  ><a name="12908"
  > </a
  ><a name="12909" href="Session.html#12773" class="Bound"
  >X</a
  ><a name="12910"
  > </a
  ><a name="12911" class="Symbol"
  >(</a
  ><a name="12912" href="Base.html#3336" class="Function"
  >ud</a
  ><a name="12914"
  > </a
  ><a name="12915" class="Symbol"
  >(</a
  ><a name="12916" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12917"
  > </a
  ><a name="12918" href="Base.html#4797" class="InductiveConstructor"
  >-</a
  ><a name="12919"
  > </a
  ><a name="12920" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12921"
  > </a
  ><a name="12922" href="Session.html#12811" class="Bound"
  >A</a
  ><a name="12923" class="Symbol"
  >)</a
  ><a name="12924"
  > </a
  ><a name="12925" href="Session.html#12884" class="Bound"
  >i</a
  ><a name="12926" class="Symbol"
  >)</a
  ><a name="12927"
  > </a
  ><a name="12928" href="Session.html#12777" class="Bound"
  >&#916;</a
  ><a name="12929"
  ></pre>
<p>We are free to run clients as many times as we want (<code>Ctr</code>), or even refrain from doing so (<code>Wk</code>).</p>
<pre></a
  ><a name="13055" href="Session.html#13055" class="Function"
  >Wk</a
  ><a name="13057"
  > </a
  ><a name="13058" href="Session.html#13058" class="Function"
  >Ctr</a
  ><a name="13061"
  > </a
  ><a name="13062" class="Symbol"
  >:</a
  ><a name="13063"
  > </a
  ><a name="13064" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="13066"
  >
</a
  ><a name="13067" href="Session.html#13055" class="Function"
  >Wk</a
  ><a name="13069"
  > </a
  ><a name="13070" href="Session.html#13070" class="Bound"
  >&#915;</a
  ><a name="13071"
  > </a
  ><a name="13072" href="Session.html#13072" class="Bound"
  >&#916;</a
  ><a name="13073"
  > </a
  ><a name="13074" class="Symbol"
  >=</a
  ><a name="13075"
  > </a
  ><a name="13076" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13077"
  > </a
  ><a name="13078" class="Symbol"
  >(</a
  ><a name="13079" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="13083"
  > </a
  ><a name="13084" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13085"
  > </a
  ><a name="13086" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="13090"
  > </a
  ><a name="13091" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13092"
  > </a
  ><a name="13093" class="Symbol"
  >_)</a
  ><a name="13095"
  > </a
  ><a name="13096" class="Symbol"
  >&#955;</a
  ><a name="13097"
  > </a
  ><a name="13098" href="Session.html#13098" class="Bound"
  >W</a
  ><a name="13099"
  > </a
  ><a name="13100" class="Symbol"
  >&#8594;</a
  ><a name="13101"
  >
         </a
  ><a name="13111" class="Keyword"
  >let</a
  ><a name="13114"
  > </a
  ><a name="13115" href="Session.html#13115" class="Bound"
  >A</a
  ><a name="13116"
  > </a
  ><a name="13117" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13118"
  > </a
  ><a name="13119" href="Session.html#13119" class="Bound"
  >s</a
  ><a name="13120"
  > </a
  ><a name="13121" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13122"
  > </a
  ><a name="13123" href="Session.html#13123" class="Bound"
  >I</a
  ><a name="13124"
  > </a
  ><a name="13125" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13126"
  > </a
  ><a name="13127" href="Session.html#13127" class="Bound"
  >O</a
  ><a name="13128"
  > </a
  ><a name="13129" class="Symbol"
  >=</a
  ><a name="13130"
  > </a
  ><a name="13131" href="Session.html#13098" class="Bound"
  >W</a
  ><a name="13132"
  > </a
  ><a name="13133" class="Keyword"
  >in</a
  ><a name="13135"
  >
         </a
  ><a name="13145" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13146"
  > </a
  ><a name="13147" class="Symbol"
  >((</a
  ><a name="13149" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="13150"
  > </a
  ><a name="13151" href="Session.html#13119" class="Bound"
  >s</a
  ><a name="13152"
  > </a
  ><a name="13153" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13154"
  > </a
  ><a name="13155" href="Session.html#13123" class="Bound"
  >I</a
  ><a name="13156"
  > </a
  ><a name="13157" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13158"
  > </a
  ><a name="13159" href="Session.html#13127" class="Bound"
  >O</a
  ><a name="13160"
  > </a
  ><a name="13161" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13162"
  > </a
  ><a name="13163" href="Session.html#5435" class="Function Operator"
  >[</a
  ><a name="13164"
  > </a
  ><a name="13165" href="Session.html#13119" class="Bound"
  >s</a
  ><a name="13166"
  > </a
  ><a name="13167" href="Session.html#5435" class="Function Operator"
  >]&#191;</a
  ><a name="13169"
  > </a
  ><a name="13170" href="Session.html#13115" class="Bound"
  >A</a
  ><a name="13171" class="Symbol"
  >)</a
  ><a name="13172"
  > </a
  ><a name="13173" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="13174"
  > </a
  ><a name="13175" href="Session.html#13070" class="Bound"
  >&#915;</a
  ><a name="13176" class="Symbol"
  >)</a
  ><a name="13177"
  >
           </a
  ><a name="13189" class="Symbol"
  >(</a
  ><a name="13190" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="13193"
  > </a
  ><a name="13194" href="Session.html#13072" class="Bound"
  >&#916;</a
  ><a name="13195"
  > </a
  ><a name="13196" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="13197"
  > </a
  ><a name="13198" href="Base.html#2957" class="Function"
  >rm</a
  ><a name="13200" class="Symbol"
  >)</a
  ><a name="13201"
  >
</a
  ><a name="13202" href="Session.html#13058" class="Function"
  >Ctr</a
  ><a name="13205"
  > </a
  ><a name="13206" href="Session.html#13206" class="Bound"
  >&#915;</a
  ><a name="13207"
  > </a
  ><a name="13208" href="Session.html#13208" class="Bound"
  >&#916;</a
  ><a name="13209"
  > </a
  ><a name="13210" class="Symbol"
  >=</a
  ><a name="13211"
  > </a
  ><a name="13212" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13213"
  > </a
  ><a name="13214" class="Symbol"
  >(</a
  ><a name="13215" href="Session.html#3780" class="Function"
  >Code</a
  ><a name="13219"
  > </a
  ><a name="13220" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13221"
  > </a
  ><a name="13222" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="13226"
  > </a
  ><a name="13227" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13228"
  > </a
  ><a name="13229" class="Symbol"
  >_)</a
  ><a name="13231"
  > </a
  ><a name="13232" class="Symbol"
  >&#955;</a
  ><a name="13233"
  > </a
  ><a name="13234" href="Session.html#13234" class="Bound"
  >W</a
  ><a name="13235"
  > </a
  ><a name="13236" class="Symbol"
  >&#8594;</a
  ><a name="13237"
  >
          </a
  ><a name="13248" class="Keyword"
  >let</a
  ><a name="13251"
  > </a
  ><a name="13252" href="Session.html#13252" class="Bound"
  >A</a
  ><a name="13253"
  > </a
  ><a name="13254" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13255"
  > </a
  ><a name="13256" href="Session.html#13256" class="Bound"
  >s</a
  ><a name="13257"
  > </a
  ><a name="13258" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13259"
  > </a
  ><a name="13260" href="Session.html#13260" class="Bound"
  >I</a
  ><a name="13261"
  > </a
  ><a name="13262" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13263"
  > </a
  ><a name="13264" href="Session.html#13264" class="Bound"
  >O</a
  ><a name="13265"
  > </a
  ><a name="13266" class="Symbol"
  >=</a
  ><a name="13267"
  > </a
  ><a name="13268" href="Session.html#13234" class="Bound"
  >W</a
  ><a name="13269"
  > </a
  ><a name="13270" class="Keyword"
  >in</a
  ><a name="13272"
  >
          </a
  ><a name="13283" class="Keyword"
  >let</a
  ><a name="13286"
  > </a
  ><a name="13287" href="Session.html#13287" class="Bound"
  >&#964;</a
  ><a name="13288"
  > </a
  ><a name="13289" class="Symbol"
  >=</a
  ><a name="13290"
  > </a
  ><a name="13291" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="13292"
  > </a
  ><a name="13293" href="Session.html#13256" class="Bound"
  >s</a
  ><a name="13294"
  > </a
  ><a name="13295" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13296"
  > </a
  ><a name="13297" href="Session.html#13260" class="Bound"
  >I</a
  ><a name="13298"
  > </a
  ><a name="13299" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13300"
  > </a
  ><a name="13301" href="Session.html#13264" class="Bound"
  >O</a
  ><a name="13302"
  > </a
  ><a name="13303" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13304"
  > </a
  ><a name="13305" href="Session.html#5435" class="Function Operator"
  >[</a
  ><a name="13306"
  > </a
  ><a name="13307" href="Session.html#13256" class="Bound"
  >s</a
  ><a name="13308"
  > </a
  ><a name="13309" href="Session.html#5435" class="Function Operator"
  >]&#191;</a
  ><a name="13311"
  > </a
  ><a name="13312" href="Session.html#13252" class="Bound"
  >A</a
  ><a name="13313"
  > </a
  ><a name="13314" class="Keyword"
  >in</a
  ><a name="13316"
  >
            </a
  ><a name="13329" href="Session.html#13287" class="Bound"
  >&#964;</a
  ><a name="13330"
  > </a
  ><a name="13331" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="13332"
  > </a
  ><a name="13333" href="Session.html#13206" class="Bound"
  >&#915;</a
  ><a name="13334"
  >
          </a
  ><a name="13345" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13346"
  > </a
  ><a name="13347" href="Session.html#13208" class="Bound"
  >&#916;</a
  ><a name="13348"
  > </a
  ><a name="13349" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13350"
  > </a
  ><a name="13351" href="Session.html#13206" class="Bound"
  >&#915;</a
  ><a name="13352"
  > </a
  ><a name="13353" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="13354"
  > </a
  ><a name="13355" href="Session.html#13287" class="Bound"
  >&#964;</a
  ><a name="13356"
  ></pre>
<p>To add corecursion, we must first define what we consider a <em>guarded</em> (hence, hopefully, <em>productive</em>) session.</p>
<pre></a
  ><a name="13495" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13502"
  > </a
  ><a name="13503" class="Symbol"
  >:</a
  ><a name="13504"
  > </a
  ><a name="13505" class="Symbol"
  >&#8704;</a
  ><a name="13506"
  > </a
  ><a name="13507" class="Symbol"
  >{</a
  ><a name="13508" href="Session.html#13508" class="Bound"
  >I</a
  ><a name="13509"
  > </a
  ><a name="13510" href="Session.html#13510" class="Bound"
  >O</a
  ><a name="13511" class="Symbol"
  >}</a
  ><a name="13512"
  > </a
  ><a name="13513" class="Symbol"
  >&#8594;</a
  ><a name="13514"
  > </a
  ><a name="13515" href="Session.html#13508" class="Bound"
  >I</a
  ><a name="13516"
  > </a
  ><a name="13517" href="Session.html#3847" class="Datatype Operator"
  >&#9657;</a
  ><a name="13518"
  > </a
  ><a name="13519" href="Session.html#13510" class="Bound"
  >O</a
  ><a name="13520"
  > </a
  ><a name="13521" class="Symbol"
  >&#8594;</a
  ><a name="13522"
  > </a
  ><a name="13523" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="13527"
  >
</a
  ><a name="13528" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13535"
  > </a
  ><a name="13536" class="Symbol"
  >(</a
  ><a name="13537" href="Session.html#3926" class="InductiveConstructor"
  >`I</a
  ><a name="13539"
  > </a
  ><a name="13540" href="Session.html#13540" class="Bound"
  >i</a
  ><a name="13541"
  >    </a
  ><a name="13545" class="Symbol"
  >)</a
  ><a name="13546"
  > </a
  ><a name="13547" class="Symbol"
  >=</a
  ><a name="13548"
  > </a
  ><a name="13549" href="Base.html#84" class="Datatype"
  >&#8869;</a
  ><a name="13550"
  >
</a
  ><a name="13551" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13558"
  > </a
  ><a name="13559" class="Symbol"
  >(</a
  ><a name="13560" href="Session.html#4031" class="InductiveConstructor"
  >`&#931;</a
  ><a name="13562"
  > </a
  ><a name="13563" href="Session.html#13563" class="Bound"
  >S</a
  ><a name="13564"
  > </a
  ><a name="13565" href="Session.html#13565" class="Bound"
  >T</a
  ><a name="13566"
  >  </a
  ><a name="13568" class="Symbol"
  >)</a
  ><a name="13569"
  > </a
  ><a name="13570" class="Symbol"
  >=</a
  ><a name="13571"
  > </a
  ><a name="13572" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="13573"
  >
</a
  ><a name="13574" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13581"
  > </a
  ><a name="13582" class="Symbol"
  >(</a
  ><a name="13583" href="Session.html#4034" class="InductiveConstructor"
  >`&#928;</a
  ><a name="13585"
  > </a
  ><a name="13586" href="Session.html#13586" class="Bound"
  >S</a
  ><a name="13587"
  > </a
  ><a name="13588" href="Session.html#13588" class="Bound"
  >T</a
  ><a name="13589"
  >  </a
  ><a name="13591" class="Symbol"
  >)</a
  ><a name="13592"
  > </a
  ><a name="13593" class="Symbol"
  >=</a
  ><a name="13594"
  > </a
  ><a name="13595" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="13596"
  >
</a
  ><a name="13597" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13604"
  > </a
  ><a name="13605" class="Symbol"
  >(</a
  ><a name="13606" href="Session.html#4151" class="InductiveConstructor"
  >`^</a
  ><a name="13608"
  > </a
  ><a name="13609" href="Session.html#13609" class="Bound"
  >T</a
  ><a name="13610"
  >    </a
  ><a name="13614" class="Symbol"
  >)</a
  ><a name="13615"
  > </a
  ><a name="13616" class="Symbol"
  >=</a
  ><a name="13617"
  > </a
  ><a name="13618" class="Symbol"
  >&#8704;</a
  ><a name="13619"
  > </a
  ><a name="13620" href="Session.html#13620" class="Bound"
  >s</a
  ><a name="13621"
  > </a
  ><a name="13622" class="Symbol"
  >&#8594;</a
  ><a name="13623"
  > </a
  ><a name="13624" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13631"
  > </a
  ><a name="13632" class="Symbol"
  >(</a
  ><a name="13633" href="Session.html#13609" class="Bound"
  >T</a
  ><a name="13634"
  > </a
  ><a name="13635" href="Session.html#13620" class="Bound"
  >s</a
  ><a name="13636" class="Symbol"
  >)</a
  ><a name="13637"
  >
</a
  ><a name="13638" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13645"
  > </a
  ><a name="13646" class="Symbol"
  >(</a
  ><a name="13647" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%3</a
  ><a name="13649"
  > </a
  ><a name="13650" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >L</a
  ><a name="13651"
  > </a
  ><a name="13652" href="Session.html#4260" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="13653"
  > </a
  ><a name="13654" href="Session.html#13654" class="Bound"
  >R</a
  ><a name="13655" class="Symbol"
  >)</a
  ><a name="13656"
  > </a
  ><a name="13657" class="Symbol"
  >=</a
  ><a name="13658"
  > </a
  ><a name="13659" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13666"
  > </a
  ><a name="13667" href="Session.html#13650" class="Bound"
  >L</a
  ><a name="13668"
  > </a
  ><a name="13669" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13670"
  > </a
  ><a name="13671" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13678"
  > </a
  ><a name="13679" href="Session.html#13654" class="Bound"
  >R</a
  ><a name="13680"
  >
</a
  ><a name="13681" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13688"
  > </a
  ><a name="13689" class="Symbol"
  >(</a
  ><a name="13690" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%3</a
  ><a name="13692"
  > </a
  ><a name="13693" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >L</a
  ><a name="13694"
  > </a
  ><a name="13695" href="Session.html#4264" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="13696"
  > </a
  ><a name="13697" href="Session.html#13697" class="Bound"
  >R</a
  ><a name="13698" class="Symbol"
  >)</a
  ><a name="13699"
  > </a
  ><a name="13700" class="Symbol"
  >=</a
  ><a name="13701"
  > </a
  ><a name="13702" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13709"
  > </a
  ><a name="13710" href="Session.html#13693" class="Bound"
  >L</a
  ><a name="13711"
  > </a
  ><a name="13712" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13713"
  > </a
  ><a name="13714" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13721"
  > </a
  ><a name="13722" href="Session.html#13697" class="Bound"
  >R</a
  ><a name="13723"
  >
</a
  ><a name="13724" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13731"
  > </a
  ><a name="13732" class="Symbol"
  >(</a
  ><a name="13733" href="Session.html#4358" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="13734"
  > </a
  ><a name="13735" href="Session.html#13735" class="Bound"
  >F</a
  ><a name="13736"
  >     </a
  ><a name="13741" class="Symbol"
  >)</a
  ><a name="13742"
  > </a
  ><a name="13743" class="Symbol"
  >=</a
  ><a name="13744"
  > </a
  ><a name="13745" href="Base.html#84" class="Datatype"
  >&#8869;</a
  ><a name="13746"
  >
</a
  ><a name="13747" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13754"
  > </a
  ><a name="13755" class="Symbol"
  >(</a
  ><a name="13756" href="Session.html#4361" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="13757"
  > </a
  ><a name="13758" href="Session.html#13758" class="Bound"
  >F</a
  ><a name="13759"
  >     </a
  ><a name="13764" class="Symbol"
  >)</a
  ><a name="13765"
  > </a
  ><a name="13766" class="Symbol"
  >=</a
  ><a name="13767"
  > </a
  ><a name="13768" href="Base.html#84" class="Datatype"
  >&#8869;</a
  ><a name="13769"
  >
</a
  ><a name="13770" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13777"
  > </a
  ><a name="13778" class="Symbol"
  >(</a
  ><a name="13779" href="Session.html#4448" class="InductiveConstructor"
  >`&#957;</a
  ><a name="13781"
  > </a
  ><a name="13782" href="Session.html#13782" class="Bound"
  >F</a
  ><a name="13783"
  > </a
  ><a name="13784" class="Symbol"
  >_</a
  ><a name="13785"
  >  </a
  ><a name="13787" class="Symbol"
  >)</a
  ><a name="13788"
  > </a
  ><a name="13789" class="Symbol"
  >=</a
  ><a name="13790"
  > </a
  ><a name="13791" class="Symbol"
  >&#8704;</a
  ><a name="13792"
  > </a
  ><a name="13793" href="Session.html#13793" class="Bound"
  >o</a
  ><a name="13794"
  > </a
  ><a name="13795" class="Symbol"
  >&#8594;</a
  ><a name="13796"
  > </a
  ><a name="13797" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="13804"
  > </a
  ><a name="13805" class="Symbol"
  >(</a
  ><a name="13806" href="Session.html#13782" class="Bound"
  >F</a
  ><a name="13807"
  > </a
  ><a name="13808" href="Session.html#13793" class="Bound"
  >o</a
  ><a name="13809" class="Symbol"
  >)</a
  ><a name="13810"
  ></pre>
<p>To provide syntax to productive nested loops that run for a possibly infinite amount of time, we use the following definition:</p>
<pre></a
  ><a name="13964" href="Session.html#13964" class="Function"
  >CoRec</a
  ><a name="13969"
  > </a
  ><a name="13970" class="Symbol"
  >:</a
  ><a name="13971"
  > </a
  ><a name="13972" class="Symbol"
  >(</a
  ><a name="13973" class="PrimitiveType"
  >Set</a
  ><a name="13976"
  > </a
  ><a name="13977" class="Symbol"
  >&#8594;</a
  ><a name="13978"
  > </a
  ><a name="13979" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="13981" class="Symbol"
  >)</a
  ><a name="13982"
  > </a
  ><a name="13983" class="Symbol"
  >&#8594;</a
  ><a name="13984"
  > </a
  ><a name="13985" class="PrimitiveType"
  >Set</a
  ><a name="13988"
  > </a
  ><a name="13989" class="Symbol"
  >&#8594;</a
  ><a name="13990"
  > </a
  ><a name="13991" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="13993"
  >
</a
  ><a name="13994" href="Session.html#13964" class="Function"
  >CoRec</a
  ><a name="13999"
  > </a
  ><a name="14000" href="Session.html#14000" class="Bound"
  >F</a
  ><a name="14001"
  > </a
  ><a name="14002" href="Session.html#14002" class="Bound"
  >X</a
  ><a name="14003"
  > </a
  ><a name="14004" href="Session.html#14004" class="Bound"
  >&#915;</a
  ><a name="14005"
  > </a
  ><a name="14006" href="Session.html#14006" class="Bound"
  >&#916;</a
  ><a name="14007"
  > </a
  ><a name="14008" class="Symbol"
  >=</a
  ><a name="14009"
  > </a
  ><a name="14010" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14011"
  > </a
  ><a name="14012" class="Symbol"
  >(</a
  ><a name="14013" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="14017"
  > </a
  ><a name="14018" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14019"
  > </a
  ><a name="14020" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14021"
  > </a
  ><a name="14022" class="Symbol"
  >_</a
  ><a name="14023"
  > </a
  ><a name="14024" class="Symbol"
  >&#955;</a
  ><a name="14025"
  > </a
  ><a name="14026" href="Session.html#14026" class="Bound"
  >I</a
  ><a name="14027"
  > </a
  ><a name="14028" class="Symbol"
  >&#8594;</a
  ><a name="14029"
  > </a
  ><a name="14030" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14031"
  > </a
  ><a name="14032" class="Symbol"
  >_</a
  ><a name="14033"
  > </a
  ><a name="14034" class="Symbol"
  >&#955;</a
  ><a name="14035"
  > </a
  ><a name="14036" href="Session.html#14036" class="Bound"
  >O</a
  ><a name="14037"
  > </a
  ><a name="14038" class="Symbol"
  >&#8594;</a
  ><a name="14039"
  > </a
  ><a name="14040" class="Symbol"
  >(</a
  ><a name="14041" href="Session.html#14036" class="Bound"
  >O</a
  ><a name="14042"
  > </a
  ><a name="14043" class="Symbol"
  >&#8594;</a
  ><a name="14044"
  > </a
  ><a name="14045" href="Session.html#3758" class="Function"
  >De</a
  ><a name="14047"
  > </a
  ><a name="14048" class="Symbol"
  >(</a
  ><a name="14049" href="Session.html#14026" class="Bound"
  >I</a
  ><a name="14050"
  > </a
  ><a name="14051" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="14052"
  > </a
  ><a name="14053" href="Session.html#14036" class="Bound"
  >O</a
  ><a name="14054" class="Symbol"
  >))</a
  ><a name="14056"
  > </a
  ><a name="14057" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14058"
  > </a
  ><a name="14059" href="Session.html#14036" class="Bound"
  >O</a
  ><a name="14060" class="Symbol"
  >)</a
  ><a name="14061"
  > </a
  ><a name="14062" class="Symbol"
  >&#955;</a
  ><a name="14063"
  > </a
  ><a name="14064" href="Session.html#14064" class="Bound"
  >W</a
  ><a name="14065"
  > </a
  ><a name="14066" class="Symbol"
  >&#8594;</a
  ><a name="14067"
  >
                </a
  ><a name="14084" class="Keyword"
  >let</a
  ><a name="14087"
  > </a
  ><a name="14088" href="Session.html#14088" class="Bound"
  >s</a
  ><a name="14089"
  > </a
  ><a name="14090" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14091"
  > </a
  ><a name="14092" href="Session.html#14092" class="Bound"
  >I</a
  ><a name="14093"
  > </a
  ><a name="14094" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14095"
  > </a
  ><a name="14096" href="Session.html#14096" class="Bound"
  >O</a
  ><a name="14097"
  > </a
  ><a name="14098" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14099"
  > </a
  ><a name="14100" href="Session.html#14100" class="Bound"
  >T</a
  ><a name="14101"
  > </a
  ><a name="14102" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14103"
  > </a
  ><a name="14104" href="Session.html#14104" class="Bound"
  >o</a
  ><a name="14105"
  > </a
  ><a name="14106" class="Symbol"
  >=</a
  ><a name="14107"
  > </a
  ><a name="14108" href="Session.html#14064" class="Bound"
  >W</a
  ><a name="14109"
  > </a
  ><a name="14110" class="Keyword"
  >in</a
  ><a name="14112"
  > 
                </a
  ><a name="14130" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14131"
  > </a
  ><a name="14132" class="Symbol"
  >((</a
  ><a name="14134" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="14135"
  > </a
  ><a name="14136" href="Session.html#14088" class="Bound"
  >s</a
  ><a name="14137"
  > </a
  ><a name="14138" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14139"
  > </a
  ><a name="14140" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="14142"
  > </a
  ><a name="14143" href="Session.html#4448" class="InductiveConstructor"
  >`&#957;</a
  ><a name="14145"
  > </a
  ><a name="14146" href="Session.html#14100" class="Bound"
  >T</a
  ><a name="14147"
  > </a
  ><a name="14148" href="Session.html#14104" class="Bound"
  >o</a
  ><a name="14149" class="Symbol"
  >)</a
  ><a name="14150"
  > </a
  ><a name="14151" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="14152"
  > </a
  ><a name="14153" href="Session.html#14004" class="Bound"
  >&#915;</a
  ><a name="14154" class="Symbol"
  >)</a
  ><a name="14155"
  > </a
  ><a name="14156" class="Symbol"
  >&#955;</a
  ><a name="14157"
  > </a
  ><a name="14158" href="Session.html#14158" class="Bound"
  >i</a
  ><a name="14159"
  > </a
  ><a name="14160" class="Symbol"
  >&#8594;</a
  ><a name="14161"
  >
                  </a
  ><a name="14180" class="Symbol"
  >((</a
  ><a name="14182" href="Session.html#14182" class="Bound"
  >o</a
  ><a name="14183"
  > </a
  ><a name="14184" class="Symbol"
  >:</a
  ><a name="14185"
  > </a
  ><a name="14186" href="Session.html#14096" class="Bound"
  >O</a
  ><a name="14187" class="Symbol"
  >)</a
  ><a name="14188"
  > </a
  ><a name="14189" class="Symbol"
  >&#8594;</a
  ><a name="14190"
  >   </a
  ><a name="14193" href="Session.html#13495" class="Function"
  >Guarded</a
  ><a name="14200"
  > </a
  ><a name="14201" class="Symbol"
  >(</a
  ><a name="14202" href="Session.html#14100" class="Bound"
  >T</a
  ><a name="14203"
  > </a
  ><a name="14204" href="Session.html#14182" class="Bound"
  >o</a
  ><a name="14205" class="Symbol"
  >)</a
  ><a name="14206"
  >
                             </a
  ><a name="14236" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14237"
  > </a
  ><a name="14238" href="Session.html#14000" class="Bound"
  >F</a
  ><a name="14239"
  > </a
  ><a name="14240" class="Symbol"
  >(</a
  ><a name="14241" href="Session.html#14002" class="Bound"
  >X</a
  ><a name="14242"
  > </a
  ><a name="14243" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="14244"
  > </a
  ><a name="14245" href="Session.html#14096" class="Bound"
  >O</a
  ><a name="14246" class="Symbol"
  >)</a
  ><a name="14247"
  > </a
  ><a name="14248" class="Symbol"
  >(</a
  ><a name="14249" href="Base.html#3336" class="Function"
  >ud</a
  ><a name="14251"
  > </a
  ><a name="14252" class="Symbol"
  >(</a
  ><a name="14253" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="14254"
  > </a
  ><a name="14255" href="Session.html#14088" class="Bound"
  >s</a
  ><a name="14256"
  > </a
  ><a name="14257" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14258"
  > </a
  ><a name="14259" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="14261"
  > </a
  ><a name="14262" href="Session.html#14100" class="Bound"
  >T</a
  ><a name="14263"
  > </a
  ><a name="14264" href="Session.html#14182" class="Bound"
  >o</a
  ><a name="14265" class="Symbol"
  >)</a
  ><a name="14266"
  > </a
  ><a name="14267" href="Session.html#14158" class="Bound"
  >i</a
  ><a name="14268" class="Symbol"
  >)</a
  ><a name="14269"
  > </a
  ><a name="14270" href="Session.html#14006" class="Bound"
  >&#916;</a
  ><a name="14271" class="Symbol"
  >)</a
  ><a name="14272"
  >
                </a
  ><a name="14289" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14290"
  > </a
  ><a name="14291" href="Session.html#14006" class="Bound"
  >&#916;</a
  ><a name="14292"
  > </a
  ><a name="14293" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="14294"
  > </a
  ><a name="14295" href="Base.html#2957" class="Function"
  >rm</a
  ><a name="14297"
  > </a
  ><a name="14298" href="Session.html#14158" class="Bound"
  >i</a
  ><a name="14299"
  ></pre>
<h3 id="small-collapsed-functors">Small, <em>collapsed</em> functors</h3>
<pre></a
  ><a name="14358" class="Keyword"
  >private</a
  ><a name="14365"
  > </a
  ><a name="14366" href="Session.html#14366" class="Function"
  >[Ty]</a
  ><a name="14370"
  > </a
  ><a name="14371" class="Symbol"
  >=</a
  ><a name="14372"
  > </a
  ><a name="14373" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="14375"
  > </a
  ><a name="14376" class="Symbol"
  >&#8594;</a
  ><a name="14377"
  > </a
  ><a name="14378" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="14380"
  > </a
  ><a name="14381" class="Symbol"
  >&#8594;</a
  ><a name="14382"
  > </a
  ><a name="14383" class="PrimitiveType"
  >Set</a
  ><a name="14386"
  ></pre>
<p>We might want to switch to <em>small</em> functors (compare <code>[Ty]</code> and <code>Ty</code>), also avoiding us to require witnesses which are actually <em>forced</em> (see Edwin Brady et al's &quot;Inductive Families Need Not Store Their Indices&quot;).</p>
<p>Here are a couple examples of how we plan to proceed.</p>
<pre></a
  ><a name="14682" class="Keyword"
  >module</a
  ><a name="14688"
  > </a
  ><a name="14689" href="Session.html#14689" class="Module"
  >Small</a
  ><a name="14694"
  > </a
  ><a name="14695" class="Keyword"
  >where</a
  ><a name="14700"
  >

  </a
  ><a name="14704" href="Session.html#14704" class="Function"
  >[New]</a
  ><a name="14709"
  > </a
  ><a name="14710" class="Symbol"
  >:</a
  ><a name="14711"
  > </a
  ><a name="14712" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="14714"
  >
  </a
  ><a name="14717" href="Session.html#14704" class="Function"
  >[New]</a
  ><a name="14722"
  > </a
  ><a name="14723" href="Session.html#14723" class="Bound"
  >&#915;</a
  ><a name="14724"
  > </a
  ><a name="14725" class="Symbol"
  >(</a
  ><a name="14726" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#916;</a
  ><a name="14727"
  > </a
  ><a name="14728" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="14729"
  > </a
  ><a name="14730" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#949;</a
  ><a name="14731"
  > </a
  ><a name="14732" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="14733"
  > </a
  ><a name="14734" href="Data.List.html#711" class="InductiveConstructor Operator"
  >F</a
  ><a name="14735" class="Symbol"
  >)</a
  ><a name="14736"
  > </a
  ><a name="14737" class="Symbol"
  >=</a
  ><a name="14738"
  > </a
  ><a name="14739" href="Session.html#14723" class="Bound"
  >&#915;</a
  ><a name="14740"
  > </a
  ><a name="14741" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="14742"
  > </a
  ><a name="14743" href="Session.html#14726" class="Bound"
  >&#916;</a
  ><a name="14744"
  >
  </a
  ><a name="14747" href="Session.html#14704" class="Function"
  >[New]</a
  ><a name="14752"
  > </a
  ><a name="14753" class="Symbol"
  >_</a
  ><a name="14754"
  > </a
  ><a name="14755" class="Symbol"
  >_</a
  ><a name="14756"
  >           </a
  ><a name="14767" class="Symbol"
  >=</a
  ><a name="14768"
  > </a
  ><a name="14769" href="Base.html#84" class="Datatype"
  >&#8869;</a
  ><a name="14770"
  >

  </a
  ><a name="14774" class="Keyword"
  >open</a
  ><a name="14778"
  > </a
  ><a name="14779" class="Keyword"
  >import</a
  ><a name="14785"
  > </a
  ><a name="14786" href="AD.Ix.html#1" class="Module"
  >AD.Ix</a
  ><a name="14791"
  > </a
  ><a name="14792" class="Symbol"
  >;</a
  ><a name="14793"
  > </a
  ><a name="14794" class="Keyword"
  >open</a
  ><a name="14798"
  > </a
  ><a name="14799" href="AD.Ix.html#1998" class="Module"
  >Ix</a
  ><a name="14801"
  > </a
  ><a name="14802" href="Agda.Primitive.html#580" class="Primitive"
  >Level.zero</a
  ><a name="14812"
  >

  </a
  ><a name="14816" href="Session.html#14816" class="Function"
  >isI?</a
  ><a name="14820"
  > </a
  ><a name="14821" class="Symbol"
  >:</a
  ><a name="14822"
  > </a
  ><a name="14823" class="Symbol"
  >{</a
  ><a name="14824" href="Session.html#14824" class="Bound"
  >&#915;</a
  ><a name="14825"
  > </a
  ><a name="14826" class="Symbol"
  >:</a
  ><a name="14827"
  > </a
  ><a name="14828" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="14830" class="Symbol"
  >}</a
  ><a name="14831"
  > </a
  ><a name="14832" class="Symbol"
  >&#8594;</a
  ><a name="14833"
  > </a
  ><a name="14834" href="AD.Ix.html#2030" class="Function"
  >Ix</a
  ><a name="14836"
  > </a
  ><a name="14837" href="Session.html#14824" class="Bound"
  >&#915;</a
  ><a name="14838"
  > </a
  ><a name="14839" class="Symbol"
  >&#8594;</a
  ><a name="14840"
  > </a
  ><a name="14841" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="14843"
  > </a
  ><a name="14844" class="Symbol"
  >(</a
  ><a name="14845" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14846"
  > </a
  ><a name="14847" class="PrimitiveType"
  >Set</a
  ><a name="14850"
  > </a
  ><a name="14851" href="Function.html#1006" class="Function"
  >id</a
  ><a name="14853" class="Symbol"
  >)</a
  ><a name="14854"
  >
  </a
  ><a name="14857" href="Session.html#14816" class="Function"
  >isI?</a
  ><a name="14861"
  > </a
  ><a name="14862" href="Session.html#14862" class="Bound"
  >i</a
  ><a name="14863"
  > </a
  ><a name="14864" class="Keyword"
  >with</a
  ><a name="14868"
  > </a
  ><a name="14869" href="AD.Ix.html#3311" class="Function"
  >lookup</a
  ><a name="14875"
  > </a
  ><a name="14876" href="Session.html#14862" class="Bound"
  >i</a
  ><a name="14877"
  >
  </a
  ><a name="14880" class="Symbol"
  >...</a
  ><a name="14883"
  > </a
  ><a name="14884" class="Symbol"
  >|</a
  ><a name="14885"
  > </a
  ><a name="14886" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%3</a
  ><a name="14888"
  > </a
  ><a name="14889" class="Symbol"
  >(</a
  ><a name="14890" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >`I</a
  ><a name="14892"
  > </a
  ><a name="14893" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >j</a
  ><a name="14894" class="Symbol"
  >)</a
  ><a name="14895"
  > </a
  ><a name="14896" class="Symbol"
  >=</a
  ><a name="14897"
  > </a
  ><a name="14898" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="14899"
  > </a
  ><a name="14900" class="Symbol"
  >(</a
  ><a name="14901" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%</a
  ><a name="14902"
  > </a
  ><a name="14903" href="Session.html#14893" class="Bound"
  >j</a
  ><a name="14904" class="Symbol"
  >)</a
  ><a name="14905"
  >
  </a
  ><a name="14908" class="Symbol"
  >...</a
  ><a name="14911"
  > </a
  ><a name="14912" class="Symbol"
  >|</a
  ><a name="14913"
  > </a
  ><a name="14914" class="Symbol"
  >_</a
  ><a name="14915"
  >         </a
  ><a name="14924" class="Symbol"
  >=</a
  ><a name="14925"
  > </a
  ><a name="14926" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="14927"
  >

  </a
  ><a name="14931" href="Session.html#14931" class="Function"
  >[End]</a
  ><a name="14936"
  > </a
  ><a name="14937" class="Symbol"
  >:</a
  ><a name="14938"
  > </a
  ><a name="14939" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="14941"
  >
  </a
  ><a name="14944" href="Session.html#14931" class="Function"
  >[End]</a
  ><a name="14949"
  > </a
  ><a name="14950" href="Session.html#14950" class="Bound"
  >&#915;</a
  ><a name="14951"
  > </a
  ><a name="14952" href="Session.html#14952" class="Bound"
  >&#916;</a
  ><a name="14953"
  > </a
  ><a name="14954" class="Symbol"
  >=</a
  ><a name="14955"
  > </a
  ><a name="14956" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14957"
  > </a
  ><a name="14958" class="Symbol"
  >(</a
  ><a name="14959" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14960"
  > </a
  ><a name="14961" class="PrimitiveType"
  >Set</a
  ><a name="14964"
  > </a
  ><a name="14965" class="Symbol"
  >&#955;</a
  ><a name="14966"
  > </a
  ><a name="14967" href="Session.html#14967" class="Bound"
  >I</a
  ><a name="14968"
  > </a
  ><a name="14969" class="Symbol"
  >&#8594;</a
  ><a name="14970"
  > </a
  ><a name="14971" class="PrimitiveType"
  >Set</a
  ><a name="14974"
  > </a
  ><a name="14975" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14976"
  > </a
  ><a name="14977" href="Session.html#14967" class="Bound"
  >I</a
  ><a name="14978"
  > </a
  ><a name="14979" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14980"
  > </a
  ><a name="14981" href="Base.html#4778" class="Datatype"
  >Side</a
  ><a name="14985" class="Symbol"
  >)</a
  ><a name="14986"
  > </a
  ><a name="14987" class="Symbol"
  >&#955;</a
  ><a name="14988"
  > </a
  ><a name="14989" href="Session.html#14989" class="Bound"
  >W</a
  ><a name="14990"
  > </a
  ><a name="14991" class="Symbol"
  >&#8594;</a
  ><a name="14992"
  >
              </a
  ><a name="15007" class="Keyword"
  >let</a
  ><a name="15010"
  > </a
  ><a name="15011" href="Session.html#15011" class="Bound"
  >I</a
  ><a name="15012"
  > </a
  ><a name="15013" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15014"
  > </a
  ><a name="15015" href="Session.html#15015" class="Bound"
  >O</a
  ><a name="15016"
  > </a
  ><a name="15017" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15018"
  > </a
  ><a name="15019" href="Session.html#15019" class="Bound"
  >i</a
  ><a name="15020"
  > </a
  ><a name="15021" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15022"
  > </a
  ><a name="15023" href="Session.html#15023" class="Bound"
  >s</a
  ><a name="15024"
  > </a
  ><a name="15025" class="Symbol"
  >=</a
  ><a name="15026"
  > </a
  ><a name="15027" href="Session.html#14989" class="Bound"
  >W</a
  ><a name="15028"
  > </a
  ><a name="15029" class="Keyword"
  >in</a
  ><a name="15031"
  >
              </a
  ><a name="15046" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="15047"
  > </a
  ><a name="15048" class="Symbol"
  >(</a
  ><a name="15049" href="AD.Ix.html#2030" class="Function"
  >Ix</a
  ><a name="15051"
  > </a
  ><a name="15052" href="Session.html#14950" class="Bound"
  >&#915;</a
  ><a name="15053" class="Symbol"
  >)</a
  ><a name="15054"
  > </a
  ><a name="15055" class="Symbol"
  >&#955;</a
  ><a name="15056"
  > </a
  ><a name="15057" href="Session.html#15057" class="Bound"
  >i</a
  ><a name="15058"
  > </a
  ><a name="15059" class="Symbol"
  >&#8594;</a
  ><a name="15060"
  >
                </a
  ><a name="15077" href="Function.html#2755" class="Function Operator"
  >case</a
  ><a name="15081"
  > </a
  ><a name="15082" href="Session.html#14816" class="Function"
  >isI?</a
  ><a name="15086"
  > </a
  ><a name="15087" href="Session.html#15057" class="Bound"
  >i</a
  ><a name="15088"
  > </a
  ><a name="15089" href="Function.html#2755" class="Function Operator"
  >of</a
  ><a name="15091"
  > </a
  ><a name="15092" href="Data.Maybe.html#984" class="Function"
  >1+.maybe</a
  ><a name="15100"
  > </a
  ><a name="15101" class="Symbol"
  >(&#955;</a
  ><a name="15103"
  > </a
  ><a name="15104" href="Session.html#15104" class="Bound"
  >_</a
  ><a name="15105"
  > </a
  ><a name="15106" class="Symbol"
  >&#8594;</a
  ><a name="15107"
  > </a
  ><a name="15108" href="Session.html#14952" class="Bound"
  >&#916;</a
  ><a name="15109"
  > </a
  ><a name="15110" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15111"
  > </a
  ><a name="15112" href="AD.Ix.html#3484" class="Function"
  >Ix.&#8722;</a
  ><a name="15116"
  > </a
  ><a name="15117" class="Symbol"
  >_</a
  ><a name="15118"
  > </a
  ><a name="15119" href="Session.html#15057" class="Bound"
  >i</a
  ><a name="15120" class="Symbol"
  >)</a
  ><a name="15121"
  > </a
  ><a name="15122" href="Base.html#84" class="Datatype"
  >&#8869;</a
  ><a name="15123"
  ></pre>
<p>While it seems possible to treat all the syntax in this way, we prefer to use the large version for now as we think it leads to better type errors when constructing programs.</p>
<p>We will investigate the possibility of using the large version as syntax for the small one, by executing the translation at compile time.</p>
<h3 id="tags">Tags</h3>
<p>We adopt a &quot;tagful&quot; syntax, where nodes of the syntax tree are made of dependent pairs whose first component is of type <code>Tag</code>.</p>
<pre></a
  ><a name="15602" class="Keyword"
  >module</a
  ><a name="15608"
  > </a
  ><a name="15609" href="Session.html#15609" class="Module"
  >T</a
  ><a name="15610"
  > </a
  ><a name="15611" class="Keyword"
  >where</a
  ><a name="15616"
  >

  </a
  ><a name="15620" class="Keyword"
  >data</a
  ><a name="15624"
  > </a
  ><a name="15625" href="Session.html#15625" class="Datatype"
  >Tag</a
  ><a name="15628"
  > </a
  ><a name="15629" class="Symbol"
  >:</a
  ><a name="15630"
  > </a
  ><a name="15631" class="PrimitiveType"
  >Set</a
  ><a name="15634"
  > </a
  ><a name="15635" class="Keyword"
  >where</a
  ><a name="15640"
  >
    </a
  ><a name="15645" href="Session.html#15645" class="InductiveConstructor"
  >new</a
  ><a name="15648"
  > </a
  ><a name="15649" href="Session.html#15649" class="InductiveConstructor"
  >fork</a
  ><a name="15653"
  >       </a
  ><a name="15660" class="Symbol"
  >:</a
  ><a name="15661"
  > </a
  ><a name="15662" href="Session.html#15625" class="Datatype"
  >Tag</a
  ><a name="15665"
  >
    </a
  ><a name="15670" href="Session.html#15670" class="InductiveConstructor"
  >send</a
  ><a name="15674"
  > </a
  ><a name="15675" href="Session.html#15675" class="InductiveConstructor"
  >recv</a
  ><a name="15679"
  >      </a
  ><a name="15685" class="Symbol"
  >:</a
  ><a name="15686"
  > </a
  ><a name="15687" href="Session.html#15625" class="Datatype"
  >Tag</a
  ><a name="15690"
  >
    </a
  ><a name="15695" href="Session.html#15695" class="InductiveConstructor"
  >!!</a
  ><a name="15697"
  > </a
  ><a name="15698" href="Session.html#15698" class="InductiveConstructor"
  >??</a
  ><a name="15700"
  > </a
  ><a name="15701" href="Session.html#15701" class="InductiveConstructor"
  >wk</a
  ><a name="15703"
  > </a
  ><a name="15704" href="Session.html#15704" class="InductiveConstructor"
  >ctr</a
  ><a name="15707"
  >   </a
  ><a name="15710" class="Symbol"
  >:</a
  ><a name="15711"
  > </a
  ><a name="15712" href="Session.html#15625" class="Datatype"
  >Tag</a
  ><a name="15715"
  >
    </a
  ><a name="15720" href="Session.html#15720" class="InductiveConstructor"
  >corec</a
  ><a name="15725"
  >          </a
  ><a name="15735" class="Symbol"
  >:</a
  ><a name="15736"
  > </a
  ><a name="15737" href="Session.html#15625" class="Datatype"
  >Tag</a
  ><a name="15740"
  >
    </a
  ><a name="15745" href="Session.html#15745" class="InductiveConstructor"
  >write</a
  ><a name="15750"
  > </a
  ><a name="15751" href="Session.html#15751" class="InductiveConstructor"
  >read</a
  ><a name="15755"
  >     </a
  ><a name="15760" class="Symbol"
  >:</a
  ><a name="15761"
  > </a
  ><a name="15762" href="Session.html#15625" class="Datatype"
  >Tag</a
  ><a name="15765"
  >
    </a
  ><a name="15770" href="Session.html#15770" class="InductiveConstructor"
  >at</a
  ><a name="15772"
  >             </a
  ><a name="15785" class="Symbol"
  >:</a
  ><a name="15786"
  > </a
  ><a name="15787" href="Session.html#15625" class="Datatype"
  >Tag</a
  ><a name="15790"
  >
    </a
  ><a name="15795" href="Session.html#15795" class="InductiveConstructor"
  >end</a
  ><a name="15798"
  >            </a
  ><a name="15810" class="Symbol"
  >:</a
  ><a name="15811"
  > </a
  ><a name="15812" href="Session.html#15625" class="Datatype"
  >Tag</a
  ><a name="15815"
  >

</a
  ><a name="15817" class="Keyword"
  >open</a
  ><a name="15821"
  > </a
  ><a name="15822" href="Session.html#15609" class="Module"
  >T</a
  ><a name="15823"
  > </a
  ><a name="15824" class="Keyword"
  >using</a
  ><a name="15829"
  > </a
  ><a name="15830" class="Symbol"
  >(</a
  ><a name="15831"
  >Tag</a
  ><a name="15834" class="Symbol"
  >)</a
  ><a name="15835"
  ></pre>
<h3 id="the-tagged-family-of-functors">The tagged family of functors</h3>
<p>The type of the second component is given by the following family, which groups all the above functors.</p>
<pre></a
  ><a name="16001" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16002"
  > </a
  ><a name="16003" class="Symbol"
  >:</a
  ><a name="16004"
  > </a
  ><a name="16005" href="Session.html#15625" class="Datatype"
  >Tag</a
  ><a name="16008"
  > </a
  ><a name="16009" class="Symbol"
  >&#8594;</a
  ><a name="16010"
  > </a
  ><a name="16011" class="Symbol"
  >(</a
  ><a name="16012" class="PrimitiveType"
  >Set</a
  ><a name="16015"
  > </a
  ><a name="16016" class="Symbol"
  >&#8594;</a
  ><a name="16017"
  > </a
  ><a name="16018" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="16020" class="Symbol"
  >)</a
  ><a name="16021"
  > </a
  ><a name="16022" class="Symbol"
  >&#8594;</a
  ><a name="16023"
  > </a
  ><a name="16024" class="PrimitiveType"
  >Set</a
  ><a name="16027"
  > </a
  ><a name="16028" class="Symbol"
  >&#8594;</a
  ><a name="16029"
  > </a
  ><a name="16030" href="Session.html#9483" class="Function"
  >Ty</a
  ><a name="16032"
  >
</a
  ><a name="16033" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16034"
  > </a
  ><a name="16035" href="Session.html#15645" class="InductiveConstructor"
  >T.new</a
  ><a name="16040"
  >   </a
  ><a name="16043" href="Session.html#16043" class="Bound"
  >T</a
  ><a name="16044"
  > </a
  ><a name="16045" href="Session.html#16045" class="Bound"
  >X</a
  ><a name="16046"
  > </a
  ><a name="16047" href="Session.html#16047" class="Bound"
  >&#915;</a
  ><a name="16048"
  > </a
  ><a name="16049" href="Session.html#16049" class="Bound"
  >&#916;</a
  ><a name="16050"
  > </a
  ><a name="16051" class="Symbol"
  >=</a
  ><a name="16052"
  > </a
  ><a name="16053" href="Session.html#9716" class="Function"
  >New</a
  ><a name="16056"
  >          </a
  ><a name="16066" href="Session.html#16047" class="Bound"
  >&#915;</a
  ><a name="16067"
  > </a
  ><a name="16068" href="Session.html#16049" class="Bound"
  >&#916;</a
  ><a name="16069"
  >                 </a
  ><a name="16086" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="16087"
  > </a
  ><a name="16088" href="Session.html#16045" class="Bound"
  >X</a
  ><a name="16089"
  > </a
  ><a name="16090" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="16091"
  > </a
  ><a name="16092" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="16093"
  >
</a
  ><a name="16094" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16095"
  > </a
  ><a name="16096" href="Session.html#15649" class="InductiveConstructor"
  >T.fork</a
  ><a name="16102"
  >  </a
  ><a name="16104" href="Session.html#16104" class="Bound"
  >T</a
  ><a name="16105"
  > </a
  ><a name="16106" href="Session.html#16106" class="Bound"
  >X</a
  ><a name="16107"
  > </a
  ><a name="16108" href="Session.html#16108" class="Bound"
  >&#915;</a
  ><a name="16109"
  > </a
  ><a name="16110" href="Session.html#16110" class="Bound"
  >&#916;</a
  ><a name="16111"
  > </a
  ><a name="16112" class="Symbol"
  >=</a
  ><a name="16113"
  > </a
  ><a name="16114" href="Session.html#11966" class="Function"
  >Fork</a
  ><a name="16118"
  >   </a
  ><a name="16121" class="Symbol"
  >(</a
  ><a name="16122" href="Session.html#16104" class="Bound"
  >T</a
  ><a name="16123"
  > </a
  ><a name="16124" href="Session.html#16106" class="Bound"
  >X</a
  ><a name="16125" class="Symbol"
  >)</a
  ><a name="16126"
  > </a
  ><a name="16127" href="Session.html#16108" class="Bound"
  >&#915;</a
  ><a name="16128"
  > </a
  ><a name="16129" href="Session.html#16110" class="Bound"
  >&#916;</a
  ><a name="16130"
  >                 </a
  ><a name="16147" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="16148"
  > </a
  ><a name="16149" href="Session.html#16106" class="Bound"
  >X</a
  ><a name="16150"
  > </a
  ><a name="16151" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="16152"
  > </a
  ><a name="16153" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="16154"
  >
</a
  ><a name="16155" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16156"
  > </a
  ><a name="16157" href="Session.html#15670" class="InductiveConstructor"
  >T.send</a
  ><a name="16163"
  >  </a
  ><a name="16165" href="Session.html#16165" class="Bound"
  >T</a
  ><a name="16166"
  > </a
  ><a name="16167" href="Session.html#16167" class="Bound"
  >X</a
  ><a name="16168"
  > </a
  ><a name="16169" href="Session.html#16169" class="Bound"
  >&#915;</a
  ><a name="16170"
  > </a
  ><a name="16171" href="Session.html#16171" class="Bound"
  >&#916;</a
  ><a name="16172"
  > </a
  ><a name="16173" class="Symbol"
  >=</a
  ><a name="16174"
  > </a
  ><a name="16175" href="Session.html#10003" class="Function"
  >Send</a
  ><a name="16179"
  >         </a
  ><a name="16188" href="Session.html#16169" class="Bound"
  >&#915;</a
  ><a name="16189"
  > </a
  ><a name="16190" href="Session.html#16171" class="Bound"
  >&#916;</a
  ><a name="16191"
  >                 </a
  ><a name="16208" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="16209"
  > </a
  ><a name="16210" href="Session.html#16167" class="Bound"
  >X</a
  ><a name="16211"
  > </a
  ><a name="16212" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="16213"
  > </a
  ><a name="16214" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="16215"
  >
</a
  ><a name="16216" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16217"
  > </a
  ><a name="16218" href="Session.html#15675" class="InductiveConstructor"
  >T.recv</a
  ><a name="16224"
  >  </a
  ><a name="16226" href="Session.html#16226" class="Bound"
  >T</a
  ><a name="16227"
  > </a
  ><a name="16228" href="Session.html#16228" class="Bound"
  >X</a
  ><a name="16229"
  > </a
  ><a name="16230" href="Session.html#16230" class="Bound"
  >&#915;</a
  ><a name="16231"
  > </a
  ><a name="16232" href="Session.html#16232" class="Bound"
  >&#916;</a
  ><a name="16233"
  > </a
  ><a name="16234" class="Symbol"
  >=</a
  ><a name="16235"
  > </a
  ><a name="16236" href="Session.html#10008" class="Function"
  >Receive</a
  ><a name="16243"
  >      </a
  ><a name="16249" href="Session.html#16230" class="Bound"
  >&#915;</a
  ><a name="16250"
  > </a
  ><a name="16251" href="Session.html#16232" class="Bound"
  >&#916;</a
  ><a name="16252"
  >                 </a
  ><a name="16269" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="16270"
  > </a
  ><a name="16271" href="Session.html#16228" class="Bound"
  >X</a
  ><a name="16272"
  > </a
  ><a name="16273" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="16274"
  > </a
  ><a name="16275" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="16276"
  >
</a
  ><a name="16277" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16278"
  > </a
  ><a name="16279" href="Session.html#15695" class="InductiveConstructor"
  >T.!!</a
  ><a name="16283"
  >    </a
  ><a name="16287" href="Session.html#16287" class="Bound"
  >T</a
  ><a name="16288"
  > </a
  ><a name="16289" href="Session.html#16289" class="Bound"
  >X</a
  ><a name="16290"
  > </a
  ><a name="16291" href="Session.html#16291" class="Bound"
  >&#915;</a
  ><a name="16292"
  > </a
  ><a name="16293" href="Session.html#16293" class="Bound"
  >&#916;</a
  ><a name="16294"
  > </a
  ><a name="16295" class="Symbol"
  >=</a
  ><a name="16296"
  > </a
  ><a name="16297" href="Session.html#12279" class="Function"
  >Server</a
  ><a name="16303"
  > </a
  ><a name="16304" class="Symbol"
  >(</a
  ><a name="16305" href="Session.html#16287" class="Bound"
  >T</a
  ><a name="16306"
  > </a
  ><a name="16307" href="Session.html#16289" class="Bound"
  >X</a
  ><a name="16308" class="Symbol"
  >)</a
  ><a name="16309"
  > </a
  ><a name="16310" href="Session.html#16291" class="Bound"
  >&#915;</a
  ><a name="16311"
  > </a
  ><a name="16312" href="Session.html#16293" class="Bound"
  >&#916;</a
  ><a name="16313"
  >                 </a
  ><a name="16330" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="16331"
  > </a
  ><a name="16332" href="Session.html#16289" class="Bound"
  >X</a
  ><a name="16333"
  > </a
  ><a name="16334" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="16335"
  > </a
  ><a name="16336" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="16337"
  >
</a
  ><a name="16338" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16339"
  > </a
  ><a name="16340" href="Session.html#15698" class="InductiveConstructor"
  >T.??</a
  ><a name="16344"
  >    </a
  ><a name="16348" href="Session.html#16348" class="Bound"
  >T</a
  ><a name="16349"
  > </a
  ><a name="16350" href="Session.html#16350" class="Bound"
  >X</a
  ><a name="16351"
  > </a
  ><a name="16352" href="Session.html#16352" class="Bound"
  >&#915;</a
  ><a name="16353"
  > </a
  ><a name="16354" href="Session.html#16354" class="Bound"
  >&#916;</a
  ><a name="16355"
  > </a
  ><a name="16356" class="Symbol"
  >=</a
  ><a name="16357"
  > </a
  ><a name="16358" href="Session.html#12733" class="Function"
  >Client</a
  ><a name="16364"
  >  </a
  ><a name="16366" href="Session.html#16348" class="Bound"
  >T</a
  ><a name="16367"
  > </a
  ><a name="16368" href="Session.html#16350" class="Bound"
  >X</a
  ><a name="16369"
  >  </a
  ><a name="16371" href="Session.html#16352" class="Bound"
  >&#915;</a
  ><a name="16372"
  > </a
  ><a name="16373" href="Session.html#16354" class="Bound"
  >&#916;</a
  ><a name="16374"
  >
</a
  ><a name="16375" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16376"
  > </a
  ><a name="16377" href="Session.html#15701" class="InductiveConstructor"
  >T.wk</a
  ><a name="16381"
  >    </a
  ><a name="16385" href="Session.html#16385" class="Bound"
  >T</a
  ><a name="16386"
  > </a
  ><a name="16387" href="Session.html#16387" class="Bound"
  >X</a
  ><a name="16388"
  > </a
  ><a name="16389" href="Session.html#16389" class="Bound"
  >&#915;</a
  ><a name="16390"
  > </a
  ><a name="16391" href="Session.html#16391" class="Bound"
  >&#916;</a
  ><a name="16392"
  > </a
  ><a name="16393" class="Symbol"
  >=</a
  ><a name="16394"
  > </a
  ><a name="16395" href="Session.html#13055" class="Function"
  >Wk</a
  ><a name="16397"
  >           </a
  ><a name="16408" href="Session.html#16389" class="Bound"
  >&#915;</a
  ><a name="16409"
  > </a
  ><a name="16410" href="Session.html#16391" class="Bound"
  >&#916;</a
  ><a name="16411"
  >                 </a
  ><a name="16428" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="16429"
  > </a
  ><a name="16430" href="Session.html#16387" class="Bound"
  >X</a
  ><a name="16431"
  > </a
  ><a name="16432" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="16433"
  > </a
  ><a name="16434" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="16435"
  >
</a
  ><a name="16436" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16437"
  > </a
  ><a name="16438" href="Session.html#15704" class="InductiveConstructor"
  >T.ctr</a
  ><a name="16443"
  >   </a
  ><a name="16446" href="Session.html#16446" class="Bound"
  >T</a
  ><a name="16447"
  > </a
  ><a name="16448" href="Session.html#16448" class="Bound"
  >X</a
  ><a name="16449"
  > </a
  ><a name="16450" href="Session.html#16450" class="Bound"
  >&#915;</a
  ><a name="16451"
  > </a
  ><a name="16452" href="Session.html#16452" class="Bound"
  >&#916;</a
  ><a name="16453"
  > </a
  ><a name="16454" class="Symbol"
  >=</a
  ><a name="16455"
  > </a
  ><a name="16456" href="Session.html#13058" class="Function"
  >Ctr</a
  ><a name="16459"
  >          </a
  ><a name="16469" href="Session.html#16450" class="Bound"
  >&#915;</a
  ><a name="16470"
  > </a
  ><a name="16471" href="Session.html#16452" class="Bound"
  >&#916;</a
  ><a name="16472"
  >                 </a
  ><a name="16489" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="16490"
  > </a
  ><a name="16491" href="Session.html#16448" class="Bound"
  >X</a
  ><a name="16492"
  > </a
  ><a name="16493" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="16494"
  > </a
  ><a name="16495" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="16496"
  >
</a
  ><a name="16497" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16498"
  > </a
  ><a name="16499" href="Session.html#15720" class="InductiveConstructor"
  >T.corec</a
  ><a name="16506"
  > </a
  ><a name="16507" href="Session.html#16507" class="Bound"
  >T</a
  ><a name="16508"
  > </a
  ><a name="16509" href="Session.html#16509" class="Bound"
  >X</a
  ><a name="16510"
  > </a
  ><a name="16511" href="Session.html#16511" class="Bound"
  >&#915;</a
  ><a name="16512"
  > </a
  ><a name="16513" href="Session.html#16513" class="Bound"
  >&#916;</a
  ><a name="16514"
  > </a
  ><a name="16515" class="Symbol"
  >=</a
  ><a name="16516"
  > </a
  ><a name="16517" href="Session.html#13964" class="Function"
  >CoRec</a
  ><a name="16522"
  >   </a
  ><a name="16525" href="Session.html#16507" class="Bound"
  >T</a
  ><a name="16526"
  > </a
  ><a name="16527" href="Session.html#16509" class="Bound"
  >X</a
  ><a name="16528"
  >  </a
  ><a name="16530" href="Session.html#16511" class="Bound"
  >&#915;</a
  ><a name="16531"
  > </a
  ><a name="16532" href="Session.html#16513" class="Bound"
  >&#916;</a
  ><a name="16533"
  >
</a
  ><a name="16534" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16535"
  > </a
  ><a name="16536" href="Session.html#15745" class="InductiveConstructor"
  >T.write</a
  ><a name="16543"
  > </a
  ><a name="16544" href="Session.html#16544" class="Bound"
  >T</a
  ><a name="16545"
  > </a
  ><a name="16546" href="Session.html#16546" class="Bound"
  >X</a
  ><a name="16547"
  > </a
  ><a name="16548" href="Session.html#16548" class="Bound"
  >&#915;</a
  ><a name="16549"
  > </a
  ><a name="16550" href="Session.html#16550" class="Bound"
  >&#916;</a
  ><a name="16551"
  > </a
  ><a name="16552" class="Symbol"
  >=</a
  ><a name="16553"
  > </a
  ><a name="16554" href="Session.html#10556" class="Function"
  >Write</a
  ><a name="16559"
  >        </a
  ><a name="16567" href="Session.html#16548" class="Bound"
  >&#915;</a
  ><a name="16568"
  > </a
  ><a name="16569" href="Session.html#16550" class="Bound"
  >&#916;</a
  ><a name="16570"
  >                 </a
  ><a name="16587" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="16588"
  > </a
  ><a name="16589" href="Session.html#16546" class="Bound"
  >X</a
  ><a name="16590"
  > </a
  ><a name="16591" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="16592"
  > </a
  ><a name="16593" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="16594"
  >
</a
  ><a name="16595" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16596"
  > </a
  ><a name="16597" href="Session.html#15751" class="InductiveConstructor"
  >T.read</a
  ><a name="16603"
  >  </a
  ><a name="16605" href="Session.html#16605" class="Bound"
  >T</a
  ><a name="16606"
  > </a
  ><a name="16607" href="Session.html#16607" class="Bound"
  >X</a
  ><a name="16608"
  > </a
  ><a name="16609" href="Session.html#16609" class="Bound"
  >&#915;</a
  ><a name="16610"
  > </a
  ><a name="16611" href="Session.html#16611" class="Bound"
  >&#916;</a
  ><a name="16612"
  > </a
  ><a name="16613" class="Symbol"
  >=</a
  ><a name="16614"
  > </a
  ><a name="16615" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="16616"
  > </a
  ><a name="16617" class="Symbol"
  >(</a
  ><a name="16618" href="Session.html#10562" class="Function"
  >Read</a
  ><a name="16622"
  > </a
  ><a name="16623" href="Session.html#16609" class="Bound"
  >&#915;</a
  ><a name="16624"
  > </a
  ><a name="16625" href="Session.html#16611" class="Bound"
  >&#916;</a
  ><a name="16626" class="Symbol"
  >)</a
  ><a name="16627"
  > </a
  ><a name="16628" class="Symbol"
  >&#955;</a
  ><a name="16629"
  > </a
  ><a name="16630" href="Session.html#16630" class="Bound"
  >p</a
  ><a name="16631"
  > </a
  ><a name="16632" class="Symbol"
  >&#8594;</a
  ><a name="16633"
  >                          
                    </a
  ><a name="16680" class="Keyword"
  >let</a
  ><a name="16683"
  > </a
  ><a name="16684" class="Symbol"
  >((_</a
  ><a name="16687"
  > </a
  ><a name="16688" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16689"
  > </a
  ><a name="16690" href="Session.html#16690" class="Bound"
  >J</a
  ><a name="16691"
  > </a
  ><a name="16692" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16693"
  > </a
  ><a name="16694" class="Symbol"
  >_)</a
  ><a name="16696"
  > </a
  ><a name="16697" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16698"
  > </a
  ><a name="16699" class="Symbol"
  >_)</a
  ><a name="16701"
  > </a
  ><a name="16702" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16703"
  > </a
  ><a name="16704" class="Symbol"
  >_</a
  ><a name="16705"
  > </a
  ><a name="16706" class="Symbol"
  >=</a
  ><a name="16707"
  > </a
  ><a name="16708" href="Session.html#16630" class="Bound"
  >p</a
  ><a name="16709"
  > </a
  ><a name="16710" class="Keyword"
  >in</a
  ><a name="16712"
  >   </a
  ><a name="16715" href="Session.html#16607" class="Bound"
  >X</a
  ><a name="16716"
  > </a
  ><a name="16717" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="16718"
  > </a
  ><a name="16719" href="Session.html#16690" class="Bound"
  >J</a
  ><a name="16720"
  >       
</a
  ><a name="16728" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16729"
  > </a
  ><a name="16730" href="Session.html#15770" class="InductiveConstructor"
  >T.at</a
  ><a name="16734"
  >    </a
  ><a name="16738" href="Session.html#16738" class="Bound"
  >T</a
  ><a name="16739"
  > </a
  ><a name="16740" href="Session.html#16740" class="Bound"
  >X</a
  ><a name="16741"
  > </a
  ><a name="16742" href="Session.html#16742" class="Bound"
  >&#915;</a
  ><a name="16743"
  > </a
  ><a name="16744" href="Session.html#16744" class="Bound"
  >&#916;</a
  ><a name="16745"
  > </a
  ><a name="16746" class="Symbol"
  >=</a
  ><a name="16747"
  > </a
  ><a name="16748" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="16749"
  > </a
  ><a name="16750" class="Symbol"
  >(</a
  ><a name="16751" href="Session.html#11152" class="Function"
  >At</a
  ><a name="16753"
  > </a
  ><a name="16754" href="Session.html#16742" class="Bound"
  >&#915;</a
  ><a name="16755"
  > </a
  ><a name="16756" href="Session.html#16744" class="Bound"
  >&#916;</a
  ><a name="16757" class="Symbol"
  >)</a
  ><a name="16758"
  > </a
  ><a name="16759" class="Symbol"
  >&#955;</a
  ><a name="16760"
  > </a
  ><a name="16761" href="Session.html#16761" class="Bound"
  >p</a
  ><a name="16762"
  > </a
  ><a name="16763" class="Symbol"
  >&#8594;</a
  ><a name="16764"
  >
                    </a
  ><a name="16785" class="Keyword"
  >let</a
  ><a name="16788"
  > </a
  ><a name="16789" class="Symbol"
  >(_</a
  ><a name="16791"
  > </a
  ><a name="16792" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16793"
  > </a
  ><a name="16794" href="Session.html#16794" class="Bound"
  >O</a
  ><a name="16795"
  > </a
  ><a name="16796" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16797"
  > </a
  ><a name="16798" class="Symbol"
  >_)</a
  ><a name="16800"
  > </a
  ><a name="16801" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16802"
  > </a
  ><a name="16803" class="Symbol"
  >_</a
  ><a name="16804"
  > </a
  ><a name="16805" class="Symbol"
  >=</a
  ><a name="16806"
  > </a
  ><a name="16807" href="Session.html#16761" class="Bound"
  >p</a
  ><a name="16808"
  > </a
  ><a name="16809" class="Keyword"
  >in</a
  ><a name="16811"
  >         </a
  ><a name="16820" href="Session.html#16740" class="Bound"
  >X</a
  ><a name="16821"
  > </a
  ><a name="16822" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="16823"
  > </a
  ><a name="16824" href="Session.html#16794" class="Bound"
  >O</a
  ><a name="16825"
  >
</a
  ><a name="16826" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="16827"
  > </a
  ><a name="16828" href="Session.html#15795" class="InductiveConstructor"
  >T.end</a
  ><a name="16833"
  >   </a
  ><a name="16836" href="Session.html#16836" class="Bound"
  >T</a
  ><a name="16837"
  > </a
  ><a name="16838" href="Session.html#16838" class="Bound"
  >X</a
  ><a name="16839"
  > </a
  ><a name="16840" href="Session.html#16840" class="Bound"
  >&#915;</a
  ><a name="16841"
  > </a
  ><a name="16842" href="Session.html#16842" class="Bound"
  >&#916;</a
  ><a name="16843"
  > </a
  ><a name="16844" class="Symbol"
  >=</a
  ><a name="16845"
  > </a
  ><a name="16846" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="16847"
  > </a
  ><a name="16848" class="Symbol"
  >(</a
  ><a name="16849" href="Session.html#11500" class="Function"
  >End</a
  ><a name="16852"
  >  </a
  ><a name="16854" href="Session.html#16840" class="Bound"
  >&#915;</a
  ><a name="16855"
  > </a
  ><a name="16856" href="Session.html#16842" class="Bound"
  >&#916;</a
  ><a name="16857" class="Symbol"
  >)</a
  ><a name="16858"
  > </a
  ><a name="16859" class="Symbol"
  >&#955;</a
  ><a name="16860"
  > </a
  ><a name="16861" href="Session.html#16861" class="Bound"
  >p</a
  ><a name="16862"
  > </a
  ><a name="16863" class="Symbol"
  >&#8594;</a
  ><a name="16864"
  >                             
                    </a
  ><a name="16914" class="Keyword"
  >let</a
  ><a name="16917"
  > </a
  ><a name="16918" class="Symbol"
  >(</a
  ><a name="16919" href="Session.html#16919" class="Bound"
  >I</a
  ><a name="16920"
  > </a
  ><a name="16921" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16922"
  > </a
  ><a name="16923" class="Symbol"
  >_</a
  ><a name="16924"
  > </a
  ><a name="16925" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16926"
  > </a
  ><a name="16927" class="Symbol"
  >_)</a
  ><a name="16929"
  > </a
  ><a name="16930" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="16931"
  > </a
  ><a name="16932" class="Symbol"
  >_</a
  ><a name="16933"
  > </a
  ><a name="16934" class="Symbol"
  >=</a
  ><a name="16935"
  > </a
  ><a name="16936" href="Session.html#16861" class="Bound"
  >p</a
  ><a name="16937"
  > </a
  ><a name="16938" class="Keyword"
  >in</a
  ><a name="16940"
  >         </a
  ><a name="16949" href="Session.html#16838" class="Bound"
  >X</a
  ><a name="16950"
  > </a
  ><a name="16951" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="16952"
  > </a
  ><a name="16953" href="Session.html#16919" class="Bound"
  >I</a
  ><a name="16954"
  ></pre>
<h3 id="process-terms">Process terms</h3>
<p>As already stated, we plan to adopt codes for indexed functors instead of defining those directly. We could then simply use a generic indexed free monad construction, as in McBride's &quot;Kleisli Arrows of Outrageous Fortune&quot;, encoding our &quot;Atkey-style&quot; parameterisation in the way described there.</p>
<p>To make things simpler we use the following definition for now: this is neither a monad nor a monad transfomer, it is just convenient temporary syntax.</p>
<pre></a
  ><a name="17448" class="Keyword"
  >module</a
  ><a name="17454"
  > </a
  ><a name="17455" href="Session.html#17455" class="Module"
  >Process</a
  ><a name="17462"
  > </a
  ><a name="17463" class="Keyword"
  >where</a
  ><a name="17468"
  >

  </a
  ><a name="17472" class="Keyword"
  >infix</a
  ><a name="17477"
  > </a
  ><a name="17478" class="Number"
  >2</a
  ><a name="17479"
  > _[_&#8866;_]&gt;_

  </a
  ><a name="17492" href="Session.html#17492" class="Function"
  >F</a
  ><a name="17493"
  > </a
  ><a name="17494" class="Symbol"
  >=</a
  ><a name="17495"
  > </a
  ><a name="17496" class="Symbol"
  >&#955;</a
  ><a name="17497"
  > </a
  ><a name="17498" href="Session.html#17498" class="Bound"
  >T</a
  ><a name="17499"
  > </a
  ><a name="17500" href="Session.html#17500" class="Bound"
  >X</a
  ><a name="17501"
  > </a
  ><a name="17502" href="Session.html#17502" class="Bound"
  >&#915;</a
  ><a name="17503"
  > </a
  ><a name="17504" href="Session.html#17504" class="Bound"
  >&#916;</a
  ><a name="17505"
  > </a
  ><a name="17506" class="Symbol"
  >&#8594;</a
  ><a name="17507"
  > </a
  ><a name="17508" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="17509"
  > </a
  ><a name="17510" href="Session.html#15625" class="Datatype"
  >T.Tag</a
  ><a name="17515"
  > </a
  ><a name="17516" class="Symbol"
  >&#955;</a
  ><a name="17517"
  > </a
  ><a name="17518" href="Session.html#17518" class="Bound"
  >t</a
  ><a name="17519"
  > </a
  ><a name="17520" class="Symbol"
  >&#8594;</a
  ><a name="17521"
  > </a
  ><a name="17522" href="Session.html#16001" class="Function"
  >&#960;</a
  ><a name="17523"
  > </a
  ><a name="17524" href="Session.html#17518" class="Bound"
  >t</a
  ><a name="17525"
  > </a
  ><a name="17526" href="Session.html#17498" class="Bound"
  >T</a
  ><a name="17527"
  > </a
  ><a name="17528" href="Session.html#17500" class="Bound"
  >X</a
  ><a name="17529"
  > </a
  ><a name="17530" href="Session.html#17502" class="Bound"
  >&#915;</a
  ><a name="17531"
  > </a
  ><a name="17532" href="Session.html#17504" class="Bound"
  >&#916;</a
  ><a name="17533"
  >

  </a
  ><a name="17537" class="Keyword"
  >data</a
  ><a name="17541"
  > </a
  ><a name="17542" href="Session.html#17542" class="Datatype Operator"
  >_[_&#8866;_]&gt;_</a
  ><a name="17550"
  > </a
  ><a name="17551" href="Session.html#17551" class="Bound"
  >&#915;</a
  ><a name="17552"
  > </a
  ><a name="17553" class="Symbol"
  >(</a
  ><a name="17554" href="Session.html#17554" class="Bound"
  >M</a
  ><a name="17555"
  > </a
  ><a name="17556" class="Symbol"
  >:</a
  ><a name="17557"
  > </a
  ><a name="17558" class="PrimitiveType"
  >Set</a
  ><a name="17561"
  > </a
  ><a name="17562" class="Symbol"
  >&#8594;</a
  ><a name="17563"
  > </a
  ><a name="17564" class="PrimitiveType"
  >Set</a
  ><a name="17567" class="Symbol"
  >)</a
  ><a name="17568"
  > </a
  ><a name="17569" href="Session.html#17569" class="Bound"
  >X</a
  ><a name="17570"
  > </a
  ><a name="17571" class="Symbol"
  >:</a
  ><a name="17572"
  > </a
  ><a name="17573" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="17575"
  > </a
  ><a name="17576" class="Symbol"
  >&#8594;</a
  ><a name="17577"
  > </a
  ><a name="17578" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="17582"
  > </a
  ><a name="17583" class="Keyword"
  >where</a
  ><a name="17588"
  >
    </a
  ><a name="17593" href="Session.html#17593" class="InductiveConstructor Operator"
  >&#8657;_</a
  ><a name="17595"
  >    </a
  ><a name="17599" class="Symbol"
  >:</a
  ><a name="17600"
  >             </a
  ><a name="17613" href="Session.html#17554" class="Bound"
  >M</a
  ><a name="17614"
  > </a
  ><a name="17615" href="Session.html#17569" class="Bound"
  >X</a
  ><a name="17616"
  >                                </a
  ><a name="17648" class="Symbol"
  >&#8594;</a
  ><a name="17649"
  > </a
  ><a name="17650" href="Session.html#17551" class="Bound"
  >&#915;</a
  ><a name="17651"
  > </a
  ><a name="17652" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="17653"
  > </a
  ><a name="17654" href="Session.html#17554" class="Bound"
  >M</a
  ><a name="17655"
  > </a
  ><a name="17656" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="17657"
  > </a
  ><a name="17658" href="Session.html#17569" class="Bound"
  >X</a
  ><a name="17659"
  > </a
  ><a name="17660" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="17662"
  > </a
  ><a name="17663" href="Session.html#17551" class="Bound"
  >&#915;</a
  ><a name="17664"
  >
    </a
  ><a name="17669" href="Session.html#17669" class="InductiveConstructor Operator"
  >[_]</a
  ><a name="17672"
  >   </a
  ><a name="17675" class="Symbol"
  >:</a
  ><a name="17676"
  > </a
  ><a name="17677" class="Symbol"
  >&#8704;</a
  ><a name="17678"
  > </a
  ><a name="17679" class="Symbol"
  >{</a
  ><a name="17680" href="Session.html#17680" class="Bound"
  >&#916;</a
  ><a name="17681" class="Symbol"
  >}</a
  ><a name="17682"
  >     </a
  ><a name="17687" class="Symbol"
  >&#8594;</a
  ><a name="17688"
  > </a
  ><a name="17689" href="Session.html#17492" class="Function"
  >F</a
  ><a name="17690"
  > </a
  ><a name="17691" class="Symbol"
  >(&#955;</a
  ><a name="17693"
  > </a
  ><a name="17694" href="Session.html#17694" class="Bound"
  >Z</a
  ><a name="17695"
  > </a
  ><a name="17696" href="Session.html#17696" class="Bound"
  >A</a
  ><a name="17697"
  > </a
  ><a name="17698" href="Session.html#17698" class="Bound"
  >B</a
  ><a name="17699"
  > </a
  ><a name="17700" class="Symbol"
  >&#8594;</a
  ><a name="17701"
  > </a
  ><a name="17702" href="Session.html#17696" class="Bound"
  >A</a
  ><a name="17703"
  > </a
  ><a name="17704" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="17705"
  > </a
  ><a name="17706" href="Session.html#17554" class="Bound"
  >M</a
  ><a name="17707"
  > </a
  ><a name="17708" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="17709"
  > </a
  ><a name="17710" href="Session.html#17694" class="Bound"
  >Z</a
  ><a name="17711"
  > </a
  ><a name="17712" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="17714"
  > </a
  ><a name="17715" href="Session.html#17698" class="Bound"
  >B</a
  ><a name="17716" class="Symbol"
  >)</a
  ><a name="17717"
  > </a
  ><a name="17718" href="Session.html#17569" class="Bound"
  >X</a
  ><a name="17719"
  > </a
  ><a name="17720" href="Session.html#17551" class="Bound"
  >&#915;</a
  ><a name="17721"
  > </a
  ><a name="17722" href="Session.html#17680" class="Bound"
  >&#916;</a
  ><a name="17723"
  > </a
  ><a name="17724" class="Symbol"
  >&#8594;</a
  ><a name="17725"
  > </a
  ><a name="17726" href="Session.html#17551" class="Bound"
  >&#915;</a
  ><a name="17727"
  > </a
  ><a name="17728" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="17729"
  > </a
  ><a name="17730" href="Session.html#17554" class="Bound"
  >M</a
  ><a name="17731"
  > </a
  ><a name="17732" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="17733"
  > </a
  ><a name="17734" href="Session.html#17569" class="Bound"
  >X</a
  ><a name="17735"
  > </a
  ><a name="17736" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="17738"
  > </a
  ><a name="17739" href="Session.html#17680" class="Bound"
  >&#916;</a
  ><a name="17740"
  >
    </a
  ><a name="17745" href="Session.html#17745" class="InductiveConstructor Operator"
  >_&#187;=_</a
  ><a name="17749"
  >  </a
  ><a name="17751" class="Symbol"
  >:</a
  ><a name="17752"
  > </a
  ><a name="17753" class="Symbol"
  >&#8704;</a
  ><a name="17754"
  > </a
  ><a name="17755" class="Symbol"
  >{</a
  ><a name="17756" href="Session.html#17756" class="Bound"
  >&#926;</a
  ><a name="17757"
  > </a
  ><a name="17758" href="Session.html#17758" class="Bound"
  >&#916;</a
  ><a name="17759"
  > </a
  ><a name="17760" href="Session.html#17760" class="Bound"
  >Y</a
  ><a name="17761" class="Symbol"
  >}</a
  ><a name="17762"
  > </a
  ><a name="17763" class="Symbol"
  >&#8594;</a
  ><a name="17764"
  > </a
  ><a name="17765" href="Session.html#17551" class="Bound"
  >&#915;</a
  ><a name="17766"
  > </a
  ><a name="17767" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="17768"
  > </a
  ><a name="17769" href="Session.html#17554" class="Bound"
  >M</a
  ><a name="17770"
  > </a
  ><a name="17771" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="17772"
  > </a
  ><a name="17773" href="Session.html#17760" class="Bound"
  >Y</a
  ><a name="17774"
  > </a
  ><a name="17775" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="17777"
  > </a
  ><a name="17778" href="Session.html#17756" class="Bound"
  >&#926;</a
  ><a name="17779"
  >                     </a
  ><a name="17800" class="Symbol"
  >&#8594;</a
  ><a name="17801"
  > 
                   </a
  ><a name="17822" class="Symbol"
  >(</a
  ><a name="17823" href="Session.html#17760" class="Bound"
  >Y</a
  ><a name="17824"
  > </a
  ><a name="17825" class="Symbol"
  >&#8594;</a
  ><a name="17826"
  > </a
  ><a name="17827" href="Session.html#17756" class="Bound"
  >&#926;</a
  ><a name="17828"
  > </a
  ><a name="17829" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="17830"
  > </a
  ><a name="17831" href="Session.html#17554" class="Bound"
  >M</a
  ><a name="17832"
  > </a
  ><a name="17833" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="17834"
  > </a
  ><a name="17835" href="Session.html#17569" class="Bound"
  >X</a
  ><a name="17836"
  > </a
  ><a name="17837" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="17839"
  > </a
  ><a name="17840" href="Session.html#17758" class="Bound"
  >&#916;</a
  ><a name="17841" class="Symbol"
  >)</a
  ><a name="17842"
  >                    </a
  ><a name="17862" class="Symbol"
  >&#8594;</a
  ><a name="17863"
  > </a
  ><a name="17864" href="Session.html#17551" class="Bound"
  >&#915;</a
  ><a name="17865"
  > </a
  ><a name="17866" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="17867"
  > </a
  ><a name="17868" href="Session.html#17554" class="Bound"
  >M</a
  ><a name="17869"
  > </a
  ><a name="17870" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="17871"
  > </a
  ><a name="17872" href="Session.html#17569" class="Bound"
  >X</a
  ><a name="17873"
  > </a
  ><a name="17874" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="17876"
  > </a
  ><a name="17877" href="Session.html#17758" class="Bound"
  >&#916;</a
  ><a name="17878"
  >

</a
  ><a name="17880" class="Keyword"
  >open</a
  ><a name="17884"
  > </a
  ><a name="17885" href="Session.html#17455" class="Module"
  >Process</a
  ><a name="17892"
  > </a
  ><a name="17893" class="Keyword"
  >using</a
  ><a name="17898"
  > </a
  ><a name="17899" class="Symbol"
  >(</a
  ><a name="17900"
  >_[_&#8866;_]&gt;_ </a
  ><a name="17909" class="Symbol"
  >;</a
  ><a name="17910"
  > &#8657;_ </a
  ><a name="17914" class="Symbol"
  >;</a
  ><a name="17915"
  > _&#187;=_ </a
  ><a name="17921" class="Symbol"
  >;</a
  ><a name="17922"
  > [_]</a
  ><a name="17926" class="Symbol"
  >)</a
  ><a name="17927"
  > </a
  ><a name="17928" class="Keyword"
  >public</a
  ><a name="17934"
  ></pre>
<p>Note that referring to the above operators as &quot;strictly positive functors&quot; as we did, while very reasonable from their definitions, is also justified by the fact that Agda's positivity checker accepts <code>_[_⊢_]&gt;_</code>.</p>
<h3 id="syntactic-sugar">Syntactic sugar</h3>
<h4 id="patterns">Patterns</h4>
<p>To construct and pattern match on processes we make extensive use of Agda's <code>pattern</code> facility.</p>
<pre></a
  ><a name="18307" class="Keyword"
  >pattern</a
  ><a name="18314"
  > fork    d x    </a
  ><a name="18330" class="Symbol"
  >=</a
  ><a name="18331"
  > [ T.fork  , </a
  ><a name="18344" class="Symbol"
  >(</a
  ><a name="18345"
  >d , x , &lt;&gt;</a
  ><a name="18355" class="Symbol"
  >)</a
  ><a name="18356"
  >                 , &lt;&gt; ] 
</a
  ><a name="18381" class="Keyword"
  >pattern</a
  ><a name="18388"
  > new            </a
  ><a name="18404" class="Symbol"
  >=</a
  ><a name="18405"
  > [ T.new   , </a
  ><a name="18418" class="Symbol"
  >(_</a
  ><a name="18420"
  > , &lt;&gt;</a
  ><a name="18425" class="Symbol"
  >)</a
  ><a name="18426"
  >                     , &lt;&gt; ] 
</a
  ><a name="18455" class="Keyword"
  >pattern</a
  ><a name="18462"
  > send    i j    </a
  ><a name="18478" class="Symbol"
  >=</a
  ><a name="18479"
  > [ T.send  , % </a
  ><a name="18494" class="Symbol"
  >(</a
  ><a name="18495"
  >i , j , &lt;&gt;</a
  ><a name="18505" class="Symbol"
  >)</a
  ><a name="18506"
  >               , &lt;&gt; ] 
</a
  ><a name="18529" class="Keyword"
  >pattern</a
  ><a name="18536"
  > receive i      </a
  ><a name="18552" class="Symbol"
  >=</a
  ><a name="18553"
  > [ T.recv  , % </a
  ><a name="18568" class="Symbol"
  >(</a
  ><a name="18569"
  >i , &lt;&gt;</a
  ><a name="18575" class="Symbol"
  >)</a
  ><a name="18576"
  >                   , &lt;&gt; ] 
</a
  ><a name="18603" class="Keyword"
  >pattern</a
  ><a name="18610"
  > accept  i a p  </a
  ><a name="18626" class="Symbol"
  >=</a
  ><a name="18627"
  > [ T.!!    , % </a
  ><a name="18642" class="Symbol"
  >(</a
  ><a name="18643"
  >i , a , p , &lt;&gt;</a
  ><a name="18657" class="Symbol"
  >)</a
  ><a name="18658"
  >           , &lt;&gt; ] 
</a
  ><a name="18677" class="Keyword"
  >pattern</a
  ><a name="18684"
  > connect i   p  </a
  ><a name="18700" class="Symbol"
  >=</a
  ><a name="18701"
  > [ T.??    , % </a
  ><a name="18716" class="Symbol"
  >(</a
  ><a name="18717"
  >i , p</a
  ><a name="18722" class="Symbol"
  >)</a
  ><a name="18723"
  >                         ] 
</a
  ><a name="18751" class="Keyword"
  >pattern</a
  ><a name="18758"
  > wont    i      </a
  ><a name="18774" class="Symbol"
  >=</a
  ><a name="18775"
  > [ T.wk    , % </a
  ><a name="18790" class="Symbol"
  >(</a
  ><a name="18791"
  >i , &lt;&gt;</a
  ><a name="18797" class="Symbol"
  >)</a
  ><a name="18798"
  >                   , &lt;&gt; ] 
</a
  ><a name="18825" class="Keyword"
  >pattern</a
  ><a name="18832"
  > twice   i      </a
  ><a name="18848" class="Symbol"
  >=</a
  ><a name="18849"
  > [ T.ctr   , % </a
  ><a name="18864" class="Symbol"
  >(</a
  ><a name="18865"
  >i , &lt;&gt;</a
  ><a name="18871" class="Symbol"
  >)</a
  ><a name="18872"
  >                   , &lt;&gt; ] 
</a
  ><a name="18899" class="Keyword"
  >pattern</a
  ><a name="18906"
  > write   i x    </a
  ><a name="18922" class="Symbol"
  >=</a
  ><a name="18923"
  > [ T.write , </a
  ><a name="18936" class="Symbol"
  >((_</a
  ><a name="18939"
  > , x , </a
  ><a name="18946" class="Symbol"
  >_)</a
  ><a name="18948"
  > , i , &lt;&gt;</a
  ><a name="18957" class="Symbol"
  >)</a
  ><a name="18958"
  >       , &lt;&gt; ] 
</a
  ><a name="18973" class="Keyword"
  >pattern</a
  ><a name="18980"
  > read    i      </a
  ><a name="18996" class="Symbol"
  >=</a
  ><a name="18997"
  > [ T.read  , % </a
  ><a name="19012" class="Symbol"
  >(</a
  ><a name="19013"
  >i , &lt;&gt;</a
  ><a name="19019" class="Symbol"
  >)</a
  ><a name="19020"
  >                   , &lt;&gt; ] 
</a
  ><a name="19047" class="Keyword"
  >pattern</a
  ><a name="19054"
  > end/    i r    </a
  ><a name="19070" class="Symbol"
  >=</a
  ><a name="19071"
  > [ T.end   , </a
  ><a name="19084" class="Symbol"
  >((_</a
  ><a name="19087"
  > , </a
  ><a name="19090" class="Symbol"
  >_</a
  ><a name="19091"
  > , r , </a
  ><a name="19098" class="Symbol"
  >_)</a
  ><a name="19100"
  > , </a
  ><a name="19103" class="Symbol"
  >(</a
  ><a name="19104"
  >i , &lt;&gt;</a
  ><a name="19110" class="Symbol"
  >))</a
  ><a name="19112"
  > , &lt;&gt; ] 
</a
  ><a name="19121" class="Keyword"
  >pattern</a
  ><a name="19128"
  > end     i      </a
  ><a name="19144" class="Symbol"
  >=</a
  ><a name="19145"
  > end/ i </a
  ><a name="19153" class="Symbol"
  >_</a
  ><a name="19154"
  >
</a
  ><a name="19155" class="Keyword"
  >pattern</a
  ><a name="19162"
  > at/     i o    </a
  ><a name="19178" class="Symbol"
  >=</a
  ><a name="19179"
  > [ T.at    , </a
  ><a name="19192" class="Symbol"
  >((</a
  ><a name="19194"
  >%3 </a
  ><a name="19197" class="Symbol"
  >(</a
  ><a name="19198"
  >o , </a
  ><a name="19202" class="Symbol"
  >_)</a
  ><a name="19204"
  > , </a
  ><a name="19207" class="Symbol"
  >(</a
  ><a name="19208"
  >i , &lt;&gt;</a
  ><a name="19214" class="Symbol"
  >)))</a
  ><a name="19217"
  >    , &lt;&gt; ] 
</a
  ><a name="19229" class="Keyword"
  >pattern</a
  ><a name="19236"
  > at      i      </a
  ><a name="19252" class="Symbol"
  >=</a
  ><a name="19253"
  > at/ i </a
  ><a name="19260" class="Symbol"
  >_</a
  ><a name="19261"
  >                                         
</a
  ><a name="19303" class="Keyword"
  >pattern</a
  ><a name="19310"
  > corec   i o gp </a
  ><a name="19326" class="Symbol"
  >=</a
  ><a name="19327"
  > [ T.corec , </a
  ><a name="19340" class="Symbol"
  >(</a
  ><a name="19341"
  >%4 o</a
  ><a name="19345" class="Symbol"
  >)</a
  ><a name="19346"
  > , </a
  ><a name="19349" class="Symbol"
  >(</a
  ><a name="19350"
  >i , </a
  ><a name="19354" class="Symbol"
  >(</a
  ><a name="19355"
  >gp , &lt;&gt;</a
  ><a name="19362" class="Symbol"
  >))</a
  ><a name="19364"
  >          ]</pre>
<p>(We plan to also define a view for these patterns, so that Agda's interactive splitting (<code>C-c C-c</code>) can be recovered after a <code>with</code>)</p>
<h4 id="monadic-binding-notation">Monadic binding notation</h4>
<p>For the binding operator we mimic Haskell's <code>do</code>-notation with a <code>syntax</code> declaration.</p>
<pre></a
  ><a name="19654" class="Keyword"
  >infixr</a
  ><a name="19660"
  > </a
  ><a name="19661" class="Number"
  >5</a
  ><a name="19662"
  > bind
</a
  ><a name="19668" href="Session.html#19668" class="Function"
  >bind</a
  ><a name="19672"
  > </a
  ><a name="19673" class="Symbol"
  >:</a
  ><a name="19674"
  > </a
  ><a name="19675" class="Symbol"
  >&#8704;</a
  ><a name="19676"
  > </a
  ><a name="19677" class="Symbol"
  >{</a
  ><a name="19678" href="Session.html#19678" class="Bound"
  >M</a
  ><a name="19679"
  > </a
  ><a name="19680" href="Session.html#19680" class="Bound"
  >&#915;</a
  ><a name="19681"
  > </a
  ><a name="19682" href="Session.html#19682" class="Bound"
  >&#926;</a
  ><a name="19683"
  > </a
  ><a name="19684" href="Session.html#19684" class="Bound"
  >&#916;</a
  ><a name="19685"
  > </a
  ><a name="19686" href="Session.html#19686" class="Bound"
  >X</a
  ><a name="19687"
  > </a
  ><a name="19688" href="Session.html#19688" class="Bound"
  >Y</a
  ><a name="19689" class="Symbol"
  >}</a
  ><a name="19690"
  > </a
  ><a name="19691" class="Symbol"
  >&#8594;</a
  ><a name="19692"
  > </a
  ><a name="19693" href="Session.html#19680" class="Bound"
  >&#915;</a
  ><a name="19694"
  > </a
  ><a name="19695" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="19696"
  > </a
  ><a name="19697" href="Session.html#19678" class="Bound"
  >M</a
  ><a name="19698"
  > </a
  ><a name="19699" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="19700"
  > </a
  ><a name="19701" href="Session.html#19688" class="Bound"
  >Y</a
  ><a name="19702"
  > </a
  ><a name="19703" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="19705"
  > </a
  ><a name="19706" href="Session.html#19682" class="Bound"
  >&#926;</a
  ><a name="19707"
  >  </a
  ><a name="19709" class="Symbol"
  >&#8594;</a
  ><a name="19710"
  > 
                    </a
  ><a name="19732" class="Symbol"
  >(</a
  ><a name="19733" href="Session.html#19688" class="Bound"
  >Y</a
  ><a name="19734"
  > </a
  ><a name="19735" class="Symbol"
  >&#8594;</a
  ><a name="19736"
  > </a
  ><a name="19737" href="Session.html#19682" class="Bound"
  >&#926;</a
  ><a name="19738"
  > </a
  ><a name="19739" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="19740"
  > </a
  ><a name="19741" href="Session.html#19678" class="Bound"
  >M</a
  ><a name="19742"
  > </a
  ><a name="19743" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="19744"
  > </a
  ><a name="19745" href="Session.html#19686" class="Bound"
  >X</a
  ><a name="19746"
  > </a
  ><a name="19747" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="19749"
  > </a
  ><a name="19750" href="Session.html#19684" class="Bound"
  >&#916;</a
  ><a name="19751" class="Symbol"
  >)</a
  ><a name="19752"
  > </a
  ><a name="19753" class="Symbol"
  >&#8594;</a
  ><a name="19754"
  > </a
  ><a name="19755" href="Session.html#19680" class="Bound"
  >&#915;</a
  ><a name="19756"
  > </a
  ><a name="19757" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="19758"
  > </a
  ><a name="19759" href="Session.html#19678" class="Bound"
  >M</a
  ><a name="19760"
  > </a
  ><a name="19761" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="19762"
  > </a
  ><a name="19763" href="Session.html#19686" class="Bound"
  >X</a
  ><a name="19764"
  > </a
  ><a name="19765" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="19767"
  > </a
  ><a name="19768" href="Session.html#19684" class="Bound"
  >&#916;</a
  ><a name="19769"
  >
</a
  ><a name="19770" href="Session.html#19668" class="Function"
  >bind</a
  ><a name="19774"
  > </a
  ><a name="19775" class="Symbol"
  >=</a
  ><a name="19776"
  > </a
  ><a name="19777" href="Session.html#17745" class="InductiveConstructor Operator"
  >_&#187;=_</a
  ><a name="19781"
  >
</a
  ><a name="19782" class="Keyword"
  >syntax</a
  ><a name="19788"
  > bind m </a
  ><a name="19796" class="Symbol"
  >(&#955;</a
  ><a name="19798"
  > x </a
  ><a name="19801" class="Symbol"
  >&#8594;</a
  ><a name="19802"
  > y</a
  ><a name="19804" class="Symbol"
  >)</a
  ><a name="19805"
  > </a
  ><a name="19806" class="Symbol"
  >=</a
  ><a name="19807"
  > x &lt;- m &#8943; y</pre>

<pre></a
  ><a name="19844" class="Keyword"
  >infixr</a
  ><a name="19850"
  > </a
  ><a name="19851" class="Number"
  >5</a
  ><a name="19852"
  > _&#187;_
</a
  ><a name="19857" href="Session.html#19857" class="Function Operator"
  >_&#187;_</a
  ><a name="19860"
  > </a
  ><a name="19861" class="Symbol"
  >:</a
  ><a name="19862"
  > </a
  ><a name="19863" class="Symbol"
  >&#8704;</a
  ><a name="19864"
  > </a
  ><a name="19865" class="Symbol"
  >{</a
  ><a name="19866" href="Session.html#19866" class="Bound"
  >M</a
  ><a name="19867"
  > </a
  ><a name="19868" href="Session.html#19868" class="Bound"
  >&#915;</a
  ><a name="19869"
  > </a
  ><a name="19870" href="Session.html#19870" class="Bound"
  >&#926;</a
  ><a name="19871"
  > </a
  ><a name="19872" href="Session.html#19872" class="Bound"
  >&#916;</a
  ><a name="19873"
  > </a
  ><a name="19874" href="Session.html#19874" class="Bound"
  >X</a
  ><a name="19875"
  > </a
  ><a name="19876" href="Session.html#19876" class="Bound"
  >Y</a
  ><a name="19877" class="Symbol"
  >}</a
  ><a name="19878"
  > </a
  ><a name="19879" class="Symbol"
  >&#8594;</a
  ><a name="19880"
  > </a
  ><a name="19881" href="Session.html#19868" class="Bound"
  >&#915;</a
  ><a name="19882"
  > </a
  ><a name="19883" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="19884"
  > </a
  ><a name="19885" href="Session.html#19866" class="Bound"
  >M</a
  ><a name="19886"
  > </a
  ><a name="19887" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="19888"
  > </a
  ><a name="19889" href="Session.html#19874" class="Bound"
  >X</a
  ><a name="19890"
  > </a
  ><a name="19891" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="19893"
  > </a
  ><a name="19894" href="Session.html#19870" class="Bound"
  >&#926;</a
  ><a name="19895"
  > </a
  ><a name="19896" class="Symbol"
  >&#8594;</a
  ><a name="19897"
  > </a
  ><a name="19898" href="Session.html#19870" class="Bound"
  >&#926;</a
  ><a name="19899"
  > </a
  ><a name="19900" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="19901"
  > </a
  ><a name="19902" href="Session.html#19866" class="Bound"
  >M</a
  ><a name="19903"
  > </a
  ><a name="19904" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="19905"
  > </a
  ><a name="19906" href="Session.html#19876" class="Bound"
  >Y</a
  ><a name="19907"
  > </a
  ><a name="19908" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="19910"
  > </a
  ><a name="19911" href="Session.html#19872" class="Bound"
  >&#916;</a
  ><a name="19912"
  > </a
  ><a name="19913" class="Symbol"
  >&#8594;</a
  ><a name="19914"
  > </a
  ><a name="19915" href="Session.html#19868" class="Bound"
  >&#915;</a
  ><a name="19916"
  > </a
  ><a name="19917" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="19918"
  > </a
  ><a name="19919" href="Session.html#19866" class="Bound"
  >M</a
  ><a name="19920"
  > </a
  ><a name="19921" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="19922"
  > </a
  ><a name="19923" href="Session.html#19876" class="Bound"
  >Y</a
  ><a name="19924"
  > </a
  ><a name="19925" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="19927"
  > </a
  ><a name="19928" href="Session.html#19872" class="Bound"
  >&#916;</a
  ><a name="19929"
  >
</a
  ><a name="19930" href="Session.html#19930" class="Bound"
  >m</a
  ><a name="19931"
  > </a
  ><a name="19932" href="Session.html#19857" class="Function Operator"
  >&#187;</a
  ><a name="19933"
  > </a
  ><a name="19934" href="Session.html#19934" class="Bound"
  >n</a
  ><a name="19935"
  > </a
  ><a name="19936" class="Symbol"
  >=</a
  ><a name="19937"
  > </a
  ><a name="19938" href="Session.html#19930" class="Bound"
  >m</a
  ><a name="19939"
  > </a
  ><a name="19940" href="Session.html#17745" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="19942"
  > </a
  ><a name="19943" class="Symbol"
  >&#955;</a
  ><a name="19944"
  > </a
  ><a name="19945" href="Session.html#19945" class="Bound"
  >_</a
  ><a name="19946"
  > </a
  ><a name="19947" class="Symbol"
  >&#8594;</a
  ><a name="19948"
  > </a
  ><a name="19949" href="Session.html#19934" class="Bound"
  >n</a
  ><a name="19950"
  ></pre>
<h4 id="write-and-read-dependently"><code>write</code> and <code>read</code> dependently</h4>
<p>We added <code>`^</code> (in Strictly Positive Families we would have used <code>`Δ</code>) to recover the <em>possibility</em> of making use of data exchanged by <code>write</code> and <code>read</code> at the type level.</p>
<pre></a
  ><a name="20194" href="Session.html#20194" class="Function"
  >put</a
  ><a name="20197"
  > </a
  ><a name="20198" class="Symbol"
  >:</a
  ><a name="20199"
  > </a
  ><a name="20200" class="Symbol"
  >&#8704;</a
  ><a name="20201"
  > </a
  ><a name="20202" class="Symbol"
  >{</a
  ><a name="20203" href="Session.html#20203" class="Bound"
  >M</a
  ><a name="20204"
  > </a
  ><a name="20205" href="Session.html#20205" class="Bound"
  >&#915;</a
  ><a name="20206" class="Symbol"
  >}{</a
  ><a name="20208" href="Session.html#20208" class="Bound"
  >I</a
  ><a name="20209"
  > </a
  ><a name="20210" href="Session.html#20210" class="Bound"
  >O</a
  ><a name="20211"
  > </a
  ><a name="20212" href="Session.html#20212" class="Bound"
  >A</a
  ><a name="20213"
  > </a
  ><a name="20214" class="Symbol"
  >:</a
  ><a name="20215"
  > </a
  ><a name="20216" class="PrimitiveType"
  >Set</a
  ><a name="20219" class="Symbol"
  >}{</a
  ><a name="20221" href="Session.html#20221" class="Bound"
  >T</a
  ><a name="20222"
  > </a
  ><a name="20223" class="Symbol"
  >:</a
  ><a name="20224"
  > </a
  ><a name="20225" href="Session.html#20212" class="Bound"
  >A</a
  ><a name="20226"
  > </a
  ><a name="20227" class="Symbol"
  >&#8594;</a
  ><a name="20228"
  > </a
  ><a name="20229" href="Session.html#3758" class="Function"
  >De</a
  ><a name="20231"
  > </a
  ><a name="20232" href="Session.html#20208" class="Bound"
  >I</a
  ><a name="20233" class="Symbol"
  >}{</a
  ><a name="20235" href="Session.html#20235" class="Bound"
  >s</a
  ><a name="20236" class="Symbol"
  >}</a
  ><a name="20237"
  > </a
  ><a name="20238" class="Symbol"
  >&#8594;</a
  ><a name="20239"
  >
      </a
  ><a name="20246" class="Symbol"
  >(</a
  ><a name="20247" href="Session.html#20247" class="Bound"
  >i</a
  ><a name="20248"
  > </a
  ><a name="20249" class="Symbol"
  >:</a
  ><a name="20250"
  > </a
  ><a name="20251" class="Symbol"
  >(</a
  ><a name="20252" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="20253"
  > </a
  ><a name="20254" href="Session.html#20235" class="Bound"
  >s</a
  ><a name="20255"
  > </a
  ><a name="20256" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20257"
  > </a
  ><a name="20258" href="Session.html#20208" class="Bound"
  >I</a
  ><a name="20259"
  > </a
  ><a name="20260" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20261"
  > </a
  ><a name="20262" href="Session.html#20210" class="Bound"
  >O</a
  ><a name="20263"
  > </a
  ><a name="20264" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20265"
  > </a
  ><a name="20266" href="Session.html#5227" class="Function Operator"
  >[</a
  ><a name="20267"
  > </a
  ><a name="20268" href="Session.html#20235" class="Bound"
  >s</a
  ><a name="20269"
  > </a
  ><a name="20270" href="Session.html#5227" class="Function Operator"
  >]&#931;</a
  ><a name="20272"
  > </a
  ><a name="20273" href="Session.html#20212" class="Bound"
  >A</a
  ><a name="20274"
  > </a
  ><a name="20275" class="Symbol"
  >(</a
  ><a name="20276" href="Session.html#4151" class="InductiveConstructor"
  >`^</a
  ><a name="20278"
  > </a
  ><a name="20279" href="Session.html#20221" class="Bound"
  >T</a
  ><a name="20280" class="Symbol"
  >))</a
  ><a name="20282"
  > </a
  ><a name="20283" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="20284"
  > </a
  ><a name="20285" href="Session.html#20205" class="Bound"
  >&#915;</a
  ><a name="20286" class="Symbol"
  >)</a
  ><a name="20287"
  > </a
  ><a name="20288" class="Symbol"
  >&#8594;</a
  ><a name="20289"
  >
      </a
  ><a name="20296" class="Symbol"
  >(</a
  ><a name="20297" href="Session.html#20297" class="Bound"
  >a</a
  ><a name="20298"
  > </a
  ><a name="20299" class="Symbol"
  >:</a
  ><a name="20300"
  > </a
  ><a name="20301" href="Session.html#20212" class="Bound"
  >A</a
  ><a name="20302" class="Symbol"
  >)</a
  ><a name="20303"
  > </a
  ><a name="20304" class="Symbol"
  >&#8594;</a
  ><a name="20305"
  > </a
  ><a name="20306" href="Session.html#20205" class="Bound"
  >&#915;</a
  ><a name="20307"
  > </a
  ><a name="20308" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="20309"
  > </a
  ><a name="20310" href="Session.html#20203" class="Bound"
  >M</a
  ><a name="20311"
  > </a
  ><a name="20312" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="20313"
  > </a
  ><a name="20314" href="Session.html#20212" class="Bound"
  >A</a
  ><a name="20315"
  > </a
  ><a name="20316" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="20318"
  > </a
  ><a name="20319" class="Symbol"
  >(</a
  ><a name="20320" href="Base.html#3336" class="Function"
  >ud</a
  ><a name="20322"
  > </a
  ><a name="20323" class="Symbol"
  >(</a
  ><a name="20324" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="20325"
  > </a
  ><a name="20326" href="Session.html#20235" class="Bound"
  >s</a
  ><a name="20327"
  > </a
  ><a name="20328" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20329"
  > </a
  ><a name="20330" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="20332"
  > </a
  ><a name="20333" href="Session.html#20221" class="Bound"
  >T</a
  ><a name="20334"
  > </a
  ><a name="20335" href="Session.html#20297" class="Bound"
  >a</a
  ><a name="20336" class="Symbol"
  >)</a
  ><a name="20337"
  > </a
  ><a name="20338" class="Symbol"
  >(</a
  ><a name="20339" href="Base.html#3457" class="Function"
  >&#8712;ud</a
  ><a name="20342"
  > </a
  ><a name="20343" href="Session.html#20247" class="Bound"
  >i</a
  ><a name="20344" class="Symbol"
  >))</a
  ><a name="20346"
  >
</a
  ><a name="20347" href="Session.html#20194" class="Function"
  >put</a
  ><a name="20350"
  > </a
  ><a name="20351" href="Session.html#20351" class="Bound"
  >i</a
  ><a name="20352"
  > </a
  ><a name="20353" href="Session.html#20353" class="Bound"
  >a</a
  ><a name="20354"
  > </a
  ><a name="20355" class="Symbol"
  >=</a
  ><a name="20356"
  > </a
  ><a name="20357" href="Session.html#17669" class="InductiveConstructor Operator"
  >write</a
  ><a name="20362"
  > </a
  ><a name="20363" href="Session.html#20351" class="Bound"
  >i</a
  ><a name="20364"
  > </a
  ><a name="20365" href="Session.html#20353" class="Bound"
  >a</a
  ><a name="20366"
  > </a
  ><a name="20367" href="Session.html#17745" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="20369"
  > </a
  ><a name="20370" class="Symbol"
  >&#955;</a
  ><a name="20371"
  > </a
  ><a name="20372" href="Session.html#20372" class="Bound"
  >_</a
  ><a name="20373"
  > </a
  ><a name="20374" class="Symbol"
  >&#8594;</a
  ><a name="20375"
  > </a
  ><a name="20376" href="Session.html#17669" class="InductiveConstructor Operator"
  >at</a
  ><a name="20378"
  > </a
  ><a name="20379" class="Symbol"
  >(</a
  ><a name="20380" href="Base.html#3457" class="Function"
  >&#8712;ud</a
  ><a name="20383"
  > </a
  ><a name="20384" href="Session.html#20351" class="Bound"
  >i</a
  ><a name="20385" class="Symbol"
  >)</a
  ><a name="20386"
  >

</a
  ><a name="20388" href="Session.html#20388" class="Function"
  >get</a
  ><a name="20391"
  > </a
  ><a name="20392" class="Symbol"
  >:</a
  ><a name="20393"
  > </a
  ><a name="20394" class="Symbol"
  >&#8704;</a
  ><a name="20395"
  > </a
  ><a name="20396" class="Symbol"
  >{</a
  ><a name="20397" href="Session.html#20397" class="Bound"
  >M</a
  ><a name="20398"
  > </a
  ><a name="20399" href="Session.html#20399" class="Bound"
  >&#915;</a
  ><a name="20400"
  > </a
  ><a name="20401" href="Session.html#20401" class="Bound"
  >&#916;</a
  ><a name="20402" class="Symbol"
  >}{</a
  ><a name="20404" href="Session.html#20404" class="Bound"
  >I</a
  ><a name="20405"
  > </a
  ><a name="20406" href="Session.html#20406" class="Bound"
  >O</a
  ><a name="20407"
  > </a
  ><a name="20408" href="Session.html#20408" class="Bound"
  >A</a
  ><a name="20409"
  > </a
  ><a name="20410" href="Session.html#20410" class="Bound"
  >B</a
  ><a name="20411"
  > </a
  ><a name="20412" class="Symbol"
  >:</a
  ><a name="20413"
  > </a
  ><a name="20414" class="PrimitiveType"
  >Set</a
  ><a name="20417" class="Symbol"
  >}{</a
  ><a name="20419" href="Session.html#20419" class="Bound"
  >T</a
  ><a name="20420"
  > </a
  ><a name="20421" class="Symbol"
  >:</a
  ><a name="20422"
  > </a
  ><a name="20423" href="Session.html#20408" class="Bound"
  >A</a
  ><a name="20424"
  > </a
  ><a name="20425" class="Symbol"
  >&#8594;</a
  ><a name="20426"
  > </a
  ><a name="20427" href="Session.html#3758" class="Function"
  >De</a
  ><a name="20429"
  > </a
  ><a name="20430" href="Session.html#20404" class="Bound"
  >I</a
  ><a name="20431" class="Symbol"
  >}{</a
  ><a name="20433" href="Session.html#20433" class="Bound"
  >s</a
  ><a name="20434" class="Symbol"
  >}</a
  ><a name="20435"
  >
      </a
  ><a name="20442" class="Symbol"
  >(</a
  ><a name="20443" href="Session.html#20443" class="Bound"
  >i</a
  ><a name="20444"
  > </a
  ><a name="20445" class="Symbol"
  >:</a
  ><a name="20446"
  > </a
  ><a name="20447" class="Symbol"
  >(</a
  ><a name="20448" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="20449"
  > </a
  ><a name="20450" href="Session.html#20433" class="Bound"
  >s</a
  ><a name="20451"
  > </a
  ><a name="20452" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20453"
  > </a
  ><a name="20454" href="Session.html#20404" class="Bound"
  >I</a
  ><a name="20455"
  > </a
  ><a name="20456" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20457"
  > </a
  ><a name="20458" href="Session.html#20406" class="Bound"
  >O</a
  ><a name="20459"
  > </a
  ><a name="20460" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20461"
  > </a
  ><a name="20462" href="Session.html#5234" class="Function Operator"
  >[</a
  ><a name="20463"
  > </a
  ><a name="20464" href="Session.html#20433" class="Bound"
  >s</a
  ><a name="20465"
  > </a
  ><a name="20466" href="Session.html#5234" class="Function Operator"
  >]&#928;</a
  ><a name="20468"
  > </a
  ><a name="20469" href="Session.html#20408" class="Bound"
  >A</a
  ><a name="20470"
  > </a
  ><a name="20471" class="Symbol"
  >(</a
  ><a name="20472" href="Session.html#4151" class="InductiveConstructor"
  >`^</a
  ><a name="20474"
  > </a
  ><a name="20475" href="Session.html#20419" class="Bound"
  >T</a
  ><a name="20476" class="Symbol"
  >))</a
  ><a name="20478"
  > </a
  ><a name="20479" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="20480"
  > </a
  ><a name="20481" href="Session.html#20399" class="Bound"
  >&#915;</a
  ><a name="20482" class="Symbol"
  >)</a
  ><a name="20483"
  > </a
  ><a name="20484" class="Symbol"
  >&#8594;</a
  ><a name="20485"
  >
      </a
  ><a name="20492" class="Symbol"
  >(</a
  ><a name="20493" href="Session.html#20493" class="Bound"
  >f</a
  ><a name="20494"
  > </a
  ><a name="20495" class="Symbol"
  >:</a
  ><a name="20496"
  > </a
  ><a name="20497" class="Symbol"
  >&#8704;</a
  ><a name="20498"
  > </a
  ><a name="20499" href="Session.html#20499" class="Bound"
  >a</a
  ><a name="20500"
  > </a
  ><a name="20501" class="Symbol"
  >&#8594;</a
  ><a name="20502"
  > </a
  ><a name="20503" href="Base.html#3336" class="Function"
  >ud</a
  ><a name="20505"
  > </a
  ><a name="20506" class="Symbol"
  >(</a
  ><a name="20507" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="20508"
  > </a
  ><a name="20509" href="Session.html#20433" class="Bound"
  >s</a
  ><a name="20510"
  > </a
  ><a name="20511" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20512"
  > </a
  ><a name="20513" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="20515"
  > </a
  ><a name="20516" href="Session.html#20419" class="Bound"
  >T</a
  ><a name="20517"
  > </a
  ><a name="20518" href="Session.html#20499" class="Bound"
  >a</a
  ><a name="20519" class="Symbol"
  >)</a
  ><a name="20520"
  > </a
  ><a name="20521" class="Symbol"
  >(</a
  ><a name="20522" href="Base.html#3457" class="Function"
  >&#8712;ud</a
  ><a name="20525"
  > </a
  ><a name="20526" href="Session.html#20443" class="Bound"
  >i</a
  ><a name="20527" class="Symbol"
  >)</a
  ><a name="20528"
  > </a
  ><a name="20529" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="20530"
  > </a
  ><a name="20531" href="Session.html#20397" class="Bound"
  >M</a
  ><a name="20532"
  > </a
  ><a name="20533" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="20534"
  > </a
  ><a name="20535" href="Session.html#20410" class="Bound"
  >B</a
  ><a name="20536"
  > </a
  ><a name="20537" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="20539"
  > </a
  ><a name="20540" href="Session.html#20401" class="Bound"
  >&#916;</a
  ><a name="20541" class="Symbol"
  >)</a
  ><a name="20542"
  > </a
  ><a name="20543" class="Symbol"
  >&#8594;</a
  ><a name="20544"
  >
      </a
  ><a name="20551" href="Session.html#20399" class="Bound"
  >&#915;</a
  ><a name="20552"
  > </a
  ><a name="20553" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="20554"
  > </a
  ><a name="20555" href="Session.html#20397" class="Bound"
  >M</a
  ><a name="20556"
  > </a
  ><a name="20557" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="20558"
  > </a
  ><a name="20559" href="Session.html#20410" class="Bound"
  >B</a
  ><a name="20560"
  > </a
  ><a name="20561" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="20563"
  > </a
  ><a name="20564" href="Session.html#20401" class="Bound"
  >&#916;</a
  ><a name="20565"
  >
</a
  ><a name="20566" href="Session.html#20388" class="Function"
  >get</a
  ><a name="20569"
  > </a
  ><a name="20570" href="Session.html#20570" class="Bound"
  >i</a
  ><a name="20571"
  > </a
  ><a name="20572" href="Session.html#20572" class="Bound"
  >f</a
  ><a name="20573"
  > </a
  ><a name="20574" class="Symbol"
  >=</a
  ><a name="20575"
  > </a
  ><a name="20576" href="Session.html#17669" class="InductiveConstructor Operator"
  >read</a
  ><a name="20580"
  > </a
  ><a name="20581" href="Session.html#20570" class="Bound"
  >i</a
  ><a name="20582"
  > </a
  ><a name="20583" href="Session.html#17745" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="20585"
  > </a
  ><a name="20586" class="Symbol"
  >&#955;</a
  ><a name="20587"
  > </a
  ><a name="20588" href="Session.html#20588" class="Bound"
  >a</a
  ><a name="20589"
  > </a
  ><a name="20590" class="Symbol"
  >&#8594;</a
  ><a name="20591"
  > </a
  ><a name="20592" href="Session.html#17669" class="InductiveConstructor Operator"
  >at</a
  ><a name="20594"
  > </a
  ><a name="20595" class="Symbol"
  >(</a
  ><a name="20596" href="Base.html#3457" class="Function"
  >&#8712;ud</a
  ><a name="20599"
  > </a
  ><a name="20600" href="Session.html#20570" class="Bound"
  >i</a
  ><a name="20601" class="Symbol"
  >)</a
  ><a name="20602"
  > </a
  ><a name="20603" href="Session.html#19857" class="Function Operator"
  >&#187;</a
  ><a name="20604"
  > </a
  ><a name="20605" href="Session.html#20572" class="Bound"
  >f</a
  ><a name="20606"
  > </a
  ><a name="20607" href="Session.html#20588" class="Bound"
  >a</a
  ><a name="20608"
  ></pre>
<h4 id="new-channel-for--indexed-sessions"><code>new</code> channel for ⊤-indexed sessions</h4>
<p>We often create channels for stateful sessions where both index sets are <code>⊤</code>: using <code>new⊤</code> helps inference.</p>
<pre></a
  ><a name="20786" href="Session.html#20786" class="Function"
  >new&#8868;</a
  ><a name="20790"
  > </a
  ><a name="20791" class="Symbol"
  >:</a
  ><a name="20792"
  > </a
  ><a name="20793" class="Symbol"
  >&#8704;</a
  ><a name="20794"
  > </a
  ><a name="20795" class="Symbol"
  >{</a
  ><a name="20796" href="Session.html#20796" class="Bound"
  >&#915;</a
  ><a name="20797"
  > </a
  ><a name="20798" href="Session.html#20798" class="Bound"
  >M</a
  ><a name="20799"
  > </a
  ><a name="20800" href="Session.html#20800" class="Bound"
  >F</a
  ><a name="20801" class="Symbol"
  >}</a
  ><a name="20802"
  > </a
  ><a name="20803" class="Symbol"
  >&#8594;</a
  ><a name="20804"
  > </a
  ><a name="20805" href="Session.html#20796" class="Bound"
  >&#915;</a
  ><a name="20806"
  > </a
  ><a name="20807" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="20808"
  > </a
  ><a name="20809" href="Session.html#20798" class="Bound"
  >M</a
  ><a name="20810"
  > </a
  ><a name="20811" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="20812"
  > </a
  ><a name="20813" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="20814"
  > </a
  ><a name="20815" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="20817"
  > </a
  ><a name="20818" href="Session.html#20796" class="Bound"
  >&#915;</a
  ><a name="20819"
  > </a
  ><a name="20820" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="20821"
  > </a
  ><a name="20822" class="Symbol"
  >(</a
  ><a name="20823" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="20824"
  > </a
  ><a name="20825" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20826"
  > </a
  ><a name="20827" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="20828"
  > </a
  ><a name="20829" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20830"
  > </a
  ><a name="20831" href="Base.html#136" class="Record"
  >&#8868;</a
  ><a name="20832"
  > </a
  ><a name="20833" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="20834"
  > </a
  ><a name="20835" href="Session.html#20800" class="Bound"
  >F</a
  ><a name="20836" class="Symbol"
  >)</a
  ><a name="20837"
  >
</a
  ><a name="20838" href="Session.html#20786" class="Function"
  >new&#8868;</a
  ><a name="20842"
  > </a
  ><a name="20843" class="Symbol"
  >=</a
  ><a name="20844"
  > </a
  ><a name="20845" href="Session.html#17669" class="InductiveConstructor Operator"
  >new</a
  ><a name="20848"
  ></pre>
<h2 id="haskell-evaluator">Haskell evaluator</h2>
<p>To make an efficient use of Haskell channels, while forgetting the data required to compute their &quot;changing&quot; types, we resort to making a <em>sensible</em> use of <strong>unsafe</strong> casts. What follows should therefore be considered as an extension to the <em>trusted base</em>.</p>
<p>We provide <strong>no correctness proof</strong> for this evaluator.</p>
<pre></a
  ><a name="21211" class="Keyword"
  >private</a
  ><a name="21218"
  >

  </a
  ><a name="21222" class="Keyword"
  >postulate</a
  ><a name="21231"
  >
    </a
  ><a name="21236" href="Session.html#21236" class="Postulate"
  >unsafeCoerce</a
  ><a name="21248"
  > </a
  ><a name="21249" class="Symbol"
  >:</a
  ><a name="21250"
  > </a
  ><a name="21251" class="Symbol"
  >&#8704;</a
  ><a name="21252"
  > </a
  ><a name="21253" class="Symbol"
  >{</a
  ><a name="21254" href="Session.html#21254" class="Bound"
  >l1</a
  ><a name="21256" class="Symbol"
  >}{</a
  ><a name="21258" href="Session.html#21258" class="Bound"
  >A</a
  ><a name="21259"
  > </a
  ><a name="21260" class="Symbol"
  >:</a
  ><a name="21261"
  > </a
  ><a name="21262" class="PrimitiveType"
  >Set</a
  ><a name="21265"
  > </a
  ><a name="21266" href="Session.html#21254" class="Bound"
  >l1</a
  ><a name="21268" class="Symbol"
  >}{</a
  ><a name="21270" href="Session.html#21270" class="Bound"
  >l2</a
  ><a name="21272" class="Symbol"
  >}{</a
  ><a name="21274" href="Session.html#21274" class="Bound"
  >B</a
  ><a name="21275"
  > </a
  ><a name="21276" class="Symbol"
  >:</a
  ><a name="21277"
  > </a
  ><a name="21278" class="PrimitiveType"
  >Set</a
  ><a name="21281"
  > </a
  ><a name="21282" href="Session.html#21270" class="Bound"
  >l2</a
  ><a name="21284" class="Symbol"
  >}</a
  ><a name="21285"
  > </a
  ><a name="21286" class="Symbol"
  >&#8594;</a
  ><a name="21287"
  > </a
  ><a name="21288" href="Session.html#21258" class="Bound"
  >A</a
  ><a name="21289"
  > </a
  ><a name="21290" class="Symbol"
  >&#8594;</a
  ><a name="21291"
  > </a
  ><a name="21292" href="Session.html#21274" class="Bound"
  >B</a
  ><a name="21293"
  >

  </a
  ><a name="21297" class="Symbol"
  >{-#</a
  ><a name="21300"
  > </a
  ><a name="21301" class="Keyword"
  >IMPORT</a
  ><a name="21307"
  >   Unsafe.Coerce                                          </a
  ><a name="21365" class="Symbol"
  >#-}</a
  ><a name="21368"
  >
  </a
  ><a name="21371" class="Symbol"
  >{-#</a
  ><a name="21374"
  > </a
  ><a name="21375" class="Keyword"
  >COMPILED</a
  ><a name="21383"
  > </a
  ><a name="21384" href="Session.html#21236" class="Postulate"
  >unsafeCoerce</a
  ><a name="21396"
  > (\ _ _ _ _ -&gt; Unsafe.Coerce.unsafeCoerce) </a
  ><a name="21439" class="Symbol"
  >#-}</a
  ><a name="21442"
  ></pre>

<pre></a
  ><a name="21468" class="Keyword"
  >open</a
  ><a name="21472"
  > </a
  ><a name="21473" class="Keyword"
  >import</a
  ><a name="21479"
  > </a
  ><a name="21480" href="IO.Primitive.html#1" class="Module"
  >IO.Primitive</a
  ><a name="21492"
  > </a
  ><a name="21493" class="Keyword"
  >using</a
  ><a name="21498"
  > </a
  ><a name="21499" class="Symbol"
  >(</a
  ><a name="21500"
  >IO </a
  ><a name="21503" class="Symbol"
  >;</a
  ><a name="21504"
  > return </a
  ><a name="21512" class="Symbol"
  >;</a
  ><a name="21513"
  > _&gt;&gt;=_ </a
  ><a name="21520" class="Symbol"
  >;</a
  ><a name="21521"
  > putStr </a
  ><a name="21529" class="Symbol"
  >;</a
  ><a name="21530"
  > putStrLn</a
  ><a name="21539" class="Symbol"
  >)</a
  ><a name="21540"
  >
</a
  ><a name="21541" class="Keyword"
  >module</a
  ><a name="21547"
  > </a
  ><a name="21548" href="Session.html#21548" class="Module"
  >IO</a
  ><a name="21550"
  > </a
  ><a name="21551" class="Symbol"
  >=</a
  ><a name="21552"
  > </a
  ><a name="21553" href="IO.Primitive.html#1" class="Module"
  >IO.Primitive</a
  ><a name="21565"
  ></pre>

<pre></a
  ><a name="21591" class="Keyword"
  >infix</a
  ><a name="21596"
  > </a
  ><a name="21597" class="Number"
  >2</a
  ><a name="21598"
  > _[IO_]&gt;_
</a
  ><a name="21608" href="Session.html#21608" class="Function Operator"
  >_[IO_]&gt;_</a
  ><a name="21616"
  > </a
  ><a name="21617" class="Symbol"
  >=</a
  ><a name="21618"
  > </a
  ><a name="21619" class="Symbol"
  >&#955;</a
  ><a name="21620"
  > </a
  ><a name="21621" href="Session.html#21621" class="Bound"
  >&#915;</a
  ><a name="21622"
  > </a
  ><a name="21623" href="Session.html#21623" class="Bound"
  >X</a
  ><a name="21624"
  > </a
  ><a name="21625" href="Session.html#21625" class="Bound"
  >&#916;</a
  ><a name="21626"
  > </a
  ><a name="21627" class="Symbol"
  >&#8594;</a
  ><a name="21628"
  > </a
  ><a name="21629" href="Session.html#21621" class="Bound"
  >&#915;</a
  ><a name="21630"
  > </a
  ><a name="21631" href="Session.html#17542" class="Datatype Operator"
  >[</a
  ><a name="21632"
  > </a
  ><a name="21633" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21635"
  > </a
  ><a name="21636" href="Session.html#17542" class="Datatype Operator"
  >&#8866;</a
  ><a name="21637"
  > </a
  ><a name="21638" href="Session.html#21623" class="Bound"
  >X</a
  ><a name="21639"
  > </a
  ><a name="21640" href="Session.html#17542" class="Datatype Operator"
  >]&gt;</a
  ><a name="21642"
  > </a
  ><a name="21643" href="Session.html#21625" class="Bound"
  >&#916;</a
  ><a name="21644"
  >

</a
  ><a name="21646" href="Session.html#21646" class="Function"
  >IOProc</a
  ><a name="21652"
  > </a
  ><a name="21653" class="Symbol"
  >=</a
  ><a name="21654"
  > </a
  ><a name="21655" class="Symbol"
  >&#955;</a
  ><a name="21656"
  > </a
  ><a name="21657" href="Session.html#21657" class="Bound"
  >X</a
  ><a name="21658"
  > </a
  ><a name="21659" class="Symbol"
  >&#8594;</a
  ><a name="21660"
  > </a
  ><a name="21661" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="21663"
  > </a
  ><a name="21664" href="Session.html#21608" class="Function Operator"
  >[IO</a
  ><a name="21667"
  > </a
  ><a name="21668" href="Session.html#21657" class="Bound"
  >X</a
  ><a name="21669"
  > </a
  ><a name="21670" href="Session.html#21608" class="Function Operator"
  >]&gt;</a
  ><a name="21672"
  > </a
  ><a name="21673" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="21675"
  >

</a
  ><a name="21677" class="Keyword"
  >open</a
  ><a name="21681"
  > </a
  ><a name="21682" class="Keyword"
  >import</a
  ><a name="21688"
  > </a
  ><a name="21689" href="Control.Concurrent.html#1" class="Module"
  >Control.Concurrent</a
  ><a name="21707"
  >
</a
  ><a name="21708" class="Keyword"
  >module</a
  ><a name="21714"
  > </a
  ><a name="21715" href="Session.html#21715" class="Module"
  >C</a
  ><a name="21716"
  >  </a
  ><a name="21718" class="Symbol"
  >=</a
  ><a name="21719"
  > </a
  ><a name="21720" href="Control.Concurrent.html#1" class="Module"
  >Control.Concurrent</a
  ><a name="21738"
  >
</a
  ><a name="21739" class="Keyword"
  >open</a
  ><a name="21743"
  > </a
  ><a name="21744" class="Keyword"
  >import</a
  ><a name="21750"
  > </a
  ><a name="21751" href="Control.Concurrent.Chan.Synchronous.html#1" class="Module"
  >Control.Concurrent.Chan.Synchronous</a
  ><a name="21786"
  >
</a
  ><a name="21787" class="Keyword"
  >module</a
  ><a name="21793"
  > </a
  ><a name="21794" href="Session.html#21794" class="Module"
  >CS</a
  ><a name="21796"
  > </a
  ><a name="21797" class="Symbol"
  >=</a
  ><a name="21798"
  > </a
  ><a name="21799" href="Control.Concurrent.Chan.Synchronous.html#1" class="Module"
  >Control.Concurrent.Chan.Synchronous</a
  ><a name="21834"
  ></pre>
<p>We need our channels to be untyped, to obtain which we postulate an abstract type and use unsafe coercions to and from it.</p>
<p>This is similar to Pucella and Tov's embedding in <a href="http://www.eecs.harvard.edu/~tov/pubs/haskell-session-types/">&quot;Haskell Session Types with (Almost) No Class&quot;</a>.</p>
<pre></a
  ><a name="22147" class="Keyword"
  >postulate</a
  ><a name="22156"
  > </a
  ><a name="22157" href="Session.html#22157" class="Postulate"
  >Abs</a
  ><a name="22160"
  > </a
  ><a name="22161" class="Symbol"
  >:</a
  ><a name="22162"
  > </a
  ><a name="22163" class="PrimitiveType"
  >Set</a
  ><a name="22166"
  >

</a
  ><a name="22168" href="Session.html#22168" class="Function"
  >UChan</a
  ><a name="22173"
  > </a
  ><a name="22174" class="Symbol"
  >=</a
  ><a name="22175"
  > </a
  ><a name="22176" href="Control.Concurrent.Chan.Synchronous.html#131" class="Postulate"
  >Chan</a
  ><a name="22180"
  > </a
  ><a name="22181" href="Session.html#22157" class="Postulate"
  >Abs</a
  ><a name="22184"
  ></pre>
<p>The channels for a context.</p>
<pre></a
  ><a name="22239" href="Session.html#22239" class="Function Operator"
  >&#10214;_&#10215;Cx</a
  ><a name="22244"
  > </a
  ><a name="22245" class="Symbol"
  >:</a
  ><a name="22246"
  > </a
  ><a name="22247" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="22249"
  > </a
  ><a name="22250" class="Symbol"
  >&#8594;</a
  ><a name="22251"
  > </a
  ><a name="22252" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="22256"
  >
</a
  ><a name="22257" href="Session.html#22239" class="Function Operator"
  >&#10214;_&#10215;Cx</a
  ><a name="22262"
  > </a
  ><a name="22263" class="Symbol"
  >=</a
  ><a name="22264"
  > </a
  ><a name="22265" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="22268"
  > </a
  ><a name="22269" class="Symbol"
  >&#955;</a
  ><a name="22270"
  > </a
  ><a name="22271" href="Session.html#22271" class="Bound"
  >_</a
  ><a name="22272"
  > </a
  ><a name="22273" class="Symbol"
  >&#8594;</a
  ><a name="22274"
  > </a
  ><a name="22275" href="Session.html#22168" class="Function"
  >UChan</a
  ><a name="22280"
  ></pre>

<pre></a
  ><a name="22306" href="Session.html#22306" class="Function"
  >lookupUChan</a
  ><a name="22317"
  > </a
  ><a name="22318" class="Symbol"
  >:</a
  ><a name="22319"
  > </a
  ><a name="22320" class="Symbol"
  >&#8704;</a
  ><a name="22321"
  > </a
  ><a name="22322" class="Symbol"
  >{</a
  ><a name="22323" href="Session.html#22323" class="Bound"
  >&#915;</a
  ><a name="22324"
  > </a
  ><a name="22325" href="Session.html#22325" class="Bound"
  >C</a
  ><a name="22326" class="Symbol"
  >}</a
  ><a name="22327"
  > </a
  ><a name="22328" class="Symbol"
  >&#8594;</a
  ><a name="22329"
  > </a
  ><a name="22330" class="Symbol"
  >(</a
  ><a name="22331" href="Session.html#22331" class="Bound"
  >i</a
  ><a name="22332"
  > </a
  ><a name="22333" class="Symbol"
  >:</a
  ><a name="22334"
  > </a
  ><a name="22335" href="Session.html#22325" class="Bound"
  >C</a
  ><a name="22336"
  > </a
  ><a name="22337" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="22338"
  > </a
  ><a name="22339" href="Session.html#22323" class="Bound"
  >&#915;</a
  ><a name="22340" class="Symbol"
  >)</a
  ><a name="22341"
  > </a
  ><a name="22342" class="Symbol"
  >&#8594;</a
  ><a name="22343"
  > </a
  ><a name="22344" href="Session.html#22239" class="Function Operator"
  >&#10214;</a
  ><a name="22345"
  > </a
  ><a name="22346" href="Session.html#22323" class="Bound"
  >&#915;</a
  ><a name="22347"
  > </a
  ><a name="22348" href="Session.html#22239" class="Function Operator"
  >&#10215;Cx</a
  ><a name="22351"
  > </a
  ><a name="22352" class="Symbol"
  >&#8594;</a
  ><a name="22353"
  > </a
  ><a name="22354" href="Session.html#22168" class="Function"
  >UChan</a
  ><a name="22359"
  >
</a
  ><a name="22360" href="Session.html#22306" class="Function"
  >lookupUChan</a
  ><a name="22371"
  > </a
  ><a name="22372" href="Session.html#22372" class="Bound"
  >i</a
  ><a name="22373"
  > </a
  ><a name="22374" href="Session.html#22374" class="Bound"
  >cs</a
  ><a name="22376"
  > </a
  ><a name="22377" class="Symbol"
  >=</a
  ><a name="22378"
  > </a
  ><a name="22379" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="22382"
  > </a
  ><a name="22383" class="Symbol"
  >(</a
  ><a name="22384" href="Base.html#3781" class="Function"
  >lookupAll</a
  ><a name="22393"
  > </a
  ><a name="22394" href="Session.html#22372" class="Bound"
  >i</a
  ><a name="22395"
  > </a
  ><a name="22396" href="Session.html#22374" class="Bound"
  >cs</a
  ><a name="22398" class="Symbol"
  >)</a
  ><a name="22399"
  ></pre>
<p>We need some Haskell helpers.</p>
<p>Note that our channels are ultimately implemented on top of Jesse Tov's <code>synchronous-channels</code> package: for this reason, currently all the interactions are synchronous (blocking).</p>
<pre></a
  ><a name="22637" class="Keyword"
  >infixl</a
  ><a name="22643"
  > </a
  ><a name="22644" class="Number"
  >1</a
  ><a name="22645"
  > _&gt;&gt;_

</a
  ><a name="22652" href="Session.html#22652" class="Function Operator"
  >_&gt;&gt;_</a
  ><a name="22656"
  > </a
  ><a name="22657" class="Symbol"
  >:</a
  ><a name="22658"
  > </a
  ><a name="22659" class="Symbol"
  >&#8704;</a
  ><a name="22660"
  > </a
  ><a name="22661" class="Symbol"
  >{</a
  ><a name="22662" href="Session.html#22662" class="Bound"
  >lA</a
  ><a name="22664"
  > </a
  ><a name="22665" href="Session.html#22665" class="Bound"
  >lB</a
  ><a name="22667" class="Symbol"
  >}{</a
  ><a name="22669" href="Session.html#22669" class="Bound"
  >A</a
  ><a name="22670"
  > </a
  ><a name="22671" class="Symbol"
  >:</a
  ><a name="22672"
  > </a
  ><a name="22673" class="PrimitiveType"
  >Set</a
  ><a name="22676"
  > </a
  ><a name="22677" href="Session.html#22662" class="Bound"
  >lA</a
  ><a name="22679" class="Symbol"
  >}{</a
  ><a name="22681" href="Session.html#22681" class="Bound"
  >B</a
  ><a name="22682"
  > </a
  ><a name="22683" class="Symbol"
  >:</a
  ><a name="22684"
  > </a
  ><a name="22685" class="PrimitiveType"
  >Set</a
  ><a name="22688"
  > </a
  ><a name="22689" href="Session.html#22665" class="Bound"
  >lB</a
  ><a name="22691" class="Symbol"
  >}</a
  ><a name="22692"
  > </a
  ><a name="22693" class="Symbol"
  >&#8594;</a
  ><a name="22694"
  > </a
  ><a name="22695" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="22697"
  > </a
  ><a name="22698" href="Session.html#22669" class="Bound"
  >A</a
  ><a name="22699"
  > </a
  ><a name="22700" class="Symbol"
  >&#8594;</a
  ><a name="22701"
  > </a
  ><a name="22702" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="22704"
  > </a
  ><a name="22705" href="Session.html#22681" class="Bound"
  >B</a
  ><a name="22706"
  > </a
  ><a name="22707" class="Symbol"
  >&#8594;</a
  ><a name="22708"
  > </a
  ><a name="22709" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="22711"
  > </a
  ><a name="22712" href="Session.html#22681" class="Bound"
  >B</a
  ><a name="22713"
  >
</a
  ><a name="22714" href="Session.html#22714" class="Bound"
  >m</a
  ><a name="22715"
  > </a
  ><a name="22716" href="Session.html#22652" class="Function Operator"
  >&gt;&gt;</a
  ><a name="22718"
  > </a
  ><a name="22719" href="Session.html#22719" class="Bound"
  >n</a
  ><a name="22720"
  > </a
  ><a name="22721" class="Symbol"
  >=</a
  ><a name="22722"
  > </a
  ><a name="22723" href="Session.html#22714" class="Bound"
  >m</a
  ><a name="22724"
  > </a
  ><a name="22725" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="22728"
  > </a
  ><a name="22729" class="Symbol"
  >&#955;</a
  ><a name="22730"
  > </a
  ><a name="22731" href="Session.html#22731" class="Bound"
  >_</a
  ><a name="22732"
  > </a
  ><a name="22733" class="Symbol"
  >&#8594;</a
  ><a name="22734"
  > </a
  ><a name="22735" href="Session.html#22719" class="Bound"
  >n</a
  ><a name="22736"
  >

</a
  ><a name="22738" href="Session.html#22738" class="Function"
  >mapIO</a
  ><a name="22743"
  > </a
  ><a name="22744" class="Symbol"
  >:</a
  ><a name="22745"
  > </a
  ><a name="22746" class="Symbol"
  >&#8704;</a
  ><a name="22747"
  > </a
  ><a name="22748" class="Symbol"
  >{</a
  ><a name="22749" href="Session.html#22749" class="Bound"
  >lA</a
  ><a name="22751"
  > </a
  ><a name="22752" href="Session.html#22752" class="Bound"
  >lB</a
  ><a name="22754" class="Symbol"
  >}{</a
  ><a name="22756" href="Session.html#22756" class="Bound"
  >A</a
  ><a name="22757"
  > </a
  ><a name="22758" class="Symbol"
  >:</a
  ><a name="22759"
  > </a
  ><a name="22760" class="PrimitiveType"
  >Set</a
  ><a name="22763"
  > </a
  ><a name="22764" href="Session.html#22749" class="Bound"
  >lA</a
  ><a name="22766" class="Symbol"
  >}{</a
  ><a name="22768" href="Session.html#22768" class="Bound"
  >B</a
  ><a name="22769"
  > </a
  ><a name="22770" class="Symbol"
  >:</a
  ><a name="22771"
  > </a
  ><a name="22772" class="PrimitiveType"
  >Set</a
  ><a name="22775"
  > </a
  ><a name="22776" href="Session.html#22752" class="Bound"
  >lB</a
  ><a name="22778" class="Symbol"
  >}</a
  ><a name="22779"
  > </a
  ><a name="22780" class="Symbol"
  >&#8594;</a
  ><a name="22781"
  > </a
  ><a name="22782" class="Symbol"
  >(</a
  ><a name="22783" href="Session.html#22756" class="Bound"
  >A</a
  ><a name="22784"
  > </a
  ><a name="22785" class="Symbol"
  >&#8594;</a
  ><a name="22786"
  > </a
  ><a name="22787" href="Session.html#22768" class="Bound"
  >B</a
  ><a name="22788" class="Symbol"
  >)</a
  ><a name="22789"
  > </a
  ><a name="22790" class="Symbol"
  >&#8594;</a
  ><a name="22791"
  > </a
  ><a name="22792" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="22794"
  > </a
  ><a name="22795" href="Session.html#22756" class="Bound"
  >A</a
  ><a name="22796"
  > </a
  ><a name="22797" class="Symbol"
  >&#8594;</a
  ><a name="22798"
  > </a
  ><a name="22799" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="22801"
  > </a
  ><a name="22802" href="Session.html#22768" class="Bound"
  >B</a
  ><a name="22803"
  >
</a
  ><a name="22804" href="Session.html#22738" class="Function"
  >mapIO</a
  ><a name="22809"
  > </a
  ><a name="22810" href="Session.html#22810" class="Bound"
  >f</a
  ><a name="22811"
  > </a
  ><a name="22812" href="Session.html#22812" class="Bound"
  >xs</a
  ><a name="22814"
  > </a
  ><a name="22815" class="Symbol"
  >=</a
  ><a name="22816"
  > </a
  ><a name="22817" href="Session.html#22812" class="Bound"
  >xs</a
  ><a name="22819"
  > </a
  ><a name="22820" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="22823"
  > </a
  ><a name="22824" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="22830"
  > </a
  ><a name="22831" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="22832"
  > </a
  ><a name="22833" href="Session.html#22810" class="Bound"
  >f</a
  ><a name="22834"
  ></pre>
<p>Every communication with the untyped channels uses <code>unsafeCoerce</code>.</p>
<pre></a
  ><a name="22928" href="Session.html#22928" class="Function"
  >writeUChan</a
  ><a name="22938"
  > </a
  ><a name="22939" class="Symbol"
  >:</a
  ><a name="22940"
  > </a
  ><a name="22941" class="Symbol"
  >{</a
  ><a name="22942" href="Session.html#22942" class="Bound"
  >A</a
  ><a name="22943"
  > </a
  ><a name="22944" class="Symbol"
  >:</a
  ><a name="22945"
  > </a
  ><a name="22946" class="PrimitiveType"
  >Set</a
  ><a name="22949" class="Symbol"
  >}</a
  ><a name="22950"
  > </a
  ><a name="22951" class="Symbol"
  >&#8594;</a
  ><a name="22952"
  > </a
  ><a name="22953" href="Session.html#22168" class="Function"
  >UChan</a
  ><a name="22958"
  > </a
  ><a name="22959" class="Symbol"
  >&#8594;</a
  ><a name="22960"
  > </a
  ><a name="22961" href="Session.html#22942" class="Bound"
  >A</a
  ><a name="22962"
  > </a
  ><a name="22963" class="Symbol"
  >&#8594;</a
  ><a name="22964"
  > </a
  ><a name="22965" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="22967"
  > </a
  ><a name="22968" href="Unit.html#194" class="Function"
  >C.&lt;&gt;</a
  ><a name="22972"
  >
</a
  ><a name="22973" href="Session.html#22928" class="Function"
  >writeUChan</a
  ><a name="22983"
  > </a
  ><a name="22984" href="Session.html#22984" class="Bound"
  >c</a
  ><a name="22985"
  > </a
  ><a name="22986" class="Symbol"
  >=</a
  ><a name="22987"
  > </a
  ><a name="22988" href="Control.Concurrent.Chan.Synchronous.html#345" class="Postulate"
  >writeChan</a
  ><a name="22997"
  > </a
  ><a name="22998" href="Session.html#22984" class="Bound"
  >c</a
  ><a name="22999"
  > </a
  ><a name="23000" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="23001"
  > </a
  ><a name="23002" href="Session.html#21236" class="Postulate"
  >unsafeCoerce</a
  ><a name="23014"
  >

</a
  ><a name="23016" href="Session.html#23016" class="Function"
  >readUChan</a
  ><a name="23025"
  > </a
  ><a name="23026" class="Symbol"
  >:</a
  ><a name="23027"
  > </a
  ><a name="23028" class="Symbol"
  >{</a
  ><a name="23029" href="Session.html#23029" class="Bound"
  >A</a
  ><a name="23030"
  > </a
  ><a name="23031" class="Symbol"
  >:</a
  ><a name="23032"
  > </a
  ><a name="23033" class="PrimitiveType"
  >Set</a
  ><a name="23036" class="Symbol"
  >}</a
  ><a name="23037"
  > </a
  ><a name="23038" class="Symbol"
  >&#8594;</a
  ><a name="23039"
  > </a
  ><a name="23040" href="Session.html#22168" class="Function"
  >UChan</a
  ><a name="23045"
  > </a
  ><a name="23046" class="Symbol"
  >&#8594;</a
  ><a name="23047"
  > </a
  ><a name="23048" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="23050"
  > </a
  ><a name="23051" href="Session.html#23029" class="Bound"
  >A</a
  ><a name="23052"
  >
</a
  ><a name="23053" href="Session.html#23016" class="Function"
  >readUChan</a
  ><a name="23062"
  > </a
  ><a name="23063" class="Symbol"
  >{</a
  ><a name="23064"
  >A </a
  ><a name="23066" class="Symbol"
  >=</a
  ><a name="23067"
  > </a
  ><a name="23068" href="Session.html#23068" class="Bound"
  >A</a
  ><a name="23069" class="Symbol"
  >}</a
  ><a name="23070"
  > </a
  ><a name="23071" href="Session.html#23071" class="Bound"
  >c</a
  ><a name="23072"
  > </a
  ><a name="23073" class="Symbol"
  >=</a
  ><a name="23074"
  > </a
  ><a name="23075" href="Control.Concurrent.Chan.Synchronous.html#397" class="Postulate"
  >readChan</a
  ><a name="23083"
  > </a
  ><a name="23084" href="Session.html#23071" class="Bound"
  >c</a
  ><a name="23085"
  > </a
  ><a name="23086" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="23089"
  > </a
  ><a name="23090" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="23096"
  > </a
  ><a name="23097" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="23098"
  > </a
  ><a name="23099" href="Session.html#21236" class="Postulate"
  >unsafeCoerce</a
  ><a name="23111"
  ></pre>
<p>Here is the actual test evaluator, to implement which we disable termination checking: we already use &quot;unsafe&quot; features so we do not bother defining a <em>coinductive</em> wrapper as in the <code>IO</code> module of Agda's standard library.</p>
<pre></a
  ><a name="23361" class="Symbol"
  >{-#</a
  ><a name="23364"
  > </a
  ><a name="23365" class="Keyword"
  >NO_TERMINATION_CHECK</a
  ><a name="23385"
  > </a
  ><a name="23386" class="Symbol"
  >#-}</a
  ><a name="23389"
  >
</a
  ><a name="23390" href="Session.html#23390" class="Function"
  >run</a
  ><a name="23393"
  > </a
  ><a name="23394" class="Symbol"
  >:</a
  ><a name="23395"
  > </a
  ><a name="23396" class="Symbol"
  >{</a
  ><a name="23397" href="Session.html#23397" class="Bound"
  >&#915;</a
  ><a name="23398"
  > </a
  ><a name="23399" href="Session.html#23399" class="Bound"
  >&#916;</a
  ><a name="23400"
  > </a
  ><a name="23401" class="Symbol"
  >:</a
  ><a name="23402"
  > </a
  ><a name="23403" href="Session.html#6020" class="Function"
  >Cx</a
  ><a name="23405" class="Symbol"
  >}{</a
  ><a name="23407" href="Session.html#23407" class="Bound"
  >X</a
  ><a name="23408"
  > </a
  ><a name="23409" class="Symbol"
  >:</a
  ><a name="23410"
  > </a
  ><a name="23411" class="PrimitiveType"
  >Set</a
  ><a name="23414" class="Symbol"
  >}</a
  ><a name="23415"
  > </a
  ><a name="23416" class="Symbol"
  >&#8594;</a
  ><a name="23417"
  > </a
  ><a name="23418" href="Session.html#23397" class="Bound"
  >&#915;</a
  ><a name="23419"
  > </a
  ><a name="23420" href="Session.html#21608" class="Function Operator"
  >[IO</a
  ><a name="23423"
  > </a
  ><a name="23424" href="Session.html#23407" class="Bound"
  >X</a
  ><a name="23425"
  > </a
  ><a name="23426" href="Session.html#21608" class="Function Operator"
  >]&gt;</a
  ><a name="23428"
  > </a
  ><a name="23429" href="Session.html#23399" class="Bound"
  >&#916;</a
  ><a name="23430"
  > </a
  ><a name="23431" class="Symbol"
  >&#8594;</a
  ><a name="23432"
  > </a
  ><a name="23433" href="Session.html#22239" class="Function Operator"
  >&#10214;</a
  ><a name="23434"
  > </a
  ><a name="23435" href="Session.html#23397" class="Bound"
  >&#915;</a
  ><a name="23436"
  > </a
  ><a name="23437" href="Session.html#22239" class="Function Operator"
  >&#10215;Cx</a
  ><a name="23440"
  > </a
  ><a name="23441" class="Symbol"
  >&#8594;</a
  ><a name="23442"
  > </a
  ><a name="23443" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="23445"
  > </a
  ><a name="23446" class="Symbol"
  >(</a
  ><a name="23447" href="Session.html#23407" class="Bound"
  >X</a
  ><a name="23448"
  > </a
  ><a name="23449" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="23450"
  > </a
  ><a name="23451" href="Session.html#22239" class="Function Operator"
  >&#10214;</a
  ><a name="23452"
  > </a
  ><a name="23453" href="Session.html#23399" class="Bound"
  >&#916;</a
  ><a name="23454"
  > </a
  ><a name="23455" href="Session.html#22239" class="Function Operator"
  >&#10215;Cx</a
  ><a name="23458" class="Symbol"
  >)</a
  ><a name="23459"
  ></pre>
<p>We map the embedded monadic actions to themselves, and the binding syntax to the binding operator for the <code>IO</code> monad.</p>
<pre></a
  ><a name="23604" href="Session.html#23390" class="Function"
  >run</a
  ><a name="23607"
  > </a
  ><a name="23608" class="Symbol"
  >(</a
  ><a name="23609" href="Session.html#17593" class="InductiveConstructor Operator"
  >&#8657;</a
  ><a name="23610"
  > </a
  ><a name="23611" href="Session.html#23611" class="Bound"
  >m</a
  ><a name="23612"
  >           </a
  ><a name="23623" class="Symbol"
  >)</a
  ><a name="23624"
  > </a
  ><a name="23625" href="Session.html#23625" class="Bound"
  >cs</a
  ><a name="23627"
  > </a
  ><a name="23628" class="Symbol"
  >=</a
  ><a name="23629"
  > </a
  ><a name="23630" href="Session.html#22738" class="Function"
  >mapIO</a
  ><a name="23635"
  > </a
  ><a name="23636" class="Symbol"
  >(</a
  ><a name="23637" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="23641"
  > </a
  ><a name="23642" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >_,_</a
  ><a name="23645"
  > </a
  ><a name="23646" href="Session.html#23625" class="Bound"
  >cs</a
  ><a name="23648" class="Symbol"
  >)</a
  ><a name="23649"
  > </a
  ><a name="23650" href="Session.html#23611" class="Bound"
  >m</a
  ><a name="23651"
  >                                           
                                                                                          
</a
  ><a name="23786" href="Session.html#23390" class="Function"
  >run</a
  ><a name="23789"
  > </a
  ><a name="23790" class="Symbol"
  >(</a
  ><a name="23791" href="Session.html#23791" class="Bound"
  >m</a
  ><a name="23792"
  > </a
  ><a name="23793" href="Session.html#17745" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="23795"
  > </a
  ><a name="23796" href="Session.html#23796" class="Bound"
  >f</a
  ><a name="23797"
  >        </a
  ><a name="23805" class="Symbol"
  >)</a
  ><a name="23806"
  > </a
  ><a name="23807" href="Session.html#23807" class="Bound"
  >cs</a
  ><a name="23809"
  > </a
  ><a name="23810" class="Symbol"
  >=</a
  ><a name="23811"
  > </a
  ><a name="23812" href="Session.html#23390" class="Function"
  >run</a
  ><a name="23815"
  > </a
  ><a name="23816" href="Session.html#23791" class="Bound"
  >m</a
  ><a name="23817"
  > </a
  ><a name="23818" href="Session.html#23807" class="Bound"
  >cs</a
  ><a name="23820"
  > </a
  ><a name="23821" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="23824"
  > </a
  ><a name="23825" class="Symbol"
  >&#955;</a
  ><a name="23826"
  > </a
  ><a name="23827" class="Symbol"
  >{</a
  ><a name="23828"
  > </a
  ><a name="23829" class="Symbol"
  >(</a
  ><a name="23830" href="Session.html#23830" class="Bound"
  >x</a
  ><a name="23831"
  > </a
  ><a name="23832" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="23833"
  > </a
  ><a name="23834" href="Session.html#23834" class="Bound"
  >cs</a
  ><a name="23836" class="Symbol"
  >)</a
  ><a name="23837"
  > </a
  ><a name="23838" class="Symbol"
  >&#8594;</a
  ><a name="23839"
  > </a
  ><a name="23840" href="Session.html#23390" class="Function"
  >run</a
  ><a name="23843"
  > </a
  ><a name="23844" class="Symbol"
  >(</a
  ><a name="23845" href="Session.html#23796" class="Bound"
  >f</a
  ><a name="23846"
  > </a
  ><a name="23847" href="Session.html#23830" class="Bound"
  >x</a
  ><a name="23848" class="Symbol"
  >)</a
  ><a name="23849"
  > </a
  ><a name="23850" href="Session.html#23834" class="Bound"
  >cs</a
  ><a name="23852"
  > </a
  ><a name="23853" class="Symbol"
  >}</a
  ><a name="23854"
  >                      </pre>
<p><code>new</code> just creates a new channel.</p>
<pre></a
  ><a name="24095" href="Session.html#23390" class="Function"
  >run</a
  ><a name="24098"
  > </a
  ><a name="24099" class="Symbol"
  >(</a
  ><a name="24100" href="Session.html#17669" class="InductiveConstructor Operator"
  >new</a
  ><a name="24103"
  >           </a
  ><a name="24114" class="Symbol"
  >)</a
  ><a name="24115"
  > </a
  ><a name="24116" href="Session.html#24116" class="Bound"
  >cs</a
  ><a name="24118"
  > </a
  ><a name="24119" class="Symbol"
  >=</a
  ><a name="24120"
  > </a
  ><a name="24121" href="Control.Concurrent.Chan.Synchronous.html#300" class="Postulate"
  >newChan</a
  ><a name="24128"
  > </a
  ><a name="24129" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="24132"
  > </a
  ><a name="24133" class="Symbol"
  >&#955;</a
  ><a name="24134"
  > </a
  ><a name="24135" href="Session.html#24135" class="Bound"
  >c</a
  ><a name="24136"
  > </a
  ><a name="24137" class="Symbol"
  >&#8594;</a
  ><a name="24138"
  > </a
  ><a name="24139" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="24145"
  > </a
  ><a name="24146" class="Symbol"
  >(_</a
  ><a name="24148"
  > </a
  ><a name="24149" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="24150"
  > </a
  ><a name="24151" class="Symbol"
  >(</a
  ><a name="24152" href="Session.html#24116" class="Bound"
  >cs</a
  ><a name="24154"
  > </a
  ><a name="24155" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="24157"
  > </a
  ><a name="24158" href="Session.html#24135" class="Bound"
  >c</a
  ><a name="24159" class="Symbol"
  >))</a
  ><a name="24161"
  ></pre>
<p><code>forks x</code> interprets the <code>Splits</code> in <code>s</code> obtaining two lists of channels <code>ls</code> and <code>rs</code>: it keeps <code>ls</code> for the parent thread and leaves access to <code>rs</code> to the child (<code>x</code>).</p>
<pre></a
  ><a name="24448" href="Session.html#23390" class="Function"
  >run</a
  ><a name="24451"
  > </a
  ><a name="24452" class="Symbol"
  >(</a
  ><a name="24453" href="Session.html#17669" class="InductiveConstructor Operator"
  >fork</a
  ><a name="24457"
  >       </a
  ><a name="24464" href="Session.html#17669" class="InductiveConstructor Operator"
  >s</a
  ><a name="24465"
  > </a
  ><a name="24466" href="Session.html#17669" class="InductiveConstructor Operator"
  >x</a
  ><a name="24467" class="Symbol"
  >)</a
  ><a name="24468"
  > </a
  ><a name="24469" href="Session.html#24469" class="Bound"
  >cs</a
  ><a name="24471"
  > </a
  ><a name="24472" class="Symbol"
  >=</a
  ><a name="24473"
  > </a
  ><a name="24474" class="Keyword"
  >let</a
  ><a name="24477"
  > </a
  ><a name="24478" href="Session.html#24478" class="Bound"
  >ls</a
  ><a name="24480"
  > </a
  ><a name="24481" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="24482"
  > </a
  ><a name="24483" href="Session.html#24483" class="Bound"
  >rs</a
  ><a name="24485"
  > </a
  ><a name="24486" class="Symbol"
  >=</a
  ><a name="24487"
  > </a
  ><a name="24488" href="Session.html#7596" class="Function"
  >all-splits</a
  ><a name="24498"
  > </a
  ><a name="24499" href="Session.html#24469" class="Bound"
  >cs</a
  ><a name="24501"
  > </a
  ><a name="24502" href="Session.html#24464" class="Bound"
  >s</a
  ><a name="24503"
  > </a
  ><a name="24504" class="Keyword"
  >in</a
  ><a name="24506"
  >
                          </a
  ><a name="24533" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="24539"
  > </a
  ><a name="24540" class="Symbol"
  >(</a
  ><a name="24541" href="Session.html#23390" class="Function"
  >run</a
  ><a name="24544"
  > </a
  ><a name="24545" href="Session.html#24466" class="Bound"
  >x</a
  ><a name="24546"
  > </a
  ><a name="24547" href="Session.html#24483" class="Bound"
  >rs</a
  ><a name="24549"
  > </a
  ><a name="24550" href="Session.html#22652" class="Function Operator"
  >&gt;&gt;</a
  ><a name="24552"
  > </a
  ><a name="24553" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="24559"
  > </a
  ><a name="24560" href="Unit.html#210" class="Function"
  >&#10216;&#10217;</a
  ><a name="24562" class="Symbol"
  >)</a
  ><a name="24563"
  > </a
  ><a name="24564" href="Session.html#22652" class="Function Operator"
  >&gt;&gt;</a
  ><a name="24566"
  >                               
                          </a
  ><a name="24624" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="24630"
  > </a
  ><a name="24631" class="Symbol"
  >(</a
  ><a name="24632" class="InductiveConstructor"
  >tt</a
  ><a name="24634"
  > </a
  ><a name="24635" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="24636"
  > </a
  ><a name="24637" href="Session.html#24478" class="Bound"
  >ls</a
  ><a name="24639" class="Symbol"
  >)</a
  ><a name="24640"
  >                                                </pre>
<p><code>send i j</code> writes channel <code>i</code> on channel <code>j</code> and frees the continuation from the burden of communicating along <code>i</code>.</p>
<p>We could avoid many uses of <code>unsafeCoerce</code> in the following but we think it is more efficient to avoid calling functions like <code>all-ud</code> as in the commented-out code: they perform no operations on the actual lists of <em>untyped</em> channels.</p>
<p>The usages of <code>unsafeCoerce</code> which are more difficult justify are those inside every call to <code>readUChan</code> and <code>writeUChan</code>.</p>
<pre></a
  ><a name="25349" href="Session.html#23390" class="Function"
  >run</a
  ><a name="25352"
  > </a
  ><a name="25353" class="Symbol"
  >(</a
  ><a name="25354" href="Session.html#17669" class="InductiveConstructor Operator"
  >send</a
  ><a name="25358"
  >       </a
  ><a name="25365" href="Session.html#17669" class="InductiveConstructor Operator"
  >i</a
  ><a name="25366"
  > </a
  ><a name="25367" href="Session.html#17669" class="InductiveConstructor Operator"
  >j</a
  ><a name="25368" class="Symbol"
  >)</a
  ><a name="25369"
  > </a
  ><a name="25370" href="Session.html#25370" class="Bound"
  >cs</a
  ><a name="25372"
  > </a
  ><a name="25373" class="Symbol"
  >=</a
  ><a name="25374"
  > </a
  ><a name="25375" class="Keyword"
  >let</a
  ><a name="25378"
  > </a
  ><a name="25379" href="Session.html#25379" class="Bound"
  >chanToSend</a
  ><a name="25389"
  >    </a
  ><a name="25393" class="Symbol"
  >=</a
  ><a name="25394"
  > </a
  ><a name="25395" href="Session.html#22306" class="Function"
  >lookupUChan</a
  ><a name="25406"
  >        </a
  ><a name="25414" href="Session.html#25365" class="Bound"
  >i</a
  ><a name="25415"
  >  </a
  ><a name="25417" href="Session.html#25370" class="Bound"
  >cs</a
  ><a name="25419"
  > </a
  ><a name="25420" class="Keyword"
  >in</a
  ><a name="25422"
  >                 
                          </a
  ><a name="25466" class="Keyword"
  >let</a
  ><a name="25469"
  > </a
  ><a name="25470" href="Session.html#25470" class="Bound"
  >chanToWriteOn</a
  ><a name="25483"
  > </a
  ><a name="25484" class="Symbol"
  >=</a
  ><a name="25485"
  > </a
  ><a name="25486" href="Session.html#22306" class="Function"
  >lookupUChan</a
  ><a name="25497"
  > </a
  ><a name="25498" class="Symbol"
  >(</a
  ><a name="25499" href="Base.html#3963" class="Function"
  >wk/</a
  ><a name="25502"
  > </a
  ><a name="25503" href="Session.html#25365" class="Bound"
  >i</a
  ><a name="25504"
  > </a
  ><a name="25505" href="Session.html#25367" class="Bound"
  >j</a
  ><a name="25506" class="Symbol"
  >)</a
  ><a name="25507"
  > </a
  ><a name="25508" href="Session.html#25370" class="Bound"
  >cs</a
  ><a name="25510"
  > </a
  ><a name="25511" class="Keyword"
  >in</a
  ><a name="25513"
  >                 
                          </a
  ><a name="25557" href="Session.html#22928" class="Function"
  >writeUChan</a
  ><a name="25567"
  > </a
  ><a name="25568" href="Session.html#25470" class="Bound"
  >chanToWriteOn</a
  ><a name="25581"
  > </a
  ><a name="25582" href="Session.html#25379" class="Bound"
  >chanToSend</a
  ><a name="25592"
  > </a
  ><a name="25593" href="Session.html#22652" class="Function Operator"
  >&gt;&gt;</a
  ><a name="25595"
  >
                          </a
  ><a name="25622" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="25628"
  > </a
  ><a name="25629" class="Symbol"
  >(</a
  ><a name="25630" class="InductiveConstructor"
  >tt</a
  ><a name="25632"
  > </a
  ><a name="25633" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="25634"
  > </a
  ><a name="25635" href="Session.html#21236" class="Postulate"
  >unsafeCoerce</a
  ><a name="25647"
  > </a
  ><a name="25648" class="Symbol"
  >(</a
  ><a name="25649" href="Base.html#4175" class="Function"
  >all-rm</a
  ><a name="25655"
  > </a
  ><a name="25656" href="Session.html#25365" class="Bound"
  >i</a
  ><a name="25657"
  > </a
  ><a name="25658" href="Session.html#25370" class="Bound"
  >cs</a
  ><a name="25660" class="Symbol"
  >))</a
  ><a name="25662"
  >
                       </a
  ><a name="25686" class="Comment"
  >-- return (tt , all-ud j (all-rm i cs) chanToWriteOn)</a
  ><a name="25739"
  ></pre>
<p><code>receive</code> receives a channel from channel <code>i</code> and allows/forces the continuation to also take care of it.</p>
<pre></a
  ><a name="25962" href="Session.html#23390" class="Function"
  >run</a
  ><a name="25965"
  > </a
  ><a name="25966" class="Symbol"
  >(</a
  ><a name="25967" href="Session.html#17669" class="InductiveConstructor Operator"
  >receive</a
  ><a name="25974"
  >      </a
  ><a name="25980" href="Session.html#17669" class="InductiveConstructor Operator"
  >i</a
  ><a name="25981" class="Symbol"
  >)</a
  ><a name="25982"
  > </a
  ><a name="25983" href="Session.html#25983" class="Bound"
  >cs</a
  ><a name="25985"
  > </a
  ><a name="25986" class="Symbol"
  >=</a
  ><a name="25987"
  > </a
  ><a name="25988" class="Keyword"
  >let</a
  ><a name="25991"
  > </a
  ><a name="25992" href="Session.html#25992" class="Bound"
  >chanToReadFrom</a
  ><a name="26006"
  > </a
  ><a name="26007" class="Symbol"
  >=</a
  ><a name="26008"
  > </a
  ><a name="26009" href="Session.html#22306" class="Function"
  >lookupUChan</a
  ><a name="26020"
  > </a
  ><a name="26021" href="Session.html#25980" class="Bound"
  >i</a
  ><a name="26022"
  > </a
  ><a name="26023" href="Session.html#25983" class="Bound"
  >cs</a
  ><a name="26025"
  > </a
  ><a name="26026" class="Keyword"
  >in</a
  ><a name="26028"
  >                        
                          </a
  ><a name="26079" href="Session.html#23016" class="Function"
  >readUChan</a
  ><a name="26088"
  > </a
  ><a name="26089" href="Session.html#25992" class="Bound"
  >chanToReadFrom</a
  ><a name="26103"
  > </a
  ><a name="26104" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="26107"
  > </a
  ><a name="26108" class="Symbol"
  >&#955;</a
  ><a name="26109"
  > </a
  ><a name="26110" href="Session.html#26110" class="Bound"
  >receivedChan</a
  ><a name="26122"
  > </a
  ><a name="26123" class="Symbol"
  >&#8594;</a
  ><a name="26124"
  >                   
                          </a
  ><a name="26170" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="26176"
  > </a
  ><a name="26177" class="Symbol"
  >(</a
  ><a name="26178" class="InductiveConstructor"
  >tt</a
  ><a name="26180"
  > </a
  ><a name="26181" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="26182"
  > </a
  ><a name="26183" class="Symbol"
  >(</a
  ><a name="26184" href="Session.html#21236" class="Postulate"
  >unsafeCoerce</a
  ><a name="26196"
  > </a
  ><a name="26197" href="Session.html#25983" class="Bound"
  >cs</a
  ><a name="26199"
  > </a
  ><a name="26200" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="26202"
  > </a
  ><a name="26203" href="Session.html#26110" class="Bound"
  >receivedChan</a
  ><a name="26215" class="Symbol"
  >))</a
  ><a name="26217"
  >                  </pre>
<p><code>accept i a p</code> forks a process that waits for channels: whenever one is received it spawns a new copy of the server along it.</p>
<pre></a
  ><a name="26466" href="Session.html#23390" class="Function"
  >run</a
  ><a name="26469"
  > </a
  ><a name="26470" class="Symbol"
  >(</a
  ><a name="26471" href="Session.html#17669" class="InductiveConstructor Operator"
  >accept</a
  ><a name="26477"
  >   </a
  ><a name="26480" href="Session.html#17669" class="InductiveConstructor Operator"
  >i</a
  ><a name="26481"
  > </a
  ><a name="26482" href="Session.html#17669" class="InductiveConstructor Operator"
  >a</a
  ><a name="26483"
  > </a
  ><a name="26484" href="Session.html#17669" class="InductiveConstructor Operator"
  >p</a
  ><a name="26485" class="Symbol"
  >)</a
  ><a name="26486"
  > </a
  ><a name="26487" href="Session.html#26487" class="Bound"
  >cs</a
  ><a name="26489"
  > </a
  ><a name="26490" class="Symbol"
  >=</a
  ><a name="26491"
  > </a
  ><a name="26492" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="26498"
  > </a
  ><a name="26499" href="Session.html#26763" class="Function"
  >server</a
  ><a name="26505"
  > </a
  ><a name="26506" href="Session.html#22652" class="Function Operator"
  >&gt;&gt;</a
  ><a name="26508"
  > </a
  ><a name="26509" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="26515"
  > </a
  ><a name="26516" class="Symbol"
  >(</a
  ><a name="26517" class="InductiveConstructor"
  >tt</a
  ><a name="26519"
  > </a
  ><a name="26520" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="26521"
  > </a
  ><a name="26522" href="Base.html#4175" class="Function"
  >all-rm</a
  ><a name="26528"
  > </a
  ><a name="26529" href="Session.html#26480" class="Bound"
  >i</a
  ><a name="26530"
  > </a
  ><a name="26531" href="Session.html#26487" class="Bound"
  >cs</a
  ><a name="26533" class="Symbol"
  >)</a
  ><a name="26534"
  >                   
  </a
  ><a name="26556" class="Keyword"
  >where</a
  ><a name="26561"
  > </a
  ><a name="26562" href="Session.html#26562" class="Function"
  >c</a
  ><a name="26563"
  > </a
  ><a name="26564" class="Symbol"
  >=</a
  ><a name="26565"
  > </a
  ><a name="26566" href="Session.html#22306" class="Function"
  >lookupUChan</a
  ><a name="26577"
  > </a
  ><a name="26578" href="Session.html#26480" class="Bound"
  >i</a
  ><a name="26579"
  > </a
  ><a name="26580" href="Session.html#26487" class="Bound"
  >cs</a
  ><a name="26582"
  >                                            
        </a
  ><a name="26635" href="Session.html#26635" class="Function"
  >service</a
  ><a name="26642"
  > </a
  ><a name="26643" class="Symbol"
  >:</a
  ><a name="26644"
  > </a
  ><a name="26645" href="Session.html#22168" class="Function"
  >UChan</a
  ><a name="26650"
  > </a
  ><a name="26651" class="Symbol"
  >&#8594;</a
  ><a name="26652"
  > </a
  ><a name="26653" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="26655"
  > </a
  ><a name="26656" class="Symbol"
  >_</a
  ><a name="26657"
  >                                          
        </a
  ><a name="26708" href="Session.html#26635" class="Function"
  >service</a
  ><a name="26715"
  > </a
  ><a name="26716" href="Session.html#26716" class="Bound"
  >n</a
  ><a name="26717"
  > </a
  ><a name="26718" class="Symbol"
  >=</a
  ><a name="26719"
  > </a
  ><a name="26720" href="Session.html#23390" class="Function"
  >run</a
  ><a name="26723"
  > </a
  ><a name="26724" href="Session.html#26484" class="Bound"
  >p</a
  ><a name="26725"
  > </a
  ><a name="26726" class="Symbol"
  >(</a
  ><a name="26727" href="Base.html#4323" class="Function"
  >all-ud</a
  ><a name="26733"
  > </a
  ><a name="26734" href="Session.html#26480" class="Bound"
  >i</a
  ><a name="26735"
  > </a
  ><a name="26736" href="Session.html#26487" class="Bound"
  >cs</a
  ><a name="26738"
  > </a
  ><a name="26739" href="Session.html#26716" class="Bound"
  >n</a
  ><a name="26740" class="Symbol"
  >)</a
  ><a name="26741"
  > </a
  ><a name="26742" href="Session.html#22652" class="Function Operator"
  >&gt;&gt;</a
  ><a name="26744"
  > </a
  ><a name="26745" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="26751"
  > </a
  ><a name="26752" href="Unit.html#210" class="Function"
  >&#10216;&#10217;</a
  ><a name="26754"
  >
        </a
  ><a name="26763" href="Session.html#26763" class="Function"
  >server</a
  ><a name="26769"
  > </a
  ><a name="26770" class="Symbol"
  >:</a
  ><a name="26771"
  > </a
  ><a name="26772" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="26774"
  > </a
  ><a name="26775" href="Unit.html#194" class="Function"
  >C.&lt;&gt;</a
  ><a name="26779"
  >                                                
        </a
  ><a name="26836" href="Session.html#26763" class="Function"
  >server</a
  ><a name="26842"
  > </a
  ><a name="26843" class="Symbol"
  >=</a
  ><a name="26844"
  > </a
  ><a name="26845" href="Session.html#23016" class="Function"
  >readUChan</a
  ><a name="26854"
  > </a
  ><a name="26855" href="Session.html#26562" class="Function"
  >c</a
  ><a name="26856"
  >        </a
  ><a name="26864" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="26867"
  > </a
  ><a name="26868" class="Symbol"
  >&#955;</a
  ><a name="26869"
  > </a
  ><a name="26870" href="Session.html#26870" class="Bound"
  >n</a
  ><a name="26871"
  > </a
  ><a name="26872" class="Symbol"
  >&#8594;</a
  ><a name="26873"
  >                           
                 </a
  ><a name="26918" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="26924"
  > </a
  ><a name="26925" class="Symbol"
  >(</a
  ><a name="26926" href="Session.html#26635" class="Function"
  >service</a
  ><a name="26933"
  > </a
  ><a name="26934" href="Session.html#26870" class="Bound"
  >n</a
  ><a name="26935" class="Symbol"
  >)</a
  ><a name="26936"
  > </a
  ><a name="26937" href="Session.html#22652" class="Function Operator"
  >&gt;&gt;</a
  ><a name="26939"
  >                                  
                 </a
  ><a name="26991" href="Session.html#26763" class="Function"
  >server</a
  ><a name="26997"
  >                                                 </pre>
<p><code>connect i p</code> creates a channel and sends it along the channel <code>i</code>, which is (or should be) shared by construction with a server, then it becomes process <code>p</code>.</p>
<pre></a
  ><a name="27322" href="Session.html#23390" class="Function"
  >run</a
  ><a name="27325"
  > </a
  ><a name="27326" class="Symbol"
  >(</a
  ><a name="27327" href="Session.html#17669" class="InductiveConstructor Operator"
  >connect</a
  ><a name="27334"
  >    </a
  ><a name="27338" href="Session.html#17669" class="InductiveConstructor Operator"
  >i</a
  ><a name="27339"
  > </a
  ><a name="27340" href="Session.html#17669" class="InductiveConstructor Operator"
  >p</a
  ><a name="27341" class="Symbol"
  >)</a
  ><a name="27342"
  > </a
  ><a name="27343" href="Session.html#27343" class="Bound"
  >cs</a
  ><a name="27345"
  > </a
  ><a name="27346" class="Symbol"
  >=</a
  ><a name="27347"
  > </a
  ><a name="27348" href="Control.Concurrent.Chan.Synchronous.html#300" class="Postulate"
  >newChan</a
  ><a name="27355"
  >                         </a
  ><a name="27380" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="27383"
  > </a
  ><a name="27384" class="Symbol"
  >&#955;</a
  ><a name="27385"
  > </a
  ><a name="27386" href="Session.html#27386" class="Bound"
  >n</a
  ><a name="27387"
  > </a
  ><a name="27388" class="Symbol"
  >&#8594;</a
  ><a name="27389"
  >                       
                          </a
  ><a name="27439" href="Session.html#22928" class="Function"
  >writeUChan</a
  ><a name="27449"
  > </a
  ><a name="27450" class="Symbol"
  >(</a
  ><a name="27451" href="Session.html#22306" class="Function"
  >lookupUChan</a
  ><a name="27462"
  > </a
  ><a name="27463" href="Session.html#27338" class="Bound"
  >i</a
  ><a name="27464"
  > </a
  ><a name="27465" href="Session.html#27343" class="Bound"
  >cs</a
  ><a name="27467" class="Symbol"
  >)</a
  ><a name="27468"
  > </a
  ><a name="27469" href="Session.html#27386" class="Bound"
  >n</a
  ><a name="27470"
  > </a
  ><a name="27471" href="Session.html#22652" class="Function Operator"
  >&gt;&gt;</a
  ><a name="27473"
  >                              
                          </a
  ><a name="27530" href="Session.html#23390" class="Function"
  >run</a
  ><a name="27533"
  > </a
  ><a name="27534" href="Session.html#27340" class="Bound"
  >p</a
  ><a name="27535"
  > </a
  ><a name="27536" class="Symbol"
  >(</a
  ><a name="27537" href="Base.html#4323" class="Function"
  >all-ud</a
  ><a name="27543"
  > </a
  ><a name="27544" href="Session.html#27338" class="Bound"
  >i</a
  ><a name="27545"
  > </a
  ><a name="27546" href="Session.html#27343" class="Bound"
  >cs</a
  ><a name="27548"
  > </a
  ><a name="27549" href="Session.html#27386" class="Bound"
  >n</a
  ><a name="27550" class="Symbol"
  >)</a
  ><a name="27551"
  ></pre>
<p><code>wont i</code> avoids starting the client/server interaction with the server which waits for channels on <code>i</code>.</p>
<pre></a
  ><a name="27772" href="Session.html#23390" class="Function"
  >run</a
  ><a name="27775"
  > </a
  ><a name="27776" class="Symbol"
  >(</a
  ><a name="27777" href="Session.html#17669" class="InductiveConstructor Operator"
  >wont</a
  ><a name="27781"
  >         </a
  ><a name="27790" href="Session.html#17669" class="InductiveConstructor Operator"
  >i</a
  ><a name="27791" class="Symbol"
  >)</a
  ><a name="27792"
  > </a
  ><a name="27793" href="Session.html#27793" class="Bound"
  >cs</a
  ><a name="27795"
  > </a
  ><a name="27796" class="Symbol"
  >=</a
  ><a name="27797"
  > </a
  ><a name="27798" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="27804"
  > </a
  ><a name="27805" class="Symbol"
  >(</a
  ><a name="27806" class="InductiveConstructor"
  >tt</a
  ><a name="27808"
  > </a
  ><a name="27809" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="27810"
  > </a
  ><a name="27811" href="Base.html#4175" class="Function"
  >all-rm</a
  ><a name="27817"
  > </a
  ><a name="27818" href="Session.html#27790" class="Bound"
  >i</a
  ><a name="27819"
  > </a
  ><a name="27820" href="Session.html#27793" class="Bound"
  >cs</a
  ><a name="27822" class="Symbol"
  >)</a
  ><a name="27823"
  ></pre>
<p><code>twice i</code> duplicates the server which waits for channels on <code>i</code>.</p>
<pre></a
  ><a name="28005" href="Session.html#23390" class="Function"
  >run</a
  ><a name="28008"
  > </a
  ><a name="28009" class="Symbol"
  >(</a
  ><a name="28010" href="Session.html#17669" class="InductiveConstructor Operator"
  >twice</a
  ><a name="28015"
  >        </a
  ><a name="28023" href="Session.html#17669" class="InductiveConstructor Operator"
  >i</a
  ><a name="28024" class="Symbol"
  >)</a
  ><a name="28025"
  > </a
  ><a name="28026" href="Session.html#28026" class="Bound"
  >cs</a
  ><a name="28028"
  > </a
  ><a name="28029" class="Symbol"
  >=</a
  ><a name="28030"
  > </a
  ><a name="28031" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="28037"
  > </a
  ><a name="28038" class="Symbol"
  >(</a
  ><a name="28039" class="InductiveConstructor"
  >tt</a
  ><a name="28041"
  > </a
  ><a name="28042" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="28043"
  > </a
  ><a name="28044" class="Symbol"
  >(</a
  ><a name="28045" href="Session.html#28026" class="Bound"
  >cs</a
  ><a name="28047"
  > </a
  ><a name="28048" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="28050"
  > </a
  ><a name="28051" href="Session.html#22306" class="Function"
  >lookupUChan</a
  ><a name="28062"
  > </a
  ><a name="28063" href="Session.html#28023" class="Bound"
  >i</a
  ><a name="28064"
  > </a
  ><a name="28065" href="Session.html#28026" class="Bound"
  >cs</a
  ><a name="28067" class="Symbol"
  >))</a
  ><a name="28069"
  >                           </pre>
<p><code>write i x</code> writes <code>x</code> on channel <code>i</code>.</p>
<pre></a
  ><a name="28330" href="Session.html#23390" class="Function"
  >run</a
  ><a name="28333"
  > </a
  ><a name="28334" class="Symbol"
  >(</a
  ><a name="28335" href="Session.html#17669" class="InductiveConstructor Operator"
  >write</a
  ><a name="28340"
  >      </a
  ><a name="28346" href="Session.html#17669" class="InductiveConstructor Operator"
  >i</a
  ><a name="28347"
  > </a
  ><a name="28348" href="Session.html#17669" class="InductiveConstructor Operator"
  >x</a
  ><a name="28349" class="Symbol"
  >)</a
  ><a name="28350"
  > </a
  ><a name="28351" href="Session.html#28351" class="Bound"
  >cs</a
  ><a name="28353"
  > </a
  ><a name="28354" class="Symbol"
  >=</a
  ><a name="28355"
  > </a
  ><a name="28356" class="Keyword"
  >let</a
  ><a name="28359"
  > </a
  ><a name="28360" href="Session.html#28360" class="Bound"
  >c</a
  ><a name="28361"
  > </a
  ><a name="28362" class="Symbol"
  >=</a
  ><a name="28363"
  > </a
  ><a name="28364" href="Session.html#22306" class="Function"
  >lookupUChan</a
  ><a name="28375"
  > </a
  ><a name="28376" href="Session.html#28346" class="Bound"
  >i</a
  ><a name="28377"
  > </a
  ><a name="28378" href="Session.html#28351" class="Bound"
  >cs</a
  ><a name="28380"
  > </a
  ><a name="28381" class="Keyword"
  >in</a
  ><a name="28383"
  >                                     
                          </a
  ><a name="28447" href="Session.html#22928" class="Function"
  >writeUChan</a
  ><a name="28457"
  > </a
  ><a name="28458" href="Session.html#28360" class="Bound"
  >c</a
  ><a name="28459"
  > </a
  ><a name="28460" href="Session.html#28348" class="Bound"
  >x</a
  ><a name="28461"
  > </a
  ><a name="28462" href="Session.html#22652" class="Function Operator"
  >&gt;&gt;</a
  ><a name="28464"
  >                                               
                          </a
  ><a name="28538" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="28544"
  > </a
  ><a name="28545" class="Symbol"
  >(</a
  ><a name="28546" class="InductiveConstructor"
  >tt</a
  ><a name="28548"
  > </a
  ><a name="28549" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="28550"
  > </a
  ><a name="28551" href="Session.html#21236" class="Postulate"
  >unsafeCoerce</a
  ><a name="28563"
  > </a
  ><a name="28564" href="Session.html#28351" class="Bound"
  >cs</a
  ><a name="28566" class="Symbol"
  >)</a
  ><a name="28567"
  >                                   </pre>
<p><code>read i</code> reads from <code>i</code> and returns what it read.</p>
<pre></a
  ><a name="28769" href="Session.html#23390" class="Function"
  >run</a
  ><a name="28772"
  > </a
  ><a name="28773" class="Symbol"
  >(</a
  ><a name="28774" href="Session.html#17669" class="InductiveConstructor Operator"
  >read</a
  ><a name="28778"
  >         </a
  ><a name="28787" href="Session.html#17669" class="InductiveConstructor Operator"
  >i</a
  ><a name="28788" class="Symbol"
  >)</a
  ><a name="28789"
  > </a
  ><a name="28790" href="Session.html#28790" class="Bound"
  >cs</a
  ><a name="28792"
  > </a
  ><a name="28793" class="Symbol"
  >=</a
  ><a name="28794"
  > </a
  ><a name="28795" class="Keyword"
  >let</a
  ><a name="28798"
  > </a
  ><a name="28799" href="Session.html#28799" class="Bound"
  >c</a
  ><a name="28800"
  > </a
  ><a name="28801" class="Symbol"
  >=</a
  ><a name="28802"
  > </a
  ><a name="28803" href="Session.html#22306" class="Function"
  >lookupUChan</a
  ><a name="28814"
  > </a
  ><a name="28815" href="Session.html#28787" class="Bound"
  >i</a
  ><a name="28816"
  > </a
  ><a name="28817" href="Session.html#28790" class="Bound"
  >cs</a
  ><a name="28819"
  > </a
  ><a name="28820" class="Keyword"
  >in</a
  ><a name="28822"
  >                                     
                          </a
  ><a name="28886" href="Session.html#23016" class="Function"
  >readUChan</a
  ><a name="28895"
  > </a
  ><a name="28896" href="Session.html#28799" class="Bound"
  >c</a
  ><a name="28897"
  > </a
  ><a name="28898" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="28901"
  > </a
  ><a name="28902" class="Symbol"
  >&#955;</a
  ><a name="28903"
  > </a
  ><a name="28904" href="Session.html#28904" class="Bound"
  >x</a
  ><a name="28905"
  > </a
  ><a name="28906" class="Symbol"
  >&#8594;</a
  ><a name="28907"
  >
                          </a
  ><a name="28934" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="28940"
  > </a
  ><a name="28941" class="Symbol"
  >(</a
  ><a name="28942" href="Session.html#28904" class="Bound"
  >x</a
  ><a name="28943"
  > </a
  ><a name="28944" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="28945"
  > </a
  ><a name="28946" href="Session.html#21236" class="Postulate"
  >unsafeCoerce</a
  ><a name="28958"
  > </a
  ><a name="28959" href="Session.html#28790" class="Bound"
  >cs</a
  ><a name="28961" class="Symbol"
  >)</a
  ><a name="28962"
  >                                    </pre>
<p><code>end i</code> terminates the (sub)session</p>
<pre></a
  ><a name="29229" href="Session.html#23390" class="Function"
  >run</a
  ><a name="29232"
  > </a
  ><a name="29233" class="Symbol"
  >(</a
  ><a name="29234" href="Session.html#17669" class="InductiveConstructor Operator"
  >end/</a
  ><a name="29238"
  >       </a
  ><a name="29245" href="Session.html#17669" class="InductiveConstructor Operator"
  >i</a
  ><a name="29246"
  > </a
  ><a name="29247" href="Session.html#17669" class="InductiveConstructor Operator"
  >r</a
  ><a name="29248" class="Symbol"
  >)</a
  ><a name="29249"
  > </a
  ><a name="29250" href="Session.html#29250" class="Bound"
  >cs</a
  ><a name="29252"
  > </a
  ><a name="29253" class="Symbol"
  >=</a
  ><a name="29254"
  > </a
  ><a name="29255" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="29261"
  > </a
  ><a name="29262" class="Symbol"
  >(</a
  ><a name="29263" href="Session.html#29247" class="Bound"
  >r</a
  ><a name="29264"
  > </a
  ><a name="29265" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="29266"
  > </a
  ><a name="29267" href="Base.html#4175" class="Function"
  >all-rm</a
  ><a name="29273"
  > </a
  ><a name="29274" href="Session.html#29245" class="Bound"
  >i</a
  ><a name="29275"
  > </a
  ><a name="29276" href="Session.html#29250" class="Bound"
  >cs</a
  ><a name="29278" class="Symbol"
  >)</a
  ><a name="29279"
  >                                     </pre>
<p><code>at/ i o</code> simply returns <code>o</code>.</p>
<pre></a
  ><a name="29373" href="Session.html#23390" class="Function"
  >run</a
  ><a name="29376"
  > </a
  ><a name="29377" class="Symbol"
  >(</a
  ><a name="29378" href="Session.html#17669" class="InductiveConstructor Operator"
  >at/</a
  ><a name="29381"
  >        </a
  ><a name="29389" href="Session.html#17669" class="InductiveConstructor Operator"
  >i</a
  ><a name="29390"
  > </a
  ><a name="29391" href="Session.html#17669" class="InductiveConstructor Operator"
  >o</a
  ><a name="29392" class="Symbol"
  >)</a
  ><a name="29393"
  > </a
  ><a name="29394" href="Session.html#29394" class="Bound"
  >cs</a
  ><a name="29396"
  > </a
  ><a name="29397" class="Symbol"
  >=</a
  ><a name="29398"
  > </a
  ><a name="29399" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="29405"
  > </a
  ><a name="29406" class="Symbol"
  >(</a
  ><a name="29407" href="Session.html#29391" class="Bound"
  >o</a
  ><a name="29408"
  > </a
  ><a name="29409" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="29410"
  > </a
  ><a name="29411" href="Session.html#21236" class="Postulate"
  >unsafeCoerce</a
  ><a name="29423"
  > </a
  ><a name="29424" href="Session.html#29394" class="Bound"
  >cs</a
  ><a name="29426" class="Symbol"
  >)</a
  ><a name="29427"
  >                                    </pre>
<p><code>corec</code> enters a loop whose body is contained in <code>gp</code>: the coiteration will possibly be exited whenever the value the process returns is <code>inl x</code> for some <code>x</code>.</p>
<pre></a
  ><a name="29649" href="Session.html#23390" class="Function"
  >run</a
  ><a name="29652"
  > </a
  ><a name="29653" class="Symbol"
  >(</a
  ><a name="29654" href="Session.html#17669" class="InductiveConstructor Operator"
  >corec</a
  ><a name="29659"
  >   </a
  ><a name="29662" href="Session.html#17669" class="InductiveConstructor Operator"
  >i</a
  ><a name="29663"
  > </a
  ><a name="29664" href="Session.html#17669" class="InductiveConstructor Operator"
  >o</a
  ><a name="29665"
  > </a
  ><a name="29666" href="Session.html#17669" class="InductiveConstructor Operator"
  >gp</a
  ><a name="29668" class="Symbol"
  >)</a
  ><a name="29669"
  > </a
  ><a name="29670" href="Session.html#29670" class="Bound"
  >cs</a
  ><a name="29672"
  > </a
  ><a name="29673" class="Symbol"
  >=</a
  ><a name="29674"
  > </a
  ><a name="29675" href="Session.html#29689" class="Function"
  >aux</a
  ><a name="29678"
  > </a
  ><a name="29679" href="Session.html#29664" class="Bound"
  >o</a
  ><a name="29680"
  >
  </a
  ><a name="29683" class="Keyword"
  >where</a
  ><a name="29688"
  > </a
  ><a name="29689" href="Session.html#29689" class="Function"
  >aux</a
  ><a name="29692"
  > </a
  ><a name="29693" class="Symbol"
  >=</a
  ><a name="29694"
  > </a
  ><a name="29695" class="Symbol"
  >&#955;</a
  ><a name="29696"
  > </a
  ><a name="29697" href="Session.html#29697" class="Bound"
  >o</a
  ><a name="29698"
  > </a
  ><a name="29699" class="Symbol"
  >&#8594;</a
  ><a name="29700"
  > </a
  ><a name="29701" href="Session.html#23390" class="Function"
  >run</a
  ><a name="29704"
  > </a
  ><a name="29705" class="Symbol"
  >(</a
  ><a name="29706" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="29709"
  > </a
  ><a name="29710" class="Symbol"
  >(</a
  ><a name="29711" href="Session.html#29666" class="Bound"
  >gp</a
  ><a name="29713"
  > </a
  ><a name="29714" href="Session.html#29697" class="Bound"
  >o</a
  ><a name="29715" class="Symbol"
  >))</a
  ><a name="29717"
  > </a
  ><a name="29718" class="Symbol"
  >(</a
  ><a name="29719" href="Session.html#21236" class="Postulate"
  >unsafeCoerce</a
  ><a name="29731"
  > </a
  ><a name="29732" href="Session.html#29670" class="Bound"
  >cs</a
  ><a name="29734" class="Symbol"
  >)</a
  ><a name="29735"
  > </a
  ><a name="29736" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="29739"
  >
                    </a
  ><a name="29760" href="Data.Product.html#2847" class="Function"
  >uc</a
  ><a name="29762"
  > </a
  ><a name="29763" href="Data.Sum.html#678" class="Function Operator"
  >&#8846;.[</a
  ><a name="29766"
  > </a
  ><a name="29767" href="Data.Product.html#2682" class="Function"
  >cu</a
  ><a name="29769"
  > </a
  ><a name="29770" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="29776"
  > </a
  ><a name="29777" href="Data.Sum.html#678" class="Function Operator"
  >,</a
  ><a name="29778"
  > </a
  ><a name="29779" class="Symbol"
  >(&#955;</a
  ><a name="29781"
  > </a
  ><a name="29782" href="Session.html#29782" class="Bound"
  >o</a
  ><a name="29783"
  > </a
  ><a name="29784" href="Session.html#29784" class="Bound"
  >_</a
  ><a name="29785"
  > </a
  ><a name="29786" class="Symbol"
  >&#8594;</a
  ><a name="29787"
  > </a
  ><a name="29788" href="Session.html#29689" class="Function"
  >aux</a
  ><a name="29791"
  > </a
  ><a name="29792" href="Session.html#29782" class="Bound"
  >o</a
  ><a name="29793" class="Symbol"
  >)</a
  ><a name="29794"
  > </a
  ><a name="29795" href="Data.Sum.html#678" class="Function Operator"
  >]</a
  ><a name="29796"
  ></pre>
<p>Closed processes describe IO computations.</p>
<pre></a
  ><a name="29866" href="Session.html#29866" class="Function"
  >run[]</a
  ><a name="29871"
  > </a
  ><a name="29872" class="Symbol"
  >:</a
  ><a name="29873"
  > </a
  ><a name="29874" class="Symbol"
  >&#8704;</a
  ><a name="29875"
  > </a
  ><a name="29876" class="Symbol"
  >{</a
  ><a name="29877" href="Session.html#29877" class="Bound"
  >X</a
  ><a name="29878" class="Symbol"
  >}</a
  ><a name="29879"
  > </a
  ><a name="29880" class="Symbol"
  >&#8594;</a
  ><a name="29881"
  >  </a
  ><a name="29883" href="Session.html#21646" class="Function"
  >IOProc</a
  ><a name="29889"
  > </a
  ><a name="29890" href="Session.html#29877" class="Bound"
  >X</a
  ><a name="29891"
  > </a
  ><a name="29892" class="Symbol"
  >&#8594;</a
  ><a name="29893"
  > </a
  ><a name="29894" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="29896"
  > </a
  ><a name="29897" href="Session.html#29877" class="Bound"
  >X</a
  ><a name="29898"
  >
</a
  ><a name="29899" href="Session.html#29866" class="Function"
  >run[]</a
  ><a name="29904"
  > </a
  ><a name="29905" href="Session.html#29905" class="Bound"
  >P</a
  ><a name="29906"
  > </a
  ><a name="29907" class="Symbol"
  >=</a
  ><a name="29908"
  > </a
  ><a name="29909" href="Session.html#22738" class="Function"
  >mapIO</a
  ><a name="29914"
  > </a
  ><a name="29915" href="Data.Product.html#525" class="Field"
  >fst</a
  ><a name="29918"
  > </a
  ><a name="29919" class="Symbol"
  >(</a
  ><a name="29920" href="Session.html#23390" class="Function"
  >run</a
  ><a name="29923"
  > </a
  ><a name="29924" href="Session.html#29905" class="Bound"
  >P</a
  ><a name="29925"
  > </a
  ><a name="29926" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="29928" class="Symbol"
  >)</a
  ><a name="29929"
  ></pre>
<p>Note that as the evaluator allows for processes that embed any <code>IO</code> action one could easily add unwanted behaviours: the user is still free to capture a fragment of <code>IO</code> to be considered <em>safe</em> and simply compose this evaluator after a translation phase to <code>IO</code>.</p>
<p>For simplicity, the currently provided <a href="Session.Examples.html">examples</a> just use <code>IO</code> for basic operations like suspending processes for finite amounts of time or accessing the standard output.</p>
<h2 id="conclusion-and-further-work">Conclusion and further work</h2>
<h2 id="acknowledgments">Acknowledgments</h2>
<p>I must thank</p>
<ul>
<li><p>Claudio Sacerdoti Coen, who provided many useful comments on a previous version of this implementation;</p></li>
<li><p>Peter Morris, who originally taught me the above technique to attempt to make families small by computation.</p></li>
</ul></body></html>