<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Session</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="Content-Style-Type" content="text/css"/>
<link href="Agda.css" rel="stylesheet" type="text/css"/></head><body><p><a href="https://www.gnu.org/licenses/gpl.html">2013-2014 Matteo Acerbi</a></p>
<h1 id="linear-dependent-session-types-wip">Linear dependent session types [WIP]</h1>
<p>What follows is an incomplete draft: do not read this unless given explicit permission by the author.</p>
<h2 id="introduction">Introduction</h2>
<p>This document describes and contains an Agda implementation of an embedded concurrent language with linear dependent session types.</p>
<p>The reader must be warned that in this work we are using Agda <em>only</em> to try and mimic features typical of a session typed process calculi with a by-construction well-typed representation: we are in no way in the position to prove any correspondence with a logical system.</p>
<p>We nonetheless adopt notations and ideas from more theoretical works in the fields of process algebras and linear logic, in particular from Philip Wadler's &quot;Propositions as Sessions&quot; paper (for the main type and terms constructs), and from the recent line of work by Caires, Pfenning and Toninho (on monadic syntax, corecursion and dependent types).</p>
<p>The immediate goal of this development is not to formalise a typed process calculus, but to allow Agda users to experiment with an <em>embedded</em> concurrency-oriented DSL: before attempting to prove the properties of the system or even of specific processes, we aim at designing a programmer-friendly interface.</p>
<p>We provide an evaluation function making use of the Haskell FFI: it is therefore possible to compile and execute programs in the DSL as Haskell process (see the <a href="http://github.com/ma82/session/">README</a> for instructions on how to attempt compilation). Note that in order to obtain the evaluator (see the end of this file) we had to (locally) disable totality checking and to use <code>unsafeCoerce</code> in several places.</p>
<p>We are currently studying how to define a total non-deterministic reference semantics which will allow formalised reasoning concerning the concurrent execution of processes.</p>
<pre></a
  ><a name="1895" class="Keyword"
  >module</a
  ><a name="1901"
  > </a
  ><a name="1902" href="Session.html#1" class="Module"
  >Session</a
  ><a name="1909"
  > </a
  ><a name="1910" class="Keyword"
  >where</a
  ><a name="1915"
  >

</a
  ><a name="1917" class="Keyword"
  >open</a
  ><a name="1921"
  > </a
  ><a name="1922" class="Keyword"
  >import</a
  ><a name="1928"
  > </a
  ><a name="1929" href="Session.Base.html#1" class="Module"
  >Session.Base</a
  ><a name="1941"
  > </a
  ><a name="1942" class="Keyword"
  >public</a
  ><a name="1948"
  ></pre>
<h2 id="types">Types</h2>
<p>The syntax for types is heavily inspired by both <em>Strictly Positive Families</em> (the version in Peter Morris's PhD thesis) and (indexed) <em>Descriptions</em> (Chapman et al, &quot;The Gentle Art of Levitation&quot;).</p>
<p>In our case, however, we do not want to describe indexed functors: we just want to be able to close the language under a (greatest) fixpoint operator/binder <code>`nu</code>, allowing nested usages thanks to a &quot;well-typed Bird-Paterson&quot; encoding of binding.</p>
<p>To compare with the cited universes, note that if we tried to give a <code>(I → Set) → (O → Set)</code> semantics to the <code>`I</code>, <code>`Σ</code> , <code>`Π</code> , <code>`ν</code> codes we would have to ignore the input of type <code>O</code>: in any case, such an interpretation would not make much sense here.</p>
<p>As opposed to Wadler's CP, the typing rules for the additional constructors <code>⊗</code>, <code>⅋</code>, <code>¡</code>, <code>¿</code> will not correspond directly to those of classical linear logic: however, the corresponding syntax maintains similar operational meaning (channel transmission and client/server interactions).</p>
<p>We add a type called <code>Side</code> (endpoint of a channel), with two only inhabitants: <code>+</code>, <code>-</code> . <code>Entry</code> is a type of optionally &quot;sided&quot; (session typed) codes, where absence of a side corresponds to the session not having started yet.</p>
<p>When a <code>Side</code> is specified, the <code>Entry</code> corresponds to an obligation for the process that contains it in its (input) context: if it is <code>+</code> then the session type is to be interpreted without changes, otherwise the process must behave along that channel by following the <em>dual</em> obligation (receiving vs sending, reading vs writing, connecting vs accepting).</p>
<p>Note that for what concerns <code>_⊗_</code> and <code>_⅋_</code> a whole <code>Entry</code> is required as the description of how a process participates to a channel needs to be preserved by the transfer.</p>
<pre></a
  ><a name="3758" class="Keyword"
  >mutual</a
  ><a name="3764"
  > 

  </a
  ><a name="3769" href="Session.html#3769" class="Function"
  >De</a
  ><a name="3771"
  >    </a
  ><a name="3775" class="Symbol"
  >=</a
  ><a name="3776"
  > </a
  ><a name="3777" class="Symbol"
  >&#955;</a
  ><a name="3778"
  > </a
  ><a name="3779" href="Session.html#3779" class="Bound"
  >I</a
  ><a name="3780"
  > </a
  ><a name="3781" class="Symbol"
  >&#8594;</a
  ><a name="3782"
  > </a
  ><a name="3783" href="Session.html#3779" class="Bound"
  >I</a
  ><a name="3784"
  > </a
  ><a name="3785" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="3786"
  > </a
  ><a name="3787" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="3788"
  >
  </a
  ><a name="3791" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="3795"
  >  </a
  ><a name="3797" class="Symbol"
  >=</a
  ><a name="3798"
  > </a
  ><a name="3799" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="3800"
  > </a
  ><a name="3801" class="Symbol"
  >_</a
  ><a name="3802"
  > </a
  ><a name="3803" class="Symbol"
  >&#955;</a
  ><a name="3804"
  > </a
  ><a name="3805" href="Session.html#3805" class="Bound"
  >I</a
  ><a name="3806"
  > </a
  ><a name="3807" class="Symbol"
  >&#8594;</a
  ><a name="3808"
  > </a
  ><a name="3809" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="3810"
  > </a
  ><a name="3811" class="Symbol"
  >_</a
  ><a name="3812"
  > </a
  ><a name="3813" class="Symbol"
  >&#955;</a
  ><a name="3814"
  > </a
  ><a name="3815" href="Session.html#3815" class="Bound"
  >O</a
  ><a name="3816"
  > </a
  ><a name="3817" class="Symbol"
  >&#8594;</a
  ><a name="3818"
  > </a
  ><a name="3819" href="Session.html#3805" class="Bound"
  >I</a
  ><a name="3820"
  > </a
  ><a name="3821" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="3822"
  > </a
  ><a name="3823" href="Session.html#3815" class="Bound"
  >O</a
  ><a name="3824"
  >
  </a
  ><a name="3827" href="Session.html#3827" class="Function"
  >Entry</a
  ><a name="3832"
  > </a
  ><a name="3833" class="Symbol"
  >=</a
  ><a name="3834"
  > </a
  ><a name="3835" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="3837"
  > </a
  ><a name="3838" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="3842"
  > </a
  ><a name="3843" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="3844"
  > </a
  ><a name="3845" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="3849"
  >

  </a
  ><a name="3853" class="Keyword"
  >data</a
  ><a name="3857"
  > </a
  ><a name="3858" href="Session.html#3858" class="Datatype Operator"
  >_&#9657;_</a
  ><a name="3861"
  > </a
  ><a name="3862" class="Symbol"
  >(</a
  ><a name="3863" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="3864"
  > </a
  ><a name="3865" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="3866"
  > </a
  ><a name="3867" class="Symbol"
  >:</a
  ><a name="3868"
  > </a
  ><a name="3869" class="PrimitiveType"
  >Set</a
  ><a name="3872" class="Symbol"
  >)</a
  ><a name="3873"
  > </a
  ><a name="3874" class="Symbol"
  >:</a
  ><a name="3875"
  > </a
  ><a name="3876" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="3880"
  > </a
  ><a name="3881" class="Keyword"
  >where</a
  ><a name="3886"
  ></pre>
<ul>
<li>Exiting a session</li>
</ul>
<pre>    </a
  ><a name="3937" href="Session.html#3937" class="InductiveConstructor"
  >`I</a
  ><a name="3939"
  >      </a
  ><a name="3945" class="Symbol"
  >:</a
  ><a name="3946"
  >                     </a
  ><a name="3967" class="Symbol"
  >(</a
  ><a name="3968" href="Session.html#3968" class="Bound"
  >i</a
  ><a name="3969"
  > </a
  ><a name="3970" class="Symbol"
  >:</a
  ><a name="3971"
  > </a
  ><a name="3972" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="3973" class="Symbol"
  >)</a
  ><a name="3974"
  > </a
  ><a name="3975" class="Symbol"
  >&#8594;</a
  ><a name="3976"
  > </a
  ><a name="3977" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="3978"
  > </a
  ><a name="3979" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="3980"
  > </a
  ><a name="3981" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="3982"
  ></pre>
<ul>
<li>Writing and reading values</li>
</ul>
<pre>    </a
  ><a name="4042" href="Session.html#4042" class="InductiveConstructor"
  >`&#931;</a
  ><a name="4044"
  > </a
  ><a name="4045" href="Session.html#4045" class="InductiveConstructor"
  >`&#928;</a
  ><a name="4047"
  >   </a
  ><a name="4050" class="Symbol"
  >:</a
  ><a name="4051"
  > </a
  ><a name="4052" class="Symbol"
  >(</a
  ><a name="4053" href="Session.html#4053" class="Bound"
  >S</a
  ><a name="4054"
  > </a
  ><a name="4055" class="Symbol"
  >:</a
  ><a name="4056"
  > </a
  ><a name="4057" class="PrimitiveType"
  >Set</a
  ><a name="4060" class="Symbol"
  >)(</a
  ><a name="4062" href="Session.html#4062" class="Bound"
  >T</a
  ><a name="4063"
  > </a
  ><a name="4064" class="Symbol"
  >:</a
  ><a name="4065"
  > </a
  ><a name="4066" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="4067"
  > </a
  ><a name="4068" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="4069"
  > </a
  ><a name="4070" href="Session.html#4053" class="Bound"
  >S</a
  ><a name="4071" class="Symbol"
  >)</a
  ><a name="4072"
  >        </a
  ><a name="4080" class="Symbol"
  >&#8594;</a
  ><a name="4081"
  > </a
  ><a name="4082" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="4083"
  > </a
  ><a name="4084" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="4085"
  > </a
  ><a name="4086" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="4087"
  ></pre>
<ul>
<li>Dependency on previously exchanged values</li>
</ul>
<pre>    </a
  ><a name="4162" href="Session.html#4162" class="InductiveConstructor"
  >`^</a
  ><a name="4164"
  >      </a
  ><a name="4170" class="Symbol"
  >:</a
  ><a name="4171"
  > </a
  ><a name="4172" class="Symbol"
  >(</a
  ><a name="4173" href="Session.html#4173" class="Bound"
  >T</a
  ><a name="4174"
  > </a
  ><a name="4175" class="Symbol"
  >:</a
  ><a name="4176"
  > </a
  ><a name="4177" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="4178"
  > </a
  ><a name="4179" class="Symbol"
  >&#8594;</a
  ><a name="4180"
  > </a
  ><a name="4181" href="Session.html#3769" class="Function"
  >De</a
  ><a name="4183"
  > </a
  ><a name="4184" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="4185" class="Symbol"
  >)</a
  ><a name="4186"
  >              </a
  ><a name="4200" class="Symbol"
  >&#8594;</a
  ><a name="4201"
  > </a
  ><a name="4202" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="4203"
  > </a
  ><a name="4204" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="4205"
  > </a
  ><a name="4206" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="4207"
  ></pre>
<ul>
<li>Sending and receiving channels</li>
</ul>
<pre>    </a
  ><a name="4271" href="Session.html#4271" class="InductiveConstructor Operator"
  >_&#8855;_</a
  ><a name="4274"
  > </a
  ><a name="4275" href="Session.html#4275" class="InductiveConstructor Operator"
  >_&#8523;_</a
  ><a name="4278"
  > </a
  ><a name="4279" class="Symbol"
  >:</a
  ><a name="4280"
  > </a
  ><a name="4281" class="Symbol"
  >(</a
  ><a name="4282" href="Session.html#4282" class="Bound"
  >L</a
  ><a name="4283"
  > </a
  ><a name="4284" class="Symbol"
  >:</a
  ><a name="4285"
  > </a
  ><a name="4286" href="Session.html#3827" class="Function"
  >Entry</a
  ><a name="4291" class="Symbol"
  >)(</a
  ><a name="4293" href="Session.html#4293" class="Bound"
  >R</a
  ><a name="4294"
  > </a
  ><a name="4295" class="Symbol"
  >:</a
  ><a name="4296"
  > </a
  ><a name="4297" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="4298"
  > </a
  ><a name="4299" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="4300"
  > </a
  ><a name="4301" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="4302" class="Symbol"
  >)</a
  ><a name="4303"
  >      </a
  ><a name="4309" class="Symbol"
  >&#8594;</a
  ><a name="4310"
  > </a
  ><a name="4311" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="4312"
  > </a
  ><a name="4313" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="4314"
  > </a
  ><a name="4315" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="4316"
  ></pre>
<ul>
<li>Servers and clients</li>
</ul>
<pre>    </a
  ><a name="4369" href="Session.html#4369" class="InductiveConstructor Operator"
  >&#161;_</a
  ><a name="4371"
  > </a
  ><a name="4372" href="Session.html#4372" class="InductiveConstructor Operator"
  >&#191;_</a
  ><a name="4374"
  >   </a
  ><a name="4377" class="Symbol"
  >:</a
  ><a name="4378"
  > </a
  ><a name="4379" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="4383"
  >                        </a
  ><a name="4407" class="Symbol"
  >&#8594;</a
  ><a name="4408"
  > </a
  ><a name="4409" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="4410"
  > </a
  ><a name="4411" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="4412"
  > </a
  ><a name="4413" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="4414"
  ></pre>
<ul>
<li>Corecursion</li>
</ul>
<pre>    </a
  ><a name="4459" href="Session.html#4459" class="InductiveConstructor"
  >`&#957;</a
  ><a name="4461"
  >      </a
  ><a name="4467" class="Symbol"
  >:</a
  ><a name="4468"
  > </a
  ><a name="4469" class="Symbol"
  >(</a
  ><a name="4470" href="Session.html#4470" class="Bound"
  >F</a
  ><a name="4471"
  > </a
  ><a name="4472" class="Symbol"
  >:</a
  ><a name="4473"
  > </a
  ><a name="4474" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="4475"
  > </a
  ><a name="4476" class="Symbol"
  >&#8594;</a
  ><a name="4477"
  > </a
  ><a name="4478" href="Session.html#3769" class="Function"
  >De</a
  ><a name="4480"
  > </a
  ><a name="4481" class="Symbol"
  >(</a
  ><a name="4482" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="4483"
  > </a
  ><a name="4484" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="4485"
  > </a
  ><a name="4486" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="4487" class="Symbol"
  >))(</a
  ><a name="4490" href="Session.html#4490" class="Bound"
  >o</a
  ><a name="4491"
  > </a
  ><a name="4492" class="Symbol"
  >:</a
  ><a name="4493"
  > </a
  ><a name="4494" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="4495" class="Symbol"
  >)</a
  ><a name="4496"
  > </a
  ><a name="4497" class="Symbol"
  >&#8594;</a
  ><a name="4498"
  > </a
  ><a name="4499" href="Session.html#3863" class="Bound"
  >I</a
  ><a name="4500"
  > </a
  ><a name="4501" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="4502"
  > </a
  ><a name="4503" href="Session.html#3865" class="Bound"
  >O</a
  ><a name="4504"
  ></pre>

<pre></a
  ><a name="4530" href="Session.html#4530" class="Function"
  >`&#931;^</a
  ><a name="4533"
  > </a
  ><a name="4534" href="Session.html#4534" class="Function"
  >`&#928;^</a
  ><a name="4537"
  > </a
  ><a name="4538" class="Symbol"
  >:</a
  ><a name="4539"
  > </a
  ><a name="4540" class="Symbol"
  >{</a
  ><a name="4541" href="Session.html#4541" class="Bound"
  >I</a
  ><a name="4542"
  > </a
  ><a name="4543" href="Session.html#4543" class="Bound"
  >O</a
  ><a name="4544"
  > </a
  ><a name="4545" class="Symbol"
  >:</a
  ><a name="4546"
  > </a
  ><a name="4547" class="PrimitiveType"
  >Set</a
  ><a name="4550" class="Symbol"
  >}(</a
  ><a name="4552" href="Session.html#4552" class="Bound"
  >S</a
  ><a name="4553"
  > </a
  ><a name="4554" class="Symbol"
  >:</a
  ><a name="4555"
  > </a
  ><a name="4556" class="PrimitiveType"
  >Set</a
  ><a name="4559" class="Symbol"
  >)(</a
  ><a name="4561" href="Session.html#4561" class="Bound"
  >T</a
  ><a name="4562"
  > </a
  ><a name="4563" class="Symbol"
  >:</a
  ><a name="4564"
  > </a
  ><a name="4565" href="Session.html#4552" class="Bound"
  >S</a
  ><a name="4566"
  > </a
  ><a name="4567" class="Symbol"
  >&#8594;</a
  ><a name="4568"
  > </a
  ><a name="4569" href="Session.html#3769" class="Function"
  >De</a
  ><a name="4571"
  > </a
  ><a name="4572" href="Session.html#4541" class="Bound"
  >I</a
  ><a name="4573" class="Symbol"
  >)</a
  ><a name="4574"
  > </a
  ><a name="4575" class="Symbol"
  >&#8594;</a
  ><a name="4576"
  > </a
  ><a name="4577" href="Session.html#4541" class="Bound"
  >I</a
  ><a name="4578"
  > </a
  ><a name="4579" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="4580"
  > </a
  ><a name="4581" href="Session.html#4543" class="Bound"
  >O</a
  ><a name="4582"
  >
</a
  ><a name="4583" href="Session.html#4530" class="Function"
  >`&#931;^</a
  ><a name="4586"
  > </a
  ><a name="4587" href="Session.html#4587" class="Bound"
  >S</a
  ><a name="4588"
  > </a
  ><a name="4589" href="Session.html#4589" class="Bound"
  >T</a
  ><a name="4590"
  > </a
  ><a name="4591" class="Symbol"
  >=</a
  ><a name="4592"
  > </a
  ><a name="4593" href="Session.html#4042" class="InductiveConstructor"
  >`&#931;</a
  ><a name="4595"
  > </a
  ><a name="4596" href="Session.html#4587" class="Bound"
  >S</a
  ><a name="4597"
  > </a
  ><a name="4598" class="Symbol"
  >(</a
  ><a name="4599" href="Session.html#4162" class="InductiveConstructor"
  >`^</a
  ><a name="4601"
  > </a
  ><a name="4602" href="Session.html#4589" class="Bound"
  >T</a
  ><a name="4603" class="Symbol"
  >)</a
  ><a name="4604"
  >
</a
  ><a name="4605" href="Session.html#4534" class="Function"
  >`&#928;^</a
  ><a name="4608"
  > </a
  ><a name="4609" href="Session.html#4609" class="Bound"
  >S</a
  ><a name="4610"
  > </a
  ><a name="4611" href="Session.html#4611" class="Bound"
  >T</a
  ><a name="4612"
  > </a
  ><a name="4613" class="Symbol"
  >=</a
  ><a name="4614"
  > </a
  ><a name="4615" href="Session.html#4045" class="InductiveConstructor"
  >`&#928;</a
  ><a name="4617"
  > </a
  ><a name="4618" href="Session.html#4609" class="Bound"
  >S</a
  ><a name="4619"
  > </a
  ><a name="4620" class="Symbol"
  >(</a
  ><a name="4621" href="Session.html#4162" class="InductiveConstructor"
  >`^</a
  ><a name="4623"
  > </a
  ><a name="4624" href="Session.html#4611" class="Bound"
  >T</a
  ><a name="4625" class="Symbol"
  >)</a
  ><a name="4626"
  ></pre>

<pre></a
  ><a name="4652" href="Session.html#4652" class="Function Operator"
  >_&#9666;_</a
  ><a name="4655"
  > </a
  ><a name="4656" class="Symbol"
  >:</a
  ><a name="4657"
  > </a
  ><a name="4658" class="PrimitiveType"
  >Set</a
  ><a name="4661"
  > </a
  ><a name="4662" class="Symbol"
  >&#8594;</a
  ><a name="4663"
  > </a
  ><a name="4664" class="PrimitiveType"
  >Set</a
  ><a name="4667"
  > </a
  ><a name="4668" class="Symbol"
  >&#8594;</a
  ><a name="4669"
  > </a
  ><a name="4670" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="4674"
  >
</a
  ><a name="4675" href="Session.html#4675" class="Bound"
  >O</a
  ><a name="4676"
  > </a
  ><a name="4677" href="Session.html#4652" class="Function Operator"
  >&#9666;</a
  ><a name="4678"
  > </a
  ><a name="4679" href="Session.html#4679" class="Bound"
  >I</a
  ><a name="4680"
  > </a
  ><a name="4681" class="Symbol"
  >=</a
  ><a name="4682"
  > </a
  ><a name="4683" href="Session.html#4679" class="Bound"
  >I</a
  ><a name="4684"
  > </a
  ><a name="4685" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="4686"
  > </a
  ><a name="4687" href="Session.html#4675" class="Bound"
  >O</a
  ><a name="4688"
  ></pre>
<p>This representation of the language of types should not be considered definitive but it seems reasonably effective.</p>
<p>Other approaches, where the session types inductive definition <code>_▹_</code> would only have one parameter (as in <em>Descriptions</em>), seemed more difficult to implement and led to more awkward encodings of the syntax: we probably did not try all the possibilities, though.</p>
<h3 id="types-and-sides">Types and sides</h3>
<p>A &quot;sided&quot; type former (code) <code>[_]F</code> is the type former (code) <code>F</code> when the side is <code>+</code>, the <em>dual</em> of <code>F</code> when it is <code>-</code>.</p>
<pre></a
  ><a name="5238" href="Session.html#5238" class="Function Operator"
  >[_]&#931;</a
  ><a name="5242"
  >   </a
  ><a name="5245" href="Session.html#5245" class="Function Operator"
  >[_]&#928;</a
  ><a name="5249"
  >   </a
  ><a name="5252" class="Symbol"
  >:</a
  ><a name="5253"
  > </a
  ><a name="5254" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="5258"
  >  </a
  ><a name="5260" class="Symbol"
  >&#8594;</a
  ><a name="5261"
  > </a
  ><a name="5262" class="Symbol"
  >{</a
  ><a name="5263" href="Session.html#5263" class="Bound"
  >I</a
  ><a name="5264"
  > </a
  ><a name="5265" href="Session.html#5265" class="Bound"
  >O</a
  ><a name="5266"
  > </a
  ><a name="5267" class="Symbol"
  >:</a
  ><a name="5268"
  > </a
  ><a name="5269" class="PrimitiveType"
  >Set</a
  ><a name="5272" class="Symbol"
  >}(</a
  ><a name="5274" href="Session.html#5274" class="Bound"
  >S</a
  ><a name="5275"
  > </a
  ><a name="5276" class="Symbol"
  >:</a
  ><a name="5277"
  > </a
  ><a name="5278" class="PrimitiveType"
  >Set</a
  ><a name="5281" class="Symbol"
  >)(</a
  ><a name="5283" href="Session.html#5283" class="Bound"
  >T</a
  ><a name="5284"
  > </a
  ><a name="5285" class="Symbol"
  >:</a
  ><a name="5286"
  > </a
  ><a name="5287" href="Session.html#5263" class="Bound"
  >I</a
  ><a name="5288"
  > </a
  ><a name="5289" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="5290"
  > </a
  ><a name="5291" href="Session.html#5274" class="Bound"
  >S</a
  ><a name="5292" class="Symbol"
  >)</a
  ><a name="5293"
  >    </a
  ><a name="5297" class="Symbol"
  >&#8594;</a
  ><a name="5298"
  > </a
  ><a name="5299" href="Session.html#5263" class="Bound"
  >I</a
  ><a name="5300"
  > </a
  ><a name="5301" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="5302"
  > </a
  ><a name="5303" href="Session.html#5265" class="Bound"
  >O</a
  ><a name="5304"
  >
</a
  ><a name="5305" href="Session.html#5305" class="Function Operator"
  >[_]&#931;^</a
  ><a name="5310"
  >  </a
  ><a name="5312" href="Session.html#5312" class="Function Operator"
  >[_]&#928;^</a
  ><a name="5317"
  >  </a
  ><a name="5319" class="Symbol"
  >:</a
  ><a name="5320"
  > </a
  ><a name="5321" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="5325"
  >  </a
  ><a name="5327" class="Symbol"
  >&#8594;</a
  ><a name="5328"
  > </a
  ><a name="5329" class="Symbol"
  >{</a
  ><a name="5330" href="Session.html#5330" class="Bound"
  >I</a
  ><a name="5331"
  > </a
  ><a name="5332" href="Session.html#5332" class="Bound"
  >O</a
  ><a name="5333"
  > </a
  ><a name="5334" class="Symbol"
  >:</a
  ><a name="5335"
  > </a
  ><a name="5336" class="PrimitiveType"
  >Set</a
  ><a name="5339" class="Symbol"
  >}(</a
  ><a name="5341" href="Session.html#5341" class="Bound"
  >S</a
  ><a name="5342"
  > </a
  ><a name="5343" class="Symbol"
  >:</a
  ><a name="5344"
  > </a
  ><a name="5345" class="PrimitiveType"
  >Set</a
  ><a name="5348" class="Symbol"
  >)(</a
  ><a name="5350" href="Session.html#5350" class="Bound"
  >T</a
  ><a name="5351"
  > </a
  ><a name="5352" class="Symbol"
  >:</a
  ><a name="5353"
  > </a
  ><a name="5354" href="Session.html#5341" class="Bound"
  >S</a
  ><a name="5355"
  > </a
  ><a name="5356" class="Symbol"
  >&#8594;</a
  ><a name="5357"
  > </a
  ><a name="5358" href="Session.html#3769" class="Function"
  >De</a
  ><a name="5360"
  > </a
  ><a name="5361" href="Session.html#5330" class="Bound"
  >I</a
  ><a name="5362" class="Symbol"
  >)</a
  ><a name="5363"
  > </a
  ><a name="5364" class="Symbol"
  >&#8594;</a
  ><a name="5365"
  > </a
  ><a name="5366" href="Session.html#5330" class="Bound"
  >I</a
  ><a name="5367"
  > </a
  ><a name="5368" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="5369"
  > </a
  ><a name="5370" href="Session.html#5332" class="Bound"
  >O</a
  ><a name="5371"
  >
</a
  ><a name="5372" href="Session.html#5372" class="Function Operator"
  >_[_]&#8855;_</a
  ><a name="5378"
  > </a
  ><a name="5379" href="Session.html#5379" class="Function Operator"
  >_[_]&#8523;_</a
  ><a name="5385"
  > </a
  ><a name="5386" class="Symbol"
  >:</a
  ><a name="5387"
  > </a
  ><a name="5388" href="Session.html#3827" class="Function"
  >Entry</a
  ><a name="5393"
  > </a
  ><a name="5394" class="Symbol"
  >&#8594;</a
  ><a name="5395"
  > </a
  ><a name="5396" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="5400"
  > </a
  ><a name="5401" class="Symbol"
  >&#8594;</a
  ><a name="5402"
  > </a
  ><a name="5403" class="Symbol"
  >{</a
  ><a name="5404" href="Session.html#5404" class="Bound"
  >I</a
  ><a name="5405"
  > </a
  ><a name="5406" href="Session.html#5406" class="Bound"
  >O</a
  ><a name="5407"
  > </a
  ><a name="5408" class="Symbol"
  >:</a
  ><a name="5409"
  > </a
  ><a name="5410" class="PrimitiveType"
  >Set</a
  ><a name="5413" class="Symbol"
  >}</a
  ><a name="5414"
  > </a
  ><a name="5415" class="Symbol"
  >&#8594;</a
  ><a name="5416"
  > </a
  ><a name="5417" href="Session.html#5404" class="Bound"
  >I</a
  ><a name="5418"
  > </a
  ><a name="5419" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="5420"
  > </a
  ><a name="5421" href="Session.html#5406" class="Bound"
  >O</a
  ><a name="5422"
  >         </a
  ><a name="5431" class="Symbol"
  >&#8594;</a
  ><a name="5432"
  > </a
  ><a name="5433" href="Session.html#5404" class="Bound"
  >I</a
  ><a name="5434"
  > </a
  ><a name="5435" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="5436"
  > </a
  ><a name="5437" href="Session.html#5406" class="Bound"
  >O</a
  ><a name="5438"
  >
</a
  ><a name="5439" href="Session.html#5439" class="Function Operator"
  >[_]&#161;_</a
  ><a name="5444"
  >  </a
  ><a name="5446" href="Session.html#5446" class="Function Operator"
  >[_]&#191;_</a
  ><a name="5451"
  >  </a
  ><a name="5453" class="Symbol"
  >:</a
  ><a name="5454"
  > </a
  ><a name="5455" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="5459"
  >  </a
  ><a name="5461" class="Symbol"
  >&#8594;</a
  ><a name="5462"
  > </a
  ><a name="5463" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="5467"
  >  </a
  ><a name="5469" class="Symbol"
  >&#8594;</a
  ><a name="5470"
  > </a
  ><a name="5471" class="Symbol"
  >{</a
  ><a name="5472" href="Session.html#5472" class="Bound"
  >I</a
  ><a name="5473"
  > </a
  ><a name="5474" href="Session.html#5474" class="Bound"
  >O</a
  ><a name="5475"
  > </a
  ><a name="5476" class="Symbol"
  >:</a
  ><a name="5477"
  > </a
  ><a name="5478" class="PrimitiveType"
  >Set</a
  ><a name="5481" class="Symbol"
  >}</a
  ><a name="5482"
  >                </a
  ><a name="5498" class="Symbol"
  >&#8594;</a
  ><a name="5499"
  > </a
  ><a name="5500" href="Session.html#5472" class="Bound"
  >I</a
  ><a name="5501"
  > </a
  ><a name="5502" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="5503"
  > </a
  ><a name="5504" href="Session.html#5474" class="Bound"
  >O</a
  ><a name="5505"
  >
</a
  ><a name="5506" href="Session.html#5238" class="Function Operator"
  >[</a
  ><a name="5507"
  > </a
  ><a name="5508" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5509"
  > </a
  ><a name="5510" href="Session.html#5238" class="Function Operator"
  >]&#931;</a
  ><a name="5512"
  >     </a
  ><a name="5517" class="Symbol"
  >=</a
  ><a name="5518"
  > </a
  ><a name="5519" href="Session.html#4042" class="InductiveConstructor"
  >`&#931;</a
  ><a name="5521"
  >
</a
  ><a name="5522" href="Session.html#5238" class="Function Operator"
  >[</a
  ><a name="5523"
  > </a
  ><a name="5524" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5525"
  > </a
  ><a name="5526" href="Session.html#5238" class="Function Operator"
  >]&#931;</a
  ><a name="5528"
  >     </a
  ><a name="5533" class="Symbol"
  >=</a
  ><a name="5534"
  > </a
  ><a name="5535" href="Session.html#4045" class="InductiveConstructor"
  >`&#928;</a
  ><a name="5537"
  >
</a
  ><a name="5538" href="Session.html#5245" class="Function Operator"
  >[</a
  ><a name="5539"
  > </a
  ><a name="5540" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5541"
  > </a
  ><a name="5542" href="Session.html#5245" class="Function Operator"
  >]&#928;</a
  ><a name="5544"
  >     </a
  ><a name="5549" class="Symbol"
  >=</a
  ><a name="5550"
  > </a
  ><a name="5551" href="Session.html#4045" class="InductiveConstructor"
  >`&#928;</a
  ><a name="5553"
  > 
</a
  ><a name="5555" href="Session.html#5245" class="Function Operator"
  >[</a
  ><a name="5556"
  > </a
  ><a name="5557" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5558"
  > </a
  ><a name="5559" href="Session.html#5245" class="Function Operator"
  >]&#928;</a
  ><a name="5561"
  >     </a
  ><a name="5566" class="Symbol"
  >=</a
  ><a name="5567"
  > </a
  ><a name="5568" href="Session.html#4042" class="InductiveConstructor"
  >`&#931;</a
  ><a name="5570"
  > 
</a
  ><a name="5572" href="Session.html#5305" class="Function Operator"
  >[</a
  ><a name="5573"
  > </a
  ><a name="5574" href="Session.html#5574" class="Bound"
  >s</a
  ><a name="5575"
  > </a
  ><a name="5576" href="Session.html#5305" class="Function Operator"
  >]&#931;^</a
  ><a name="5579"
  > </a
  ><a name="5580" href="Session.html#5580" class="Bound"
  >S</a
  ><a name="5581"
  > </a
  ><a name="5582" href="Session.html#5582" class="Bound"
  >T</a
  ><a name="5583"
  > </a
  ><a name="5584" class="Symbol"
  >=</a
  ><a name="5585"
  > </a
  ><a name="5586" href="Session.html#5238" class="Function Operator"
  >[</a
  ><a name="5587"
  > </a
  ><a name="5588" href="Session.html#5574" class="Bound"
  >s</a
  ><a name="5589"
  > </a
  ><a name="5590" href="Session.html#5238" class="Function Operator"
  >]&#931;</a
  ><a name="5592"
  > </a
  ><a name="5593" href="Session.html#5580" class="Bound"
  >S</a
  ><a name="5594"
  > </a
  ><a name="5595" class="Symbol"
  >(</a
  ><a name="5596" href="Session.html#4162" class="InductiveConstructor"
  >`^</a
  ><a name="5598"
  > </a
  ><a name="5599" href="Session.html#5582" class="Bound"
  >T</a
  ><a name="5600" class="Symbol"
  >)</a
  ><a name="5601"
  >
</a
  ><a name="5602" href="Session.html#5312" class="Function Operator"
  >[</a
  ><a name="5603"
  > </a
  ><a name="5604" href="Session.html#5604" class="Bound"
  >s</a
  ><a name="5605"
  > </a
  ><a name="5606" href="Session.html#5312" class="Function Operator"
  >]&#928;^</a
  ><a name="5609"
  > </a
  ><a name="5610" href="Session.html#5610" class="Bound"
  >S</a
  ><a name="5611"
  > </a
  ><a name="5612" href="Session.html#5612" class="Bound"
  >T</a
  ><a name="5613"
  > </a
  ><a name="5614" class="Symbol"
  >=</a
  ><a name="5615"
  > </a
  ><a name="5616" href="Session.html#5245" class="Function Operator"
  >[</a
  ><a name="5617"
  > </a
  ><a name="5618" href="Session.html#5604" class="Bound"
  >s</a
  ><a name="5619"
  > </a
  ><a name="5620" href="Session.html#5245" class="Function Operator"
  >]&#928;</a
  ><a name="5622"
  > </a
  ><a name="5623" href="Session.html#5610" class="Bound"
  >S</a
  ><a name="5624"
  > </a
  ><a name="5625" class="Symbol"
  >(</a
  ><a name="5626" href="Session.html#4162" class="InductiveConstructor"
  >`^</a
  ><a name="5628"
  > </a
  ><a name="5629" href="Session.html#5612" class="Bound"
  >T</a
  ><a name="5630" class="Symbol"
  >)</a
  ><a name="5631"
  >
</a
  ><a name="5632" href="Session.html#5632" class="Bound"
  >L</a
  ><a name="5633"
  > </a
  ><a name="5634" href="Session.html#5372" class="Function Operator"
  >[</a
  ><a name="5635"
  > </a
  ><a name="5636" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5637"
  > </a
  ><a name="5638" href="Session.html#5372" class="Function Operator"
  >]&#8855;</a
  ><a name="5640"
  > </a
  ><a name="5641" href="Session.html#5641" class="Bound"
  >R</a
  ><a name="5642"
  > </a
  ><a name="5643" class="Symbol"
  >=</a
  ><a name="5644"
  > </a
  ><a name="5645" href="Session.html#5632" class="Bound"
  >L</a
  ><a name="5646"
  > </a
  ><a name="5647" href="Session.html#4271" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="5648"
  > </a
  ><a name="5649" href="Session.html#5641" class="Bound"
  >R</a
  ><a name="5650"
  >
</a
  ><a name="5651" href="Session.html#5651" class="Bound"
  >L</a
  ><a name="5652"
  > </a
  ><a name="5653" href="Session.html#5372" class="Function Operator"
  >[</a
  ><a name="5654"
  > </a
  ><a name="5655" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5656"
  > </a
  ><a name="5657" href="Session.html#5372" class="Function Operator"
  >]&#8855;</a
  ><a name="5659"
  > </a
  ><a name="5660" href="Session.html#5660" class="Bound"
  >R</a
  ><a name="5661"
  > </a
  ><a name="5662" class="Symbol"
  >=</a
  ><a name="5663"
  > </a
  ><a name="5664" href="Session.html#5651" class="Bound"
  >L</a
  ><a name="5665"
  > </a
  ><a name="5666" href="Session.html#4275" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="5667"
  > </a
  ><a name="5668" href="Session.html#5660" class="Bound"
  >R</a
  ><a name="5669"
  >
</a
  ><a name="5670" href="Session.html#5670" class="Bound"
  >L</a
  ><a name="5671"
  > </a
  ><a name="5672" href="Session.html#5379" class="Function Operator"
  >[</a
  ><a name="5673"
  > </a
  ><a name="5674" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5675"
  > </a
  ><a name="5676" href="Session.html#5379" class="Function Operator"
  >]&#8523;</a
  ><a name="5678"
  > </a
  ><a name="5679" href="Session.html#5679" class="Bound"
  >R</a
  ><a name="5680"
  > </a
  ><a name="5681" class="Symbol"
  >=</a
  ><a name="5682"
  > </a
  ><a name="5683" href="Session.html#5670" class="Bound"
  >L</a
  ><a name="5684"
  > </a
  ><a name="5685" href="Session.html#4275" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="5686"
  > </a
  ><a name="5687" href="Session.html#5679" class="Bound"
  >R</a
  ><a name="5688"
  >
</a
  ><a name="5689" href="Session.html#5689" class="Bound"
  >L</a
  ><a name="5690"
  > </a
  ><a name="5691" href="Session.html#5379" class="Function Operator"
  >[</a
  ><a name="5692"
  > </a
  ><a name="5693" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5694"
  > </a
  ><a name="5695" href="Session.html#5379" class="Function Operator"
  >]&#8523;</a
  ><a name="5697"
  > </a
  ><a name="5698" href="Session.html#5698" class="Bound"
  >R</a
  ><a name="5699"
  > </a
  ><a name="5700" class="Symbol"
  >=</a
  ><a name="5701"
  > </a
  ><a name="5702" href="Session.html#5689" class="Bound"
  >L</a
  ><a name="5703"
  > </a
  ><a name="5704" href="Session.html#4271" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="5705"
  > </a
  ><a name="5706" href="Session.html#5698" class="Bound"
  >R</a
  ><a name="5707"
  >
</a
  ><a name="5708" href="Session.html#5439" class="Function Operator"
  >[</a
  ><a name="5709"
  > </a
  ><a name="5710" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5711"
  > </a
  ><a name="5712" href="Session.html#5439" class="Function Operator"
  >]&#161;</a
  ><a name="5714"
  > </a
  ><a name="5715" href="Session.html#5715" class="Bound"
  >F</a
  ><a name="5716"
  >   </a
  ><a name="5719" class="Symbol"
  >=</a
  ><a name="5720"
  > </a
  ><a name="5721" href="Session.html#4369" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="5722"
  > </a
  ><a name="5723" href="Session.html#5715" class="Bound"
  >F</a
  ><a name="5724"
  >    
</a
  ><a name="5729" href="Session.html#5439" class="Function Operator"
  >[</a
  ><a name="5730"
  > </a
  ><a name="5731" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5732"
  > </a
  ><a name="5733" href="Session.html#5439" class="Function Operator"
  >]&#161;</a
  ><a name="5735"
  > </a
  ><a name="5736" href="Session.html#5736" class="Bound"
  >F</a
  ><a name="5737"
  >   </a
  ><a name="5740" class="Symbol"
  >=</a
  ><a name="5741"
  > </a
  ><a name="5742" href="Session.html#4372" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="5743"
  > </a
  ><a name="5744" href="Session.html#5736" class="Bound"
  >F</a
  ><a name="5745"
  >    
</a
  ><a name="5750" href="Session.html#5446" class="Function Operator"
  >[</a
  ><a name="5751"
  > </a
  ><a name="5752" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="5753"
  > </a
  ><a name="5754" href="Session.html#5446" class="Function Operator"
  >]&#191;</a
  ><a name="5756"
  > </a
  ><a name="5757" href="Session.html#5757" class="Bound"
  >F</a
  ><a name="5758"
  >   </a
  ><a name="5761" class="Symbol"
  >=</a
  ><a name="5762"
  > </a
  ><a name="5763" href="Session.html#4372" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="5764"
  > </a
  ><a name="5765" href="Session.html#5757" class="Bound"
  >F</a
  ><a name="5766"
  >     
</a
  ><a name="5772" href="Session.html#5446" class="Function Operator"
  >[</a
  ><a name="5773"
  > </a
  ><a name="5774" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="5775"
  > </a
  ><a name="5776" href="Session.html#5446" class="Function Operator"
  >]&#191;</a
  ><a name="5778"
  > </a
  ><a name="5779" href="Session.html#5779" class="Bound"
  >F</a
  ><a name="5780"
  >   </a
  ><a name="5783" class="Symbol"
  >=</a
  ><a name="5784"
  > </a
  ><a name="5785" href="Session.html#4369" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="5786"
  > </a
  ><a name="5787" href="Session.html#5779" class="Bound"
  >F</a
  ><a name="5788"
  ></pre>
<h3 id="contexts">Contexts</h3>
<p>A context is a simple list of entries, i.e. codes paired with an optional side. Absence of the side corresponds to the session not being started yet: in this situation we say that the channel is &quot;new&quot;.</p>
<pre></a
  ><a name="6031" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="6033"
  > </a
  ><a name="6034" class="Symbol"
  >=</a
  ><a name="6035"
  > </a
  ><a name="6036" href="Data.List.html#659" class="Datatype"
  >List</a
  ><a name="6040"
  > </a
  ><a name="6041" href="Session.html#3827" class="Function"
  >Entry</a
  ><a name="6046"
  ></pre>
<p><code>is¿</code> means &quot;is it safe to duplicate this entry?&quot;.</p>
<pre></a
  ><a name="6124" href="Session.html#6124" class="Function"
  >is&#191;</a
  ><a name="6127"
  > </a
  ><a name="6128" class="Symbol"
  >:</a
  ><a name="6129"
  > </a
  ><a name="6130" href="Session.html#3827" class="Function"
  >Entry</a
  ><a name="6135"
  > </a
  ><a name="6136" class="Symbol"
  >&#8594;</a
  ><a name="6137"
  > </a
  ><a name="6138" class="PrimitiveType"
  >Set</a
  ><a name="6141"
  >
</a
  ><a name="6142" href="Session.html#6124" class="Function"
  >is&#191;</a
  ><a name="6145"
  > </a
  ><a name="6146" class="Symbol"
  >(</a
  ><a name="6147" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6148"
  > </a
  ><a name="6149" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="6150"
  > </a
  ><a name="6151" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6152"
  > </a
  ><a name="6153" class="Symbol"
  >(_</a
  ><a name="6155"
  > </a
  ><a name="6156" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6157"
  > </a
  ><a name="6158" class="Symbol"
  >_</a
  ><a name="6159"
  > </a
  ><a name="6160" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6161"
  > </a
  ><a name="6162" href="Session.html#4372" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="6163"
  > </a
  ><a name="6164" href="Session.html#6164" class="Bound"
  >F</a
  ><a name="6165" class="Symbol"
  >))</a
  ><a name="6167"
  > </a
  ><a name="6168" class="Symbol"
  >=</a
  ><a name="6169"
  > </a
  ><a name="6170" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="6171"
  >
</a
  ><a name="6172" href="Session.html#6124" class="Function"
  >is&#191;</a
  ><a name="6175"
  > </a
  ><a name="6176" class="Symbol"
  >(</a
  ><a name="6177" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6178"
  > </a
  ><a name="6179" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="6180"
  > </a
  ><a name="6181" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6182"
  > </a
  ><a name="6183" class="Symbol"
  >(_</a
  ><a name="6185"
  > </a
  ><a name="6186" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6187"
  > </a
  ><a name="6188" class="Symbol"
  >_</a
  ><a name="6189"
  > </a
  ><a name="6190" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6191"
  > </a
  ><a name="6192" href="Session.html#4369" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="6193"
  > </a
  ><a name="6194" href="Session.html#6194" class="Bound"
  >F</a
  ><a name="6195" class="Symbol"
  >))</a
  ><a name="6197"
  > </a
  ><a name="6198" class="Symbol"
  >=</a
  ><a name="6199"
  > </a
  ><a name="6200" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="6201"
  >
</a
  ><a name="6202" href="Session.html#6124" class="Function"
  >is&#191;</a
  ><a name="6205"
  >  </a
  ><a name="6207" class="Symbol"
  >_</a
  ><a name="6208"
  >                    </a
  ><a name="6228" class="Symbol"
  >=</a
  ><a name="6229"
  > </a
  ><a name="6230" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="6231"
  ></pre>
<p>To construct a server we must check (at compile time) that it will be safe to duplicate all the channels that its runtime copies will have access to: <code>All¿</code> is the predicate over contexts which corresponds to this condition.</p>
<pre></a
  ><a name="6483" href="Session.html#6483" class="Function"
  >All&#191;</a
  ><a name="6487"
  > </a
  ><a name="6488" class="Symbol"
  >:</a
  ><a name="6489"
  > </a
  ><a name="6490" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="6492"
  > </a
  ><a name="6493" class="Symbol"
  >&#8594;</a
  ><a name="6494"
  > </a
  ><a name="6495" class="PrimitiveType"
  >Set</a
  ><a name="6498"
  > </a
  ><a name="6499" class="Symbol"
  >_</a
  ><a name="6500"
  >
</a
  ><a name="6501" href="Session.html#6483" class="Function"
  >All&#191;</a
  ><a name="6505"
  > </a
  ><a name="6506" class="Symbol"
  >=</a
  ><a name="6507"
  > </a
  ><a name="6508" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="6511"
  > </a
  ><a name="6512" href="Session.html#6124" class="Function"
  >is&#191;</a
  ><a name="6515"
  ></pre>
<h3 id="splitting-contexts">Splitting contexts</h3>
<p>We need to define what it means to split an (input) context in two.</p>
<pre></a
  ><a name="6634" class="Keyword"
  >data</a
  ><a name="6638"
  > </a
  ><a name="6639" href="Session.html#6639" class="Datatype"
  >SplitNew</a
  ><a name="6647"
  > </a
  ><a name="6648" class="Symbol"
  >:</a
  ><a name="6649"
  > </a
  ><a name="6650" class="PrimitiveType"
  >Set</a
  ><a name="6653"
  > </a
  ><a name="6654" class="Keyword"
  >where</a
  ><a name="6659"
  > 
  </a
  ><a name="6663" href="Session.html#6663" class="InductiveConstructor"
  >+</a
  ><a name="6664"
  > </a
  ><a name="6665" href="Session.html#6665" class="InductiveConstructor"
  >-</a
  ><a name="6666"
  > </a
  ><a name="6667" href="Session.html#6667" class="InductiveConstructor"
  >+-</a
  ><a name="6669"
  > </a
  ><a name="6670" href="Session.html#6670" class="InductiveConstructor"
  >-+</a
  ><a name="6672"
  > </a
  ><a name="6673" class="Symbol"
  >:</a
  ><a name="6674"
  > </a
  ><a name="6675" href="Session.html#6639" class="Datatype"
  >SplitNew</a
  ><a name="6683"
  >

</a
  ><a name="6685" href="Session.html#6685" class="Function"
  >Split</a
  ><a name="6690"
  > </a
  ><a name="6691" class="Symbol"
  >:</a
  ><a name="6692"
  > </a
  ><a name="6693" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="6695"
  > </a
  ><a name="6696" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="6700"
  > </a
  ><a name="6701" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6702"
  > </a
  ><a name="6703" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="6707"
  > </a
  ><a name="6708" class="Symbol"
  >&#8594;</a
  ><a name="6709"
  > </a
  ><a name="6710" class="PrimitiveType"
  >Set</a
  ><a name="6713"
  >
</a
  ><a name="6714" href="Session.html#6685" class="Function"
  >Split</a
  ><a name="6719"
  > </a
  ><a name="6720" class="Symbol"
  >(</a
  ><a name="6721" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6722"
  > </a
  ><a name="6723" class="Symbol"
  >_</a
  ><a name="6724"
  > </a
  ><a name="6725" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6726"
  > </a
  ><a name="6727" href="Session.html#6727" class="Bound"
  >x</a
  ><a name="6728" class="Symbol"
  >)</a
  ><a name="6729"
  > </a
  ><a name="6730" class="Symbol"
  >=</a
  ><a name="6731"
  > </a
  ><a name="6732" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="6736"
  >
</a
  ><a name="6737" href="Session.html#6685" class="Function"
  >Split</a
  ><a name="6742"
  > </a
  ><a name="6743" class="Symbol"
  >(</a
  ><a name="6744" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6745"
  >   </a
  ><a name="6748" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6749"
  > </a
  ><a name="6750" href="Session.html#6750" class="Bound"
  >x</a
  ><a name="6751" class="Symbol"
  >)</a
  ><a name="6752"
  > </a
  ><a name="6753" class="Symbol"
  >=</a
  ><a name="6754"
  > </a
  ><a name="6755" href="Session.html#6639" class="Datatype"
  >SplitNew</a
  ><a name="6763"
  >

</a
  ><a name="6765" href="Session.html#6765" class="Function"
  >split</a
  ><a name="6770"
  > </a
  ><a name="6771" class="Symbol"
  >:</a
  ><a name="6772"
  > </a
  ><a name="6773" class="Symbol"
  >(</a
  ><a name="6774" href="Session.html#6774" class="Bound"
  >&#964;</a
  ><a name="6775"
  > </a
  ><a name="6776" class="Symbol"
  >:</a
  ><a name="6777"
  > </a
  ><a name="6778" href="Data.Maybe.Core.html#315" class="Datatype"
  >1+</a
  ><a name="6780"
  > </a
  ><a name="6781" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="6785"
  > </a
  ><a name="6786" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6787"
  > </a
  ><a name="6788" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="6792" class="Symbol"
  >)</a
  ><a name="6793"
  > </a
  ><a name="6794" class="Symbol"
  >&#8594;</a
  ><a name="6795"
  > </a
  ><a name="6796" href="Session.html#6685" class="Function"
  >Split</a
  ><a name="6801"
  > </a
  ><a name="6802" href="Session.html#6774" class="Bound"
  >&#964;</a
  ><a name="6803"
  > </a
  ><a name="6804" class="Symbol"
  >&#8594;</a
  ><a name="6805"
  > </a
  ><a name="6806" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="6808"
  > </a
  ><a name="6809" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6810"
  > </a
  ><a name="6811" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="6813"
  > </a
  ><a name="6814" class="Symbol"
  >&#8594;</a
  ><a name="6815"
  > </a
  ><a name="6816" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="6818"
  > </a
  ><a name="6819" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="6820"
  > </a
  ><a name="6821" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="6823"
  >
</a
  ><a name="6824" href="Session.html#6765" class="Function"
  >split</a
  ><a name="6829"
  > </a
  ><a name="6830" class="Symbol"
  >(</a
  ><a name="6831" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6832"
  > </a
  ><a name="6833" href="Session.html#6833" class="Bound"
  >s</a
  ><a name="6834"
  > </a
  ><a name="6835" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6836"
  > </a
  ><a name="6837" href="Session.html#6837" class="Bound"
  >C</a
  ><a name="6838" class="Symbol"
  >)</a
  ><a name="6839"
  >  </a
  ><a name="6841" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="6842"
  > </a
  ><a name="6843" class="Symbol"
  >(</a
  ><a name="6844" href="Session.html#6844" class="Bound"
  >L</a
  ><a name="6845"
  > </a
  ><a name="6846" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6847"
  > </a
  ><a name="6848" href="Session.html#6848" class="Bound"
  >R</a
  ><a name="6849" class="Symbol"
  >)</a
  ><a name="6850"
  > </a
  ><a name="6851" class="Symbol"
  >=</a
  ><a name="6852"
  > </a
  ><a name="6853" class="Symbol"
  >(</a
  ><a name="6854" href="Session.html#6844" class="Bound"
  >L</a
  ><a name="6855"
  > </a
  ><a name="6856" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6857"
  > </a
  ><a name="6858" class="Symbol"
  >(</a
  ><a name="6859" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6860"
  > </a
  ><a name="6861" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="6862"
  > </a
  ><a name="6863" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6864"
  > </a
  ><a name="6865" href="Session.html#6837" class="Bound"
  >C</a
  ><a name="6866" class="Symbol"
  >))</a
  ><a name="6868"
  > </a
  ><a name="6869" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6870"
  >  </a
  ><a name="6872" href="Session.html#6848" class="Bound"
  >R</a
  ><a name="6873"
  >
</a
  ><a name="6874" href="Session.html#6765" class="Function"
  >split</a
  ><a name="6879"
  > </a
  ><a name="6880" class="Symbol"
  >(</a
  ><a name="6881" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6882"
  > </a
  ><a name="6883" href="Session.html#6883" class="Bound"
  >s</a
  ><a name="6884"
  > </a
  ><a name="6885" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6886"
  > </a
  ><a name="6887" href="Session.html#6887" class="Bound"
  >C</a
  ><a name="6888" class="Symbol"
  >)</a
  ><a name="6889"
  >  </a
  ><a name="6891" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="6892"
  > </a
  ><a name="6893" class="Symbol"
  >(</a
  ><a name="6894" href="Session.html#6894" class="Bound"
  >L</a
  ><a name="6895"
  > </a
  ><a name="6896" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6897"
  > </a
  ><a name="6898" href="Session.html#6898" class="Bound"
  >R</a
  ><a name="6899" class="Symbol"
  >)</a
  ><a name="6900"
  > </a
  ><a name="6901" class="Symbol"
  >=</a
  ><a name="6902"
  >  </a
  ><a name="6904" href="Session.html#6894" class="Bound"
  >L</a
  ><a name="6905"
  >              </a
  ><a name="6919" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6920"
  > </a
  ><a name="6921" class="Symbol"
  >(</a
  ><a name="6922" href="Session.html#6898" class="Bound"
  >R</a
  ><a name="6923"
  > </a
  ><a name="6924" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6925"
  > </a
  ><a name="6926" class="Symbol"
  >(</a
  ><a name="6927" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="6928"
  > </a
  ><a name="6929" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="6930"
  > </a
  ><a name="6931" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6932"
  > </a
  ><a name="6933" href="Session.html#6887" class="Bound"
  >C</a
  ><a name="6934" class="Symbol"
  >))</a
  ><a name="6936"
  >
</a
  ><a name="6937" href="Session.html#6765" class="Function"
  >split</a
  ><a name="6942"
  > </a
  ><a name="6943" class="Symbol"
  >(</a
  ><a name="6944" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6945"
  >   </a
  ><a name="6948" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6949"
  > </a
  ><a name="6950" href="Session.html#6950" class="Bound"
  >C</a
  ><a name="6951" class="Symbol"
  >)</a
  ><a name="6952"
  >  </a
  ><a name="6954" href="Session.html#6663" class="InductiveConstructor"
  >+</a
  ><a name="6955"
  > </a
  ><a name="6956" class="Symbol"
  >(</a
  ><a name="6957" href="Session.html#6957" class="Bound"
  >L</a
  ><a name="6958"
  > </a
  ><a name="6959" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6960"
  > </a
  ><a name="6961" href="Session.html#6961" class="Bound"
  >R</a
  ><a name="6962" class="Symbol"
  >)</a
  ><a name="6963"
  > </a
  ><a name="6964" class="Symbol"
  >=</a
  ><a name="6965"
  > </a
  ><a name="6966" class="Symbol"
  >(</a
  ><a name="6967" href="Session.html#6957" class="Bound"
  >L</a
  ><a name="6968"
  > </a
  ><a name="6969" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="6970"
  > </a
  ><a name="6971" class="Symbol"
  >(</a
  ><a name="6972" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6973"
  >   </a
  ><a name="6976" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6977"
  > </a
  ><a name="6978" href="Session.html#6950" class="Bound"
  >C</a
  ><a name="6979" class="Symbol"
  >))</a
  ><a name="6981"
  > </a
  ><a name="6982" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6983"
  >  </a
  ><a name="6985" href="Session.html#6961" class="Bound"
  >R</a
  ><a name="6986"
  >
</a
  ><a name="6987" href="Session.html#6765" class="Function"
  >split</a
  ><a name="6992"
  > </a
  ><a name="6993" class="Symbol"
  >(</a
  ><a name="6994" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="6995"
  >   </a
  ><a name="6998" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="6999"
  > </a
  ><a name="7000" href="Session.html#7000" class="Bound"
  >C</a
  ><a name="7001" class="Symbol"
  >)</a
  ><a name="7002"
  >  </a
  ><a name="7004" href="Session.html#6665" class="InductiveConstructor"
  >-</a
  ><a name="7005"
  > </a
  ><a name="7006" class="Symbol"
  >(</a
  ><a name="7007" href="Session.html#7007" class="Bound"
  >L</a
  ><a name="7008"
  > </a
  ><a name="7009" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7010"
  > </a
  ><a name="7011" href="Session.html#7011" class="Bound"
  >R</a
  ><a name="7012" class="Symbol"
  >)</a
  ><a name="7013"
  > </a
  ><a name="7014" class="Symbol"
  >=</a
  ><a name="7015"
  >  </a
  ><a name="7017" href="Session.html#7007" class="Bound"
  >L</a
  ><a name="7018"
  >              </a
  ><a name="7032" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7033"
  > </a
  ><a name="7034" class="Symbol"
  >(</a
  ><a name="7035" href="Session.html#7011" class="Bound"
  >R</a
  ><a name="7036"
  > </a
  ><a name="7037" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7038"
  > </a
  ><a name="7039" class="Symbol"
  >(</a
  ><a name="7040" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="7041"
  >   </a
  ><a name="7044" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7045"
  > </a
  ><a name="7046" href="Session.html#7000" class="Bound"
  >C</a
  ><a name="7047" class="Symbol"
  >))</a
  ><a name="7049"
  >
</a
  ><a name="7050" href="Session.html#6765" class="Function"
  >split</a
  ><a name="7055"
  > </a
  ><a name="7056" class="Symbol"
  >(</a
  ><a name="7057" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="7058"
  >   </a
  ><a name="7061" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7062"
  > </a
  ><a name="7063" href="Session.html#7063" class="Bound"
  >C</a
  ><a name="7064" class="Symbol"
  >)</a
  ><a name="7065"
  > </a
  ><a name="7066" href="Session.html#6667" class="InductiveConstructor"
  >+-</a
  ><a name="7068"
  > </a
  ><a name="7069" class="Symbol"
  >(</a
  ><a name="7070" href="Session.html#7070" class="Bound"
  >L</a
  ><a name="7071"
  > </a
  ><a name="7072" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7073"
  > </a
  ><a name="7074" href="Session.html#7074" class="Bound"
  >R</a
  ><a name="7075" class="Symbol"
  >)</a
  ><a name="7076"
  > </a
  ><a name="7077" class="Symbol"
  >=</a
  ><a name="7078"
  > </a
  ><a name="7079" class="Symbol"
  >(</a
  ><a name="7080" href="Session.html#7070" class="Bound"
  >L</a
  ><a name="7081"
  > </a
  ><a name="7082" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7083"
  > </a
  ><a name="7084" class="Symbol"
  >(</a
  ><a name="7085" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="7086"
  > </a
  ><a name="7087" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="7088"
  > </a
  ><a name="7089" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7090"
  > </a
  ><a name="7091" href="Session.html#7063" class="Bound"
  >C</a
  ><a name="7092" class="Symbol"
  >))</a
  ><a name="7094"
  > </a
  ><a name="7095" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7096"
  > </a
  ><a name="7097" class="Symbol"
  >(</a
  ><a name="7098" href="Session.html#7074" class="Bound"
  >R</a
  ><a name="7099"
  > </a
  ><a name="7100" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7101"
  > </a
  ><a name="7102" class="Symbol"
  >(</a
  ><a name="7103" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="7104"
  > </a
  ><a name="7105" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="7106"
  > </a
  ><a name="7107" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7108"
  > </a
  ><a name="7109" href="Session.html#7063" class="Bound"
  >C</a
  ><a name="7110" class="Symbol"
  >))</a
  ><a name="7112"
  >
</a
  ><a name="7113" href="Session.html#6765" class="Function"
  >split</a
  ><a name="7118"
  > </a
  ><a name="7119" class="Symbol"
  >(</a
  ><a name="7120" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="7121"
  >   </a
  ><a name="7124" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7125"
  > </a
  ><a name="7126" href="Session.html#7126" class="Bound"
  >C</a
  ><a name="7127" class="Symbol"
  >)</a
  ><a name="7128"
  > </a
  ><a name="7129" href="Session.html#6670" class="InductiveConstructor"
  >-+</a
  ><a name="7131"
  > </a
  ><a name="7132" class="Symbol"
  >(</a
  ><a name="7133" href="Session.html#7133" class="Bound"
  >L</a
  ><a name="7134"
  > </a
  ><a name="7135" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7136"
  > </a
  ><a name="7137" href="Session.html#7137" class="Bound"
  >R</a
  ><a name="7138" class="Symbol"
  >)</a
  ><a name="7139"
  > </a
  ><a name="7140" class="Symbol"
  >=</a
  ><a name="7141"
  > </a
  ><a name="7142" class="Symbol"
  >(</a
  ><a name="7143" href="Session.html#7133" class="Bound"
  >L</a
  ><a name="7144"
  > </a
  ><a name="7145" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7146"
  > </a
  ><a name="7147" class="Symbol"
  >(</a
  ><a name="7148" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="7149"
  > </a
  ><a name="7150" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="7151"
  > </a
  ><a name="7152" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7153"
  > </a
  ><a name="7154" href="Session.html#7126" class="Bound"
  >C</a
  ><a name="7155" class="Symbol"
  >))</a
  ><a name="7157"
  > </a
  ><a name="7158" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7159"
  > </a
  ><a name="7160" class="Symbol"
  >(</a
  ><a name="7161" href="Session.html#7137" class="Bound"
  >R</a
  ><a name="7162"
  > </a
  ><a name="7163" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7164"
  > </a
  ><a name="7165" class="Symbol"
  >(</a
  ><a name="7166" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="7167"
  > </a
  ><a name="7168" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="7169"
  > </a
  ><a name="7170" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7171"
  > </a
  ><a name="7172" href="Session.html#7126" class="Bound"
  >C</a
  ><a name="7173" class="Symbol"
  >))</a
  ><a name="7175"
  ></pre>
<p>At <code>fork</code> time, if <code>Γ</code> is the input context, the user is asked to inhabit a <code>Splits Γ</code>, whose meaning as a pair of contexts is given by <code>splits</code>.</p>
<pre></a
  ><a name="7348" href="Session.html#7348" class="Function"
  >Splits</a
  ><a name="7354"
  > </a
  ><a name="7355" class="Symbol"
  >:</a
  ><a name="7356"
  > </a
  ><a name="7357" class="Symbol"
  >&#8704;</a
  ><a name="7358"
  > </a
  ><a name="7359" href="Session.html#7359" class="Bound"
  >&#915;</a
  ><a name="7360"
  > </a
  ><a name="7361" class="Symbol"
  >&#8594;</a
  ><a name="7362"
  > </a
  ><a name="7363" class="PrimitiveType"
  >Set</a
  ><a name="7366"
  > </a
  ><a name="7367" class="Symbol"
  >_</a
  ><a name="7368"
  >
</a
  ><a name="7369" href="Session.html#7348" class="Function"
  >Splits</a
  ><a name="7375"
  > </a
  ><a name="7376" class="Symbol"
  >=</a
  ><a name="7377"
  > </a
  ><a name="7378" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7381"
  > </a
  ><a name="7382" href="Session.html#6685" class="Function"
  >Split</a
  ><a name="7387"
  >

</a
  ><a name="7389" href="Session.html#7389" class="Function"
  >splits</a
  ><a name="7395"
  > </a
  ><a name="7396" class="Symbol"
  >:</a
  ><a name="7397"
  > </a
  ><a name="7398" class="Symbol"
  >&#8704;</a
  ><a name="7399"
  > </a
  ><a name="7400" class="Symbol"
  >{</a
  ><a name="7401" href="Session.html#7401" class="Bound"
  >&#915;</a
  ><a name="7402" class="Symbol"
  >}</a
  ><a name="7403"
  > </a
  ><a name="7404" class="Symbol"
  >&#8594;</a
  ><a name="7405"
  > </a
  ><a name="7406" href="Session.html#7348" class="Function"
  >Splits</a
  ><a name="7412"
  > </a
  ><a name="7413" href="Session.html#7401" class="Bound"
  >&#915;</a
  ><a name="7414"
  > </a
  ><a name="7415" class="Symbol"
  >&#8594;</a
  ><a name="7416"
  > </a
  ><a name="7417" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="7419"
  > </a
  ><a name="7420" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="7421"
  > </a
  ><a name="7422" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="7424"
  >
</a
  ><a name="7425" href="Session.html#7389" class="Function"
  >splits</a
  ><a name="7431"
  > </a
  ><a name="7432" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7434"
  >       </a
  ><a name="7441" class="Symbol"
  >=</a
  ><a name="7442"
  > </a
  ><a name="7443" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="7445"
  > </a
  ><a name="7446" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7447"
  > </a
  ><a name="7448" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="7450"
  >
</a
  ><a name="7451" href="Session.html#7389" class="Function"
  >splits</a
  ><a name="7457"
  > </a
  ><a name="7458" class="Symbol"
  >(</a
  ><a name="7459" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="7461"
  > </a
  ><a name="7462" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="7464"
  > </a
  ><a name="7465" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >s</a
  ><a name="7466" class="Symbol"
  >)</a
  ><a name="7467"
  > </a
  ><a name="7468" class="Symbol"
  >=</a
  ><a name="7469"
  > </a
  ><a name="7470" href="Session.html#6765" class="Function"
  >split</a
  ><a name="7475"
  > </a
  ><a name="7476" class="Symbol"
  >_</a
  ><a name="7477"
  > </a
  ><a name="7478" href="Session.html#7465" class="Bound"
  >s</a
  ><a name="7479"
  > </a
  ><a name="7480" class="Symbol"
  >(</a
  ><a name="7481" href="Session.html#7389" class="Function"
  >splits</a
  ><a name="7487"
  > </a
  ><a name="7488" href="Session.html#7459" class="Bound"
  >ds</a
  ><a name="7490" class="Symbol"
  >)</a
  ><a name="7491"
  ></pre>
<p><code>all-splits</code> is a generic functions which allows to lift <code>splits</code> to &quot;boxed&quot; predicates.</p>
<pre></a
  ><a name="7607" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="7617"
  > </a
  ><a name="7618" class="Symbol"
  >:</a
  ><a name="7619"
  > </a
  ><a name="7620" class="Symbol"
  >&#8704;</a
  ><a name="7621"
  > </a
  ><a name="7622" class="Symbol"
  >{</a
  ><a name="7623" href="Session.html#7623" class="Bound"
  >lP</a
  ><a name="7625" class="Symbol"
  >}{</a
  ><a name="7627" href="Session.html#7627" class="Bound"
  >P</a
  ><a name="7628"
  > </a
  ><a name="7629" class="Symbol"
  >:</a
  ><a name="7630"
  > </a
  ><a name="7631" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="7635"
  > </a
  ><a name="7636" class="Symbol"
  >&#8594;</a
  ><a name="7637"
  > </a
  ><a name="7638" class="PrimitiveType"
  >Set</a
  ><a name="7641"
  > </a
  ><a name="7642" href="Session.html#7623" class="Bound"
  >lP</a
  ><a name="7644" class="Symbol"
  >}{</a
  ><a name="7646" href="Session.html#7646" class="Bound"
  >&#915;</a
  ><a name="7647" class="Symbol"
  >}</a
  ><a name="7648"
  > </a
  ><a name="7649" class="Symbol"
  >&#8594;</a
  ><a name="7650"
  >
                     </a
  ><a name="7672" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7675"
  > </a
  ><a name="7676" class="Symbol"
  >(</a
  ><a name="7677" href="Session.html#7627" class="Bound"
  >P</a
  ><a name="7678"
  > </a
  ><a name="7679" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="7680"
  > </a
  ><a name="7681" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7684" class="Symbol"
  >)</a
  ><a name="7685"
  > </a
  ><a name="7686" href="Session.html#7646" class="Bound"
  >&#915;</a
  ><a name="7687"
  > </a
  ><a name="7688" class="Symbol"
  >&#8594;</a
  ><a name="7689"
  >
                </a
  ><a name="7706" class="Symbol"
  >(</a
  ><a name="7707" href="Session.html#7707" class="Bound"
  >d</a
  ><a name="7708"
  > </a
  ><a name="7709" class="Symbol"
  >:</a
  ><a name="7710"
  > </a
  ><a name="7711" href="Session.html#7348" class="Function"
  >Splits</a
  ><a name="7717"
  > </a
  ><a name="7718" href="Session.html#7646" class="Bound"
  >&#915;</a
  ><a name="7719" class="Symbol"
  >)</a
  ><a name="7720"
  >       </a
  ><a name="7727" class="Symbol"
  >&#8594;</a
  ><a name="7728"
  > 
                     </a
  ><a name="7751" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7754"
  > </a
  ><a name="7755" class="Symbol"
  >(</a
  ><a name="7756" href="Session.html#7627" class="Bound"
  >P</a
  ><a name="7757"
  > </a
  ><a name="7758" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="7759"
  > </a
  ><a name="7760" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7763" class="Symbol"
  >)</a
  ><a name="7764"
  > </a
  ><a name="7765" class="Symbol"
  >(</a
  ><a name="7766" href="Data.Product.html#525" class="Field"
  >fst</a
  ><a name="7769"
  > </a
  ><a name="7770" class="Symbol"
  >(</a
  ><a name="7771" href="Session.html#7389" class="Function"
  >splits</a
  ><a name="7777"
  > </a
  ><a name="7778" href="Session.html#7707" class="Bound"
  >d</a
  ><a name="7779" class="Symbol"
  >))</a
  ><a name="7781"
  >
                   </a
  ><a name="7801" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="7802"
  > </a
  ><a name="7803" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="7806"
  > </a
  ><a name="7807" class="Symbol"
  >(</a
  ><a name="7808" href="Session.html#7627" class="Bound"
  >P</a
  ><a name="7809"
  > </a
  ><a name="7810" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="7811"
  > </a
  ><a name="7812" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7815" class="Symbol"
  >)</a
  ><a name="7816"
  > </a
  ><a name="7817" class="Symbol"
  >(</a
  ><a name="7818" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="7821"
  > </a
  ><a name="7822" class="Symbol"
  >(</a
  ><a name="7823" href="Session.html#7389" class="Function"
  >splits</a
  ><a name="7829"
  > </a
  ><a name="7830" href="Session.html#7707" class="Bound"
  >d</a
  ><a name="7831" class="Symbol"
  >))</a
  ><a name="7833"
  >
</a
  ><a name="7834" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="7844"
  >                      </a
  ><a name="7866" href="Session.html#7866" class="Bound"
  >ps</a
  ><a name="7868"
  >       </a
  ><a name="7875" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7877"
  >         </a
  ><a name="7886" class="Symbol"
  >=</a
  ><a name="7887"
  >
  </a
  ><a name="7890" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7892"
  > </a
  ><a name="7893" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="7894"
  > </a
  ><a name="7895" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="7897"
  >
</a
  ><a name="7898" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="7908"
  > </a
  ><a name="7909" class="Symbol"
  >{</a
  ><a name="7910"
  >&#915; </a
  ><a name="7912" class="Symbol"
  >=</a
  ><a name="7913"
  > </a
  ><a name="7914" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="7915"
  > </a
  ><a name="7916" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="7917"
  > </a
  ><a name="7918" class="Symbol"
  >(</a
  ><a name="7919" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#949;</a
  ><a name="7920"
  >   </a
  ><a name="7923" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="7924"
  > </a
  ><a name="7925" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="7926" class="Symbol"
  >)}</a
  ><a name="7928"
  > </a
  ><a name="7929" class="Symbol"
  >(</a
  ><a name="7930" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="7932"
  > </a
  ><a name="7933" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="7935"
  > </a
  ><a name="7936" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="7937" class="Symbol"
  >)</a
  ><a name="7938"
  > </a
  ><a name="7939" class="Symbol"
  >(</a
  ><a name="7940" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="7942"
  > </a
  ><a name="7943" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="7945"
  >    </a
  ><a name="7949" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >+</a
  ><a name="7950" class="Symbol"
  >)</a
  ><a name="7951"
  > </a
  ><a name="7952" class="Symbol"
  >=</a
  ><a name="7953"
  >
  </a
  ><a name="7956" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="7961"
  > </a
  ><a name="7962" class="Symbol"
  >(</a
  ><a name="7963" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="7967"
  > </a
  ><a name="7968" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="7972"
  > </a
  ><a name="7973" href="Session.html#7936" class="Bound"
  >p</a
  ><a name="7974" class="Symbol"
  >)</a
  ><a name="7975"
  >  </a
  ><a name="7977" href="Function.html#1006" class="Function"
  >id</a
  ><a name="7979"
  >          </a
  ><a name="7989" class="Symbol"
  >(</a
  ><a name="7990" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="8000"
  > </a
  ><a name="8001" href="Session.html#7930" class="Bound"
  >ps</a
  ><a name="8003"
  > </a
  ><a name="8004" href="Session.html#7940" class="Bound"
  >ds</a
  ><a name="8006" class="Symbol"
  >)</a
  ><a name="8007"
  >
</a
  ><a name="8008" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="8018"
  > </a
  ><a name="8019" class="Symbol"
  >{</a
  ><a name="8020"
  >&#915; </a
  ><a name="8022" class="Symbol"
  >=</a
  ><a name="8023"
  > </a
  ><a name="8024" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="8025"
  > </a
  ><a name="8026" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8027"
  > </a
  ><a name="8028" class="Symbol"
  >(</a
  ><a name="8029" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#949;</a
  ><a name="8030"
  >   </a
  ><a name="8033" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="8034"
  > </a
  ><a name="8035" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="8036" class="Symbol"
  >)}</a
  ><a name="8038"
  > </a
  ><a name="8039" class="Symbol"
  >(</a
  ><a name="8040" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="8042"
  > </a
  ><a name="8043" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8045"
  > </a
  ><a name="8046" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="8047" class="Symbol"
  >)</a
  ><a name="8048"
  > </a
  ><a name="8049" class="Symbol"
  >(</a
  ><a name="8050" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="8052"
  > </a
  ><a name="8053" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8055"
  >    </a
  ><a name="8059" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >-</a
  ><a name="8060" class="Symbol"
  >)</a
  ><a name="8061"
  > </a
  ><a name="8062" class="Symbol"
  >=</a
  ><a name="8063"
  >
  </a
  ><a name="8066" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8071"
  >  </a
  ><a name="8073" href="Function.html#1006" class="Function"
  >id</a
  ><a name="8075"
  >          </a
  ><a name="8085" class="Symbol"
  >(</a
  ><a name="8086" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8090"
  > </a
  ><a name="8091" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8095"
  > </a
  ><a name="8096" href="Session.html#8046" class="Bound"
  >p</a
  ><a name="8097" class="Symbol"
  >)</a
  ><a name="8098"
  > </a
  ><a name="8099" class="Symbol"
  >(</a
  ><a name="8100" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="8110"
  > </a
  ><a name="8111" href="Session.html#8040" class="Bound"
  >ps</a
  ><a name="8113"
  > </a
  ><a name="8114" href="Session.html#8050" class="Bound"
  >ds</a
  ><a name="8116" class="Symbol"
  >)</a
  ><a name="8117"
  >
</a
  ><a name="8118" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="8128"
  > </a
  ><a name="8129" class="Symbol"
  >{</a
  ><a name="8130"
  >&#915; </a
  ><a name="8132" class="Symbol"
  >=</a
  ><a name="8133"
  > </a
  ><a name="8134" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="8135"
  > </a
  ><a name="8136" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8137"
  > </a
  ><a name="8138" class="Symbol"
  >(</a
  ><a name="8139" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#949;</a
  ><a name="8140"
  >   </a
  ><a name="8143" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="8144"
  > </a
  ><a name="8145" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="8146" class="Symbol"
  >)}</a
  ><a name="8148"
  > </a
  ><a name="8149" class="Symbol"
  >(</a
  ><a name="8150" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="8152"
  > </a
  ><a name="8153" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8155"
  > </a
  ><a name="8156" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="8157" class="Symbol"
  >)</a
  ><a name="8158"
  > </a
  ><a name="8159" class="Symbol"
  >(</a
  ><a name="8160" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="8162"
  > </a
  ><a name="8163" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8165"
  >   </a
  ><a name="8168" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >+-</a
  ><a name="8170" class="Symbol"
  >)</a
  ><a name="8171"
  > </a
  ><a name="8172" class="Symbol"
  >=</a
  ><a name="8173"
  > 
  </a
  ><a name="8177" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8182"
  > </a
  ><a name="8183" class="Symbol"
  >(</a
  ><a name="8184" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8188"
  > </a
  ><a name="8189" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8193"
  > </a
  ><a name="8194" href="Session.html#8156" class="Bound"
  >p</a
  ><a name="8195" class="Symbol"
  >)</a
  ><a name="8196"
  > </a
  ><a name="8197" class="Symbol"
  >(</a
  ><a name="8198" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8202"
  > </a
  ><a name="8203" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8207"
  > </a
  ><a name="8208" href="Session.html#8156" class="Bound"
  >p</a
  ><a name="8209" class="Symbol"
  >)</a
  ><a name="8210"
  > </a
  ><a name="8211" class="Symbol"
  >(</a
  ><a name="8212" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="8222"
  > </a
  ><a name="8223" href="Session.html#8150" class="Bound"
  >ps</a
  ><a name="8225"
  > </a
  ><a name="8226" href="Session.html#8160" class="Bound"
  >ds</a
  ><a name="8228" class="Symbol"
  >)</a
  ><a name="8229"
  >
</a
  ><a name="8230" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="8240"
  > </a
  ><a name="8241" class="Symbol"
  >{</a
  ><a name="8242"
  >&#915; </a
  ><a name="8244" class="Symbol"
  >=</a
  ><a name="8245"
  > </a
  ><a name="8246" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="8247"
  > </a
  ><a name="8248" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8249"
  > </a
  ><a name="8250" class="Symbol"
  >(</a
  ><a name="8251" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#949;</a
  ><a name="8252"
  >   </a
  ><a name="8255" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="8256"
  > </a
  ><a name="8257" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="8258" class="Symbol"
  >)}</a
  ><a name="8260"
  > </a
  ><a name="8261" class="Symbol"
  >(</a
  ><a name="8262" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="8264"
  > </a
  ><a name="8265" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8267"
  > </a
  ><a name="8268" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="8269" class="Symbol"
  >)</a
  ><a name="8270"
  > </a
  ><a name="8271" class="Symbol"
  >(</a
  ><a name="8272" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="8274"
  > </a
  ><a name="8275" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8277"
  >   </a
  ><a name="8280" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >-+</a
  ><a name="8282" class="Symbol"
  >)</a
  ><a name="8283"
  > </a
  ><a name="8284" class="Symbol"
  >=</a
  ><a name="8285"
  >
  </a
  ><a name="8288" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8293"
  > </a
  ><a name="8294" class="Symbol"
  >(</a
  ><a name="8295" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8299"
  > </a
  ><a name="8300" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8304"
  > </a
  ><a name="8305" href="Session.html#8268" class="Bound"
  >p</a
  ><a name="8306" class="Symbol"
  >)</a
  ><a name="8307"
  > </a
  ><a name="8308" class="Symbol"
  >(</a
  ><a name="8309" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8313"
  > </a
  ><a name="8314" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8318"
  > </a
  ><a name="8319" href="Session.html#8268" class="Bound"
  >p</a
  ><a name="8320" class="Symbol"
  >)</a
  ><a name="8321"
  > </a
  ><a name="8322" class="Symbol"
  >(</a
  ><a name="8323" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="8333"
  > </a
  ><a name="8334" href="Session.html#8262" class="Bound"
  >ps</a
  ><a name="8336"
  > </a
  ><a name="8337" href="Session.html#8272" class="Bound"
  >ds</a
  ><a name="8339" class="Symbol"
  >)</a
  ><a name="8340"
  >
</a
  ><a name="8341" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="8351"
  > </a
  ><a name="8352" class="Symbol"
  >{</a
  ><a name="8353"
  >&#915; </a
  ><a name="8355" class="Symbol"
  >=</a
  ><a name="8356"
  > </a
  ><a name="8357" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="8358"
  > </a
  ><a name="8359" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8360"
  > </a
  ><a name="8361" class="Symbol"
  >(</a
  ><a name="8362" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&gt;</a
  ><a name="8363"
  > </a
  ><a name="8364" href="Data.List.html#711" class="InductiveConstructor Operator"
  >_</a
  ><a name="8365"
  > </a
  ><a name="8366" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="8367"
  > </a
  ><a name="8368" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="8369" class="Symbol"
  >)}</a
  ><a name="8371"
  > </a
  ><a name="8372" class="Symbol"
  >(</a
  ><a name="8373" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="8375"
  > </a
  ><a name="8376" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8378"
  > </a
  ><a name="8379" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="8380" class="Symbol"
  >)</a
  ><a name="8381"
  > </a
  ><a name="8382" class="Symbol"
  >(</a
  ><a name="8383" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="8385"
  > </a
  ><a name="8386" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8388"
  >    </a
  ><a name="8392" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >+</a
  ><a name="8393" class="Symbol"
  >)</a
  ><a name="8394"
  > </a
  ><a name="8395" class="Symbol"
  >=</a
  ><a name="8396"
  > 
  </a
  ><a name="8400" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8405"
  > </a
  ><a name="8406" class="Symbol"
  >(</a
  ><a name="8407" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8411"
  > </a
  ><a name="8412" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8416"
  > </a
  ><a name="8417" href="Session.html#8379" class="Bound"
  >p</a
  ><a name="8418" class="Symbol"
  >)</a
  ><a name="8419"
  >  </a
  ><a name="8421" href="Function.html#1006" class="Function"
  >id</a
  ><a name="8423"
  >          </a
  ><a name="8433" class="Symbol"
  >(</a
  ><a name="8434" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="8444"
  > </a
  ><a name="8445" href="Session.html#8373" class="Bound"
  >ps</a
  ><a name="8447"
  > </a
  ><a name="8448" href="Session.html#8383" class="Bound"
  >ds</a
  ><a name="8450" class="Symbol"
  >)</a
  ><a name="8451"
  >
</a
  ><a name="8452" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="8462"
  > </a
  ><a name="8463" class="Symbol"
  >{</a
  ><a name="8464"
  >&#915; </a
  ><a name="8466" class="Symbol"
  >=</a
  ><a name="8467"
  > </a
  ><a name="8468" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#915;</a
  ><a name="8469"
  > </a
  ><a name="8470" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="8471"
  > </a
  ><a name="8472" class="Symbol"
  >(</a
  ><a name="8473" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&gt;</a
  ><a name="8474"
  > </a
  ><a name="8475" href="Data.List.html#711" class="InductiveConstructor Operator"
  >_</a
  ><a name="8476"
  > </a
  ><a name="8477" href="Data.List.html#711" class="InductiveConstructor Operator"
  >,</a
  ><a name="8478"
  > </a
  ><a name="8479" href="Data.List.html#711" class="InductiveConstructor Operator"
  >C</a
  ><a name="8480" class="Symbol"
  >)}</a
  ><a name="8482"
  > </a
  ><a name="8483" class="Symbol"
  >(</a
  ><a name="8484" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ps</a
  ><a name="8486"
  > </a
  ><a name="8487" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8489"
  > </a
  ><a name="8490" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >p</a
  ><a name="8491" class="Symbol"
  >)</a
  ><a name="8492"
  > </a
  ><a name="8493" class="Symbol"
  >(</a
  ><a name="8494" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >ds</a
  ><a name="8496"
  > </a
  ><a name="8497" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="8499"
  >    </a
  ><a name="8503" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >-</a
  ><a name="8504" class="Symbol"
  >)</a
  ><a name="8505"
  > </a
  ><a name="8506" class="Symbol"
  >=</a
  ><a name="8507"
  > 
  </a
  ><a name="8511" href="Data.Product.html#1877" class="Function"
  >&#931;.map</a
  ><a name="8516"
  >  </a
  ><a name="8518" href="Function.html#1006" class="Function"
  >id</a
  ><a name="8520"
  >          </a
  ><a name="8530" class="Symbol"
  >(</a
  ><a name="8531" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="8535"
  > </a
  ><a name="8536" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >_,&#775;_</a
  ><a name="8540"
  > </a
  ><a name="8541" href="Session.html#8490" class="Bound"
  >p</a
  ><a name="8542" class="Symbol"
  >)</a
  ><a name="8543"
  > </a
  ><a name="8544" class="Symbol"
  >(</a
  ><a name="8545" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="8555"
  > </a
  ><a name="8556" href="Session.html#8484" class="Bound"
  >ps</a
  ><a name="8558"
  > </a
  ><a name="8559" href="Session.html#8494" class="Bound"
  >ds</a
  ><a name="8561" class="Symbol"
  >)</a
  ><a name="8562"
  ></pre>
<p>We use some patterns to deal more easily with dependent tuples and objects of type <code>Entry</code>.</p>
<pre></a
  ><a name="8681" class="Keyword"
  >pattern</a
  ><a name="8688"
  > %_  x </a
  ><a name="8695" class="Symbol"
  >=</a
  ><a name="8696"
  > </a
  ><a name="8697" class="Symbol"
  >_</a
  ><a name="8698"
  > , x
</a
  ><a name="8703" class="Keyword"
  >pattern</a
  ><a name="8710"
  > %2_ x </a
  ><a name="8717" class="Symbol"
  >=</a
  ><a name="8718"
  > % %  x
</a
  ><a name="8726" class="Keyword"
  >pattern</a
  ><a name="8733"
  > %3_ x </a
  ><a name="8740" class="Symbol"
  >=</a
  ><a name="8741"
  > % %2 x
</a
  ><a name="8749" class="Keyword"
  >pattern</a
  ><a name="8756"
  > %4_ x </a
  ><a name="8763" class="Symbol"
  >=</a
  ><a name="8764"
  > % %3 x

</a
  ><a name="8773" class="Keyword"
  >pattern</a
  ><a name="8780"
  > &#187;&#187;_ x </a
  ><a name="8787" class="Symbol"
  >=</a
  ><a name="8788"
  > &gt; + , %2 x
</a
  ><a name="8800" class="Keyword"
  >pattern</a
  ><a name="8807"
  > _&#171;&#171; x </a
  ><a name="8814" class="Symbol"
  >=</a
  ><a name="8815"
  > &gt; - , %2 x</pre>
<h2 id="terms">Terms</h2>
<h2 id="introduction">Introduction</h2>
<p>Here we would like to provide a human-readable representation of the syntax which is encoded below, also discussing the choice of encoding.</p>
<p>For now we limit ourselves to illustrating the Agda code step-by-step.</p>
<h3 id="functors">Functors</h3>
<p>We define several (indexed) functors: we will obtain our process syntax by taking their fixpoint. While in the future we plan to move to codes for a universe of functors such as the ones cited above, for the purpose of illustrating the method we do not want to add further complications.</p>
<p>Most of the productions are non-recursive, so we will first define some families in <code>Ty</code>.</p>
<pre></a
  ><a name="9486" class="Keyword"
  >private</a
  ><a name="9493"
  > </a
  ><a name="9494" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="9496"
  > </a
  ><a name="9497" class="Symbol"
  >=</a
  ><a name="9498"
  > </a
  ><a name="9499" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="9501"
  > </a
  ><a name="9502" class="Symbol"
  >&#8594;</a
  ><a name="9503"
  > </a
  ><a name="9504" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="9506"
  > </a
  ><a name="9507" class="Symbol"
  >&#8594;</a
  ><a name="9508"
  > </a
  ><a name="9509" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="9513"
  ></pre>
<p>The functor corresponding to the <code>new</code> grammar production/constructor simply imposes that the output context contains a <em>new</em> channel, i.e. a channel whose side is <code>ε</code> (<code>Maybe.nothing</code>).</p>
<pre></a
  ><a name="9727" href="Session.html#9727" class="Function"
  >New</a
  ><a name="9730"
  > </a
  ><a name="9731" class="Symbol"
  >:</a
  ><a name="9732"
  > </a
  ><a name="9733" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="9735"
  >
</a
  ><a name="9736" href="Session.html#9727" class="Function"
  >New</a
  ><a name="9739"
  > </a
  ><a name="9740" href="Session.html#9740" class="Bound"
  >&#915;</a
  ><a name="9741"
  > </a
  ><a name="9742" href="Session.html#9742" class="Bound"
  >&#916;</a
  ><a name="9743"
  > </a
  ><a name="9744" class="Symbol"
  >=</a
  ><a name="9745"
  > </a
  ><a name="9746" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="9747"
  > </a
  ><a name="9748" class="Symbol"
  >_</a
  ><a name="9749"
  > </a
  ><a name="9750" class="Symbol"
  >&#955;</a
  ><a name="9751"
  > </a
  ><a name="9752" href="Session.html#9752" class="Bound"
  >F</a
  ><a name="9753"
  > </a
  ><a name="9754" class="Symbol"
  >&#8594;</a
  ><a name="9755"
  > </a
  ><a name="9756" href="Session.html#9742" class="Bound"
  >&#916;</a
  ><a name="9757"
  > </a
  ><a name="9758" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="9759"
  > </a
  ><a name="9760" href="Session.html#9740" class="Bound"
  >&#915;</a
  ><a name="9761"
  > </a
  ><a name="9762" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="9763"
  > </a
  ><a name="9764" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="9765"
  > </a
  ><a name="9766" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="9767"
  > </a
  ><a name="9768" href="Session.html#9752" class="Bound"
  >F</a
  ><a name="9769"
  ></pre>
<p>We can send and receive channels along channels: in the former case the sent session type is omitted from the output context, in the latter the context is extended with the entry corresponding to the received channel.</p>
<pre></a
  ><a name="10014" href="Session.html#10014" class="Function"
  >Send</a
  ><a name="10018"
  > </a
  ><a name="10019" href="Session.html#10019" class="Function"
  >Receive</a
  ><a name="10026"
  > </a
  ><a name="10027" class="Symbol"
  >:</a
  ><a name="10028"
  > </a
  ><a name="10029" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="10031"
  >
</a
  ><a name="10032" href="Session.html#10014" class="Function"
  >Send</a
  ><a name="10036"
  > </a
  ><a name="10037" href="Session.html#10037" class="Bound"
  >&#915;</a
  ><a name="10038"
  > </a
  ><a name="10039" href="Session.html#10039" class="Bound"
  >&#916;</a
  ><a name="10040"
  > </a
  ><a name="10041" class="Symbol"
  >=</a
  ><a name="10042"
  > </a
  ><a name="10043" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10044"
  > </a
  ><a name="10045" class="Symbol"
  >(</a
  ><a name="10046" href="Session.html#3827" class="Function"
  >Entry</a
  ><a name="10051"
  > </a
  ><a name="10052" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10053"
  > </a
  ><a name="10054" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="10058"
  > </a
  ><a name="10059" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10060"
  > </a
  ><a name="10061" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="10065" class="Symbol"
  >)</a
  ><a name="10066"
  > </a
  ><a name="10067" class="Symbol"
  >&#955;</a
  ><a name="10068"
  > </a
  ><a name="10069" href="Session.html#10069" class="Bound"
  >W</a
  ><a name="10070"
  > </a
  ><a name="10071" class="Symbol"
  >&#8594;</a
  ><a name="10072"
  >
           </a
  ><a name="10084" class="Keyword"
  >let</a
  ><a name="10087"
  > </a
  ><a name="10088" href="Session.html#10088" class="Bound"
  >L</a
  ><a name="10089"
  > </a
  ><a name="10090" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10091"
  > </a
  ><a name="10092" href="Session.html#10092" class="Bound"
  >s</a
  ><a name="10093"
  > </a
  ><a name="10094" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10095"
  > </a
  ><a name="10096" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="10098"
  > </a
  ><a name="10099" href="Session.html#10099" class="Bound"
  >R</a
  ><a name="10100"
  > </a
  ><a name="10101" class="Symbol"
  >=</a
  ><a name="10102"
  > </a
  ><a name="10103" href="Session.html#10069" class="Bound"
  >W</a
  ><a name="10104"
  > </a
  ><a name="10105" class="Keyword"
  >in</a
  ><a name="10107"
  >
           </a
  ><a name="10119" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10120"
  > </a
  ><a name="10121" class="Symbol"
  >(</a
  ><a name="10122"
  >                      </a
  ><a name="10144" href="Session.html#10088" class="Bound"
  >L</a
  ><a name="10145"
  > </a
  ><a name="10146" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10147"
  > </a
  ><a name="10148" href="Session.html#10037" class="Bound"
  >&#915;</a
  ><a name="10149"
  >   </a
  ><a name="10152" class="Symbol"
  >)</a
  ><a name="10153"
  > </a
  ><a name="10154" class="Symbol"
  >&#955;</a
  ><a name="10155"
  > </a
  ><a name="10156" href="Session.html#10156" class="Bound"
  >i</a
  ><a name="10157"
  > </a
  ><a name="10158" class="Symbol"
  >&#8594;</a
  ><a name="10159"
  >
           </a
  ><a name="10171" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10172"
  > </a
  ><a name="10173" class="Symbol"
  >((</a
  ><a name="10175" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10176"
  > </a
  ><a name="10177" href="Session.html#10092" class="Bound"
  >s</a
  ><a name="10178"
  > </a
  ><a name="10179" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10180"
  > </a
  ><a name="10181" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="10183"
  > </a
  ><a name="10184" class="Symbol"
  >(</a
  ><a name="10185" href="Session.html#10088" class="Bound"
  >L</a
  ><a name="10186"
  > </a
  ><a name="10187" href="Session.html#5372" class="Function Operator"
  >[</a
  ><a name="10188"
  > </a
  ><a name="10189" href="Session.html#10092" class="Bound"
  >s</a
  ><a name="10190"
  > </a
  ><a name="10191" href="Session.html#5372" class="Function Operator"
  >]&#8855;</a
  ><a name="10193"
  > </a
  ><a name="10194" href="Session.html#10099" class="Bound"
  >R</a
  ><a name="10195" class="Symbol"
  >))</a
  ><a name="10197"
  > </a
  ><a name="10198" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10199"
  > </a
  ><a name="10200" href="Session.Base.html#3041" class="Function"
  >rm</a
  ><a name="10202"
  > </a
  ><a name="10203" href="Session.html#10156" class="Bound"
  >i</a
  ><a name="10204" class="Symbol"
  >)</a
  ><a name="10205"
  >
             </a
  ><a name="10219" class="Symbol"
  >(</a
  ><a name="10220" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="10223"
  > </a
  ><a name="10224" href="Session.html#10039" class="Bound"
  >&#916;</a
  ><a name="10225"
  > </a
  ><a name="10226" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="10227"
  > </a
  ><a name="10228" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="10230"
  > </a
  ><a name="10231" class="Symbol"
  >(</a
  ><a name="10232" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10233"
  > </a
  ><a name="10234" href="Session.html#10092" class="Bound"
  >s</a
  ><a name="10235"
  > </a
  ><a name="10236" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10237"
  > </a
  ><a name="10238" class="Symbol"
  >_</a
  ><a name="10239"
  > </a
  ><a name="10240" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10241"
  > </a
  ><a name="10242" class="Symbol"
  >_</a
  ><a name="10243"
  > </a
  ><a name="10244" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10245"
  > </a
  ><a name="10246" href="Session.html#10099" class="Bound"
  >R</a
  ><a name="10247" class="Symbol"
  >))</a
  ><a name="10249"
  >
</a
  ><a name="10250" href="Session.html#10019" class="Function"
  >Receive</a
  ><a name="10257"
  > </a
  ><a name="10258" href="Session.html#10258" class="Bound"
  >&#915;</a
  ><a name="10259"
  > </a
  ><a name="10260" href="Session.html#10260" class="Bound"
  >&#916;</a
  ><a name="10261"
  > </a
  ><a name="10262" class="Symbol"
  >=</a
  ><a name="10263"
  > </a
  ><a name="10264" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10265"
  > </a
  ><a name="10266" class="Symbol"
  >(</a
  ><a name="10267" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="10271"
  > </a
  ><a name="10272" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10273"
  > </a
  ><a name="10274" class="Symbol"
  >_</a
  ><a name="10275"
  > </a
  ><a name="10276" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10277"
  > </a
  ><a name="10278" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="10282" class="Symbol"
  >)</a
  ><a name="10283"
  > </a
  ><a name="10284" class="Symbol"
  >&#955;</a
  ><a name="10285"
  > </a
  ><a name="10286" href="Session.html#10286" class="Bound"
  >W</a
  ><a name="10287"
  > </a
  ><a name="10288" class="Symbol"
  >&#8594;</a
  ><a name="10289"
  >
              </a
  ><a name="10304" class="Keyword"
  >let</a
  ><a name="10307"
  > </a
  ><a name="10308" href="Session.html#10308" class="Bound"
  >s</a
  ><a name="10309"
  > </a
  ><a name="10310" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10311"
  > </a
  ><a name="10312" href="Session.html#10312" class="Bound"
  >L</a
  ><a name="10313"
  > </a
  ><a name="10314" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10315"
  > </a
  ><a name="10316" class="Symbol"
  >_</a
  ><a name="10317"
  > </a
  ><a name="10318" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10319"
  > </a
  ><a name="10320" class="Symbol"
  >_</a
  ><a name="10321"
  > </a
  ><a name="10322" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10323"
  > </a
  ><a name="10324" href="Session.html#10324" class="Bound"
  >R</a
  ><a name="10325"
  > </a
  ><a name="10326" class="Symbol"
  >=</a
  ><a name="10327"
  > </a
  ><a name="10328" href="Session.html#10286" class="Bound"
  >W</a
  ><a name="10329"
  > </a
  ><a name="10330" class="Keyword"
  >in</a
  ><a name="10332"
  >
              </a
  ><a name="10347" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10348"
  > </a
  ><a name="10349" class="Symbol"
  >((</a
  ><a name="10351" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10352"
  > </a
  ><a name="10353" href="Session.html#10308" class="Bound"
  >s</a
  ><a name="10354"
  > </a
  ><a name="10355" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10356"
  > </a
  ><a name="10357" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="10359"
  > </a
  ><a name="10360" class="Symbol"
  >(</a
  ><a name="10361" href="Session.html#10312" class="Bound"
  >L</a
  ><a name="10362"
  > </a
  ><a name="10363" href="Session.html#5379" class="Function Operator"
  >[</a
  ><a name="10364"
  > </a
  ><a name="10365" href="Session.html#10308" class="Bound"
  >s</a
  ><a name="10366"
  > </a
  ><a name="10367" href="Session.html#5379" class="Function Operator"
  >]&#8523;</a
  ><a name="10369"
  > </a
  ><a name="10370" href="Session.html#10324" class="Bound"
  >R</a
  ><a name="10371" class="Symbol"
  >))</a
  ><a name="10373"
  > </a
  ><a name="10374" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10375"
  > </a
  ><a name="10376" href="Session.html#10258" class="Bound"
  >&#915;</a
  ><a name="10377" class="Symbol"
  >)</a
  ><a name="10378"
  > </a
  ><a name="10379" class="Symbol"
  >&#955;</a
  ><a name="10380"
  > </a
  ><a name="10381" href="Session.html#10381" class="Bound"
  >i</a
  ><a name="10382"
  > </a
  ><a name="10383" class="Symbol"
  >&#8594;</a
  ><a name="10384"
  > 
                </a
  ><a name="10402" href="Session.html#10260" class="Bound"
  >&#916;</a
  ><a name="10403"
  > </a
  ><a name="10404" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="10405"
  > </a
  ><a name="10406" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="10408"
  > </a
  ><a name="10409" class="Symbol"
  >(</a
  ><a name="10410" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10411"
  > </a
  ><a name="10412" href="Session.html#10308" class="Bound"
  >s</a
  ><a name="10413"
  > </a
  ><a name="10414" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10415"
  > </a
  ><a name="10416" href="Session.html#8711" class="Operator"
  >%2</a
  ><a name="10418"
  > </a
  ><a name="10419" href="Session.html#10324" class="Bound"
  >R</a
  ><a name="10420" class="Symbol"
  >)</a
  ><a name="10421"
  > </a
  ><a name="10422" href="Session.html#10381" class="Bound"
  >i</a
  ><a name="10423"
  > </a
  ><a name="10424" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="10425"
  > </a
  ><a name="10426" href="Session.html#10312" class="Bound"
  >L</a
  ><a name="10427"
  ></pre>
<p>Writing to and reading from channels changes the type accordingly, without necessarily introducing dependencies.</p>
<pre></a
  ><a name="10567" href="Session.html#10567" class="Function"
  >Write</a
  ><a name="10572"
  > </a
  ><a name="10573" href="Session.html#10573" class="Function"
  >Read</a
  ><a name="10577"
  > </a
  ><a name="10578" class="Symbol"
  >:</a
  ><a name="10579"
  > </a
  ><a name="10580" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="10582"
  >
</a
  ><a name="10583" href="Session.html#10567" class="Function"
  >Write</a
  ><a name="10588"
  > </a
  ><a name="10589" href="Session.html#10589" class="Bound"
  >&#915;</a
  ><a name="10590"
  > </a
  ><a name="10591" href="Session.html#10591" class="Bound"
  >&#916;</a
  ><a name="10592"
  > </a
  ><a name="10593" class="Symbol"
  >=</a
  ><a name="10594"
  > </a
  ><a name="10595" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10596"
  > </a
  ><a name="10597" class="Symbol"
  >(</a
  ><a name="10598" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10599"
  > </a
  ><a name="10600" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="10604"
  > </a
  ><a name="10605" class="Symbol"
  >&#955;</a
  ><a name="10606"
  > </a
  ><a name="10607" class="Symbol"
  >{</a
  ><a name="10608"
  > </a
  ><a name="10609" class="Symbol"
  >(</a
  ><a name="10610" href="Session.html#10610" class="Bound"
  >I</a
  ><a name="10611"
  > </a
  ><a name="10612" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10613"
  > </a
  ><a name="10614" href="Session.html#10614" class="Bound"
  >J</a
  ><a name="10615"
  > </a
  ><a name="10616" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10617"
  > </a
  ><a name="10618" href="Session.html#10618" class="Bound"
  >T</a
  ><a name="10619" class="Symbol"
  >)</a
  ><a name="10620"
  > </a
  ><a name="10621" class="Symbol"
  >&#8594;</a
  ><a name="10622"
  > </a
  ><a name="10623" href="Session.html#10614" class="Bound"
  >J</a
  ><a name="10624"
  > </a
  ><a name="10625" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10626"
  > </a
  ><a name="10627" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="10631"
  > </a
  ><a name="10632" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10633"
  > </a
  ><a name="10634" class="PrimitiveType"
  >Set</a
  ><a name="10637"
  > </a
  ><a name="10638" class="Symbol"
  >})</a
  ><a name="10640"
  > </a
  ><a name="10641" class="Symbol"
  >&#955;</a
  ><a name="10642"
  > </a
  ><a name="10643" href="Session.html#10643" class="Bound"
  >W</a
  ><a name="10644"
  > </a
  ><a name="10645" class="Symbol"
  >&#8594;</a
  ><a name="10646"
  >
            </a
  ><a name="10659" class="Keyword"
  >let</a
  ><a name="10662"
  > </a
  ><a name="10663" class="Symbol"
  >(</a
  ><a name="10664" href="Session.html#10664" class="Bound"
  >I</a
  ><a name="10665"
  > </a
  ><a name="10666" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10667"
  > </a
  ><a name="10668" href="Session.html#10668" class="Bound"
  >J</a
  ><a name="10669"
  > </a
  ><a name="10670" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10671"
  > </a
  ><a name="10672" href="Session.html#10672" class="Bound"
  >T</a
  ><a name="10673" class="Symbol"
  >)</a
  ><a name="10674"
  > </a
  ><a name="10675" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10676"
  > </a
  ><a name="10677" href="Session.html#10677" class="Bound"
  >j</a
  ><a name="10678"
  > </a
  ><a name="10679" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10680"
  > </a
  ><a name="10681" href="Session.html#10681" class="Bound"
  >s</a
  ><a name="10682"
  > </a
  ><a name="10683" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10684"
  > </a
  ><a name="10685" href="Session.html#10685" class="Bound"
  >O</a
  ><a name="10686"
  > </a
  ><a name="10687" class="Symbol"
  >=</a
  ><a name="10688"
  > </a
  ><a name="10689" href="Session.html#10643" class="Bound"
  >W</a
  ><a name="10690"
  > </a
  ><a name="10691" class="Keyword"
  >in</a
  ><a name="10693"
  >
            </a
  ><a name="10706" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10707"
  > </a
  ><a name="10708" class="Symbol"
  >((</a
  ><a name="10710" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10711"
  > </a
  ><a name="10712" href="Session.html#10681" class="Bound"
  >s</a
  ><a name="10713"
  > </a
  ><a name="10714" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10715"
  > </a
  ><a name="10716" href="Session.html#10664" class="Bound"
  >I</a
  ><a name="10717"
  > </a
  ><a name="10718" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10719"
  > </a
  ><a name="10720" href="Session.html#10685" class="Bound"
  >O</a
  ><a name="10721"
  > </a
  ><a name="10722" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10723"
  > </a
  ><a name="10724" href="Session.html#5238" class="Function Operator"
  >[</a
  ><a name="10725"
  > </a
  ><a name="10726" href="Session.html#10681" class="Bound"
  >s</a
  ><a name="10727"
  > </a
  ><a name="10728" href="Session.html#5238" class="Function Operator"
  >]&#931;</a
  ><a name="10730"
  > </a
  ><a name="10731" href="Session.html#10668" class="Bound"
  >J</a
  ><a name="10732"
  > </a
  ><a name="10733" href="Session.html#10672" class="Bound"
  >T</a
  ><a name="10734" class="Symbol"
  >)</a
  ><a name="10735"
  > </a
  ><a name="10736" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10737"
  > </a
  ><a name="10738" href="Session.html#10589" class="Bound"
  >&#915;</a
  ><a name="10739" class="Symbol"
  >)</a
  ><a name="10740"
  >
              </a
  ><a name="10755" class="Symbol"
  >(</a
  ><a name="10756" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="10759"
  > </a
  ><a name="10760" href="Session.html#10591" class="Bound"
  >&#916;</a
  ><a name="10761"
  > </a
  ><a name="10762" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="10763"
  > </a
  ><a name="10764" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="10766"
  > </a
  ><a name="10767" class="Symbol"
  >(</a
  ><a name="10768" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10769"
  > </a
  ><a name="10770" href="Session.html#10681" class="Bound"
  >s</a
  ><a name="10771"
  > </a
  ><a name="10772" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10773"
  > </a
  ><a name="10774" href="Session.html#8711" class="Operator"
  >%2</a
  ><a name="10776"
  > </a
  ><a name="10777" href="Session.html#10672" class="Bound"
  >T</a
  ><a name="10778" class="Symbol"
  >))</a
  ><a name="10780"
  >
</a
  ><a name="10781" href="Session.html#10573" class="Function"
  >Read</a
  ><a name="10785"
  > </a
  ><a name="10786" href="Session.html#10786" class="Bound"
  >&#915;</a
  ><a name="10787"
  > </a
  ><a name="10788" href="Session.html#10788" class="Bound"
  >&#916;</a
  ><a name="10789"
  > </a
  ><a name="10790" class="Symbol"
  >=</a
  ><a name="10791"
  > </a
  ><a name="10792" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10793"
  > </a
  ><a name="10794" class="Symbol"
  >(</a
  ><a name="10795" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="10799"
  > </a
  ><a name="10800" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10801"
  > </a
  ><a name="10802" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="10806"
  > </a
  ><a name="10807" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="10808"
  > </a
  ><a name="10809" class="Symbol"
  >_)</a
  ><a name="10811"
  > </a
  ><a name="10812" class="Symbol"
  >&#955;</a
  ><a name="10813"
  > </a
  ><a name="10814" href="Session.html#10814" class="Bound"
  >W</a
  ><a name="10815"
  > </a
  ><a name="10816" class="Symbol"
  >&#8594;</a
  ><a name="10817"
  >
           </a
  ><a name="10829" class="Keyword"
  >let</a
  ><a name="10832"
  > </a
  ><a name="10833" class="Symbol"
  >(</a
  ><a name="10834" href="Session.html#10834" class="Bound"
  >I</a
  ><a name="10835"
  > </a
  ><a name="10836" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10837"
  > </a
  ><a name="10838" href="Session.html#10838" class="Bound"
  >J</a
  ><a name="10839"
  > </a
  ><a name="10840" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10841"
  > </a
  ><a name="10842" href="Session.html#10842" class="Bound"
  >T</a
  ><a name="10843" class="Symbol"
  >)</a
  ><a name="10844"
  > </a
  ><a name="10845" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10846"
  > </a
  ><a name="10847" href="Session.html#10847" class="Bound"
  >s</a
  ><a name="10848"
  > </a
  ><a name="10849" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10850"
  > </a
  ><a name="10851" href="Session.html#10851" class="Bound"
  >O</a
  ><a name="10852"
  > </a
  ><a name="10853" class="Symbol"
  >=</a
  ><a name="10854"
  > </a
  ><a name="10855" href="Session.html#10814" class="Bound"
  >W</a
  ><a name="10856"
  > </a
  ><a name="10857" class="Keyword"
  >in</a
  ><a name="10859"
  >
           </a
  ><a name="10871" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="10872"
  > </a
  ><a name="10873" class="Symbol"
  >((</a
  ><a name="10875" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10876"
  > </a
  ><a name="10877" href="Session.html#10847" class="Bound"
  >s</a
  ><a name="10878"
  > </a
  ><a name="10879" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10880"
  > </a
  ><a name="10881" href="Session.html#10834" class="Bound"
  >I</a
  ><a name="10882"
  > </a
  ><a name="10883" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10884"
  > </a
  ><a name="10885" href="Session.html#10851" class="Bound"
  >O</a
  ><a name="10886"
  > </a
  ><a name="10887" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10888"
  > </a
  ><a name="10889" href="Session.html#5245" class="Function Operator"
  >[</a
  ><a name="10890"
  > </a
  ><a name="10891" href="Session.html#10847" class="Bound"
  >s</a
  ><a name="10892"
  > </a
  ><a name="10893" href="Session.html#5245" class="Function Operator"
  >]&#928;</a
  ><a name="10895"
  > </a
  ><a name="10896" href="Session.html#10838" class="Bound"
  >J</a
  ><a name="10897"
  > </a
  ><a name="10898" href="Session.html#10842" class="Bound"
  >T</a
  ><a name="10899" class="Symbol"
  >)</a
  ><a name="10900"
  > </a
  ><a name="10901" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="10902"
  > </a
  ><a name="10903" href="Session.html#10786" class="Bound"
  >&#915;</a
  ><a name="10904" class="Symbol"
  >)</a
  ><a name="10905"
  >
             </a
  ><a name="10919" class="Symbol"
  >(</a
  ><a name="10920" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="10923"
  > </a
  ><a name="10924" href="Session.html#10788" class="Bound"
  >&#916;</a
  ><a name="10925"
  > </a
  ><a name="10926" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="10927"
  > </a
  ><a name="10928" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="10930"
  > </a
  ><a name="10931" class="Symbol"
  >(</a
  ><a name="10932" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="10933"
  > </a
  ><a name="10934" href="Session.html#10847" class="Bound"
  >s</a
  ><a name="10935"
  > </a
  ><a name="10936" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="10937"
  > </a
  ><a name="10938" href="Session.html#8711" class="Operator"
  >%2</a
  ><a name="10940"
  > </a
  ><a name="10941" href="Session.html#10842" class="Bound"
  >T</a
  ><a name="10942" class="Symbol"
  >))</a
  ><a name="10944"
  ></pre>
<p>This functor &quot;consumes&quot; <code>`^</code> from the session type: it &quot;allows&quot; you to choose a value from which the rest of the type is dependent, but <em>most often</em> this value will be forced by the type.</p>
<pre></a
  ><a name="11163" href="Session.html#11163" class="Function"
  >At</a
  ><a name="11165"
  > </a
  ><a name="11166" class="Symbol"
  >:</a
  ><a name="11167"
  > </a
  ><a name="11168" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="11170"
  >
</a
  ><a name="11171" href="Session.html#11163" class="Function"
  >At</a
  ><a name="11173"
  > </a
  ><a name="11174" href="Session.html#11174" class="Bound"
  >&#915;</a
  ><a name="11175"
  > </a
  ><a name="11176" href="Session.html#11176" class="Bound"
  >&#916;</a
  ><a name="11177"
  > </a
  ><a name="11178" class="Symbol"
  >=</a
  ><a name="11179"
  > </a
  ><a name="11180" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11181"
  > </a
  ><a name="11182" class="Symbol"
  >(</a
  ><a name="11183" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11184"
  > </a
  ><a name="11185" class="Symbol"
  >_</a
  ><a name="11186"
  > </a
  ><a name="11187" class="Symbol"
  >&#955;</a
  ><a name="11188"
  > </a
  ><a name="11189" href="Session.html#11189" class="Bound"
  >I</a
  ><a name="11190"
  > </a
  ><a name="11191" class="Symbol"
  >&#8594;</a
  ><a name="11192"
  > </a
  ><a name="11193" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11194"
  > </a
  ><a name="11195" class="Symbol"
  >_</a
  ><a name="11196"
  > </a
  ><a name="11197" class="Symbol"
  >&#955;</a
  ><a name="11198"
  > </a
  ><a name="11199" href="Session.html#11199" class="Bound"
  >O</a
  ><a name="11200"
  > </a
  ><a name="11201" class="Symbol"
  >&#8594;</a
  ><a name="11202"
  > </a
  ><a name="11203" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11204"
  > </a
  ><a name="11205" class="Symbol"
  >(</a
  ><a name="11206" href="Session.html#11199" class="Bound"
  >O</a
  ><a name="11207"
  > </a
  ><a name="11208" class="Symbol"
  >&#8594;</a
  ><a name="11209"
  > </a
  ><a name="11210" href="Session.html#3769" class="Function"
  >De</a
  ><a name="11212"
  > </a
  ><a name="11213" href="Session.html#11189" class="Bound"
  >I</a
  ><a name="11214" class="Symbol"
  >)</a
  ><a name="11215"
  > </a
  ><a name="11216" class="Symbol"
  >&#955;</a
  ><a name="11217"
  > </a
  ><a name="11218" href="Session.html#11218" class="Bound"
  >_</a
  ><a name="11219"
  > </a
  ><a name="11220" class="Symbol"
  >&#8594;</a
  ><a name="11221"
  > </a
  ><a name="11222" href="Session.html#11199" class="Bound"
  >O</a
  ><a name="11223"
  > </a
  ><a name="11224" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="11225"
  > </a
  ><a name="11226" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="11230" class="Symbol"
  >)</a
  ><a name="11231"
  > </a
  ><a name="11232" class="Symbol"
  >&#955;</a
  ><a name="11233"
  > </a
  ><a name="11234" href="Session.html#11234" class="Bound"
  >W</a
  ><a name="11235"
  > </a
  ><a name="11236" class="Symbol"
  >&#8594;</a
  ><a name="11237"
  >
         </a
  ><a name="11247" class="Keyword"
  >let</a
  ><a name="11250"
  > </a
  ><a name="11251" href="Session.html#11251" class="Bound"
  >I</a
  ><a name="11252"
  > </a
  ><a name="11253" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11254"
  > </a
  ><a name="11255" href="Session.html#11255" class="Bound"
  >O</a
  ><a name="11256"
  > </a
  ><a name="11257" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11258"
  > </a
  ><a name="11259" href="Session.html#11259" class="Bound"
  >T</a
  ><a name="11260"
  > </a
  ><a name="11261" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11262"
  > </a
  ><a name="11263" href="Session.html#11263" class="Bound"
  >o</a
  ><a name="11264"
  > </a
  ><a name="11265" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11266"
  > </a
  ><a name="11267" href="Session.html#11267" class="Bound"
  >s</a
  ><a name="11268"
  > </a
  ><a name="11269" class="Symbol"
  >=</a
  ><a name="11270"
  > </a
  ><a name="11271" href="Session.html#11234" class="Bound"
  >W</a
  ><a name="11272"
  > </a
  ><a name="11273" class="Keyword"
  >in</a
  ><a name="11275"
  >
         </a
  ><a name="11285" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11286"
  > </a
  ><a name="11287" class="Symbol"
  >((</a
  ><a name="11289" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11290"
  > </a
  ><a name="11291" href="Session.html#11267" class="Bound"
  >s</a
  ><a name="11292"
  > </a
  ><a name="11293" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11294"
  > </a
  ><a name="11295" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="11297"
  > </a
  ><a name="11298" href="Session.html#4162" class="InductiveConstructor"
  >`^</a
  ><a name="11300"
  > </a
  ><a name="11301" href="Session.html#11259" class="Bound"
  >T</a
  ><a name="11302" class="Symbol"
  >)</a
  ><a name="11303"
  > </a
  ><a name="11304" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="11305"
  > </a
  ><a name="11306" href="Session.html#11174" class="Bound"
  >&#915;</a
  ><a name="11307" class="Symbol"
  >)</a
  ><a name="11308"
  >
            </a
  ><a name="11321" class="Symbol"
  >(</a
  ><a name="11322" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="11325"
  > </a
  ><a name="11326" href="Session.html#11176" class="Bound"
  >&#916;</a
  ><a name="11327"
  > </a
  ><a name="11328" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="11329"
  > </a
  ><a name="11330" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="11332"
  > </a
  ><a name="11333" class="Symbol"
  >(</a
  ><a name="11334" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11335"
  > </a
  ><a name="11336" href="Session.html#11267" class="Bound"
  >s</a
  ><a name="11337"
  > </a
  ><a name="11338" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11339"
  > </a
  ><a name="11340" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="11342"
  > </a
  ><a name="11343" href="Session.html#11259" class="Bound"
  >T</a
  ><a name="11344"
  > </a
  ><a name="11345" href="Session.html#11263" class="Bound"
  >o</a
  ><a name="11346" class="Symbol"
  >))</a
  ><a name="11348"
  ></pre>
<p>Session types have &quot;identity&quot; codes <code>`I</code> as leaves, so to end a session we need to consume it and remove the type from the context.</p>
<pre></a
  ><a name="11511" href="Session.html#11511" class="Function"
  >End</a
  ><a name="11514"
  > </a
  ><a name="11515" class="Symbol"
  >:</a
  ><a name="11516"
  > </a
  ><a name="11517" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="11519"
  >
</a
  ><a name="11520" href="Session.html#11511" class="Function"
  >End</a
  ><a name="11523"
  > </a
  ><a name="11524" href="Session.html#11524" class="Bound"
  >&#915;</a
  ><a name="11525"
  > </a
  ><a name="11526" href="Session.html#11526" class="Bound"
  >&#916;</a
  ><a name="11527"
  > </a
  ><a name="11528" class="Symbol"
  >=</a
  ><a name="11529"
  > </a
  ><a name="11530" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11531"
  > </a
  ><a name="11532" class="Symbol"
  >(</a
  ><a name="11533" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11534"
  > </a
  ><a name="11535" class="PrimitiveType"
  >Set</a
  ><a name="11538"
  > </a
  ><a name="11539" class="Symbol"
  >&#955;</a
  ><a name="11540"
  > </a
  ><a name="11541" href="Session.html#11541" class="Bound"
  >I</a
  ><a name="11542"
  > </a
  ><a name="11543" class="Symbol"
  >&#8594;</a
  ><a name="11544"
  > </a
  ><a name="11545" class="PrimitiveType"
  >Set</a
  ><a name="11548"
  > </a
  ><a name="11549" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="11550"
  > </a
  ><a name="11551" href="Session.html#11541" class="Bound"
  >I</a
  ><a name="11552"
  > </a
  ><a name="11553" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="11554"
  > </a
  ><a name="11555" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="11559" class="Symbol"
  >)</a
  ><a name="11560"
  > </a
  ><a name="11561" class="Symbol"
  >&#955;</a
  ><a name="11562"
  > </a
  ><a name="11563" href="Session.html#11563" class="Bound"
  >W</a
  ><a name="11564"
  > </a
  ><a name="11565" class="Symbol"
  >&#8594;</a
  ><a name="11566"
  >
          </a
  ><a name="11577" class="Keyword"
  >let</a
  ><a name="11580"
  > </a
  ><a name="11581" href="Session.html#11581" class="Bound"
  >I</a
  ><a name="11582"
  > </a
  ><a name="11583" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11584"
  > </a
  ><a name="11585" href="Session.html#11585" class="Bound"
  >O</a
  ><a name="11586"
  > </a
  ><a name="11587" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11588"
  > </a
  ><a name="11589" href="Session.html#11589" class="Bound"
  >i</a
  ><a name="11590"
  > </a
  ><a name="11591" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11592"
  > </a
  ><a name="11593" href="Session.html#11593" class="Bound"
  >s</a
  ><a name="11594"
  > </a
  ><a name="11595" class="Symbol"
  >=</a
  ><a name="11596"
  > </a
  ><a name="11597" href="Session.html#11563" class="Bound"
  >W</a
  ><a name="11598"
  > </a
  ><a name="11599" class="Keyword"
  >in</a
  ><a name="11601"
  >
          </a
  ><a name="11612" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="11613"
  > </a
  ><a name="11614" class="Symbol"
  >((</a
  ><a name="11616" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="11617"
  > </a
  ><a name="11618" href="Session.html#11593" class="Bound"
  >s</a
  ><a name="11619"
  > </a
  ><a name="11620" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11621"
  > </a
  ><a name="11622" class="Symbol"
  >(</a
  ><a name="11623" href="Session.html#11581" class="Bound"
  >I</a
  ><a name="11624"
  > </a
  ><a name="11625" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11626"
  > </a
  ><a name="11627" href="Session.html#11585" class="Bound"
  >O</a
  ><a name="11628"
  > </a
  ><a name="11629" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="11630"
  > </a
  ><a name="11631" href="Session.html#3937" class="InductiveConstructor"
  >`I</a
  ><a name="11633"
  > </a
  ><a name="11634" href="Session.html#11589" class="Bound"
  >i</a
  ><a name="11635" class="Symbol"
  >))</a
  ><a name="11637"
  > </a
  ><a name="11638" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="11639"
  > </a
  ><a name="11640" href="Session.html#11524" class="Bound"
  >&#915;</a
  ><a name="11641" class="Symbol"
  >)</a
  ><a name="11642"
  >
            </a
  ><a name="11655" class="Symbol"
  >(</a
  ><a name="11656" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="11659"
  > </a
  ><a name="11660" href="Session.html#11526" class="Bound"
  >&#916;</a
  ><a name="11661"
  > </a
  ><a name="11662" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="11663"
  > </a
  ><a name="11664" href="Session.Base.html#3041" class="Function"
  >rm</a
  ><a name="11666" class="Symbol"
  >)</a
  ><a name="11667"
  ></pre>
<p>The following definitions are actual (strictly positive) indexed functors: calls to the <code>F</code> argument correspond to recursion in the grammar.</p>
<p>When forking, we need to split the input context sensibly (see <code>Splits</code> above): the child must do <em>all</em> <code>ΓR</code>, the continuation must do <code>ΓL</code>.</p>
<pre></a
  ><a name="11977" href="Session.html#11977" class="Function"
  >Fork</a
  ><a name="11981"
  > </a
  ><a name="11982" class="Symbol"
  >:</a
  ><a name="11983"
  > </a
  ><a name="11984" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="11986"
  > </a
  ><a name="11987" class="Symbol"
  >&#8594;</a
  ><a name="11988"
  > </a
  ><a name="11989" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="11991"
  >
</a
  ><a name="11992" href="Session.html#11977" class="Function"
  >Fork</a
  ><a name="11996"
  > </a
  ><a name="11997" href="Session.html#11997" class="Bound"
  >F</a
  ><a name="11998"
  > </a
  ><a name="11999" href="Session.html#11999" class="Bound"
  >&#915;</a
  ><a name="12000"
  > </a
  ><a name="12001" href="Session.html#12001" class="Bound"
  >&#916;</a
  ><a name="12002"
  > </a
  ><a name="12003" class="Symbol"
  >=</a
  ><a name="12004"
  > </a
  ><a name="12005" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12006"
  > </a
  ><a name="12007" class="Symbol"
  >(</a
  ><a name="12008" href="Session.html#7348" class="Function"
  >Splits</a
  ><a name="12014"
  > </a
  ><a name="12015" href="Session.html#11999" class="Bound"
  >&#915;</a
  ><a name="12016" class="Symbol"
  >)</a
  ><a name="12017"
  > </a
  ><a name="12018" class="Symbol"
  >&#955;</a
  ><a name="12019"
  > </a
  ><a name="12020" href="Session.html#12020" class="Bound"
  >ds</a
  ><a name="12022"
  > </a
  ><a name="12023" class="Symbol"
  >&#8594;</a
  ><a name="12024"
  >
             </a
  ><a name="12038" class="Keyword"
  >let</a
  ><a name="12041"
  > </a
  ><a name="12042" href="Session.html#12042" class="Bound"
  >&#915;L</a
  ><a name="12044"
  > </a
  ><a name="12045" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12046"
  > </a
  ><a name="12047" href="Session.html#12047" class="Bound"
  >&#915;R</a
  ><a name="12049"
  > </a
  ><a name="12050" class="Symbol"
  >=</a
  ><a name="12051"
  > </a
  ><a name="12052" href="Session.html#7389" class="Function"
  >splits</a
  ><a name="12058"
  > </a
  ><a name="12059" href="Session.html#12020" class="Bound"
  >ds</a
  ><a name="12061"
  > </a
  ><a name="12062" class="Keyword"
  >in</a
  ><a name="12064"
  >
               </a
  ><a name="12080" href="Session.html#11997" class="Bound"
  >F</a
  ><a name="12081"
  > </a
  ><a name="12082" href="Session.html#12047" class="Bound"
  >&#915;R</a
  ><a name="12084"
  > </a
  ><a name="12085" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="12087"
  >
             </a
  ><a name="12101" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12102"
  > </a
  ><a name="12103" href="Session.html#12001" class="Bound"
  >&#916;</a
  ><a name="12104"
  > </a
  ><a name="12105" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="12106"
  > </a
  ><a name="12107" href="Session.html#12042" class="Bound"
  >&#915;L</a
  ><a name="12109"
  ></pre>
<p>A server process can only be launched in a context where it is possible to duplicate all channels.</p>
<p>The server is located on the <code>+</code> side of the channel.</p>
<pre></a
  ><a name="12290" href="Session.html#12290" class="Function"
  >Server</a
  ><a name="12296"
  > </a
  ><a name="12297" class="Symbol"
  >:</a
  ><a name="12298"
  > </a
  ><a name="12299" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="12301"
  > </a
  ><a name="12302" class="Symbol"
  >&#8594;</a
  ><a name="12303"
  > </a
  ><a name="12304" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="12306"
  >
</a
  ><a name="12307" href="Session.html#12290" class="Function"
  >Server</a
  ><a name="12313"
  > </a
  ><a name="12314" href="Session.html#12314" class="Bound"
  >F</a
  ><a name="12315"
  > </a
  ><a name="12316" href="Session.html#12316" class="Bound"
  >&#915;</a
  ><a name="12317"
  > </a
  ><a name="12318" href="Session.html#12318" class="Bound"
  >&#916;</a
  ><a name="12319"
  > </a
  ><a name="12320" class="Symbol"
  >=</a
  ><a name="12321"
  > </a
  ><a name="12322" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12323"
  > </a
  ><a name="12324" class="Symbol"
  >(</a
  ><a name="12325" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="12329"
  > </a
  ><a name="12330" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12331"
  > </a
  ><a name="12332" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="12336"
  > </a
  ><a name="12337" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12338"
  > </a
  ><a name="12339" class="Symbol"
  >_)</a
  ><a name="12341"
  > </a
  ><a name="12342" class="Symbol"
  >&#955;</a
  ><a name="12343"
  > </a
  ><a name="12344" href="Session.html#12344" class="Bound"
  >W</a
  ><a name="12345"
  > </a
  ><a name="12346" class="Symbol"
  >&#8594;</a
  ><a name="12347"
  > </a
  ><a name="12348" class="Keyword"
  >let</a
  ><a name="12351"
  > </a
  ><a name="12352" href="Session.html#12352" class="Bound"
  >A</a
  ><a name="12353"
  > </a
  ><a name="12354" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12355"
  > </a
  ><a name="12356" href="Session.html#12356" class="Bound"
  >s</a
  ><a name="12357"
  > </a
  ><a name="12358" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12359"
  > </a
  ><a name="12360" href="Session.html#12360" class="Bound"
  >I</a
  ><a name="12361"
  > </a
  ><a name="12362" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12363"
  > </a
  ><a name="12364" href="Session.html#12364" class="Bound"
  >O</a
  ><a name="12365"
  > </a
  ><a name="12366" class="Symbol"
  >=</a
  ><a name="12367"
  > </a
  ><a name="12368" href="Session.html#12344" class="Bound"
  >W</a
  ><a name="12369"
  > </a
  ><a name="12370" class="Keyword"
  >in</a
  ><a name="12372"
  >
               </a
  ><a name="12388" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12389"
  > </a
  ><a name="12390" class="Symbol"
  >((</a
  ><a name="12392" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12393"
  > </a
  ><a name="12394" href="Session.html#12356" class="Bound"
  >s</a
  ><a name="12395"
  > </a
  ><a name="12396" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12397"
  > </a
  ><a name="12398" href="Session.html#12360" class="Bound"
  >I</a
  ><a name="12399"
  > </a
  ><a name="12400" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12401"
  > </a
  ><a name="12402" href="Session.html#12364" class="Bound"
  >O</a
  ><a name="12403"
  > </a
  ><a name="12404" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12405"
  > </a
  ><a name="12406" href="Session.html#5439" class="Function Operator"
  >[</a
  ><a name="12407"
  > </a
  ><a name="12408" href="Session.html#12356" class="Bound"
  >s</a
  ><a name="12409"
  > </a
  ><a name="12410" href="Session.html#5439" class="Function Operator"
  >]&#161;</a
  ><a name="12412"
  > </a
  ><a name="12413" href="Session.html#12352" class="Bound"
  >A</a
  ><a name="12414" class="Symbol"
  >)</a
  ><a name="12415"
  > </a
  ><a name="12416" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="12417"
  > </a
  ><a name="12418" href="Session.html#12316" class="Bound"
  >&#915;</a
  ><a name="12419" class="Symbol"
  >)</a
  ><a name="12420"
  > </a
  ><a name="12421" class="Symbol"
  >&#955;</a
  ><a name="12422"
  > </a
  ><a name="12423" href="Session.html#12423" class="Bound"
  >i</a
  ><a name="12424"
  > </a
  ><a name="12425" class="Symbol"
  >&#8594;</a
  ><a name="12426"
  >
                 </a
  ><a name="12444" href="Session.html#6483" class="Function"
  >All&#191;</a
  ><a name="12448"
  > </a
  ><a name="12449" href="Session.html#12318" class="Bound"
  >&#916;</a
  ><a name="12450"
  >
               </a
  ><a name="12466" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12467"
  > </a
  ><a name="12468" href="Session.html#12314" class="Bound"
  >F</a
  ><a name="12469"
  > </a
  ><a name="12470" class="Symbol"
  >(</a
  ><a name="12471" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="12473"
  > </a
  ><a name="12474" class="Symbol"
  >(</a
  ><a name="12475" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12476"
  > </a
  ><a name="12477" href="Session.Base.html#4879" class="InductiveConstructor"
  >+</a
  ><a name="12478"
  > </a
  ><a name="12479" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12480"
  > </a
  ><a name="12481" href="Session.html#12352" class="Bound"
  >A</a
  ><a name="12482" class="Symbol"
  >)</a
  ><a name="12483"
  > </a
  ><a name="12484" href="Session.html#12423" class="Bound"
  >i</a
  ><a name="12485" class="Symbol"
  >)</a
  ><a name="12486"
  > </a
  ><a name="12487" href="Session.html#12318" class="Bound"
  >&#916;</a
  ><a name="12488"
  >
               </a
  ><a name="12504" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12505"
  > </a
  ><a name="12506" href="Session.html#12318" class="Bound"
  >&#916;</a
  ><a name="12507"
  > </a
  ><a name="12508" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="12509"
  > </a
  ><a name="12510" href="Session.Base.html#3041" class="Function"
  >rm</a
  ><a name="12512"
  > </a
  ><a name="12513" href="Session.html#12423" class="Bound"
  >i</a
  ><a name="12514"
  ></pre>
<p>The client is positioned on the <code>-</code> side of the channel.</p>
<p>In this case execution is synchronous: we account for the fact that the client might also interact on some other channels by passing <code>Δ</code> to <code>F</code>.</p>
<pre></a
  ><a name="12744" href="Session.html#12744" class="Function"
  >Client</a
  ><a name="12750"
  > </a
  ><a name="12751" class="Symbol"
  >:</a
  ><a name="12752"
  > </a
  ><a name="12753" class="Symbol"
  >(</a
  ><a name="12754" class="PrimitiveType"
  >Set</a
  ><a name="12757"
  > </a
  ><a name="12758" class="Symbol"
  >&#8594;</a
  ><a name="12759"
  > </a
  ><a name="12760" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="12762" class="Symbol"
  >)</a
  ><a name="12763"
  > </a
  ><a name="12764" class="Symbol"
  >&#8594;</a
  ><a name="12765"
  > </a
  ><a name="12766" class="PrimitiveType"
  >Set</a
  ><a name="12769"
  > </a
  ><a name="12770" class="Symbol"
  >&#8594;</a
  ><a name="12771"
  > </a
  ><a name="12772" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="12774"
  >
</a
  ><a name="12775" href="Session.html#12744" class="Function"
  >Client</a
  ><a name="12781"
  > </a
  ><a name="12782" href="Session.html#12782" class="Bound"
  >F</a
  ><a name="12783"
  > </a
  ><a name="12784" href="Session.html#12784" class="Bound"
  >X</a
  ><a name="12785"
  > </a
  ><a name="12786" href="Session.html#12786" class="Bound"
  >&#915;</a
  ><a name="12787"
  > </a
  ><a name="12788" href="Session.html#12788" class="Bound"
  >&#916;</a
  ><a name="12789"
  > </a
  ><a name="12790" class="Symbol"
  >=</a
  ><a name="12791"
  > </a
  ><a name="12792" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12793"
  > </a
  ><a name="12794" class="Symbol"
  >(</a
  ><a name="12795" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="12799"
  > </a
  ><a name="12800" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12801"
  > </a
  ><a name="12802" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="12806"
  > </a
  ><a name="12807" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="12808"
  > </a
  ><a name="12809" class="Symbol"
  >_)</a
  ><a name="12811"
  > </a
  ><a name="12812" class="Symbol"
  >&#955;</a
  ><a name="12813"
  > </a
  ><a name="12814" href="Session.html#12814" class="Bound"
  >W</a
  ><a name="12815"
  > </a
  ><a name="12816" class="Symbol"
  >&#8594;</a
  ><a name="12817"
  > </a
  ><a name="12818" class="Keyword"
  >let</a
  ><a name="12821"
  > </a
  ><a name="12822" href="Session.html#12822" class="Bound"
  >A</a
  ><a name="12823"
  > </a
  ><a name="12824" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12825"
  > </a
  ><a name="12826" href="Session.html#12826" class="Bound"
  >s</a
  ><a name="12827"
  > </a
  ><a name="12828" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12829"
  > </a
  ><a name="12830" href="Session.html#12830" class="Bound"
  >I</a
  ><a name="12831"
  > </a
  ><a name="12832" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12833"
  > </a
  ><a name="12834" href="Session.html#12834" class="Bound"
  >O</a
  ><a name="12835"
  > </a
  ><a name="12836" class="Symbol"
  >=</a
  ><a name="12837"
  > </a
  ><a name="12838" href="Session.html#12814" class="Bound"
  >W</a
  ><a name="12839"
  > </a
  ><a name="12840" class="Keyword"
  >in</a
  ><a name="12842"
  >
                 </a
  ><a name="12860" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="12861"
  > </a
  ><a name="12862" class="Symbol"
  >((</a
  ><a name="12864" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12865"
  > </a
  ><a name="12866" href="Session.html#12826" class="Bound"
  >s</a
  ><a name="12867"
  > </a
  ><a name="12868" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12869"
  > </a
  ><a name="12870" href="Session.html#12830" class="Bound"
  >I</a
  ><a name="12871"
  > </a
  ><a name="12872" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12873"
  > </a
  ><a name="12874" href="Session.html#12834" class="Bound"
  >O</a
  ><a name="12875"
  > </a
  ><a name="12876" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12877"
  > </a
  ><a name="12878" href="Session.html#5446" class="Function Operator"
  >[</a
  ><a name="12879"
  > </a
  ><a name="12880" href="Session.html#12826" class="Bound"
  >s</a
  ><a name="12881"
  > </a
  ><a name="12882" href="Session.html#5446" class="Function Operator"
  >]&#191;</a
  ><a name="12884"
  > </a
  ><a name="12885" href="Session.html#12822" class="Bound"
  >A</a
  ><a name="12886" class="Symbol"
  >)</a
  ><a name="12887"
  > </a
  ><a name="12888" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="12889"
  > </a
  ><a name="12890" href="Session.html#12786" class="Bound"
  >&#915;</a
  ><a name="12891" class="Symbol"
  >)</a
  ><a name="12892"
  > </a
  ><a name="12893" class="Symbol"
  >&#955;</a
  ><a name="12894"
  > </a
  ><a name="12895" href="Session.html#12895" class="Bound"
  >i</a
  ><a name="12896"
  > </a
  ><a name="12897" class="Symbol"
  >&#8594;</a
  ><a name="12898"
  >
                   </a
  ><a name="12918" href="Session.html#12782" class="Bound"
  >F</a
  ><a name="12919"
  > </a
  ><a name="12920" href="Session.html#12784" class="Bound"
  >X</a
  ><a name="12921"
  > </a
  ><a name="12922" class="Symbol"
  >(</a
  ><a name="12923" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="12925"
  > </a
  ><a name="12926" class="Symbol"
  >(</a
  ><a name="12927" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="12928"
  > </a
  ><a name="12929" href="Session.Base.html#4881" class="InductiveConstructor"
  >-</a
  ><a name="12930"
  > </a
  ><a name="12931" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="12932"
  > </a
  ><a name="12933" href="Session.html#12822" class="Bound"
  >A</a
  ><a name="12934" class="Symbol"
  >)</a
  ><a name="12935"
  > </a
  ><a name="12936" href="Session.html#12895" class="Bound"
  >i</a
  ><a name="12937" class="Symbol"
  >)</a
  ><a name="12938"
  > </a
  ><a name="12939" href="Session.html#12788" class="Bound"
  >&#916;</a
  ><a name="12940"
  ></pre>
<p>We are free to run clients as many times as we want (<code>Ctr</code>), or even refrain from doing so (<code>Wk</code>).</p>
<pre></a
  ><a name="13066" href="Session.html#13066" class="Function"
  >Wk</a
  ><a name="13068"
  > </a
  ><a name="13069" href="Session.html#13069" class="Function"
  >Ctr</a
  ><a name="13072"
  > </a
  ><a name="13073" class="Symbol"
  >:</a
  ><a name="13074"
  > </a
  ><a name="13075" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="13077"
  >
</a
  ><a name="13078" href="Session.html#13066" class="Function"
  >Wk</a
  ><a name="13080"
  > </a
  ><a name="13081" href="Session.html#13081" class="Bound"
  >&#915;</a
  ><a name="13082"
  > </a
  ><a name="13083" href="Session.html#13083" class="Bound"
  >&#916;</a
  ><a name="13084"
  > </a
  ><a name="13085" class="Symbol"
  >=</a
  ><a name="13086"
  > </a
  ><a name="13087" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13088"
  > </a
  ><a name="13089" class="Symbol"
  >(</a
  ><a name="13090" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="13094"
  > </a
  ><a name="13095" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13096"
  > </a
  ><a name="13097" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="13101"
  > </a
  ><a name="13102" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13103"
  > </a
  ><a name="13104" class="Symbol"
  >_)</a
  ><a name="13106"
  > </a
  ><a name="13107" class="Symbol"
  >&#955;</a
  ><a name="13108"
  > </a
  ><a name="13109" href="Session.html#13109" class="Bound"
  >W</a
  ><a name="13110"
  > </a
  ><a name="13111" class="Symbol"
  >&#8594;</a
  ><a name="13112"
  >
         </a
  ><a name="13122" class="Keyword"
  >let</a
  ><a name="13125"
  > </a
  ><a name="13126" href="Session.html#13126" class="Bound"
  >A</a
  ><a name="13127"
  > </a
  ><a name="13128" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13129"
  > </a
  ><a name="13130" href="Session.html#13130" class="Bound"
  >s</a
  ><a name="13131"
  > </a
  ><a name="13132" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13133"
  > </a
  ><a name="13134" href="Session.html#13134" class="Bound"
  >I</a
  ><a name="13135"
  > </a
  ><a name="13136" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13137"
  > </a
  ><a name="13138" href="Session.html#13138" class="Bound"
  >O</a
  ><a name="13139"
  > </a
  ><a name="13140" class="Symbol"
  >=</a
  ><a name="13141"
  > </a
  ><a name="13142" href="Session.html#13109" class="Bound"
  >W</a
  ><a name="13143"
  > </a
  ><a name="13144" class="Keyword"
  >in</a
  ><a name="13146"
  >
         </a
  ><a name="13156" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13157"
  > </a
  ><a name="13158" class="Symbol"
  >((</a
  ><a name="13160" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="13161"
  > </a
  ><a name="13162" href="Session.html#13130" class="Bound"
  >s</a
  ><a name="13163"
  > </a
  ><a name="13164" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13165"
  > </a
  ><a name="13166" href="Session.html#13134" class="Bound"
  >I</a
  ><a name="13167"
  > </a
  ><a name="13168" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13169"
  > </a
  ><a name="13170" href="Session.html#13138" class="Bound"
  >O</a
  ><a name="13171"
  > </a
  ><a name="13172" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13173"
  > </a
  ><a name="13174" href="Session.html#5446" class="Function Operator"
  >[</a
  ><a name="13175"
  > </a
  ><a name="13176" href="Session.html#13130" class="Bound"
  >s</a
  ><a name="13177"
  > </a
  ><a name="13178" href="Session.html#5446" class="Function Operator"
  >]&#191;</a
  ><a name="13180"
  > </a
  ><a name="13181" href="Session.html#13126" class="Bound"
  >A</a
  ><a name="13182" class="Symbol"
  >)</a
  ><a name="13183"
  > </a
  ><a name="13184" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="13185"
  > </a
  ><a name="13186" href="Session.html#13081" class="Bound"
  >&#915;</a
  ><a name="13187" class="Symbol"
  >)</a
  ><a name="13188"
  >
           </a
  ><a name="13200" class="Symbol"
  >(</a
  ><a name="13201" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >_&#8801;_</a
  ><a name="13204"
  > </a
  ><a name="13205" href="Session.html#13083" class="Bound"
  >&#916;</a
  ><a name="13206"
  > </a
  ><a name="13207" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="13208"
  > </a
  ><a name="13209" href="Session.Base.html#3041" class="Function"
  >rm</a
  ><a name="13211" class="Symbol"
  >)</a
  ><a name="13212"
  >
</a
  ><a name="13213" href="Session.html#13069" class="Function"
  >Ctr</a
  ><a name="13216"
  > </a
  ><a name="13217" href="Session.html#13217" class="Bound"
  >&#915;</a
  ><a name="13218"
  > </a
  ><a name="13219" href="Session.html#13219" class="Bound"
  >&#916;</a
  ><a name="13220"
  > </a
  ><a name="13221" class="Symbol"
  >=</a
  ><a name="13222"
  > </a
  ><a name="13223" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13224"
  > </a
  ><a name="13225" class="Symbol"
  >(</a
  ><a name="13226" href="Session.html#3791" class="Function"
  >Code</a
  ><a name="13230"
  > </a
  ><a name="13231" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13232"
  > </a
  ><a name="13233" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="13237"
  > </a
  ><a name="13238" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13239"
  > </a
  ><a name="13240" class="Symbol"
  >_)</a
  ><a name="13242"
  > </a
  ><a name="13243" class="Symbol"
  >&#955;</a
  ><a name="13244"
  > </a
  ><a name="13245" href="Session.html#13245" class="Bound"
  >W</a
  ><a name="13246"
  > </a
  ><a name="13247" class="Symbol"
  >&#8594;</a
  ><a name="13248"
  >
          </a
  ><a name="13259" class="Keyword"
  >let</a
  ><a name="13262"
  > </a
  ><a name="13263" href="Session.html#13263" class="Bound"
  >A</a
  ><a name="13264"
  > </a
  ><a name="13265" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13266"
  > </a
  ><a name="13267" href="Session.html#13267" class="Bound"
  >s</a
  ><a name="13268"
  > </a
  ><a name="13269" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13270"
  > </a
  ><a name="13271" href="Session.html#13271" class="Bound"
  >I</a
  ><a name="13272"
  > </a
  ><a name="13273" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13274"
  > </a
  ><a name="13275" href="Session.html#13275" class="Bound"
  >O</a
  ><a name="13276"
  > </a
  ><a name="13277" class="Symbol"
  >=</a
  ><a name="13278"
  > </a
  ><a name="13279" href="Session.html#13245" class="Bound"
  >W</a
  ><a name="13280"
  > </a
  ><a name="13281" class="Keyword"
  >in</a
  ><a name="13283"
  >
          </a
  ><a name="13294" class="Keyword"
  >let</a
  ><a name="13297"
  > </a
  ><a name="13298" href="Session.html#13298" class="Bound"
  >&#964;</a
  ><a name="13299"
  > </a
  ><a name="13300" class="Symbol"
  >=</a
  ><a name="13301"
  > </a
  ><a name="13302" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="13303"
  > </a
  ><a name="13304" href="Session.html#13267" class="Bound"
  >s</a
  ><a name="13305"
  > </a
  ><a name="13306" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13307"
  > </a
  ><a name="13308" href="Session.html#13271" class="Bound"
  >I</a
  ><a name="13309"
  > </a
  ><a name="13310" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13311"
  > </a
  ><a name="13312" href="Session.html#13275" class="Bound"
  >O</a
  ><a name="13313"
  > </a
  ><a name="13314" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="13315"
  > </a
  ><a name="13316" href="Session.html#5446" class="Function Operator"
  >[</a
  ><a name="13317"
  > </a
  ><a name="13318" href="Session.html#13267" class="Bound"
  >s</a
  ><a name="13319"
  > </a
  ><a name="13320" href="Session.html#5446" class="Function Operator"
  >]&#191;</a
  ><a name="13322"
  > </a
  ><a name="13323" href="Session.html#13263" class="Bound"
  >A</a
  ><a name="13324"
  > </a
  ><a name="13325" class="Keyword"
  >in</a
  ><a name="13327"
  >
            </a
  ><a name="13340" href="Session.html#13298" class="Bound"
  >&#964;</a
  ><a name="13341"
  > </a
  ><a name="13342" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="13343"
  > </a
  ><a name="13344" href="Session.html#13217" class="Bound"
  >&#915;</a
  ><a name="13345"
  >
          </a
  ><a name="13356" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="13357"
  > </a
  ><a name="13358" href="Session.html#13219" class="Bound"
  >&#916;</a
  ><a name="13359"
  > </a
  ><a name="13360" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="13361"
  > </a
  ><a name="13362" href="Session.html#13217" class="Bound"
  >&#915;</a
  ><a name="13363"
  > </a
  ><a name="13364" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="13365"
  > </a
  ><a name="13366" href="Session.html#13298" class="Bound"
  >&#964;</a
  ><a name="13367"
  ></pre>
<p>To add corecursion, we must first define what we consider a <em>guarded</em> (hence, hopefully, <em>productive</em>) session.</p>
<pre></a
  ><a name="13506" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13513"
  > </a
  ><a name="13514" class="Symbol"
  >:</a
  ><a name="13515"
  > </a
  ><a name="13516" class="Symbol"
  >&#8704;</a
  ><a name="13517"
  > </a
  ><a name="13518" class="Symbol"
  >{</a
  ><a name="13519" href="Session.html#13519" class="Bound"
  >I</a
  ><a name="13520"
  > </a
  ><a name="13521" href="Session.html#13521" class="Bound"
  >O</a
  ><a name="13522" class="Symbol"
  >}</a
  ><a name="13523"
  > </a
  ><a name="13524" class="Symbol"
  >&#8594;</a
  ><a name="13525"
  > </a
  ><a name="13526" href="Session.html#13519" class="Bound"
  >I</a
  ><a name="13527"
  > </a
  ><a name="13528" href="Session.html#3858" class="Datatype Operator"
  >&#9657;</a
  ><a name="13529"
  > </a
  ><a name="13530" href="Session.html#13521" class="Bound"
  >O</a
  ><a name="13531"
  > </a
  ><a name="13532" class="Symbol"
  >&#8594;</a
  ><a name="13533"
  > </a
  ><a name="13534" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="13538"
  >
</a
  ><a name="13539" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13546"
  > </a
  ><a name="13547" class="Symbol"
  >(</a
  ><a name="13548" href="Session.html#3937" class="InductiveConstructor"
  >`I</a
  ><a name="13550"
  > </a
  ><a name="13551" href="Session.html#13551" class="Bound"
  >i</a
  ><a name="13552"
  >    </a
  ><a name="13556" class="Symbol"
  >)</a
  ><a name="13557"
  > </a
  ><a name="13558" class="Symbol"
  >=</a
  ><a name="13559"
  > </a
  ><a name="13560" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="13561"
  >
</a
  ><a name="13562" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13569"
  > </a
  ><a name="13570" class="Symbol"
  >(</a
  ><a name="13571" href="Session.html#4042" class="InductiveConstructor"
  >`&#931;</a
  ><a name="13573"
  > </a
  ><a name="13574" href="Session.html#13574" class="Bound"
  >S</a
  ><a name="13575"
  > </a
  ><a name="13576" href="Session.html#13576" class="Bound"
  >T</a
  ><a name="13577"
  >  </a
  ><a name="13579" class="Symbol"
  >)</a
  ><a name="13580"
  > </a
  ><a name="13581" class="Symbol"
  >=</a
  ><a name="13582"
  > </a
  ><a name="13583" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13584"
  >
</a
  ><a name="13585" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13592"
  > </a
  ><a name="13593" class="Symbol"
  >(</a
  ><a name="13594" href="Session.html#4045" class="InductiveConstructor"
  >`&#928;</a
  ><a name="13596"
  > </a
  ><a name="13597" href="Session.html#13597" class="Bound"
  >S</a
  ><a name="13598"
  > </a
  ><a name="13599" href="Session.html#13599" class="Bound"
  >T</a
  ><a name="13600"
  >  </a
  ><a name="13602" class="Symbol"
  >)</a
  ><a name="13603"
  > </a
  ><a name="13604" class="Symbol"
  >=</a
  ><a name="13605"
  > </a
  ><a name="13606" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="13607"
  >
</a
  ><a name="13608" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13615"
  > </a
  ><a name="13616" class="Symbol"
  >(</a
  ><a name="13617" href="Session.html#4162" class="InductiveConstructor"
  >`^</a
  ><a name="13619"
  > </a
  ><a name="13620" href="Session.html#13620" class="Bound"
  >T</a
  ><a name="13621"
  >    </a
  ><a name="13625" class="Symbol"
  >)</a
  ><a name="13626"
  > </a
  ><a name="13627" class="Symbol"
  >=</a
  ><a name="13628"
  > </a
  ><a name="13629" class="Symbol"
  >&#8704;</a
  ><a name="13630"
  > </a
  ><a name="13631" href="Session.html#13631" class="Bound"
  >s</a
  ><a name="13632"
  > </a
  ><a name="13633" class="Symbol"
  >&#8594;</a
  ><a name="13634"
  > </a
  ><a name="13635" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13642"
  > </a
  ><a name="13643" class="Symbol"
  >(</a
  ><a name="13644" href="Session.html#13620" class="Bound"
  >T</a
  ><a name="13645"
  > </a
  ><a name="13646" href="Session.html#13631" class="Bound"
  >s</a
  ><a name="13647" class="Symbol"
  >)</a
  ><a name="13648"
  >
</a
  ><a name="13649" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13656"
  > </a
  ><a name="13657" class="Symbol"
  >(</a
  ><a name="13658" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%3</a
  ><a name="13660"
  > </a
  ><a name="13661" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >L</a
  ><a name="13662"
  > </a
  ><a name="13663" href="Session.html#4271" class="InductiveConstructor Operator"
  >&#8855;</a
  ><a name="13664"
  > </a
  ><a name="13665" href="Session.html#13665" class="Bound"
  >R</a
  ><a name="13666" class="Symbol"
  >)</a
  ><a name="13667"
  > </a
  ><a name="13668" class="Symbol"
  >=</a
  ><a name="13669"
  > </a
  ><a name="13670" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13677"
  > </a
  ><a name="13678" href="Session.html#13665" class="Bound"
  >R</a
  ><a name="13679"
  >
</a
  ><a name="13680" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13687"
  > </a
  ><a name="13688" class="Symbol"
  >(</a
  ><a name="13689" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%3</a
  ><a name="13691"
  > </a
  ><a name="13692" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >L</a
  ><a name="13693"
  > </a
  ><a name="13694" href="Session.html#4275" class="InductiveConstructor Operator"
  >&#8523;</a
  ><a name="13695"
  > </a
  ><a name="13696" href="Session.html#13696" class="Bound"
  >R</a
  ><a name="13697" class="Symbol"
  >)</a
  ><a name="13698"
  > </a
  ><a name="13699" class="Symbol"
  >=</a
  ><a name="13700"
  > </a
  ><a name="13701" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13708"
  > </a
  ><a name="13709" href="Session.html#13696" class="Bound"
  >R</a
  ><a name="13710"
  >
</a
  ><a name="13711" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13718"
  > </a
  ><a name="13719" class="Symbol"
  >(</a
  ><a name="13720" href="Session.html#4369" class="InductiveConstructor Operator"
  >&#161;</a
  ><a name="13721"
  > </a
  ><a name="13722" href="Session.html#13722" class="Bound"
  >F</a
  ><a name="13723"
  >     </a
  ><a name="13728" class="Symbol"
  >)</a
  ><a name="13729"
  > </a
  ><a name="13730" class="Symbol"
  >=</a
  ><a name="13731"
  > </a
  ><a name="13732" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="13733"
  >
</a
  ><a name="13734" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13741"
  > </a
  ><a name="13742" class="Symbol"
  >(</a
  ><a name="13743" href="Session.html#4372" class="InductiveConstructor Operator"
  >&#191;</a
  ><a name="13744"
  > </a
  ><a name="13745" href="Session.html#13745" class="Bound"
  >F</a
  ><a name="13746"
  >     </a
  ><a name="13751" class="Symbol"
  >)</a
  ><a name="13752"
  > </a
  ><a name="13753" class="Symbol"
  >=</a
  ><a name="13754"
  > </a
  ><a name="13755" href="Session.Base.html#168" class="Datatype"
  >&#8869;</a
  ><a name="13756"
  >
</a
  ><a name="13757" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13764"
  > </a
  ><a name="13765" class="Symbol"
  >(</a
  ><a name="13766" href="Session.html#4459" class="InductiveConstructor"
  >`&#957;</a
  ><a name="13768"
  > </a
  ><a name="13769" href="Session.html#13769" class="Bound"
  >F</a
  ><a name="13770"
  > </a
  ><a name="13771" class="Symbol"
  >_</a
  ><a name="13772"
  >  </a
  ><a name="13774" class="Symbol"
  >)</a
  ><a name="13775"
  > </a
  ><a name="13776" class="Symbol"
  >=</a
  ><a name="13777"
  > </a
  ><a name="13778" class="Symbol"
  >&#8704;</a
  ><a name="13779"
  > </a
  ><a name="13780" href="Session.html#13780" class="Bound"
  >o</a
  ><a name="13781"
  > </a
  ><a name="13782" class="Symbol"
  >&#8594;</a
  ><a name="13783"
  > </a
  ><a name="13784" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="13791"
  > </a
  ><a name="13792" class="Symbol"
  >(</a
  ><a name="13793" href="Session.html#13769" class="Bound"
  >F</a
  ><a name="13794"
  > </a
  ><a name="13795" href="Session.html#13780" class="Bound"
  >o</a
  ><a name="13796" class="Symbol"
  >)</a
  ><a name="13797"
  ></pre>
<p>To provide syntax to productive nested loops that run for a possibly infinite amount of time, we use the following definition:</p>
<pre></a
  ><a name="13951" href="Session.html#13951" class="Function"
  >CoRec</a
  ><a name="13956"
  > </a
  ><a name="13957" class="Symbol"
  >:</a
  ><a name="13958"
  > </a
  ><a name="13959" class="Symbol"
  >(</a
  ><a name="13960" class="PrimitiveType"
  >Set</a
  ><a name="13963"
  > </a
  ><a name="13964" class="Symbol"
  >&#8594;</a
  ><a name="13965"
  > </a
  ><a name="13966" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="13968" class="Symbol"
  >)</a
  ><a name="13969"
  > </a
  ><a name="13970" class="Symbol"
  >&#8594;</a
  ><a name="13971"
  > </a
  ><a name="13972" class="PrimitiveType"
  >Set</a
  ><a name="13975"
  > </a
  ><a name="13976" class="Symbol"
  >&#8594;</a
  ><a name="13977"
  > </a
  ><a name="13978" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="13980"
  >
</a
  ><a name="13981" href="Session.html#13951" class="Function"
  >CoRec</a
  ><a name="13986"
  > </a
  ><a name="13987" href="Session.html#13987" class="Bound"
  >F</a
  ><a name="13988"
  > </a
  ><a name="13989" href="Session.html#13989" class="Bound"
  >X</a
  ><a name="13990"
  > </a
  ><a name="13991" href="Session.html#13991" class="Bound"
  >&#915;</a
  ><a name="13992"
  > </a
  ><a name="13993" href="Session.html#13993" class="Bound"
  >&#916;</a
  ><a name="13994"
  > </a
  ><a name="13995" class="Symbol"
  >=</a
  ><a name="13996"
  > </a
  ><a name="13997" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="13998"
  > </a
  ><a name="13999" class="Symbol"
  >(</a
  ><a name="14000" href="Session.Base.html#4862" class="Datatype"
  >Side</a
  ><a name="14004"
  > </a
  ><a name="14005" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14006"
  > </a
  ><a name="14007" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14008"
  > </a
  ><a name="14009" class="Symbol"
  >_</a
  ><a name="14010"
  > </a
  ><a name="14011" class="Symbol"
  >&#955;</a
  ><a name="14012"
  > </a
  ><a name="14013" href="Session.html#14013" class="Bound"
  >I</a
  ><a name="14014"
  > </a
  ><a name="14015" class="Symbol"
  >&#8594;</a
  ><a name="14016"
  > </a
  ><a name="14017" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14018"
  > </a
  ><a name="14019" class="Symbol"
  >_</a
  ><a name="14020"
  > </a
  ><a name="14021" class="Symbol"
  >&#955;</a
  ><a name="14022"
  > </a
  ><a name="14023" href="Session.html#14023" class="Bound"
  >O</a
  ><a name="14024"
  > </a
  ><a name="14025" class="Symbol"
  >&#8594;</a
  ><a name="14026"
  > </a
  ><a name="14027" class="Symbol"
  >(</a
  ><a name="14028" href="Session.html#14023" class="Bound"
  >O</a
  ><a name="14029"
  > </a
  ><a name="14030" class="Symbol"
  >&#8594;</a
  ><a name="14031"
  > </a
  ><a name="14032" href="Session.html#3769" class="Function"
  >De</a
  ><a name="14034"
  > </a
  ><a name="14035" class="Symbol"
  >(</a
  ><a name="14036" href="Session.html#14013" class="Bound"
  >I</a
  ><a name="14037"
  > </a
  ><a name="14038" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="14039"
  > </a
  ><a name="14040" href="Session.html#14023" class="Bound"
  >O</a
  ><a name="14041" class="Symbol"
  >))</a
  ><a name="14043"
  > </a
  ><a name="14044" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14045"
  > </a
  ><a name="14046" href="Session.html#14023" class="Bound"
  >O</a
  ><a name="14047" class="Symbol"
  >)</a
  ><a name="14048"
  > </a
  ><a name="14049" class="Symbol"
  >&#955;</a
  ><a name="14050"
  > </a
  ><a name="14051" href="Session.html#14051" class="Bound"
  >W</a
  ><a name="14052"
  > </a
  ><a name="14053" class="Symbol"
  >&#8594;</a
  ><a name="14054"
  >
                </a
  ><a name="14071" class="Keyword"
  >let</a
  ><a name="14074"
  > </a
  ><a name="14075" href="Session.html#14075" class="Bound"
  >s</a
  ><a name="14076"
  > </a
  ><a name="14077" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14078"
  > </a
  ><a name="14079" href="Session.html#14079" class="Bound"
  >I</a
  ><a name="14080"
  > </a
  ><a name="14081" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14082"
  > </a
  ><a name="14083" href="Session.html#14083" class="Bound"
  >O</a
  ><a name="14084"
  > </a
  ><a name="14085" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14086"
  > </a
  ><a name="14087" href="Session.html#14087" class="Bound"
  >T</a
  ><a name="14088"
  > </a
  ><a name="14089" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14090"
  > </a
  ><a name="14091" href="Session.html#14091" class="Bound"
  >o</a
  ><a name="14092"
  > </a
  ><a name="14093" class="Symbol"
  >=</a
  ><a name="14094"
  > </a
  ><a name="14095" href="Session.html#14051" class="Bound"
  >W</a
  ><a name="14096"
  > </a
  ><a name="14097" class="Keyword"
  >in</a
  ><a name="14099"
  > 
                </a
  ><a name="14117" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="14118"
  > </a
  ><a name="14119" class="Symbol"
  >((</a
  ><a name="14121" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="14122"
  > </a
  ><a name="14123" href="Session.html#14075" class="Bound"
  >s</a
  ><a name="14124"
  > </a
  ><a name="14125" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14126"
  > </a
  ><a name="14127" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="14129"
  > </a
  ><a name="14130" href="Session.html#4459" class="InductiveConstructor"
  >`&#957;</a
  ><a name="14132"
  > </a
  ><a name="14133" href="Session.html#14087" class="Bound"
  >T</a
  ><a name="14134"
  > </a
  ><a name="14135" href="Session.html#14091" class="Bound"
  >o</a
  ><a name="14136" class="Symbol"
  >)</a
  ><a name="14137"
  > </a
  ><a name="14138" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="14139"
  > </a
  ><a name="14140" href="Session.html#13991" class="Bound"
  >&#915;</a
  ><a name="14141" class="Symbol"
  >)</a
  ><a name="14142"
  > </a
  ><a name="14143" class="Symbol"
  >&#955;</a
  ><a name="14144"
  > </a
  ><a name="14145" href="Session.html#14145" class="Bound"
  >i</a
  ><a name="14146"
  > </a
  ><a name="14147" class="Symbol"
  >&#8594;</a
  ><a name="14148"
  >
                  </a
  ><a name="14167" class="Symbol"
  >((</a
  ><a name="14169" href="Session.html#14169" class="Bound"
  >o</a
  ><a name="14170"
  > </a
  ><a name="14171" class="Symbol"
  >:</a
  ><a name="14172"
  > </a
  ><a name="14173" href="Session.html#14083" class="Bound"
  >O</a
  ><a name="14174" class="Symbol"
  >)</a
  ><a name="14175"
  > </a
  ><a name="14176" class="Symbol"
  >&#8594;</a
  ><a name="14177"
  >   </a
  ><a name="14180" href="Session.html#13506" class="Function"
  >Guarded</a
  ><a name="14187"
  > </a
  ><a name="14188" class="Symbol"
  >(</a
  ><a name="14189" href="Session.html#14087" class="Bound"
  >T</a
  ><a name="14190"
  > </a
  ><a name="14191" href="Session.html#14169" class="Bound"
  >o</a
  ><a name="14192" class="Symbol"
  >)</a
  ><a name="14193"
  >
                             </a
  ><a name="14223" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14224"
  > </a
  ><a name="14225" href="Session.html#13987" class="Bound"
  >F</a
  ><a name="14226"
  > </a
  ><a name="14227" class="Symbol"
  >(</a
  ><a name="14228" href="Session.html#13989" class="Bound"
  >X</a
  ><a name="14229"
  > </a
  ><a name="14230" href="Data.Sum.html#404" class="Datatype Operator"
  >&#8846;</a
  ><a name="14231"
  > </a
  ><a name="14232" href="Session.html#14083" class="Bound"
  >O</a
  ><a name="14233" class="Symbol"
  >)</a
  ><a name="14234"
  > </a
  ><a name="14235" class="Symbol"
  >(</a
  ><a name="14236" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="14238"
  > </a
  ><a name="14239" class="Symbol"
  >(</a
  ><a name="14240" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="14241"
  > </a
  ><a name="14242" href="Session.html#14075" class="Bound"
  >s</a
  ><a name="14243"
  > </a
  ><a name="14244" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="14245"
  > </a
  ><a name="14246" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="14248"
  > </a
  ><a name="14249" href="Session.html#14087" class="Bound"
  >T</a
  ><a name="14250"
  > </a
  ><a name="14251" href="Session.html#14169" class="Bound"
  >o</a
  ><a name="14252" class="Symbol"
  >)</a
  ><a name="14253"
  > </a
  ><a name="14254" href="Session.html#14145" class="Bound"
  >i</a
  ><a name="14255" class="Symbol"
  >)</a
  ><a name="14256"
  > </a
  ><a name="14257" href="Session.html#13993" class="Bound"
  >&#916;</a
  ><a name="14258" class="Symbol"
  >)</a
  ><a name="14259"
  >
                </a
  ><a name="14276" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14277"
  > </a
  ><a name="14278" href="Session.html#13993" class="Bound"
  >&#916;</a
  ><a name="14279"
  > </a
  ><a name="14280" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="14281"
  > </a
  ><a name="14282" href="Session.Base.html#3041" class="Function"
  >rm</a
  ><a name="14284"
  > </a
  ><a name="14285" href="Session.html#14145" class="Bound"
  >i</a
  ><a name="14286"
  ></pre>
<h3 id="tags">Tags</h3>
<p>We adopt a &quot;tagful&quot; syntax, where nodes of the syntax tree are made of dependent pairs whose first component is of type <code>Tag</code>.</p>
<pre></a
  ><a name="14450" class="Keyword"
  >module</a
  ><a name="14456"
  > </a
  ><a name="14457" href="Session.html#14457" class="Module"
  >T</a
  ><a name="14458"
  > </a
  ><a name="14459" class="Keyword"
  >where</a
  ><a name="14464"
  >

  </a
  ><a name="14468" class="Keyword"
  >data</a
  ><a name="14472"
  > </a
  ><a name="14473" href="Session.html#14473" class="Datatype"
  >Tag</a
  ><a name="14476"
  > </a
  ><a name="14477" class="Symbol"
  >:</a
  ><a name="14478"
  > </a
  ><a name="14479" class="PrimitiveType"
  >Set</a
  ><a name="14482"
  > </a
  ><a name="14483" class="Keyword"
  >where</a
  ><a name="14488"
  >
    </a
  ><a name="14493" href="Session.html#14493" class="InductiveConstructor"
  >new</a
  ><a name="14496"
  > </a
  ><a name="14497" href="Session.html#14497" class="InductiveConstructor"
  >fork</a
  ><a name="14501"
  >       </a
  ><a name="14508" class="Symbol"
  >:</a
  ><a name="14509"
  > </a
  ><a name="14510" href="Session.html#14473" class="Datatype"
  >Tag</a
  ><a name="14513"
  >
    </a
  ><a name="14518" href="Session.html#14518" class="InductiveConstructor"
  >send</a
  ><a name="14522"
  > </a
  ><a name="14523" href="Session.html#14523" class="InductiveConstructor"
  >recv</a
  ><a name="14527"
  >      </a
  ><a name="14533" class="Symbol"
  >:</a
  ><a name="14534"
  > </a
  ><a name="14535" href="Session.html#14473" class="Datatype"
  >Tag</a
  ><a name="14538"
  >
    </a
  ><a name="14543" href="Session.html#14543" class="InductiveConstructor"
  >!!</a
  ><a name="14545"
  > </a
  ><a name="14546" href="Session.html#14546" class="InductiveConstructor"
  >??</a
  ><a name="14548"
  > </a
  ><a name="14549" href="Session.html#14549" class="InductiveConstructor"
  >wk</a
  ><a name="14551"
  > </a
  ><a name="14552" href="Session.html#14552" class="InductiveConstructor"
  >ctr</a
  ><a name="14555"
  >   </a
  ><a name="14558" class="Symbol"
  >:</a
  ><a name="14559"
  > </a
  ><a name="14560" href="Session.html#14473" class="Datatype"
  >Tag</a
  ><a name="14563"
  >
    </a
  ><a name="14568" href="Session.html#14568" class="InductiveConstructor"
  >corec</a
  ><a name="14573"
  >          </a
  ><a name="14583" class="Symbol"
  >:</a
  ><a name="14584"
  > </a
  ><a name="14585" href="Session.html#14473" class="Datatype"
  >Tag</a
  ><a name="14588"
  >
    </a
  ><a name="14593" href="Session.html#14593" class="InductiveConstructor"
  >write</a
  ><a name="14598"
  > </a
  ><a name="14599" href="Session.html#14599" class="InductiveConstructor"
  >read</a
  ><a name="14603"
  >     </a
  ><a name="14608" class="Symbol"
  >:</a
  ><a name="14609"
  > </a
  ><a name="14610" href="Session.html#14473" class="Datatype"
  >Tag</a
  ><a name="14613"
  >
    </a
  ><a name="14618" href="Session.html#14618" class="InductiveConstructor"
  >at</a
  ><a name="14620"
  >             </a
  ><a name="14633" class="Symbol"
  >:</a
  ><a name="14634"
  > </a
  ><a name="14635" href="Session.html#14473" class="Datatype"
  >Tag</a
  ><a name="14638"
  >
    </a
  ><a name="14643" href="Session.html#14643" class="InductiveConstructor"
  >end</a
  ><a name="14646"
  >            </a
  ><a name="14658" class="Symbol"
  >:</a
  ><a name="14659"
  > </a
  ><a name="14660" href="Session.html#14473" class="Datatype"
  >Tag</a
  ><a name="14663"
  >

</a
  ><a name="14665" class="Keyword"
  >open</a
  ><a name="14669"
  > </a
  ><a name="14670" href="Session.html#14457" class="Module"
  >T</a
  ><a name="14671"
  > </a
  ><a name="14672" class="Keyword"
  >using</a
  ><a name="14677"
  > </a
  ><a name="14678" class="Symbol"
  >(</a
  ><a name="14679"
  >Tag</a
  ><a name="14682" class="Symbol"
  >)</a
  ><a name="14683"
  ></pre>
<h3 id="the-tagged-family-of-functors">The tagged family of functors</h3>
<p>The type of the second component is given by the following family, which groups all the above functors.</p>
<pre></a
  ><a name="14849" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="14850"
  > </a
  ><a name="14851" class="Symbol"
  >:</a
  ><a name="14852"
  > </a
  ><a name="14853" href="Session.html#14473" class="Datatype"
  >Tag</a
  ><a name="14856"
  > </a
  ><a name="14857" class="Symbol"
  >&#8594;</a
  ><a name="14858"
  > </a
  ><a name="14859" class="Symbol"
  >(</a
  ><a name="14860" class="PrimitiveType"
  >Set</a
  ><a name="14863"
  > </a
  ><a name="14864" class="Symbol"
  >&#8594;</a
  ><a name="14865"
  > </a
  ><a name="14866" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="14868" class="Symbol"
  >)</a
  ><a name="14869"
  > </a
  ><a name="14870" class="Symbol"
  >&#8594;</a
  ><a name="14871"
  > </a
  ><a name="14872" class="PrimitiveType"
  >Set</a
  ><a name="14875"
  > </a
  ><a name="14876" class="Symbol"
  >&#8594;</a
  ><a name="14877"
  > </a
  ><a name="14878" href="Session.html#9494" class="Function"
  >Ty</a
  ><a name="14880"
  >
</a
  ><a name="14881" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="14882"
  > </a
  ><a name="14883" href="Session.html#14493" class="InductiveConstructor"
  >T.new</a
  ><a name="14888"
  >   </a
  ><a name="14891" href="Session.html#14891" class="Bound"
  >T</a
  ><a name="14892"
  > </a
  ><a name="14893" href="Session.html#14893" class="Bound"
  >X</a
  ><a name="14894"
  > </a
  ><a name="14895" href="Session.html#14895" class="Bound"
  >&#915;</a
  ><a name="14896"
  > </a
  ><a name="14897" href="Session.html#14897" class="Bound"
  >&#916;</a
  ><a name="14898"
  > </a
  ><a name="14899" class="Symbol"
  >=</a
  ><a name="14900"
  > </a
  ><a name="14901" href="Session.html#9727" class="Function"
  >New</a
  ><a name="14904"
  >          </a
  ><a name="14914" href="Session.html#14895" class="Bound"
  >&#915;</a
  ><a name="14915"
  > </a
  ><a name="14916" href="Session.html#14897" class="Bound"
  >&#916;</a
  ><a name="14917"
  >                 </a
  ><a name="14934" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14935"
  > </a
  ><a name="14936" href="Session.html#14893" class="Bound"
  >X</a
  ><a name="14937"
  > </a
  ><a name="14938" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="14939"
  > </a
  ><a name="14940" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="14941"
  >
</a
  ><a name="14942" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="14943"
  > </a
  ><a name="14944" href="Session.html#14497" class="InductiveConstructor"
  >T.fork</a
  ><a name="14950"
  >  </a
  ><a name="14952" href="Session.html#14952" class="Bound"
  >T</a
  ><a name="14953"
  > </a
  ><a name="14954" href="Session.html#14954" class="Bound"
  >X</a
  ><a name="14955"
  > </a
  ><a name="14956" href="Session.html#14956" class="Bound"
  >&#915;</a
  ><a name="14957"
  > </a
  ><a name="14958" href="Session.html#14958" class="Bound"
  >&#916;</a
  ><a name="14959"
  > </a
  ><a name="14960" class="Symbol"
  >=</a
  ><a name="14961"
  > </a
  ><a name="14962" href="Session.html#11977" class="Function"
  >Fork</a
  ><a name="14966"
  >   </a
  ><a name="14969" class="Symbol"
  >(</a
  ><a name="14970" href="Session.html#14952" class="Bound"
  >T</a
  ><a name="14971"
  > </a
  ><a name="14972" href="Session.html#14954" class="Bound"
  >X</a
  ><a name="14973" class="Symbol"
  >)</a
  ><a name="14974"
  > </a
  ><a name="14975" href="Session.html#14956" class="Bound"
  >&#915;</a
  ><a name="14976"
  > </a
  ><a name="14977" href="Session.html#14958" class="Bound"
  >&#916;</a
  ><a name="14978"
  >                 </a
  ><a name="14995" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="14996"
  > </a
  ><a name="14997" href="Session.html#14954" class="Bound"
  >X</a
  ><a name="14998"
  > </a
  ><a name="14999" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15000"
  > </a
  ><a name="15001" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15002"
  >
</a
  ><a name="15003" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="15004"
  > </a
  ><a name="15005" href="Session.html#14518" class="InductiveConstructor"
  >T.send</a
  ><a name="15011"
  >  </a
  ><a name="15013" href="Session.html#15013" class="Bound"
  >T</a
  ><a name="15014"
  > </a
  ><a name="15015" href="Session.html#15015" class="Bound"
  >X</a
  ><a name="15016"
  > </a
  ><a name="15017" href="Session.html#15017" class="Bound"
  >&#915;</a
  ><a name="15018"
  > </a
  ><a name="15019" href="Session.html#15019" class="Bound"
  >&#916;</a
  ><a name="15020"
  > </a
  ><a name="15021" class="Symbol"
  >=</a
  ><a name="15022"
  > </a
  ><a name="15023" href="Session.html#10014" class="Function"
  >Send</a
  ><a name="15027"
  >         </a
  ><a name="15036" href="Session.html#15017" class="Bound"
  >&#915;</a
  ><a name="15037"
  > </a
  ><a name="15038" href="Session.html#15019" class="Bound"
  >&#916;</a
  ><a name="15039"
  >                 </a
  ><a name="15056" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="15057"
  > </a
  ><a name="15058" href="Session.html#15015" class="Bound"
  >X</a
  ><a name="15059"
  > </a
  ><a name="15060" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15061"
  > </a
  ><a name="15062" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15063"
  >
</a
  ><a name="15064" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="15065"
  > </a
  ><a name="15066" href="Session.html#14523" class="InductiveConstructor"
  >T.recv</a
  ><a name="15072"
  >  </a
  ><a name="15074" href="Session.html#15074" class="Bound"
  >T</a
  ><a name="15075"
  > </a
  ><a name="15076" href="Session.html#15076" class="Bound"
  >X</a
  ><a name="15077"
  > </a
  ><a name="15078" href="Session.html#15078" class="Bound"
  >&#915;</a
  ><a name="15079"
  > </a
  ><a name="15080" href="Session.html#15080" class="Bound"
  >&#916;</a
  ><a name="15081"
  > </a
  ><a name="15082" class="Symbol"
  >=</a
  ><a name="15083"
  > </a
  ><a name="15084" href="Session.html#10019" class="Function"
  >Receive</a
  ><a name="15091"
  >      </a
  ><a name="15097" href="Session.html#15078" class="Bound"
  >&#915;</a
  ><a name="15098"
  > </a
  ><a name="15099" href="Session.html#15080" class="Bound"
  >&#916;</a
  ><a name="15100"
  >                 </a
  ><a name="15117" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="15118"
  > </a
  ><a name="15119" href="Session.html#15076" class="Bound"
  >X</a
  ><a name="15120"
  > </a
  ><a name="15121" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15122"
  > </a
  ><a name="15123" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15124"
  >
</a
  ><a name="15125" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="15126"
  > </a
  ><a name="15127" href="Session.html#14543" class="InductiveConstructor"
  >T.!!</a
  ><a name="15131"
  >    </a
  ><a name="15135" href="Session.html#15135" class="Bound"
  >T</a
  ><a name="15136"
  > </a
  ><a name="15137" href="Session.html#15137" class="Bound"
  >X</a
  ><a name="15138"
  > </a
  ><a name="15139" href="Session.html#15139" class="Bound"
  >&#915;</a
  ><a name="15140"
  > </a
  ><a name="15141" href="Session.html#15141" class="Bound"
  >&#916;</a
  ><a name="15142"
  > </a
  ><a name="15143" class="Symbol"
  >=</a
  ><a name="15144"
  > </a
  ><a name="15145" href="Session.html#12290" class="Function"
  >Server</a
  ><a name="15151"
  > </a
  ><a name="15152" class="Symbol"
  >(</a
  ><a name="15153" href="Session.html#15135" class="Bound"
  >T</a
  ><a name="15154"
  > </a
  ><a name="15155" href="Session.html#15137" class="Bound"
  >X</a
  ><a name="15156" class="Symbol"
  >)</a
  ><a name="15157"
  > </a
  ><a name="15158" href="Session.html#15139" class="Bound"
  >&#915;</a
  ><a name="15159"
  > </a
  ><a name="15160" href="Session.html#15141" class="Bound"
  >&#916;</a
  ><a name="15161"
  >                 </a
  ><a name="15178" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="15179"
  > </a
  ><a name="15180" href="Session.html#15137" class="Bound"
  >X</a
  ><a name="15181"
  > </a
  ><a name="15182" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15183"
  > </a
  ><a name="15184" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15185"
  >
</a
  ><a name="15186" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="15187"
  > </a
  ><a name="15188" href="Session.html#14546" class="InductiveConstructor"
  >T.??</a
  ><a name="15192"
  >    </a
  ><a name="15196" href="Session.html#15196" class="Bound"
  >T</a
  ><a name="15197"
  > </a
  ><a name="15198" href="Session.html#15198" class="Bound"
  >X</a
  ><a name="15199"
  > </a
  ><a name="15200" href="Session.html#15200" class="Bound"
  >&#915;</a
  ><a name="15201"
  > </a
  ><a name="15202" href="Session.html#15202" class="Bound"
  >&#916;</a
  ><a name="15203"
  > </a
  ><a name="15204" class="Symbol"
  >=</a
  ><a name="15205"
  > </a
  ><a name="15206" href="Session.html#12744" class="Function"
  >Client</a
  ><a name="15212"
  >  </a
  ><a name="15214" href="Session.html#15196" class="Bound"
  >T</a
  ><a name="15215"
  > </a
  ><a name="15216" href="Session.html#15198" class="Bound"
  >X</a
  ><a name="15217"
  >  </a
  ><a name="15219" href="Session.html#15200" class="Bound"
  >&#915;</a
  ><a name="15220"
  > </a
  ><a name="15221" href="Session.html#15202" class="Bound"
  >&#916;</a
  ><a name="15222"
  >
</a
  ><a name="15223" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="15224"
  > </a
  ><a name="15225" href="Session.html#14549" class="InductiveConstructor"
  >T.wk</a
  ><a name="15229"
  >    </a
  ><a name="15233" href="Session.html#15233" class="Bound"
  >T</a
  ><a name="15234"
  > </a
  ><a name="15235" href="Session.html#15235" class="Bound"
  >X</a
  ><a name="15236"
  > </a
  ><a name="15237" href="Session.html#15237" class="Bound"
  >&#915;</a
  ><a name="15238"
  > </a
  ><a name="15239" href="Session.html#15239" class="Bound"
  >&#916;</a
  ><a name="15240"
  > </a
  ><a name="15241" class="Symbol"
  >=</a
  ><a name="15242"
  > </a
  ><a name="15243" href="Session.html#13066" class="Function"
  >Wk</a
  ><a name="15245"
  >           </a
  ><a name="15256" href="Session.html#15237" class="Bound"
  >&#915;</a
  ><a name="15257"
  > </a
  ><a name="15258" href="Session.html#15239" class="Bound"
  >&#916;</a
  ><a name="15259"
  >                 </a
  ><a name="15276" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="15277"
  > </a
  ><a name="15278" href="Session.html#15235" class="Bound"
  >X</a
  ><a name="15279"
  > </a
  ><a name="15280" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15281"
  > </a
  ><a name="15282" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15283"
  >
</a
  ><a name="15284" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="15285"
  > </a
  ><a name="15286" href="Session.html#14552" class="InductiveConstructor"
  >T.ctr</a
  ><a name="15291"
  >   </a
  ><a name="15294" href="Session.html#15294" class="Bound"
  >T</a
  ><a name="15295"
  > </a
  ><a name="15296" href="Session.html#15296" class="Bound"
  >X</a
  ><a name="15297"
  > </a
  ><a name="15298" href="Session.html#15298" class="Bound"
  >&#915;</a
  ><a name="15299"
  > </a
  ><a name="15300" href="Session.html#15300" class="Bound"
  >&#916;</a
  ><a name="15301"
  > </a
  ><a name="15302" class="Symbol"
  >=</a
  ><a name="15303"
  > </a
  ><a name="15304" href="Session.html#13069" class="Function"
  >Ctr</a
  ><a name="15307"
  >          </a
  ><a name="15317" href="Session.html#15298" class="Bound"
  >&#915;</a
  ><a name="15318"
  > </a
  ><a name="15319" href="Session.html#15300" class="Bound"
  >&#916;</a
  ><a name="15320"
  >                 </a
  ><a name="15337" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="15338"
  > </a
  ><a name="15339" href="Session.html#15296" class="Bound"
  >X</a
  ><a name="15340"
  > </a
  ><a name="15341" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15342"
  > </a
  ><a name="15343" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15344"
  >
</a
  ><a name="15345" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="15346"
  > </a
  ><a name="15347" href="Session.html#14568" class="InductiveConstructor"
  >T.corec</a
  ><a name="15354"
  > </a
  ><a name="15355" href="Session.html#15355" class="Bound"
  >T</a
  ><a name="15356"
  > </a
  ><a name="15357" href="Session.html#15357" class="Bound"
  >X</a
  ><a name="15358"
  > </a
  ><a name="15359" href="Session.html#15359" class="Bound"
  >&#915;</a
  ><a name="15360"
  > </a
  ><a name="15361" href="Session.html#15361" class="Bound"
  >&#916;</a
  ><a name="15362"
  > </a
  ><a name="15363" class="Symbol"
  >=</a
  ><a name="15364"
  > </a
  ><a name="15365" href="Session.html#13951" class="Function"
  >CoRec</a
  ><a name="15370"
  >   </a
  ><a name="15373" href="Session.html#15355" class="Bound"
  >T</a
  ><a name="15374"
  > </a
  ><a name="15375" href="Session.html#15357" class="Bound"
  >X</a
  ><a name="15376"
  >  </a
  ><a name="15378" href="Session.html#15359" class="Bound"
  >&#915;</a
  ><a name="15379"
  > </a
  ><a name="15380" href="Session.html#15361" class="Bound"
  >&#916;</a
  ><a name="15381"
  >
</a
  ><a name="15382" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="15383"
  > </a
  ><a name="15384" href="Session.html#14593" class="InductiveConstructor"
  >T.write</a
  ><a name="15391"
  > </a
  ><a name="15392" href="Session.html#15392" class="Bound"
  >T</a
  ><a name="15393"
  > </a
  ><a name="15394" href="Session.html#15394" class="Bound"
  >X</a
  ><a name="15395"
  > </a
  ><a name="15396" href="Session.html#15396" class="Bound"
  >&#915;</a
  ><a name="15397"
  > </a
  ><a name="15398" href="Session.html#15398" class="Bound"
  >&#916;</a
  ><a name="15399"
  > </a
  ><a name="15400" class="Symbol"
  >=</a
  ><a name="15401"
  > </a
  ><a name="15402" href="Session.html#10567" class="Function"
  >Write</a
  ><a name="15407"
  >        </a
  ><a name="15415" href="Session.html#15396" class="Bound"
  >&#915;</a
  ><a name="15416"
  > </a
  ><a name="15417" href="Session.html#15398" class="Bound"
  >&#916;</a
  ><a name="15418"
  >                 </a
  ><a name="15435" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="15436"
  > </a
  ><a name="15437" href="Session.html#15394" class="Bound"
  >X</a
  ><a name="15438"
  > </a
  ><a name="15439" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15440"
  > </a
  ><a name="15441" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="15442"
  >
</a
  ><a name="15443" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="15444"
  > </a
  ><a name="15445" href="Session.html#14599" class="InductiveConstructor"
  >T.read</a
  ><a name="15451"
  >  </a
  ><a name="15453" href="Session.html#15453" class="Bound"
  >T</a
  ><a name="15454"
  > </a
  ><a name="15455" href="Session.html#15455" class="Bound"
  >X</a
  ><a name="15456"
  > </a
  ><a name="15457" href="Session.html#15457" class="Bound"
  >&#915;</a
  ><a name="15458"
  > </a
  ><a name="15459" href="Session.html#15459" class="Bound"
  >&#916;</a
  ><a name="15460"
  > </a
  ><a name="15461" class="Symbol"
  >=</a
  ><a name="15462"
  > </a
  ><a name="15463" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="15464"
  > </a
  ><a name="15465" class="Symbol"
  >(</a
  ><a name="15466" href="Session.html#10573" class="Function"
  >Read</a
  ><a name="15470"
  > </a
  ><a name="15471" href="Session.html#15457" class="Bound"
  >&#915;</a
  ><a name="15472"
  > </a
  ><a name="15473" href="Session.html#15459" class="Bound"
  >&#916;</a
  ><a name="15474" class="Symbol"
  >)</a
  ><a name="15475"
  > </a
  ><a name="15476" class="Symbol"
  >&#955;</a
  ><a name="15477"
  > </a
  ><a name="15478" href="Session.html#15478" class="Bound"
  >p</a
  ><a name="15479"
  > </a
  ><a name="15480" class="Symbol"
  >&#8594;</a
  ><a name="15481"
  >                          
                    </a
  ><a name="15528" class="Keyword"
  >let</a
  ><a name="15531"
  > </a
  ><a name="15532" class="Symbol"
  >((_</a
  ><a name="15535"
  > </a
  ><a name="15536" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15537"
  > </a
  ><a name="15538" href="Session.html#15538" class="Bound"
  >J</a
  ><a name="15539"
  > </a
  ><a name="15540" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15541"
  > </a
  ><a name="15542" class="Symbol"
  >_)</a
  ><a name="15544"
  > </a
  ><a name="15545" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15546"
  > </a
  ><a name="15547" class="Symbol"
  >_)</a
  ><a name="15549"
  > </a
  ><a name="15550" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15551"
  > </a
  ><a name="15552" class="Symbol"
  >_</a
  ><a name="15553"
  > </a
  ><a name="15554" class="Symbol"
  >=</a
  ><a name="15555"
  > </a
  ><a name="15556" href="Session.html#15478" class="Bound"
  >p</a
  ><a name="15557"
  > </a
  ><a name="15558" class="Keyword"
  >in</a
  ><a name="15560"
  >   </a
  ><a name="15563" href="Session.html#15455" class="Bound"
  >X</a
  ><a name="15564"
  > </a
  ><a name="15565" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15566"
  > </a
  ><a name="15567" href="Session.html#15538" class="Bound"
  >J</a
  ><a name="15568"
  >       
</a
  ><a name="15576" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="15577"
  > </a
  ><a name="15578" href="Session.html#14618" class="InductiveConstructor"
  >T.at</a
  ><a name="15582"
  >    </a
  ><a name="15586" href="Session.html#15586" class="Bound"
  >T</a
  ><a name="15587"
  > </a
  ><a name="15588" href="Session.html#15588" class="Bound"
  >X</a
  ><a name="15589"
  > </a
  ><a name="15590" href="Session.html#15590" class="Bound"
  >&#915;</a
  ><a name="15591"
  > </a
  ><a name="15592" href="Session.html#15592" class="Bound"
  >&#916;</a
  ><a name="15593"
  > </a
  ><a name="15594" class="Symbol"
  >=</a
  ><a name="15595"
  > </a
  ><a name="15596" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="15597"
  > </a
  ><a name="15598" class="Symbol"
  >(</a
  ><a name="15599" href="Session.html#11163" class="Function"
  >At</a
  ><a name="15601"
  > </a
  ><a name="15602" href="Session.html#15590" class="Bound"
  >&#915;</a
  ><a name="15603"
  > </a
  ><a name="15604" href="Session.html#15592" class="Bound"
  >&#916;</a
  ><a name="15605" class="Symbol"
  >)</a
  ><a name="15606"
  > </a
  ><a name="15607" class="Symbol"
  >&#955;</a
  ><a name="15608"
  > </a
  ><a name="15609" href="Session.html#15609" class="Bound"
  >p</a
  ><a name="15610"
  > </a
  ><a name="15611" class="Symbol"
  >&#8594;</a
  ><a name="15612"
  >
                    </a
  ><a name="15633" class="Keyword"
  >let</a
  ><a name="15636"
  > </a
  ><a name="15637" class="Symbol"
  >(_</a
  ><a name="15639"
  > </a
  ><a name="15640" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15641"
  > </a
  ><a name="15642" href="Session.html#15642" class="Bound"
  >O</a
  ><a name="15643"
  > </a
  ><a name="15644" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15645"
  > </a
  ><a name="15646" class="Symbol"
  >_)</a
  ><a name="15648"
  > </a
  ><a name="15649" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15650"
  > </a
  ><a name="15651" class="Symbol"
  >_</a
  ><a name="15652"
  > </a
  ><a name="15653" class="Symbol"
  >=</a
  ><a name="15654"
  > </a
  ><a name="15655" href="Session.html#15609" class="Bound"
  >p</a
  ><a name="15656"
  > </a
  ><a name="15657" class="Keyword"
  >in</a
  ><a name="15659"
  >         </a
  ><a name="15668" href="Session.html#15588" class="Bound"
  >X</a
  ><a name="15669"
  > </a
  ><a name="15670" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15671"
  > </a
  ><a name="15672" href="Session.html#15642" class="Bound"
  >O</a
  ><a name="15673"
  >
</a
  ><a name="15674" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="15675"
  > </a
  ><a name="15676" href="Session.html#14643" class="InductiveConstructor"
  >T.end</a
  ><a name="15681"
  >   </a
  ><a name="15684" href="Session.html#15684" class="Bound"
  >T</a
  ><a name="15685"
  > </a
  ><a name="15686" href="Session.html#15686" class="Bound"
  >X</a
  ><a name="15687"
  > </a
  ><a name="15688" href="Session.html#15688" class="Bound"
  >&#915;</a
  ><a name="15689"
  > </a
  ><a name="15690" href="Session.html#15690" class="Bound"
  >&#916;</a
  ><a name="15691"
  > </a
  ><a name="15692" class="Symbol"
  >=</a
  ><a name="15693"
  > </a
  ><a name="15694" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="15695"
  > </a
  ><a name="15696" class="Symbol"
  >(</a
  ><a name="15697" href="Session.html#11511" class="Function"
  >End</a
  ><a name="15700"
  >  </a
  ><a name="15702" href="Session.html#15688" class="Bound"
  >&#915;</a
  ><a name="15703"
  > </a
  ><a name="15704" href="Session.html#15690" class="Bound"
  >&#916;</a
  ><a name="15705" class="Symbol"
  >)</a
  ><a name="15706"
  > </a
  ><a name="15707" class="Symbol"
  >&#955;</a
  ><a name="15708"
  > </a
  ><a name="15709" href="Session.html#15709" class="Bound"
  >p</a
  ><a name="15710"
  > </a
  ><a name="15711" class="Symbol"
  >&#8594;</a
  ><a name="15712"
  >                             
                    </a
  ><a name="15762" class="Keyword"
  >let</a
  ><a name="15765"
  > </a
  ><a name="15766" class="Symbol"
  >(</a
  ><a name="15767" href="Session.html#15767" class="Bound"
  >I</a
  ><a name="15768"
  > </a
  ><a name="15769" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15770"
  > </a
  ><a name="15771" class="Symbol"
  >_</a
  ><a name="15772"
  > </a
  ><a name="15773" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15774"
  > </a
  ><a name="15775" class="Symbol"
  >_)</a
  ><a name="15777"
  > </a
  ><a name="15778" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="15779"
  > </a
  ><a name="15780" class="Symbol"
  >_</a
  ><a name="15781"
  > </a
  ><a name="15782" class="Symbol"
  >=</a
  ><a name="15783"
  > </a
  ><a name="15784" href="Session.html#15709" class="Bound"
  >p</a
  ><a name="15785"
  > </a
  ><a name="15786" class="Keyword"
  >in</a
  ><a name="15788"
  >         </a
  ><a name="15797" href="Session.html#15686" class="Bound"
  >X</a
  ><a name="15798"
  > </a
  ><a name="15799" href="Relation.Binary.Core.html#4603" class="Datatype Operator"
  >&#8801;</a
  ><a name="15800"
  > </a
  ><a name="15801" href="Session.html#15767" class="Bound"
  >I</a
  ><a name="15802"
  ></pre>
<h3 id="process-terms">Process terms</h3>
<p>As already stated, we plan to adopt codes for indexed functors instead of defining those directly. We could then simply use a generic indexed free monad construction, as in McBride's &quot;Kleisli Arrows of Outrageous Fortune&quot;, encoding our &quot;Atkey-style&quot; parameterisation in the way described there.</p>
<p>To make things simpler we use the following definition for now: this is neither a monad nor a monad transfomer, it is just convenient temporary syntax.</p>
<pre></a
  ><a name="16296" class="Keyword"
  >module</a
  ><a name="16302"
  > </a
  ><a name="16303" href="Session.html#16303" class="Module"
  >Process</a
  ><a name="16310"
  > </a
  ><a name="16311" class="Keyword"
  >where</a
  ><a name="16316"
  >

  </a
  ><a name="16320" class="Keyword"
  >infix</a
  ><a name="16325"
  > </a
  ><a name="16326" class="Number"
  >2</a
  ><a name="16327"
  > _[_&#8866;_]&gt;_

  </a
  ><a name="16340" href="Session.html#16340" class="Function"
  >F</a
  ><a name="16341"
  > </a
  ><a name="16342" class="Symbol"
  >=</a
  ><a name="16343"
  > </a
  ><a name="16344" class="Symbol"
  >&#955;</a
  ><a name="16345"
  > </a
  ><a name="16346" href="Session.html#16346" class="Bound"
  >T</a
  ><a name="16347"
  > </a
  ><a name="16348" href="Session.html#16348" class="Bound"
  >X</a
  ><a name="16349"
  > </a
  ><a name="16350" href="Session.html#16350" class="Bound"
  >&#915;</a
  ><a name="16351"
  > </a
  ><a name="16352" href="Session.html#16352" class="Bound"
  >&#916;</a
  ><a name="16353"
  > </a
  ><a name="16354" class="Symbol"
  >&#8594;</a
  ><a name="16355"
  > </a
  ><a name="16356" href="Data.Product.html#439" class="Record"
  >&#931;</a
  ><a name="16357"
  > </a
  ><a name="16358" href="Session.html#14473" class="Datatype"
  >T.Tag</a
  ><a name="16363"
  > </a
  ><a name="16364" class="Symbol"
  >&#955;</a
  ><a name="16365"
  > </a
  ><a name="16366" href="Session.html#16366" class="Bound"
  >t</a
  ><a name="16367"
  > </a
  ><a name="16368" class="Symbol"
  >&#8594;</a
  ><a name="16369"
  > </a
  ><a name="16370" href="Session.html#14849" class="Function"
  >&#960;</a
  ><a name="16371"
  > </a
  ><a name="16372" href="Session.html#16366" class="Bound"
  >t</a
  ><a name="16373"
  > </a
  ><a name="16374" href="Session.html#16346" class="Bound"
  >T</a
  ><a name="16375"
  > </a
  ><a name="16376" href="Session.html#16348" class="Bound"
  >X</a
  ><a name="16377"
  > </a
  ><a name="16378" href="Session.html#16350" class="Bound"
  >&#915;</a
  ><a name="16379"
  > </a
  ><a name="16380" href="Session.html#16352" class="Bound"
  >&#916;</a
  ><a name="16381"
  >

  </a
  ><a name="16385" class="Keyword"
  >data</a
  ><a name="16389"
  > </a
  ><a name="16390" href="Session.html#16390" class="Datatype Operator"
  >_[_&#8866;_]&gt;_</a
  ><a name="16398"
  > </a
  ><a name="16399" href="Session.html#16399" class="Bound"
  >&#915;</a
  ><a name="16400"
  > </a
  ><a name="16401" class="Symbol"
  >(</a
  ><a name="16402" href="Session.html#16402" class="Bound"
  >M</a
  ><a name="16403"
  > </a
  ><a name="16404" class="Symbol"
  >:</a
  ><a name="16405"
  > </a
  ><a name="16406" class="PrimitiveType"
  >Set</a
  ><a name="16409"
  > </a
  ><a name="16410" class="Symbol"
  >&#8594;</a
  ><a name="16411"
  > </a
  ><a name="16412" class="PrimitiveType"
  >Set</a
  ><a name="16415" class="Symbol"
  >)</a
  ><a name="16416"
  > </a
  ><a name="16417" href="Session.html#16417" class="Bound"
  >X</a
  ><a name="16418"
  > </a
  ><a name="16419" class="Symbol"
  >:</a
  ><a name="16420"
  > </a
  ><a name="16421" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="16423"
  > </a
  ><a name="16424" class="Symbol"
  >&#8594;</a
  ><a name="16425"
  > </a
  ><a name="16426" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="16430"
  > </a
  ><a name="16431" class="Keyword"
  >where</a
  ><a name="16436"
  >
    </a
  ><a name="16441" href="Session.html#16441" class="InductiveConstructor Operator"
  >&#8657;_</a
  ><a name="16443"
  >    </a
  ><a name="16447" class="Symbol"
  >:</a
  ><a name="16448"
  >             </a
  ><a name="16461" href="Session.html#16402" class="Bound"
  >M</a
  ><a name="16462"
  > </a
  ><a name="16463" href="Session.html#16417" class="Bound"
  >X</a
  ><a name="16464"
  >                                </a
  ><a name="16496" class="Symbol"
  >&#8594;</a
  ><a name="16497"
  > </a
  ><a name="16498" href="Session.html#16399" class="Bound"
  >&#915;</a
  ><a name="16499"
  > </a
  ><a name="16500" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="16501"
  > </a
  ><a name="16502" href="Session.html#16402" class="Bound"
  >M</a
  ><a name="16503"
  > </a
  ><a name="16504" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="16505"
  > </a
  ><a name="16506" href="Session.html#16417" class="Bound"
  >X</a
  ><a name="16507"
  > </a
  ><a name="16508" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="16510"
  > </a
  ><a name="16511" href="Session.html#16399" class="Bound"
  >&#915;</a
  ><a name="16512"
  >
    </a
  ><a name="16517" href="Session.html#16517" class="InductiveConstructor Operator"
  >[_]</a
  ><a name="16520"
  >   </a
  ><a name="16523" class="Symbol"
  >:</a
  ><a name="16524"
  > </a
  ><a name="16525" class="Symbol"
  >&#8704;</a
  ><a name="16526"
  > </a
  ><a name="16527" class="Symbol"
  >{</a
  ><a name="16528" href="Session.html#16528" class="Bound"
  >&#916;</a
  ><a name="16529" class="Symbol"
  >}</a
  ><a name="16530"
  >     </a
  ><a name="16535" class="Symbol"
  >&#8594;</a
  ><a name="16536"
  > </a
  ><a name="16537" href="Session.html#16340" class="Function"
  >F</a
  ><a name="16538"
  > </a
  ><a name="16539" class="Symbol"
  >(&#955;</a
  ><a name="16541"
  > </a
  ><a name="16542" href="Session.html#16542" class="Bound"
  >Z</a
  ><a name="16543"
  > </a
  ><a name="16544" href="Session.html#16544" class="Bound"
  >A</a
  ><a name="16545"
  > </a
  ><a name="16546" href="Session.html#16546" class="Bound"
  >B</a
  ><a name="16547"
  > </a
  ><a name="16548" class="Symbol"
  >&#8594;</a
  ><a name="16549"
  > </a
  ><a name="16550" href="Session.html#16544" class="Bound"
  >A</a
  ><a name="16551"
  > </a
  ><a name="16552" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="16553"
  > </a
  ><a name="16554" href="Session.html#16402" class="Bound"
  >M</a
  ><a name="16555"
  > </a
  ><a name="16556" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="16557"
  > </a
  ><a name="16558" href="Session.html#16542" class="Bound"
  >Z</a
  ><a name="16559"
  > </a
  ><a name="16560" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="16562"
  > </a
  ><a name="16563" href="Session.html#16546" class="Bound"
  >B</a
  ><a name="16564" class="Symbol"
  >)</a
  ><a name="16565"
  > </a
  ><a name="16566" href="Session.html#16417" class="Bound"
  >X</a
  ><a name="16567"
  > </a
  ><a name="16568" href="Session.html#16399" class="Bound"
  >&#915;</a
  ><a name="16569"
  > </a
  ><a name="16570" href="Session.html#16528" class="Bound"
  >&#916;</a
  ><a name="16571"
  > </a
  ><a name="16572" class="Symbol"
  >&#8594;</a
  ><a name="16573"
  > </a
  ><a name="16574" href="Session.html#16399" class="Bound"
  >&#915;</a
  ><a name="16575"
  > </a
  ><a name="16576" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="16577"
  > </a
  ><a name="16578" href="Session.html#16402" class="Bound"
  >M</a
  ><a name="16579"
  > </a
  ><a name="16580" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="16581"
  > </a
  ><a name="16582" href="Session.html#16417" class="Bound"
  >X</a
  ><a name="16583"
  > </a
  ><a name="16584" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="16586"
  > </a
  ><a name="16587" href="Session.html#16528" class="Bound"
  >&#916;</a
  ><a name="16588"
  >
    </a
  ><a name="16593" href="Session.html#16593" class="InductiveConstructor Operator"
  >_&#187;=_</a
  ><a name="16597"
  >  </a
  ><a name="16599" class="Symbol"
  >:</a
  ><a name="16600"
  > </a
  ><a name="16601" class="Symbol"
  >&#8704;</a
  ><a name="16602"
  > </a
  ><a name="16603" class="Symbol"
  >{</a
  ><a name="16604" href="Session.html#16604" class="Bound"
  >&#926;</a
  ><a name="16605"
  > </a
  ><a name="16606" href="Session.html#16606" class="Bound"
  >&#916;</a
  ><a name="16607"
  > </a
  ><a name="16608" href="Session.html#16608" class="Bound"
  >Y</a
  ><a name="16609" class="Symbol"
  >}</a
  ><a name="16610"
  > </a
  ><a name="16611" class="Symbol"
  >&#8594;</a
  ><a name="16612"
  > </a
  ><a name="16613" href="Session.html#16399" class="Bound"
  >&#915;</a
  ><a name="16614"
  > </a
  ><a name="16615" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="16616"
  > </a
  ><a name="16617" href="Session.html#16402" class="Bound"
  >M</a
  ><a name="16618"
  > </a
  ><a name="16619" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="16620"
  > </a
  ><a name="16621" href="Session.html#16608" class="Bound"
  >Y</a
  ><a name="16622"
  > </a
  ><a name="16623" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="16625"
  > </a
  ><a name="16626" href="Session.html#16604" class="Bound"
  >&#926;</a
  ><a name="16627"
  >                     </a
  ><a name="16648" class="Symbol"
  >&#8594;</a
  ><a name="16649"
  > 
                   </a
  ><a name="16670" class="Symbol"
  >(</a
  ><a name="16671" href="Session.html#16608" class="Bound"
  >Y</a
  ><a name="16672"
  > </a
  ><a name="16673" class="Symbol"
  >&#8594;</a
  ><a name="16674"
  > </a
  ><a name="16675" href="Session.html#16604" class="Bound"
  >&#926;</a
  ><a name="16676"
  > </a
  ><a name="16677" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="16678"
  > </a
  ><a name="16679" href="Session.html#16402" class="Bound"
  >M</a
  ><a name="16680"
  > </a
  ><a name="16681" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="16682"
  > </a
  ><a name="16683" href="Session.html#16417" class="Bound"
  >X</a
  ><a name="16684"
  > </a
  ><a name="16685" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="16687"
  > </a
  ><a name="16688" href="Session.html#16606" class="Bound"
  >&#916;</a
  ><a name="16689" class="Symbol"
  >)</a
  ><a name="16690"
  >                    </a
  ><a name="16710" class="Symbol"
  >&#8594;</a
  ><a name="16711"
  > </a
  ><a name="16712" href="Session.html#16399" class="Bound"
  >&#915;</a
  ><a name="16713"
  > </a
  ><a name="16714" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="16715"
  > </a
  ><a name="16716" href="Session.html#16402" class="Bound"
  >M</a
  ><a name="16717"
  > </a
  ><a name="16718" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="16719"
  > </a
  ><a name="16720" href="Session.html#16417" class="Bound"
  >X</a
  ><a name="16721"
  > </a
  ><a name="16722" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="16724"
  > </a
  ><a name="16725" href="Session.html#16606" class="Bound"
  >&#916;</a
  ><a name="16726"
  >

</a
  ><a name="16728" class="Keyword"
  >open</a
  ><a name="16732"
  > </a
  ><a name="16733" href="Session.html#16303" class="Module"
  >Process</a
  ><a name="16740"
  > </a
  ><a name="16741" class="Keyword"
  >using</a
  ><a name="16746"
  > </a
  ><a name="16747" class="Symbol"
  >(</a
  ><a name="16748"
  >_[_&#8866;_]&gt;_ </a
  ><a name="16757" class="Symbol"
  >;</a
  ><a name="16758"
  > &#8657;_ </a
  ><a name="16762" class="Symbol"
  >;</a
  ><a name="16763"
  > _&#187;=_ </a
  ><a name="16769" class="Symbol"
  >;</a
  ><a name="16770"
  > [_]</a
  ><a name="16774" class="Symbol"
  >)</a
  ><a name="16775"
  > </a
  ><a name="16776" class="Keyword"
  >public</a
  ><a name="16782"
  ></pre>
<p>Note that referring to the above operators as &quot;strictly positive functors&quot; as we did, while very reasonable from their definitions, is also justified by the fact that Agda's positivity checker accepts <code>_[_⊢_]&gt;_</code>.</p>
<h3 id="syntactic-sugar">Syntactic sugar</h3>
<h4 id="patterns">Patterns</h4>
<p>To construct and pattern match on processes we make extensive use of Agda's <code>pattern</code> facility.</p>
<pre></a
  ><a name="17155" class="Keyword"
  >pattern</a
  ><a name="17162"
  > fork    d x    </a
  ><a name="17178" class="Symbol"
  >=</a
  ><a name="17179"
  > [ T.fork  , </a
  ><a name="17192" class="Symbol"
  >(</a
  ><a name="17193"
  >d , x , &lt;&gt;</a
  ><a name="17203" class="Symbol"
  >)</a
  ><a name="17204"
  >                 , &lt;&gt; ] 
</a
  ><a name="17229" class="Keyword"
  >pattern</a
  ><a name="17236"
  > new            </a
  ><a name="17252" class="Symbol"
  >=</a
  ><a name="17253"
  > [ T.new   , </a
  ><a name="17266" class="Symbol"
  >(_</a
  ><a name="17268"
  > , &lt;&gt;</a
  ><a name="17273" class="Symbol"
  >)</a
  ><a name="17274"
  >                     , &lt;&gt; ] 
</a
  ><a name="17303" class="Keyword"
  >pattern</a
  ><a name="17310"
  > send    i j    </a
  ><a name="17326" class="Symbol"
  >=</a
  ><a name="17327"
  > [ T.send  , % </a
  ><a name="17342" class="Symbol"
  >(</a
  ><a name="17343"
  >i , j , &lt;&gt;</a
  ><a name="17353" class="Symbol"
  >)</a
  ><a name="17354"
  >               , &lt;&gt; ] 
</a
  ><a name="17377" class="Keyword"
  >pattern</a
  ><a name="17384"
  > receive i      </a
  ><a name="17400" class="Symbol"
  >=</a
  ><a name="17401"
  > [ T.recv  , % </a
  ><a name="17416" class="Symbol"
  >(</a
  ><a name="17417"
  >i , &lt;&gt;</a
  ><a name="17423" class="Symbol"
  >)</a
  ><a name="17424"
  >                   , &lt;&gt; ] 
</a
  ><a name="17451" class="Keyword"
  >pattern</a
  ><a name="17458"
  > accept  i a p  </a
  ><a name="17474" class="Symbol"
  >=</a
  ><a name="17475"
  > [ T.!!    , % </a
  ><a name="17490" class="Symbol"
  >(</a
  ><a name="17491"
  >i , a , p , &lt;&gt;</a
  ><a name="17505" class="Symbol"
  >)</a
  ><a name="17506"
  >           , &lt;&gt; ] 
</a
  ><a name="17525" class="Keyword"
  >pattern</a
  ><a name="17532"
  > connect i   p  </a
  ><a name="17548" class="Symbol"
  >=</a
  ><a name="17549"
  > [ T.??    , % </a
  ><a name="17564" class="Symbol"
  >(</a
  ><a name="17565"
  >i , p</a
  ><a name="17570" class="Symbol"
  >)</a
  ><a name="17571"
  >                         ] 
</a
  ><a name="17599" class="Keyword"
  >pattern</a
  ><a name="17606"
  > wont    i      </a
  ><a name="17622" class="Symbol"
  >=</a
  ><a name="17623"
  > [ T.wk    , % </a
  ><a name="17638" class="Symbol"
  >(</a
  ><a name="17639"
  >i , &lt;&gt;</a
  ><a name="17645" class="Symbol"
  >)</a
  ><a name="17646"
  >                   , &lt;&gt; ] 
</a
  ><a name="17673" class="Keyword"
  >pattern</a
  ><a name="17680"
  > twice   i      </a
  ><a name="17696" class="Symbol"
  >=</a
  ><a name="17697"
  > [ T.ctr   , % </a
  ><a name="17712" class="Symbol"
  >(</a
  ><a name="17713"
  >i , &lt;&gt;</a
  ><a name="17719" class="Symbol"
  >)</a
  ><a name="17720"
  >                   , &lt;&gt; ] 
</a
  ><a name="17747" class="Keyword"
  >pattern</a
  ><a name="17754"
  > write   i x    </a
  ><a name="17770" class="Symbol"
  >=</a
  ><a name="17771"
  > [ T.write , </a
  ><a name="17784" class="Symbol"
  >((_</a
  ><a name="17787"
  > , x , </a
  ><a name="17794" class="Symbol"
  >_)</a
  ><a name="17796"
  > , i , &lt;&gt;</a
  ><a name="17805" class="Symbol"
  >)</a
  ><a name="17806"
  >       , &lt;&gt; ] 
</a
  ><a name="17821" class="Keyword"
  >pattern</a
  ><a name="17828"
  > read    i      </a
  ><a name="17844" class="Symbol"
  >=</a
  ><a name="17845"
  > [ T.read  , % </a
  ><a name="17860" class="Symbol"
  >(</a
  ><a name="17861"
  >i , &lt;&gt;</a
  ><a name="17867" class="Symbol"
  >)</a
  ><a name="17868"
  >                   , &lt;&gt; ] 
</a
  ><a name="17895" class="Keyword"
  >pattern</a
  ><a name="17902"
  > end/    i r    </a
  ><a name="17918" class="Symbol"
  >=</a
  ><a name="17919"
  > [ T.end   , </a
  ><a name="17932" class="Symbol"
  >((_</a
  ><a name="17935"
  > , </a
  ><a name="17938" class="Symbol"
  >_</a
  ><a name="17939"
  > , r , </a
  ><a name="17946" class="Symbol"
  >_)</a
  ><a name="17948"
  > , </a
  ><a name="17951" class="Symbol"
  >(</a
  ><a name="17952"
  >i , &lt;&gt;</a
  ><a name="17958" class="Symbol"
  >))</a
  ><a name="17960"
  > , &lt;&gt; ] 
</a
  ><a name="17969" class="Keyword"
  >pattern</a
  ><a name="17976"
  > end     i      </a
  ><a name="17992" class="Symbol"
  >=</a
  ><a name="17993"
  > end/ i </a
  ><a name="18001" class="Symbol"
  >_</a
  ><a name="18002"
  >
</a
  ><a name="18003" class="Keyword"
  >pattern</a
  ><a name="18010"
  > at/     i o    </a
  ><a name="18026" class="Symbol"
  >=</a
  ><a name="18027"
  > [ T.at    , </a
  ><a name="18040" class="Symbol"
  >((</a
  ><a name="18042"
  >%3 </a
  ><a name="18045" class="Symbol"
  >(</a
  ><a name="18046"
  >o , </a
  ><a name="18050" class="Symbol"
  >_)</a
  ><a name="18052"
  > , </a
  ><a name="18055" class="Symbol"
  >(</a
  ><a name="18056"
  >i , &lt;&gt;</a
  ><a name="18062" class="Symbol"
  >)))</a
  ><a name="18065"
  >    , &lt;&gt; ] 
</a
  ><a name="18077" class="Keyword"
  >pattern</a
  ><a name="18084"
  > at      i      </a
  ><a name="18100" class="Symbol"
  >=</a
  ><a name="18101"
  > at/ i </a
  ><a name="18108" class="Symbol"
  >_</a
  ><a name="18109"
  >                                         
</a
  ><a name="18151" class="Keyword"
  >pattern</a
  ><a name="18158"
  > corec   i o gp </a
  ><a name="18174" class="Symbol"
  >=</a
  ><a name="18175"
  > [ T.corec , </a
  ><a name="18188" class="Symbol"
  >(</a
  ><a name="18189"
  >%4 o</a
  ><a name="18193" class="Symbol"
  >)</a
  ><a name="18194"
  > , </a
  ><a name="18197" class="Symbol"
  >(</a
  ><a name="18198"
  >i , </a
  ><a name="18202" class="Symbol"
  >(</a
  ><a name="18203"
  >gp , &lt;&gt;</a
  ><a name="18210" class="Symbol"
  >))</a
  ><a name="18212"
  >          ]</pre>
<p>(We plan to also define a view for these patterns, so that Agda's interactive splitting (<code>C-c C-c</code>) can be recovered after a <code>with</code>)</p>
<h4 id="monadic-binding-notation">Monadic binding notation</h4>
<p>For the binding operator we mimic Haskell's <code>do</code>-notation with a <code>syntax</code> declaration.</p>
<pre></a
  ><a name="18502" class="Keyword"
  >infixr</a
  ><a name="18508"
  > </a
  ><a name="18509" class="Number"
  >5</a
  ><a name="18510"
  > bind
</a
  ><a name="18516" href="Session.html#18516" class="Function"
  >bind</a
  ><a name="18520"
  > </a
  ><a name="18521" class="Symbol"
  >:</a
  ><a name="18522"
  > </a
  ><a name="18523" class="Symbol"
  >&#8704;</a
  ><a name="18524"
  > </a
  ><a name="18525" class="Symbol"
  >{</a
  ><a name="18526" href="Session.html#18526" class="Bound"
  >M</a
  ><a name="18527"
  > </a
  ><a name="18528" href="Session.html#18528" class="Bound"
  >&#915;</a
  ><a name="18529"
  > </a
  ><a name="18530" href="Session.html#18530" class="Bound"
  >&#926;</a
  ><a name="18531"
  > </a
  ><a name="18532" href="Session.html#18532" class="Bound"
  >&#916;</a
  ><a name="18533"
  > </a
  ><a name="18534" href="Session.html#18534" class="Bound"
  >X</a
  ><a name="18535"
  > </a
  ><a name="18536" href="Session.html#18536" class="Bound"
  >Y</a
  ><a name="18537" class="Symbol"
  >}</a
  ><a name="18538"
  > </a
  ><a name="18539" class="Symbol"
  >&#8594;</a
  ><a name="18540"
  > </a
  ><a name="18541" href="Session.html#18528" class="Bound"
  >&#915;</a
  ><a name="18542"
  > </a
  ><a name="18543" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="18544"
  > </a
  ><a name="18545" href="Session.html#18526" class="Bound"
  >M</a
  ><a name="18546"
  > </a
  ><a name="18547" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="18548"
  > </a
  ><a name="18549" href="Session.html#18536" class="Bound"
  >Y</a
  ><a name="18550"
  > </a
  ><a name="18551" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="18553"
  > </a
  ><a name="18554" href="Session.html#18530" class="Bound"
  >&#926;</a
  ><a name="18555"
  >  </a
  ><a name="18557" class="Symbol"
  >&#8594;</a
  ><a name="18558"
  > 
                    </a
  ><a name="18580" class="Symbol"
  >(</a
  ><a name="18581" href="Session.html#18536" class="Bound"
  >Y</a
  ><a name="18582"
  > </a
  ><a name="18583" class="Symbol"
  >&#8594;</a
  ><a name="18584"
  > </a
  ><a name="18585" href="Session.html#18530" class="Bound"
  >&#926;</a
  ><a name="18586"
  > </a
  ><a name="18587" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="18588"
  > </a
  ><a name="18589" href="Session.html#18526" class="Bound"
  >M</a
  ><a name="18590"
  > </a
  ><a name="18591" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="18592"
  > </a
  ><a name="18593" href="Session.html#18534" class="Bound"
  >X</a
  ><a name="18594"
  > </a
  ><a name="18595" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="18597"
  > </a
  ><a name="18598" href="Session.html#18532" class="Bound"
  >&#916;</a
  ><a name="18599" class="Symbol"
  >)</a
  ><a name="18600"
  > </a
  ><a name="18601" class="Symbol"
  >&#8594;</a
  ><a name="18602"
  > </a
  ><a name="18603" href="Session.html#18528" class="Bound"
  >&#915;</a
  ><a name="18604"
  > </a
  ><a name="18605" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="18606"
  > </a
  ><a name="18607" href="Session.html#18526" class="Bound"
  >M</a
  ><a name="18608"
  > </a
  ><a name="18609" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="18610"
  > </a
  ><a name="18611" href="Session.html#18534" class="Bound"
  >X</a
  ><a name="18612"
  > </a
  ><a name="18613" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="18615"
  > </a
  ><a name="18616" href="Session.html#18532" class="Bound"
  >&#916;</a
  ><a name="18617"
  >
</a
  ><a name="18618" href="Session.html#18516" class="Function"
  >bind</a
  ><a name="18622"
  > </a
  ><a name="18623" class="Symbol"
  >=</a
  ><a name="18624"
  > </a
  ><a name="18625" href="Session.html#16593" class="InductiveConstructor Operator"
  >_&#187;=_</a
  ><a name="18629"
  >
</a
  ><a name="18630" class="Keyword"
  >syntax</a
  ><a name="18636"
  > bind m </a
  ><a name="18644" class="Symbol"
  >(&#955;</a
  ><a name="18646"
  > x </a
  ><a name="18649" class="Symbol"
  >&#8594;</a
  ><a name="18650"
  > y</a
  ><a name="18652" class="Symbol"
  >)</a
  ><a name="18653"
  > </a
  ><a name="18654" class="Symbol"
  >=</a
  ><a name="18655"
  > x &lt;- m &#8943; y</pre>

<pre></a
  ><a name="18692" class="Keyword"
  >infixr</a
  ><a name="18698"
  > </a
  ><a name="18699" class="Number"
  >5</a
  ><a name="18700"
  > _&#187;_
</a
  ><a name="18705" href="Session.html#18705" class="Function Operator"
  >_&#187;_</a
  ><a name="18708"
  > </a
  ><a name="18709" class="Symbol"
  >:</a
  ><a name="18710"
  > </a
  ><a name="18711" class="Symbol"
  >&#8704;</a
  ><a name="18712"
  > </a
  ><a name="18713" class="Symbol"
  >{</a
  ><a name="18714" href="Session.html#18714" class="Bound"
  >M</a
  ><a name="18715"
  > </a
  ><a name="18716" href="Session.html#18716" class="Bound"
  >&#915;</a
  ><a name="18717"
  > </a
  ><a name="18718" href="Session.html#18718" class="Bound"
  >&#926;</a
  ><a name="18719"
  > </a
  ><a name="18720" href="Session.html#18720" class="Bound"
  >&#916;</a
  ><a name="18721"
  > </a
  ><a name="18722" href="Session.html#18722" class="Bound"
  >X</a
  ><a name="18723"
  > </a
  ><a name="18724" href="Session.html#18724" class="Bound"
  >Y</a
  ><a name="18725" class="Symbol"
  >}</a
  ><a name="18726"
  > </a
  ><a name="18727" class="Symbol"
  >&#8594;</a
  ><a name="18728"
  > </a
  ><a name="18729" href="Session.html#18716" class="Bound"
  >&#915;</a
  ><a name="18730"
  > </a
  ><a name="18731" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="18732"
  > </a
  ><a name="18733" href="Session.html#18714" class="Bound"
  >M</a
  ><a name="18734"
  > </a
  ><a name="18735" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="18736"
  > </a
  ><a name="18737" href="Session.html#18722" class="Bound"
  >X</a
  ><a name="18738"
  > </a
  ><a name="18739" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="18741"
  > </a
  ><a name="18742" href="Session.html#18718" class="Bound"
  >&#926;</a
  ><a name="18743"
  > </a
  ><a name="18744" class="Symbol"
  >&#8594;</a
  ><a name="18745"
  > </a
  ><a name="18746" href="Session.html#18718" class="Bound"
  >&#926;</a
  ><a name="18747"
  > </a
  ><a name="18748" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="18749"
  > </a
  ><a name="18750" href="Session.html#18714" class="Bound"
  >M</a
  ><a name="18751"
  > </a
  ><a name="18752" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="18753"
  > </a
  ><a name="18754" href="Session.html#18724" class="Bound"
  >Y</a
  ><a name="18755"
  > </a
  ><a name="18756" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="18758"
  > </a
  ><a name="18759" href="Session.html#18720" class="Bound"
  >&#916;</a
  ><a name="18760"
  > </a
  ><a name="18761" class="Symbol"
  >&#8594;</a
  ><a name="18762"
  > </a
  ><a name="18763" href="Session.html#18716" class="Bound"
  >&#915;</a
  ><a name="18764"
  > </a
  ><a name="18765" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="18766"
  > </a
  ><a name="18767" href="Session.html#18714" class="Bound"
  >M</a
  ><a name="18768"
  > </a
  ><a name="18769" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="18770"
  > </a
  ><a name="18771" href="Session.html#18724" class="Bound"
  >Y</a
  ><a name="18772"
  > </a
  ><a name="18773" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="18775"
  > </a
  ><a name="18776" href="Session.html#18720" class="Bound"
  >&#916;</a
  ><a name="18777"
  >
</a
  ><a name="18778" href="Session.html#18778" class="Bound"
  >m</a
  ><a name="18779"
  > </a
  ><a name="18780" href="Session.html#18705" class="Function Operator"
  >&#187;</a
  ><a name="18781"
  > </a
  ><a name="18782" href="Session.html#18782" class="Bound"
  >n</a
  ><a name="18783"
  > </a
  ><a name="18784" class="Symbol"
  >=</a
  ><a name="18785"
  > </a
  ><a name="18786" href="Session.html#18778" class="Bound"
  >m</a
  ><a name="18787"
  > </a
  ><a name="18788" href="Session.html#16593" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="18790"
  > </a
  ><a name="18791" class="Symbol"
  >&#955;</a
  ><a name="18792"
  > </a
  ><a name="18793" href="Session.html#18793" class="Bound"
  >_</a
  ><a name="18794"
  > </a
  ><a name="18795" class="Symbol"
  >&#8594;</a
  ><a name="18796"
  > </a
  ><a name="18797" href="Session.html#18782" class="Bound"
  >n</a
  ><a name="18798"
  ></pre>
<h4 id="write-and-read-dependently"><code>write</code> and <code>read</code> dependently</h4>
<p>We added <code>`^</code> (in Strictly Positive Families we would have used <code>`Δ</code>) to recover the <em>possibility</em> of making use of data exchanged by <code>write</code> and <code>read</code> at the type level.</p>
<pre></a
  ><a name="19042" href="Session.html#19042" class="Function"
  >put</a
  ><a name="19045"
  > </a
  ><a name="19046" class="Symbol"
  >:</a
  ><a name="19047"
  > </a
  ><a name="19048" class="Symbol"
  >&#8704;</a
  ><a name="19049"
  > </a
  ><a name="19050" class="Symbol"
  >{</a
  ><a name="19051" href="Session.html#19051" class="Bound"
  >M</a
  ><a name="19052"
  > </a
  ><a name="19053" href="Session.html#19053" class="Bound"
  >&#915;</a
  ><a name="19054" class="Symbol"
  >}{</a
  ><a name="19056" href="Session.html#19056" class="Bound"
  >I</a
  ><a name="19057"
  > </a
  ><a name="19058" href="Session.html#19058" class="Bound"
  >O</a
  ><a name="19059"
  > </a
  ><a name="19060" href="Session.html#19060" class="Bound"
  >A</a
  ><a name="19061"
  > </a
  ><a name="19062" class="Symbol"
  >:</a
  ><a name="19063"
  > </a
  ><a name="19064" class="PrimitiveType"
  >Set</a
  ><a name="19067" class="Symbol"
  >}{</a
  ><a name="19069" href="Session.html#19069" class="Bound"
  >T</a
  ><a name="19070"
  > </a
  ><a name="19071" class="Symbol"
  >:</a
  ><a name="19072"
  > </a
  ><a name="19073" href="Session.html#19060" class="Bound"
  >A</a
  ><a name="19074"
  > </a
  ><a name="19075" class="Symbol"
  >&#8594;</a
  ><a name="19076"
  > </a
  ><a name="19077" href="Session.html#3769" class="Function"
  >De</a
  ><a name="19079"
  > </a
  ><a name="19080" href="Session.html#19056" class="Bound"
  >I</a
  ><a name="19081" class="Symbol"
  >}{</a
  ><a name="19083" href="Session.html#19083" class="Bound"
  >s</a
  ><a name="19084" class="Symbol"
  >}</a
  ><a name="19085"
  > </a
  ><a name="19086" class="Symbol"
  >&#8594;</a
  ><a name="19087"
  >
      </a
  ><a name="19094" class="Symbol"
  >(</a
  ><a name="19095" href="Session.html#19095" class="Bound"
  >i</a
  ><a name="19096"
  > </a
  ><a name="19097" class="Symbol"
  >:</a
  ><a name="19098"
  > </a
  ><a name="19099" class="Symbol"
  >(</a
  ><a name="19100" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="19101"
  > </a
  ><a name="19102" href="Session.html#19083" class="Bound"
  >s</a
  ><a name="19103"
  > </a
  ><a name="19104" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19105"
  > </a
  ><a name="19106" href="Session.html#19056" class="Bound"
  >I</a
  ><a name="19107"
  > </a
  ><a name="19108" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19109"
  > </a
  ><a name="19110" href="Session.html#19058" class="Bound"
  >O</a
  ><a name="19111"
  > </a
  ><a name="19112" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19113"
  > </a
  ><a name="19114" href="Session.html#5238" class="Function Operator"
  >[</a
  ><a name="19115"
  > </a
  ><a name="19116" href="Session.html#19083" class="Bound"
  >s</a
  ><a name="19117"
  > </a
  ><a name="19118" href="Session.html#5238" class="Function Operator"
  >]&#931;</a
  ><a name="19120"
  > </a
  ><a name="19121" href="Session.html#19060" class="Bound"
  >A</a
  ><a name="19122"
  > </a
  ><a name="19123" class="Symbol"
  >(</a
  ><a name="19124" href="Session.html#4162" class="InductiveConstructor"
  >`^</a
  ><a name="19126"
  > </a
  ><a name="19127" href="Session.html#19069" class="Bound"
  >T</a
  ><a name="19128" class="Symbol"
  >))</a
  ><a name="19130"
  > </a
  ><a name="19131" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="19132"
  > </a
  ><a name="19133" href="Session.html#19053" class="Bound"
  >&#915;</a
  ><a name="19134" class="Symbol"
  >)</a
  ><a name="19135"
  > </a
  ><a name="19136" class="Symbol"
  >&#8594;</a
  ><a name="19137"
  >
      </a
  ><a name="19144" class="Symbol"
  >(</a
  ><a name="19145" href="Session.html#19145" class="Bound"
  >a</a
  ><a name="19146"
  > </a
  ><a name="19147" class="Symbol"
  >:</a
  ><a name="19148"
  > </a
  ><a name="19149" href="Session.html#19060" class="Bound"
  >A</a
  ><a name="19150" class="Symbol"
  >)</a
  ><a name="19151"
  > </a
  ><a name="19152" class="Symbol"
  >&#8594;</a
  ><a name="19153"
  > </a
  ><a name="19154" href="Session.html#19053" class="Bound"
  >&#915;</a
  ><a name="19155"
  > </a
  ><a name="19156" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="19157"
  > </a
  ><a name="19158" href="Session.html#19051" class="Bound"
  >M</a
  ><a name="19159"
  > </a
  ><a name="19160" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="19161"
  > </a
  ><a name="19162" href="Session.html#19060" class="Bound"
  >A</a
  ><a name="19163"
  > </a
  ><a name="19164" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="19166"
  > </a
  ><a name="19167" class="Symbol"
  >(</a
  ><a name="19168" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="19170"
  > </a
  ><a name="19171" class="Symbol"
  >(</a
  ><a name="19172" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="19173"
  > </a
  ><a name="19174" href="Session.html#19083" class="Bound"
  >s</a
  ><a name="19175"
  > </a
  ><a name="19176" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19177"
  > </a
  ><a name="19178" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="19180"
  > </a
  ><a name="19181" href="Session.html#19069" class="Bound"
  >T</a
  ><a name="19182"
  > </a
  ><a name="19183" href="Session.html#19145" class="Bound"
  >a</a
  ><a name="19184" class="Symbol"
  >)</a
  ><a name="19185"
  > </a
  ><a name="19186" class="Symbol"
  >(</a
  ><a name="19187" href="Session.Base.html#3541" class="Function"
  >&#8712;ud</a
  ><a name="19190"
  > </a
  ><a name="19191" href="Session.html#19095" class="Bound"
  >i</a
  ><a name="19192" class="Symbol"
  >))</a
  ><a name="19194"
  >
</a
  ><a name="19195" href="Session.html#19042" class="Function"
  >put</a
  ><a name="19198"
  > </a
  ><a name="19199" href="Session.html#19199" class="Bound"
  >i</a
  ><a name="19200"
  > </a
  ><a name="19201" href="Session.html#19201" class="Bound"
  >a</a
  ><a name="19202"
  > </a
  ><a name="19203" class="Symbol"
  >=</a
  ><a name="19204"
  > </a
  ><a name="19205" href="Session.html#16517" class="InductiveConstructor Operator"
  >write</a
  ><a name="19210"
  > </a
  ><a name="19211" href="Session.html#19199" class="Bound"
  >i</a
  ><a name="19212"
  > </a
  ><a name="19213" href="Session.html#19201" class="Bound"
  >a</a
  ><a name="19214"
  > </a
  ><a name="19215" href="Session.html#16593" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="19217"
  > </a
  ><a name="19218" class="Symbol"
  >&#955;</a
  ><a name="19219"
  > </a
  ><a name="19220" href="Session.html#19220" class="Bound"
  >_</a
  ><a name="19221"
  > </a
  ><a name="19222" class="Symbol"
  >&#8594;</a
  ><a name="19223"
  > </a
  ><a name="19224" href="Session.html#16517" class="InductiveConstructor Operator"
  >at</a
  ><a name="19226"
  > </a
  ><a name="19227" class="Symbol"
  >(</a
  ><a name="19228" href="Session.Base.html#3541" class="Function"
  >&#8712;ud</a
  ><a name="19231"
  > </a
  ><a name="19232" href="Session.html#19199" class="Bound"
  >i</a
  ><a name="19233" class="Symbol"
  >)</a
  ><a name="19234"
  >

</a
  ><a name="19236" href="Session.html#19236" class="Function"
  >get</a
  ><a name="19239"
  > </a
  ><a name="19240" class="Symbol"
  >:</a
  ><a name="19241"
  > </a
  ><a name="19242" class="Symbol"
  >&#8704;</a
  ><a name="19243"
  > </a
  ><a name="19244" class="Symbol"
  >{</a
  ><a name="19245" href="Session.html#19245" class="Bound"
  >M</a
  ><a name="19246"
  > </a
  ><a name="19247" href="Session.html#19247" class="Bound"
  >&#915;</a
  ><a name="19248"
  > </a
  ><a name="19249" href="Session.html#19249" class="Bound"
  >&#916;</a
  ><a name="19250" class="Symbol"
  >}{</a
  ><a name="19252" href="Session.html#19252" class="Bound"
  >I</a
  ><a name="19253"
  > </a
  ><a name="19254" href="Session.html#19254" class="Bound"
  >O</a
  ><a name="19255"
  > </a
  ><a name="19256" href="Session.html#19256" class="Bound"
  >A</a
  ><a name="19257"
  > </a
  ><a name="19258" href="Session.html#19258" class="Bound"
  >B</a
  ><a name="19259"
  > </a
  ><a name="19260" class="Symbol"
  >:</a
  ><a name="19261"
  > </a
  ><a name="19262" class="PrimitiveType"
  >Set</a
  ><a name="19265" class="Symbol"
  >}{</a
  ><a name="19267" href="Session.html#19267" class="Bound"
  >T</a
  ><a name="19268"
  > </a
  ><a name="19269" class="Symbol"
  >:</a
  ><a name="19270"
  > </a
  ><a name="19271" href="Session.html#19256" class="Bound"
  >A</a
  ><a name="19272"
  > </a
  ><a name="19273" class="Symbol"
  >&#8594;</a
  ><a name="19274"
  > </a
  ><a name="19275" href="Session.html#3769" class="Function"
  >De</a
  ><a name="19277"
  > </a
  ><a name="19278" href="Session.html#19252" class="Bound"
  >I</a
  ><a name="19279" class="Symbol"
  >}{</a
  ><a name="19281" href="Session.html#19281" class="Bound"
  >s</a
  ><a name="19282" class="Symbol"
  >}</a
  ><a name="19283"
  >
      </a
  ><a name="19290" class="Symbol"
  >(</a
  ><a name="19291" href="Session.html#19291" class="Bound"
  >i</a
  ><a name="19292"
  > </a
  ><a name="19293" class="Symbol"
  >:</a
  ><a name="19294"
  > </a
  ><a name="19295" class="Symbol"
  >(</a
  ><a name="19296" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="19297"
  > </a
  ><a name="19298" href="Session.html#19281" class="Bound"
  >s</a
  ><a name="19299"
  > </a
  ><a name="19300" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19301"
  > </a
  ><a name="19302" href="Session.html#19252" class="Bound"
  >I</a
  ><a name="19303"
  > </a
  ><a name="19304" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19305"
  > </a
  ><a name="19306" href="Session.html#19254" class="Bound"
  >O</a
  ><a name="19307"
  > </a
  ><a name="19308" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19309"
  > </a
  ><a name="19310" href="Session.html#5245" class="Function Operator"
  >[</a
  ><a name="19311"
  > </a
  ><a name="19312" href="Session.html#19281" class="Bound"
  >s</a
  ><a name="19313"
  > </a
  ><a name="19314" href="Session.html#5245" class="Function Operator"
  >]&#928;</a
  ><a name="19316"
  > </a
  ><a name="19317" href="Session.html#19256" class="Bound"
  >A</a
  ><a name="19318"
  > </a
  ><a name="19319" class="Symbol"
  >(</a
  ><a name="19320" href="Session.html#4162" class="InductiveConstructor"
  >`^</a
  ><a name="19322"
  > </a
  ><a name="19323" href="Session.html#19267" class="Bound"
  >T</a
  ><a name="19324" class="Symbol"
  >))</a
  ><a name="19326"
  > </a
  ><a name="19327" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="19328"
  > </a
  ><a name="19329" href="Session.html#19247" class="Bound"
  >&#915;</a
  ><a name="19330" class="Symbol"
  >)</a
  ><a name="19331"
  > </a
  ><a name="19332" class="Symbol"
  >&#8594;</a
  ><a name="19333"
  >
      </a
  ><a name="19340" class="Symbol"
  >(</a
  ><a name="19341" href="Session.html#19341" class="Bound"
  >f</a
  ><a name="19342"
  > </a
  ><a name="19343" class="Symbol"
  >:</a
  ><a name="19344"
  > </a
  ><a name="19345" class="Symbol"
  >&#8704;</a
  ><a name="19346"
  > </a
  ><a name="19347" href="Session.html#19347" class="Bound"
  >a</a
  ><a name="19348"
  > </a
  ><a name="19349" class="Symbol"
  >&#8594;</a
  ><a name="19350"
  > </a
  ><a name="19351" href="Session.Base.html#3420" class="Function"
  >ud</a
  ><a name="19353"
  > </a
  ><a name="19354" class="Symbol"
  >(</a
  ><a name="19355" href="Data.Maybe.Core.html#353" class="InductiveConstructor"
  >&gt;</a
  ><a name="19356"
  > </a
  ><a name="19357" href="Session.html#19281" class="Bound"
  >s</a
  ><a name="19358"
  > </a
  ><a name="19359" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19360"
  > </a
  ><a name="19361" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >%2</a
  ><a name="19363"
  > </a
  ><a name="19364" href="Session.html#19267" class="Bound"
  >T</a
  ><a name="19365"
  > </a
  ><a name="19366" href="Session.html#19347" class="Bound"
  >a</a
  ><a name="19367" class="Symbol"
  >)</a
  ><a name="19368"
  > </a
  ><a name="19369" class="Symbol"
  >(</a
  ><a name="19370" href="Session.Base.html#3541" class="Function"
  >&#8712;ud</a
  ><a name="19373"
  > </a
  ><a name="19374" href="Session.html#19291" class="Bound"
  >i</a
  ><a name="19375" class="Symbol"
  >)</a
  ><a name="19376"
  > </a
  ><a name="19377" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="19378"
  > </a
  ><a name="19379" href="Session.html#19245" class="Bound"
  >M</a
  ><a name="19380"
  > </a
  ><a name="19381" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="19382"
  > </a
  ><a name="19383" href="Session.html#19258" class="Bound"
  >B</a
  ><a name="19384"
  > </a
  ><a name="19385" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="19387"
  > </a
  ><a name="19388" href="Session.html#19249" class="Bound"
  >&#916;</a
  ><a name="19389" class="Symbol"
  >)</a
  ><a name="19390"
  > </a
  ><a name="19391" class="Symbol"
  >&#8594;</a
  ><a name="19392"
  >
      </a
  ><a name="19399" href="Session.html#19247" class="Bound"
  >&#915;</a
  ><a name="19400"
  > </a
  ><a name="19401" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="19402"
  > </a
  ><a name="19403" href="Session.html#19245" class="Bound"
  >M</a
  ><a name="19404"
  > </a
  ><a name="19405" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="19406"
  > </a
  ><a name="19407" href="Session.html#19258" class="Bound"
  >B</a
  ><a name="19408"
  > </a
  ><a name="19409" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="19411"
  > </a
  ><a name="19412" href="Session.html#19249" class="Bound"
  >&#916;</a
  ><a name="19413"
  >
</a
  ><a name="19414" href="Session.html#19236" class="Function"
  >get</a
  ><a name="19417"
  > </a
  ><a name="19418" href="Session.html#19418" class="Bound"
  >i</a
  ><a name="19419"
  > </a
  ><a name="19420" href="Session.html#19420" class="Bound"
  >f</a
  ><a name="19421"
  > </a
  ><a name="19422" class="Symbol"
  >=</a
  ><a name="19423"
  > </a
  ><a name="19424" href="Session.html#16517" class="InductiveConstructor Operator"
  >read</a
  ><a name="19428"
  > </a
  ><a name="19429" href="Session.html#19418" class="Bound"
  >i</a
  ><a name="19430"
  > </a
  ><a name="19431" href="Session.html#16593" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="19433"
  > </a
  ><a name="19434" class="Symbol"
  >&#955;</a
  ><a name="19435"
  > </a
  ><a name="19436" href="Session.html#19436" class="Bound"
  >a</a
  ><a name="19437"
  > </a
  ><a name="19438" class="Symbol"
  >&#8594;</a
  ><a name="19439"
  > </a
  ><a name="19440" href="Session.html#16517" class="InductiveConstructor Operator"
  >at</a
  ><a name="19442"
  > </a
  ><a name="19443" class="Symbol"
  >(</a
  ><a name="19444" href="Session.Base.html#3541" class="Function"
  >&#8712;ud</a
  ><a name="19447"
  > </a
  ><a name="19448" href="Session.html#19418" class="Bound"
  >i</a
  ><a name="19449" class="Symbol"
  >)</a
  ><a name="19450"
  > </a
  ><a name="19451" href="Session.html#18705" class="Function Operator"
  >&#187;</a
  ><a name="19452"
  > </a
  ><a name="19453" href="Session.html#19420" class="Bound"
  >f</a
  ><a name="19454"
  > </a
  ><a name="19455" href="Session.html#19436" class="Bound"
  >a</a
  ><a name="19456"
  ></pre>
<h4 id="new-channel-for--indexed-sessions"><code>new</code> channel for ⊤-indexed sessions</h4>
<p>We often create channels for stateful sessions where both index sets are <code>⊤</code>: using <code>new⊤</code> helps inference.</p>
<pre></a
  ><a name="19634" href="Session.html#19634" class="Function"
  >new&#8868;</a
  ><a name="19638"
  > </a
  ><a name="19639" class="Symbol"
  >:</a
  ><a name="19640"
  > </a
  ><a name="19641" class="Symbol"
  >&#8704;</a
  ><a name="19642"
  > </a
  ><a name="19643" class="Symbol"
  >{</a
  ><a name="19644" href="Session.html#19644" class="Bound"
  >&#915;</a
  ><a name="19645"
  > </a
  ><a name="19646" href="Session.html#19646" class="Bound"
  >M</a
  ><a name="19647"
  > </a
  ><a name="19648" href="Session.html#19648" class="Bound"
  >F</a
  ><a name="19649" class="Symbol"
  >}</a
  ><a name="19650"
  > </a
  ><a name="19651" class="Symbol"
  >&#8594;</a
  ><a name="19652"
  > </a
  ><a name="19653" href="Session.html#19644" class="Bound"
  >&#915;</a
  ><a name="19654"
  > </a
  ><a name="19655" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="19656"
  > </a
  ><a name="19657" href="Session.html#19646" class="Bound"
  >M</a
  ><a name="19658"
  > </a
  ><a name="19659" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="19660"
  > </a
  ><a name="19661" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="19662"
  > </a
  ><a name="19663" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="19665"
  > </a
  ><a name="19666" href="Session.html#19644" class="Bound"
  >&#915;</a
  ><a name="19667"
  > </a
  ><a name="19668" href="Data.List.html#711" class="InductiveConstructor Operator"
  >&#8759;</a
  ><a name="19669"
  > </a
  ><a name="19670" class="Symbol"
  >(</a
  ><a name="19671" href="Data.Maybe.Core.html#383" class="InductiveConstructor"
  >&#949;</a
  ><a name="19672"
  > </a
  ><a name="19673" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19674"
  > </a
  ><a name="19675" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="19676"
  > </a
  ><a name="19677" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19678"
  > </a
  ><a name="19679" href="Session.Base.html#220" class="Record"
  >&#8868;</a
  ><a name="19680"
  > </a
  ><a name="19681" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="19682"
  > </a
  ><a name="19683" href="Session.html#19648" class="Bound"
  >F</a
  ><a name="19684" class="Symbol"
  >)</a
  ><a name="19685"
  >
</a
  ><a name="19686" href="Session.html#19634" class="Function"
  >new&#8868;</a
  ><a name="19690"
  > </a
  ><a name="19691" class="Symbol"
  >=</a
  ><a name="19692"
  > </a
  ><a name="19693" href="Session.html#16517" class="InductiveConstructor Operator"
  >new</a
  ><a name="19696"
  ></pre>
<h2 id="haskell-evaluator">Haskell evaluator</h2>
<p>To make an efficient use of Haskell channels, while forgetting the data required to compute their &quot;changing&quot; types, we resort to making a <em>sensible</em> use of <strong>unsafe</strong> casts. What follows should therefore be considered as an extension to the <em>trusted base</em>.</p>
<p>We provide <strong>no correctness proof</strong> for this evaluator.</p>
<pre></a
  ><a name="20059" class="Keyword"
  >private</a
  ><a name="20066"
  >

  </a
  ><a name="20070" class="Keyword"
  >postulate</a
  ><a name="20079"
  >
    </a
  ><a name="20084" href="Session.html#20084" class="Postulate"
  >unsafeCoerce</a
  ><a name="20096"
  > </a
  ><a name="20097" class="Symbol"
  >:</a
  ><a name="20098"
  > </a
  ><a name="20099" class="Symbol"
  >&#8704;</a
  ><a name="20100"
  > </a
  ><a name="20101" class="Symbol"
  >{</a
  ><a name="20102" href="Session.html#20102" class="Bound"
  >l1</a
  ><a name="20104" class="Symbol"
  >}{</a
  ><a name="20106" href="Session.html#20106" class="Bound"
  >A</a
  ><a name="20107"
  > </a
  ><a name="20108" class="Symbol"
  >:</a
  ><a name="20109"
  > </a
  ><a name="20110" class="PrimitiveType"
  >Set</a
  ><a name="20113"
  > </a
  ><a name="20114" href="Session.html#20102" class="Bound"
  >l1</a
  ><a name="20116" class="Symbol"
  >}{</a
  ><a name="20118" href="Session.html#20118" class="Bound"
  >l2</a
  ><a name="20120" class="Symbol"
  >}{</a
  ><a name="20122" href="Session.html#20122" class="Bound"
  >B</a
  ><a name="20123"
  > </a
  ><a name="20124" class="Symbol"
  >:</a
  ><a name="20125"
  > </a
  ><a name="20126" class="PrimitiveType"
  >Set</a
  ><a name="20129"
  > </a
  ><a name="20130" href="Session.html#20118" class="Bound"
  >l2</a
  ><a name="20132" class="Symbol"
  >}</a
  ><a name="20133"
  > </a
  ><a name="20134" class="Symbol"
  >&#8594;</a
  ><a name="20135"
  > </a
  ><a name="20136" href="Session.html#20106" class="Bound"
  >A</a
  ><a name="20137"
  > </a
  ><a name="20138" class="Symbol"
  >&#8594;</a
  ><a name="20139"
  > </a
  ><a name="20140" href="Session.html#20122" class="Bound"
  >B</a
  ><a name="20141"
  >

  </a
  ><a name="20145" class="Symbol"
  >{-#</a
  ><a name="20148"
  > </a
  ><a name="20149" class="Keyword"
  >IMPORT</a
  ><a name="20155"
  >   Unsafe.Coerce                                          </a
  ><a name="20213" class="Symbol"
  >#-}</a
  ><a name="20216"
  >
  </a
  ><a name="20219" class="Symbol"
  >{-#</a
  ><a name="20222"
  > </a
  ><a name="20223" class="Keyword"
  >COMPILED</a
  ><a name="20231"
  > </a
  ><a name="20232" href="Session.html#20084" class="Postulate"
  >unsafeCoerce</a
  ><a name="20244"
  > (\ _ _ _ _ -&gt; Unsafe.Coerce.unsafeCoerce) </a
  ><a name="20287" class="Symbol"
  >#-}</a
  ><a name="20290"
  ></pre>

<pre></a
  ><a name="20316" class="Keyword"
  >open</a
  ><a name="20320"
  > </a
  ><a name="20321" class="Keyword"
  >import</a
  ><a name="20327"
  > </a
  ><a name="20328" href="IO.Primitive.html#1" class="Module"
  >IO.Primitive</a
  ><a name="20340"
  > </a
  ><a name="20341" class="Keyword"
  >using</a
  ><a name="20346"
  > </a
  ><a name="20347" class="Symbol"
  >(</a
  ><a name="20348"
  >IO </a
  ><a name="20351" class="Symbol"
  >;</a
  ><a name="20352"
  > return </a
  ><a name="20360" class="Symbol"
  >;</a
  ><a name="20361"
  > _&gt;&gt;=_ </a
  ><a name="20368" class="Symbol"
  >;</a
  ><a name="20369"
  > putStr </a
  ><a name="20377" class="Symbol"
  >;</a
  ><a name="20378"
  > putStrLn</a
  ><a name="20387" class="Symbol"
  >)</a
  ><a name="20388"
  >
</a
  ><a name="20389" class="Keyword"
  >module</a
  ><a name="20395"
  > </a
  ><a name="20396" href="Session.html#20396" class="Module"
  >IO</a
  ><a name="20398"
  > </a
  ><a name="20399" class="Symbol"
  >=</a
  ><a name="20400"
  > </a
  ><a name="20401" href="IO.Primitive.html#1" class="Module"
  >IO.Primitive</a
  ><a name="20413"
  ></pre>

<pre></a
  ><a name="20439" class="Keyword"
  >infix</a
  ><a name="20444"
  > </a
  ><a name="20445" class="Number"
  >2</a
  ><a name="20446"
  > _[IO_]&gt;_
</a
  ><a name="20456" href="Session.html#20456" class="Function Operator"
  >_[IO_]&gt;_</a
  ><a name="20464"
  > </a
  ><a name="20465" class="Symbol"
  >=</a
  ><a name="20466"
  > </a
  ><a name="20467" class="Symbol"
  >&#955;</a
  ><a name="20468"
  > </a
  ><a name="20469" href="Session.html#20469" class="Bound"
  >&#915;</a
  ><a name="20470"
  > </a
  ><a name="20471" href="Session.html#20471" class="Bound"
  >X</a
  ><a name="20472"
  > </a
  ><a name="20473" href="Session.html#20473" class="Bound"
  >&#916;</a
  ><a name="20474"
  > </a
  ><a name="20475" class="Symbol"
  >&#8594;</a
  ><a name="20476"
  > </a
  ><a name="20477" href="Session.html#20469" class="Bound"
  >&#915;</a
  ><a name="20478"
  > </a
  ><a name="20479" href="Session.html#16390" class="Datatype Operator"
  >[</a
  ><a name="20480"
  > </a
  ><a name="20481" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="20483"
  > </a
  ><a name="20484" href="Session.html#16390" class="Datatype Operator"
  >&#8866;</a
  ><a name="20485"
  > </a
  ><a name="20486" href="Session.html#20471" class="Bound"
  >X</a
  ><a name="20487"
  > </a
  ><a name="20488" href="Session.html#16390" class="Datatype Operator"
  >]&gt;</a
  ><a name="20490"
  > </a
  ><a name="20491" href="Session.html#20473" class="Bound"
  >&#916;</a
  ><a name="20492"
  >

</a
  ><a name="20494" href="Session.html#20494" class="Function"
  >IOProc</a
  ><a name="20500"
  > </a
  ><a name="20501" class="Symbol"
  >=</a
  ><a name="20502"
  > </a
  ><a name="20503" class="Symbol"
  >&#955;</a
  ><a name="20504"
  > </a
  ><a name="20505" href="Session.html#20505" class="Bound"
  >X</a
  ><a name="20506"
  > </a
  ><a name="20507" class="Symbol"
  >&#8594;</a
  ><a name="20508"
  > </a
  ><a name="20509" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="20511"
  > </a
  ><a name="20512" href="Session.html#20456" class="Function Operator"
  >[IO</a
  ><a name="20515"
  > </a
  ><a name="20516" href="Session.html#20505" class="Bound"
  >X</a
  ><a name="20517"
  > </a
  ><a name="20518" href="Session.html#20456" class="Function Operator"
  >]&gt;</a
  ><a name="20520"
  > </a
  ><a name="20521" href="Data.List.html#696" class="InductiveConstructor"
  >[]</a
  ><a name="20523"
  >

</a
  ><a name="20525" class="Keyword"
  >open</a
  ><a name="20529"
  > </a
  ><a name="20530" class="Keyword"
  >import</a
  ><a name="20536"
  > </a
  ><a name="20537" href="Control.Concurrent.html#1" class="Module"
  >Control.Concurrent</a
  ><a name="20555"
  >
</a
  ><a name="20556" class="Keyword"
  >module</a
  ><a name="20562"
  > </a
  ><a name="20563" href="Session.html#20563" class="Module"
  >C</a
  ><a name="20564"
  >  </a
  ><a name="20566" class="Symbol"
  >=</a
  ><a name="20567"
  > </a
  ><a name="20568" href="Control.Concurrent.html#1" class="Module"
  >Control.Concurrent</a
  ><a name="20586"
  >
</a
  ><a name="20587" class="Keyword"
  >open</a
  ><a name="20591"
  > </a
  ><a name="20592" class="Keyword"
  >import</a
  ><a name="20598"
  > </a
  ><a name="20599" href="Control.Concurrent.Chan.Synchronous.html#1" class="Module"
  >Control.Concurrent.Chan.Synchronous</a
  ><a name="20634"
  >
</a
  ><a name="20635" class="Keyword"
  >module</a
  ><a name="20641"
  > </a
  ><a name="20642" href="Session.html#20642" class="Module"
  >CS</a
  ><a name="20644"
  > </a
  ><a name="20645" class="Symbol"
  >=</a
  ><a name="20646"
  > </a
  ><a name="20647" href="Control.Concurrent.Chan.Synchronous.html#1" class="Module"
  >Control.Concurrent.Chan.Synchronous</a
  ><a name="20682"
  ></pre>
<p>We need our channels to be untyped, to obtain which we postulate an abstract type and use unsafe coercions to and from it.</p>
<p>This is similar to Pucella and Tov's embedding in <a href="http://www.eecs.harvard.edu/~tov/pubs/haskell-session-types/">&quot;Haskell Session Types with (Almost) No Class&quot;</a>.</p>
<pre></a
  ><a name="20995" class="Keyword"
  >postulate</a
  ><a name="21004"
  > </a
  ><a name="21005" href="Session.html#21005" class="Postulate"
  >Abs</a
  ><a name="21008"
  > </a
  ><a name="21009" class="Symbol"
  >:</a
  ><a name="21010"
  > </a
  ><a name="21011" class="PrimitiveType"
  >Set</a
  ><a name="21014"
  >

</a
  ><a name="21016" href="Session.html#21016" class="Function"
  >UChan</a
  ><a name="21021"
  > </a
  ><a name="21022" class="Symbol"
  >=</a
  ><a name="21023"
  > </a
  ><a name="21024" href="Control.Concurrent.Chan.Synchronous.html#131" class="Postulate"
  >Chan</a
  ><a name="21028"
  > </a
  ><a name="21029" href="Session.html#21005" class="Postulate"
  >Abs</a
  ><a name="21032"
  ></pre>
<p>The channels for a context.</p>
<pre></a
  ><a name="21087" href="Session.html#21087" class="Function Operator"
  >&#10214;_&#10215;Cx</a
  ><a name="21092"
  > </a
  ><a name="21093" class="Symbol"
  >:</a
  ><a name="21094"
  > </a
  ><a name="21095" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="21097"
  > </a
  ><a name="21098" class="Symbol"
  >&#8594;</a
  ><a name="21099"
  > </a
  ><a name="21100" class="PrimitiveType"
  >Set&#8321;</a
  ><a name="21104"
  >
</a
  ><a name="21105" href="Session.html#21087" class="Function Operator"
  >&#10214;_&#10215;Cx</a
  ><a name="21110"
  > </a
  ><a name="21111" class="Symbol"
  >=</a
  ><a name="21112"
  > </a
  ><a name="21113" href="Data.List.All.html#701" class="Datatype"
  >All</a
  ><a name="21116"
  > </a
  ><a name="21117" class="Symbol"
  >&#955;</a
  ><a name="21118"
  > </a
  ><a name="21119" href="Session.html#21119" class="Bound"
  >_</a
  ><a name="21120"
  > </a
  ><a name="21121" class="Symbol"
  >&#8594;</a
  ><a name="21122"
  > </a
  ><a name="21123" href="Session.html#21016" class="Function"
  >UChan</a
  ><a name="21128"
  ></pre>

<pre></a
  ><a name="21154" href="Session.html#21154" class="Function"
  >lookupUChan</a
  ><a name="21165"
  > </a
  ><a name="21166" class="Symbol"
  >:</a
  ><a name="21167"
  > </a
  ><a name="21168" class="Symbol"
  >&#8704;</a
  ><a name="21169"
  > </a
  ><a name="21170" class="Symbol"
  >{</a
  ><a name="21171" href="Session.html#21171" class="Bound"
  >&#915;</a
  ><a name="21172"
  > </a
  ><a name="21173" href="Session.html#21173" class="Bound"
  >C</a
  ><a name="21174" class="Symbol"
  >}</a
  ><a name="21175"
  > </a
  ><a name="21176" class="Symbol"
  >&#8594;</a
  ><a name="21177"
  > </a
  ><a name="21178" class="Symbol"
  >(</a
  ><a name="21179" href="Session.html#21179" class="Bound"
  >i</a
  ><a name="21180"
  > </a
  ><a name="21181" class="Symbol"
  >:</a
  ><a name="21182"
  > </a
  ><a name="21183" href="Session.html#21173" class="Bound"
  >C</a
  ><a name="21184"
  > </a
  ><a name="21185" href="Data.List.Any.html#2915" class="Function Operator"
  >&#8712;</a
  ><a name="21186"
  > </a
  ><a name="21187" href="Session.html#21171" class="Bound"
  >&#915;</a
  ><a name="21188" class="Symbol"
  >)</a
  ><a name="21189"
  > </a
  ><a name="21190" class="Symbol"
  >&#8594;</a
  ><a name="21191"
  > </a
  ><a name="21192" href="Session.html#21087" class="Function Operator"
  >&#10214;</a
  ><a name="21193"
  > </a
  ><a name="21194" href="Session.html#21171" class="Bound"
  >&#915;</a
  ><a name="21195"
  > </a
  ><a name="21196" href="Session.html#21087" class="Function Operator"
  >&#10215;Cx</a
  ><a name="21199"
  > </a
  ><a name="21200" class="Symbol"
  >&#8594;</a
  ><a name="21201"
  > </a
  ><a name="21202" href="Session.html#21016" class="Function"
  >UChan</a
  ><a name="21207"
  >
</a
  ><a name="21208" href="Session.html#21154" class="Function"
  >lookupUChan</a
  ><a name="21219"
  > </a
  ><a name="21220" href="Session.html#21220" class="Bound"
  >i</a
  ><a name="21221"
  > </a
  ><a name="21222" href="Session.html#21222" class="Bound"
  >cs</a
  ><a name="21224"
  > </a
  ><a name="21225" class="Symbol"
  >=</a
  ><a name="21226"
  > </a
  ><a name="21227" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="21230"
  > </a
  ><a name="21231" class="Symbol"
  >(</a
  ><a name="21232" href="Session.Base.html#3865" class="Function"
  >lookupAll</a
  ><a name="21241"
  > </a
  ><a name="21242" href="Session.html#21220" class="Bound"
  >i</a
  ><a name="21243"
  > </a
  ><a name="21244" href="Session.html#21222" class="Bound"
  >cs</a
  ><a name="21246" class="Symbol"
  >)</a
  ><a name="21247"
  ></pre>
<p>We need some Haskell helpers.</p>
<p>Note that our channels are ultimately implemented on top of Jesse Tov's <code>synchronous-channels</code> package: for this reason, currently all the interactions are synchronous (blocking).</p>
<pre></a
  ><a name="21485" class="Keyword"
  >infixl</a
  ><a name="21491"
  > </a
  ><a name="21492" class="Number"
  >1</a
  ><a name="21493"
  > _&gt;&gt;_

</a
  ><a name="21500" href="Session.html#21500" class="Function Operator"
  >_&gt;&gt;_</a
  ><a name="21504"
  > </a
  ><a name="21505" class="Symbol"
  >:</a
  ><a name="21506"
  > </a
  ><a name="21507" class="Symbol"
  >&#8704;</a
  ><a name="21508"
  > </a
  ><a name="21509" class="Symbol"
  >{</a
  ><a name="21510" href="Session.html#21510" class="Bound"
  >lA</a
  ><a name="21512"
  > </a
  ><a name="21513" href="Session.html#21513" class="Bound"
  >lB</a
  ><a name="21515" class="Symbol"
  >}{</a
  ><a name="21517" href="Session.html#21517" class="Bound"
  >A</a
  ><a name="21518"
  > </a
  ><a name="21519" class="Symbol"
  >:</a
  ><a name="21520"
  > </a
  ><a name="21521" class="PrimitiveType"
  >Set</a
  ><a name="21524"
  > </a
  ><a name="21525" href="Session.html#21510" class="Bound"
  >lA</a
  ><a name="21527" class="Symbol"
  >}{</a
  ><a name="21529" href="Session.html#21529" class="Bound"
  >B</a
  ><a name="21530"
  > </a
  ><a name="21531" class="Symbol"
  >:</a
  ><a name="21532"
  > </a
  ><a name="21533" class="PrimitiveType"
  >Set</a
  ><a name="21536"
  > </a
  ><a name="21537" href="Session.html#21513" class="Bound"
  >lB</a
  ><a name="21539" class="Symbol"
  >}</a
  ><a name="21540"
  > </a
  ><a name="21541" class="Symbol"
  >&#8594;</a
  ><a name="21542"
  > </a
  ><a name="21543" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21545"
  > </a
  ><a name="21546" href="Session.html#21517" class="Bound"
  >A</a
  ><a name="21547"
  > </a
  ><a name="21548" class="Symbol"
  >&#8594;</a
  ><a name="21549"
  > </a
  ><a name="21550" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21552"
  > </a
  ><a name="21553" href="Session.html#21529" class="Bound"
  >B</a
  ><a name="21554"
  > </a
  ><a name="21555" class="Symbol"
  >&#8594;</a
  ><a name="21556"
  > </a
  ><a name="21557" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21559"
  > </a
  ><a name="21560" href="Session.html#21529" class="Bound"
  >B</a
  ><a name="21561"
  >
</a
  ><a name="21562" href="Session.html#21562" class="Bound"
  >m</a
  ><a name="21563"
  > </a
  ><a name="21564" href="Session.html#21500" class="Function Operator"
  >&gt;&gt;</a
  ><a name="21566"
  > </a
  ><a name="21567" href="Session.html#21567" class="Bound"
  >n</a
  ><a name="21568"
  > </a
  ><a name="21569" class="Symbol"
  >=</a
  ><a name="21570"
  > </a
  ><a name="21571" href="Session.html#21562" class="Bound"
  >m</a
  ><a name="21572"
  > </a
  ><a name="21573" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="21576"
  > </a
  ><a name="21577" class="Symbol"
  >&#955;</a
  ><a name="21578"
  > </a
  ><a name="21579" href="Session.html#21579" class="Bound"
  >_</a
  ><a name="21580"
  > </a
  ><a name="21581" class="Symbol"
  >&#8594;</a
  ><a name="21582"
  > </a
  ><a name="21583" href="Session.html#21567" class="Bound"
  >n</a
  ><a name="21584"
  >

</a
  ><a name="21586" href="Session.html#21586" class="Function"
  >mapIO</a
  ><a name="21591"
  > </a
  ><a name="21592" class="Symbol"
  >:</a
  ><a name="21593"
  > </a
  ><a name="21594" class="Symbol"
  >&#8704;</a
  ><a name="21595"
  > </a
  ><a name="21596" class="Symbol"
  >{</a
  ><a name="21597" href="Session.html#21597" class="Bound"
  >lA</a
  ><a name="21599"
  > </a
  ><a name="21600" href="Session.html#21600" class="Bound"
  >lB</a
  ><a name="21602" class="Symbol"
  >}{</a
  ><a name="21604" href="Session.html#21604" class="Bound"
  >A</a
  ><a name="21605"
  > </a
  ><a name="21606" class="Symbol"
  >:</a
  ><a name="21607"
  > </a
  ><a name="21608" class="PrimitiveType"
  >Set</a
  ><a name="21611"
  > </a
  ><a name="21612" href="Session.html#21597" class="Bound"
  >lA</a
  ><a name="21614" class="Symbol"
  >}{</a
  ><a name="21616" href="Session.html#21616" class="Bound"
  >B</a
  ><a name="21617"
  > </a
  ><a name="21618" class="Symbol"
  >:</a
  ><a name="21619"
  > </a
  ><a name="21620" class="PrimitiveType"
  >Set</a
  ><a name="21623"
  > </a
  ><a name="21624" href="Session.html#21600" class="Bound"
  >lB</a
  ><a name="21626" class="Symbol"
  >}</a
  ><a name="21627"
  > </a
  ><a name="21628" class="Symbol"
  >&#8594;</a
  ><a name="21629"
  > </a
  ><a name="21630" class="Symbol"
  >(</a
  ><a name="21631" href="Session.html#21604" class="Bound"
  >A</a
  ><a name="21632"
  > </a
  ><a name="21633" class="Symbol"
  >&#8594;</a
  ><a name="21634"
  > </a
  ><a name="21635" href="Session.html#21616" class="Bound"
  >B</a
  ><a name="21636" class="Symbol"
  >)</a
  ><a name="21637"
  > </a
  ><a name="21638" class="Symbol"
  >&#8594;</a
  ><a name="21639"
  > </a
  ><a name="21640" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21642"
  > </a
  ><a name="21643" href="Session.html#21604" class="Bound"
  >A</a
  ><a name="21644"
  > </a
  ><a name="21645" class="Symbol"
  >&#8594;</a
  ><a name="21646"
  > </a
  ><a name="21647" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21649"
  > </a
  ><a name="21650" href="Session.html#21616" class="Bound"
  >B</a
  ><a name="21651"
  >
</a
  ><a name="21652" href="Session.html#21586" class="Function"
  >mapIO</a
  ><a name="21657"
  > </a
  ><a name="21658" href="Session.html#21658" class="Bound"
  >f</a
  ><a name="21659"
  > </a
  ><a name="21660" href="Session.html#21660" class="Bound"
  >xs</a
  ><a name="21662"
  > </a
  ><a name="21663" class="Symbol"
  >=</a
  ><a name="21664"
  > </a
  ><a name="21665" href="Session.html#21660" class="Bound"
  >xs</a
  ><a name="21667"
  > </a
  ><a name="21668" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="21671"
  > </a
  ><a name="21672" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="21678"
  > </a
  ><a name="21679" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="21680"
  > </a
  ><a name="21681" href="Session.html#21658" class="Bound"
  >f</a
  ><a name="21682"
  ></pre>
<p>Every communication with the untyped channels uses <code>unsafeCoerce</code>.</p>
<pre></a
  ><a name="21776" href="Session.html#21776" class="Function"
  >writeUChan</a
  ><a name="21786"
  > </a
  ><a name="21787" class="Symbol"
  >:</a
  ><a name="21788"
  > </a
  ><a name="21789" class="Symbol"
  >{</a
  ><a name="21790" href="Session.html#21790" class="Bound"
  >A</a
  ><a name="21791"
  > </a
  ><a name="21792" class="Symbol"
  >:</a
  ><a name="21793"
  > </a
  ><a name="21794" class="PrimitiveType"
  >Set</a
  ><a name="21797" class="Symbol"
  >}</a
  ><a name="21798"
  > </a
  ><a name="21799" class="Symbol"
  >&#8594;</a
  ><a name="21800"
  > </a
  ><a name="21801" href="Session.html#21016" class="Function"
  >UChan</a
  ><a name="21806"
  > </a
  ><a name="21807" class="Symbol"
  >&#8594;</a
  ><a name="21808"
  > </a
  ><a name="21809" href="Session.html#21790" class="Bound"
  >A</a
  ><a name="21810"
  > </a
  ><a name="21811" class="Symbol"
  >&#8594;</a
  ><a name="21812"
  > </a
  ><a name="21813" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21815"
  > </a
  ><a name="21816" href="Unit.html#194" class="Function"
  >C.&lt;&gt;</a
  ><a name="21820"
  >
</a
  ><a name="21821" href="Session.html#21776" class="Function"
  >writeUChan</a
  ><a name="21831"
  > </a
  ><a name="21832" href="Session.html#21832" class="Bound"
  >c</a
  ><a name="21833"
  > </a
  ><a name="21834" class="Symbol"
  >=</a
  ><a name="21835"
  > </a
  ><a name="21836" href="Control.Concurrent.Chan.Synchronous.html#345" class="Postulate"
  >writeChan</a
  ><a name="21845"
  > </a
  ><a name="21846" href="Session.html#21832" class="Bound"
  >c</a
  ><a name="21847"
  > </a
  ><a name="21848" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="21849"
  > </a
  ><a name="21850" href="Session.html#20084" class="Postulate"
  >unsafeCoerce</a
  ><a name="21862"
  >

</a
  ><a name="21864" href="Session.html#21864" class="Function"
  >readUChan</a
  ><a name="21873"
  > </a
  ><a name="21874" class="Symbol"
  >:</a
  ><a name="21875"
  > </a
  ><a name="21876" class="Symbol"
  >{</a
  ><a name="21877" href="Session.html#21877" class="Bound"
  >A</a
  ><a name="21878"
  > </a
  ><a name="21879" class="Symbol"
  >:</a
  ><a name="21880"
  > </a
  ><a name="21881" class="PrimitiveType"
  >Set</a
  ><a name="21884" class="Symbol"
  >}</a
  ><a name="21885"
  > </a
  ><a name="21886" class="Symbol"
  >&#8594;</a
  ><a name="21887"
  > </a
  ><a name="21888" href="Session.html#21016" class="Function"
  >UChan</a
  ><a name="21893"
  > </a
  ><a name="21894" class="Symbol"
  >&#8594;</a
  ><a name="21895"
  > </a
  ><a name="21896" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="21898"
  > </a
  ><a name="21899" href="Session.html#21877" class="Bound"
  >A</a
  ><a name="21900"
  >
</a
  ><a name="21901" href="Session.html#21864" class="Function"
  >readUChan</a
  ><a name="21910"
  > </a
  ><a name="21911" class="Symbol"
  >{</a
  ><a name="21912"
  >A </a
  ><a name="21914" class="Symbol"
  >=</a
  ><a name="21915"
  > </a
  ><a name="21916" href="Session.html#21916" class="Bound"
  >A</a
  ><a name="21917" class="Symbol"
  >}</a
  ><a name="21918"
  > </a
  ><a name="21919" href="Session.html#21919" class="Bound"
  >c</a
  ><a name="21920"
  > </a
  ><a name="21921" class="Symbol"
  >=</a
  ><a name="21922"
  > </a
  ><a name="21923" href="Control.Concurrent.Chan.Synchronous.html#397" class="Postulate"
  >readChan</a
  ><a name="21931"
  > </a
  ><a name="21932" href="Session.html#21919" class="Bound"
  >c</a
  ><a name="21933"
  > </a
  ><a name="21934" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="21937"
  > </a
  ><a name="21938" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="21944"
  > </a
  ><a name="21945" href="Function.html#713" class="Function Operator"
  >&#8728;</a
  ><a name="21946"
  > </a
  ><a name="21947" href="Session.html#20084" class="Postulate"
  >unsafeCoerce</a
  ><a name="21959"
  ></pre>
<p>Here is the actual test evaluator, to implement which we disable termination checking: we already use &quot;unsafe&quot; features so we do not bother defining a <em>coinductive</em> wrapper as in the <code>IO</code> module of Agda's standard library.</p>
<pre></a
  ><a name="22209" class="Symbol"
  >{-#</a
  ><a name="22212"
  > </a
  ><a name="22213" class="Keyword"
  >NO_TERMINATION_CHECK</a
  ><a name="22233"
  > </a
  ><a name="22234" class="Symbol"
  >#-}</a
  ><a name="22237"
  >
</a
  ><a name="22238" href="Session.html#22238" class="Function"
  >run</a
  ><a name="22241"
  > </a
  ><a name="22242" class="Symbol"
  >:</a
  ><a name="22243"
  > </a
  ><a name="22244" class="Symbol"
  >{</a
  ><a name="22245" href="Session.html#22245" class="Bound"
  >&#915;</a
  ><a name="22246"
  > </a
  ><a name="22247" href="Session.html#22247" class="Bound"
  >&#916;</a
  ><a name="22248"
  > </a
  ><a name="22249" class="Symbol"
  >:</a
  ><a name="22250"
  > </a
  ><a name="22251" href="Session.html#6031" class="Function"
  >Cx</a
  ><a name="22253" class="Symbol"
  >}{</a
  ><a name="22255" href="Session.html#22255" class="Bound"
  >X</a
  ><a name="22256"
  > </a
  ><a name="22257" class="Symbol"
  >:</a
  ><a name="22258"
  > </a
  ><a name="22259" class="PrimitiveType"
  >Set</a
  ><a name="22262" class="Symbol"
  >}</a
  ><a name="22263"
  > </a
  ><a name="22264" class="Symbol"
  >&#8594;</a
  ><a name="22265"
  > </a
  ><a name="22266" href="Session.html#22245" class="Bound"
  >&#915;</a
  ><a name="22267"
  > </a
  ><a name="22268" href="Session.html#20456" class="Function Operator"
  >[IO</a
  ><a name="22271"
  > </a
  ><a name="22272" href="Session.html#22255" class="Bound"
  >X</a
  ><a name="22273"
  > </a
  ><a name="22274" href="Session.html#20456" class="Function Operator"
  >]&gt;</a
  ><a name="22276"
  > </a
  ><a name="22277" href="Session.html#22247" class="Bound"
  >&#916;</a
  ><a name="22278"
  > </a
  ><a name="22279" class="Symbol"
  >&#8594;</a
  ><a name="22280"
  > </a
  ><a name="22281" href="Session.html#21087" class="Function Operator"
  >&#10214;</a
  ><a name="22282"
  > </a
  ><a name="22283" href="Session.html#22245" class="Bound"
  >&#915;</a
  ><a name="22284"
  > </a
  ><a name="22285" href="Session.html#21087" class="Function Operator"
  >&#10215;Cx</a
  ><a name="22288"
  > </a
  ><a name="22289" class="Symbol"
  >&#8594;</a
  ><a name="22290"
  > </a
  ><a name="22291" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="22293"
  > </a
  ><a name="22294" class="Symbol"
  >(</a
  ><a name="22295" href="Session.html#22255" class="Bound"
  >X</a
  ><a name="22296"
  > </a
  ><a name="22297" href="Data.Product.html#1078" class="Function Operator"
  >&#215;</a
  ><a name="22298"
  > </a
  ><a name="22299" href="Session.html#21087" class="Function Operator"
  >&#10214;</a
  ><a name="22300"
  > </a
  ><a name="22301" href="Session.html#22247" class="Bound"
  >&#916;</a
  ><a name="22302"
  > </a
  ><a name="22303" href="Session.html#21087" class="Function Operator"
  >&#10215;Cx</a
  ><a name="22306" class="Symbol"
  >)</a
  ><a name="22307"
  ></pre>
<p>We map the embedded monadic actions to themselves, and the binding syntax to the binding operator for the <code>IO</code> monad.</p>
<pre></a
  ><a name="22452" href="Session.html#22238" class="Function"
  >run</a
  ><a name="22455"
  > </a
  ><a name="22456" class="Symbol"
  >(</a
  ><a name="22457" href="Session.html#16441" class="InductiveConstructor Operator"
  >&#8657;</a
  ><a name="22458"
  > </a
  ><a name="22459" href="Session.html#22459" class="Bound"
  >m</a
  ><a name="22460"
  >           </a
  ><a name="22471" class="Symbol"
  >)</a
  ><a name="22472"
  > </a
  ><a name="22473" href="Session.html#22473" class="Bound"
  >cs</a
  ><a name="22475"
  > </a
  ><a name="22476" class="Symbol"
  >=</a
  ><a name="22477"
  > </a
  ><a name="22478" href="Session.html#21586" class="Function"
  >mapIO</a
  ><a name="22483"
  > </a
  ><a name="22484" class="Symbol"
  >(</a
  ><a name="22485" href="Function.html#1474" class="Function"
  >flip</a
  ><a name="22489"
  > </a
  ><a name="22490" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >_,_</a
  ><a name="22493"
  > </a
  ><a name="22494" href="Session.html#22473" class="Bound"
  >cs</a
  ><a name="22496" class="Symbol"
  >)</a
  ><a name="22497"
  > </a
  ><a name="22498" href="Session.html#22459" class="Bound"
  >m</a
  ><a name="22499"
  >                                           
                                                                                          
</a
  ><a name="22634" href="Session.html#22238" class="Function"
  >run</a
  ><a name="22637"
  > </a
  ><a name="22638" class="Symbol"
  >(</a
  ><a name="22639" href="Session.html#22639" class="Bound"
  >m</a
  ><a name="22640"
  > </a
  ><a name="22641" href="Session.html#16593" class="InductiveConstructor Operator"
  >&#187;=</a
  ><a name="22643"
  > </a
  ><a name="22644" href="Session.html#22644" class="Bound"
  >f</a
  ><a name="22645"
  >        </a
  ><a name="22653" class="Symbol"
  >)</a
  ><a name="22654"
  > </a
  ><a name="22655" href="Session.html#22655" class="Bound"
  >cs</a
  ><a name="22657"
  > </a
  ><a name="22658" class="Symbol"
  >=</a
  ><a name="22659"
  > </a
  ><a name="22660" href="Session.html#22238" class="Function"
  >run</a
  ><a name="22663"
  > </a
  ><a name="22664" href="Session.html#22639" class="Bound"
  >m</a
  ><a name="22665"
  > </a
  ><a name="22666" href="Session.html#22655" class="Bound"
  >cs</a
  ><a name="22668"
  > </a
  ><a name="22669" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="22672"
  > </a
  ><a name="22673" class="Symbol"
  >&#955;</a
  ><a name="22674"
  > </a
  ><a name="22675" class="Symbol"
  >{</a
  ><a name="22676"
  > </a
  ><a name="22677" class="Symbol"
  >(</a
  ><a name="22678" href="Session.html#22678" class="Bound"
  >x</a
  ><a name="22679"
  > </a
  ><a name="22680" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="22681"
  > </a
  ><a name="22682" href="Session.html#22682" class="Bound"
  >cs</a
  ><a name="22684" class="Symbol"
  >)</a
  ><a name="22685"
  > </a
  ><a name="22686" class="Symbol"
  >&#8594;</a
  ><a name="22687"
  > </a
  ><a name="22688" href="Session.html#22238" class="Function"
  >run</a
  ><a name="22691"
  > </a
  ><a name="22692" class="Symbol"
  >(</a
  ><a name="22693" href="Session.html#22644" class="Bound"
  >f</a
  ><a name="22694"
  > </a
  ><a name="22695" href="Session.html#22678" class="Bound"
  >x</a
  ><a name="22696" class="Symbol"
  >)</a
  ><a name="22697"
  > </a
  ><a name="22698" href="Session.html#22682" class="Bound"
  >cs</a
  ><a name="22700"
  > </a
  ><a name="22701" class="Symbol"
  >}</a
  ><a name="22702"
  >                      </pre>
<p><code>new</code> just creates a new channel.</p>
<pre></a
  ><a name="22943" href="Session.html#22238" class="Function"
  >run</a
  ><a name="22946"
  > </a
  ><a name="22947" class="Symbol"
  >(</a
  ><a name="22948" href="Session.html#16517" class="InductiveConstructor Operator"
  >new</a
  ><a name="22951"
  >           </a
  ><a name="22962" class="Symbol"
  >)</a
  ><a name="22963"
  > </a
  ><a name="22964" href="Session.html#22964" class="Bound"
  >cs</a
  ><a name="22966"
  > </a
  ><a name="22967" class="Symbol"
  >=</a
  ><a name="22968"
  > </a
  ><a name="22969" href="Control.Concurrent.Chan.Synchronous.html#300" class="Postulate"
  >newChan</a
  ><a name="22976"
  > </a
  ><a name="22977" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="22980"
  > </a
  ><a name="22981" class="Symbol"
  >&#955;</a
  ><a name="22982"
  > </a
  ><a name="22983" href="Session.html#22983" class="Bound"
  >c</a
  ><a name="22984"
  > </a
  ><a name="22985" class="Symbol"
  >&#8594;</a
  ><a name="22986"
  > </a
  ><a name="22987" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="22993"
  > </a
  ><a name="22994" class="Symbol"
  >(_</a
  ><a name="22996"
  > </a
  ><a name="22997" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="22998"
  > </a
  ><a name="22999" class="Symbol"
  >(</a
  ><a name="23000" href="Session.html#22964" class="Bound"
  >cs</a
  ><a name="23002"
  > </a
  ><a name="23003" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="23005"
  > </a
  ><a name="23006" href="Session.html#22983" class="Bound"
  >c</a
  ><a name="23007" class="Symbol"
  >))</a
  ><a name="23009"
  ></pre>
<p><code>forks x</code> interprets the <code>Splits</code> in <code>s</code> obtaining two lists of channels <code>ls</code> and <code>rs</code>: it keeps <code>ls</code> for the parent thread and leaves access to <code>rs</code> to the child (<code>x</code>).</p>
<pre></a
  ><a name="23296" href="Session.html#22238" class="Function"
  >run</a
  ><a name="23299"
  > </a
  ><a name="23300" class="Symbol"
  >(</a
  ><a name="23301" href="Session.html#16517" class="InductiveConstructor Operator"
  >fork</a
  ><a name="23305"
  >       </a
  ><a name="23312" href="Session.html#16517" class="InductiveConstructor Operator"
  >s</a
  ><a name="23313"
  > </a
  ><a name="23314" href="Session.html#16517" class="InductiveConstructor Operator"
  >x</a
  ><a name="23315" class="Symbol"
  >)</a
  ><a name="23316"
  > </a
  ><a name="23317" href="Session.html#23317" class="Bound"
  >cs</a
  ><a name="23319"
  > </a
  ><a name="23320" class="Symbol"
  >=</a
  ><a name="23321"
  > </a
  ><a name="23322" class="Keyword"
  >let</a
  ><a name="23325"
  > </a
  ><a name="23326" href="Session.html#23326" class="Bound"
  >ls</a
  ><a name="23328"
  > </a
  ><a name="23329" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="23330"
  > </a
  ><a name="23331" href="Session.html#23331" class="Bound"
  >rs</a
  ><a name="23333"
  > </a
  ><a name="23334" class="Symbol"
  >=</a
  ><a name="23335"
  > </a
  ><a name="23336" href="Session.html#7607" class="Function"
  >all-splits</a
  ><a name="23346"
  > </a
  ><a name="23347" href="Session.html#23317" class="Bound"
  >cs</a
  ><a name="23349"
  > </a
  ><a name="23350" href="Session.html#23312" class="Bound"
  >s</a
  ><a name="23351"
  > </a
  ><a name="23352" class="Keyword"
  >in</a
  ><a name="23354"
  >
                          </a
  ><a name="23381" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="23387"
  > </a
  ><a name="23388" class="Symbol"
  >(</a
  ><a name="23389" href="Session.html#22238" class="Function"
  >run</a
  ><a name="23392"
  > </a
  ><a name="23393" href="Session.html#23314" class="Bound"
  >x</a
  ><a name="23394"
  > </a
  ><a name="23395" href="Session.html#23331" class="Bound"
  >rs</a
  ><a name="23397"
  > </a
  ><a name="23398" href="Session.html#21500" class="Function Operator"
  >&gt;&gt;</a
  ><a name="23400"
  > </a
  ><a name="23401" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="23407"
  > </a
  ><a name="23408" href="Unit.html#210" class="Function"
  >&#10216;&#10217;</a
  ><a name="23410" class="Symbol"
  >)</a
  ><a name="23411"
  > </a
  ><a name="23412" href="Session.html#21500" class="Function Operator"
  >&gt;&gt;</a
  ><a name="23414"
  >                               
                          </a
  ><a name="23472" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="23478"
  > </a
  ><a name="23479" class="Symbol"
  >(</a
  ><a name="23480" class="InductiveConstructor"
  >tt</a
  ><a name="23482"
  > </a
  ><a name="23483" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="23484"
  > </a
  ><a name="23485" href="Session.html#23326" class="Bound"
  >ls</a
  ><a name="23487" class="Symbol"
  >)</a
  ><a name="23488"
  >                                                </pre>
<p><code>send i j</code> writes channel <code>i</code> on channel <code>j</code> and frees the continuation from the burden of communicating along <code>i</code>.</p>
<p>We could avoid many uses of <code>unsafeCoerce</code> in the following but we think it is more efficient to avoid calling functions like <code>all-ud</code> as in the commented-out code: they perform no operations on the actual lists of <em>untyped</em> channels.</p>
<p>The usages of <code>unsafeCoerce</code> which are more difficult justify are those inside every call to <code>readUChan</code> and <code>writeUChan</code>.</p>
<pre></a
  ><a name="24197" href="Session.html#22238" class="Function"
  >run</a
  ><a name="24200"
  > </a
  ><a name="24201" class="Symbol"
  >(</a
  ><a name="24202" href="Session.html#16517" class="InductiveConstructor Operator"
  >send</a
  ><a name="24206"
  >       </a
  ><a name="24213" href="Session.html#16517" class="InductiveConstructor Operator"
  >i</a
  ><a name="24214"
  > </a
  ><a name="24215" href="Session.html#16517" class="InductiveConstructor Operator"
  >j</a
  ><a name="24216" class="Symbol"
  >)</a
  ><a name="24217"
  > </a
  ><a name="24218" href="Session.html#24218" class="Bound"
  >cs</a
  ><a name="24220"
  > </a
  ><a name="24221" class="Symbol"
  >=</a
  ><a name="24222"
  > </a
  ><a name="24223" class="Keyword"
  >let</a
  ><a name="24226"
  > </a
  ><a name="24227" href="Session.html#24227" class="Bound"
  >chanToSend</a
  ><a name="24237"
  >    </a
  ><a name="24241" class="Symbol"
  >=</a
  ><a name="24242"
  > </a
  ><a name="24243" href="Session.html#21154" class="Function"
  >lookupUChan</a
  ><a name="24254"
  >        </a
  ><a name="24262" href="Session.html#24213" class="Bound"
  >i</a
  ><a name="24263"
  >  </a
  ><a name="24265" href="Session.html#24218" class="Bound"
  >cs</a
  ><a name="24267"
  > </a
  ><a name="24268" class="Keyword"
  >in</a
  ><a name="24270"
  >                 
                          </a
  ><a name="24314" class="Keyword"
  >let</a
  ><a name="24317"
  > </a
  ><a name="24318" href="Session.html#24318" class="Bound"
  >chanToWriteOn</a
  ><a name="24331"
  > </a
  ><a name="24332" class="Symbol"
  >=</a
  ><a name="24333"
  > </a
  ><a name="24334" href="Session.html#21154" class="Function"
  >lookupUChan</a
  ><a name="24345"
  > </a
  ><a name="24346" class="Symbol"
  >(</a
  ><a name="24347" href="Session.Base.html#4047" class="Function"
  >wk/</a
  ><a name="24350"
  > </a
  ><a name="24351" href="Session.html#24213" class="Bound"
  >i</a
  ><a name="24352"
  > </a
  ><a name="24353" href="Session.html#24215" class="Bound"
  >j</a
  ><a name="24354" class="Symbol"
  >)</a
  ><a name="24355"
  > </a
  ><a name="24356" href="Session.html#24218" class="Bound"
  >cs</a
  ><a name="24358"
  > </a
  ><a name="24359" class="Keyword"
  >in</a
  ><a name="24361"
  >                 
                          </a
  ><a name="24405" href="Session.html#21776" class="Function"
  >writeUChan</a
  ><a name="24415"
  > </a
  ><a name="24416" href="Session.html#24318" class="Bound"
  >chanToWriteOn</a
  ><a name="24429"
  > </a
  ><a name="24430" href="Session.html#24227" class="Bound"
  >chanToSend</a
  ><a name="24440"
  > </a
  ><a name="24441" href="Session.html#21500" class="Function Operator"
  >&gt;&gt;</a
  ><a name="24443"
  >
                          </a
  ><a name="24470" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="24476"
  > </a
  ><a name="24477" class="Symbol"
  >(</a
  ><a name="24478" class="InductiveConstructor"
  >tt</a
  ><a name="24480"
  > </a
  ><a name="24481" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="24482"
  > </a
  ><a name="24483" href="Session.html#20084" class="Postulate"
  >unsafeCoerce</a
  ><a name="24495"
  > </a
  ><a name="24496" class="Symbol"
  >(</a
  ><a name="24497" href="Session.Base.html#4259" class="Function"
  >all-rm</a
  ><a name="24503"
  > </a
  ><a name="24504" href="Session.html#24213" class="Bound"
  >i</a
  ><a name="24505"
  > </a
  ><a name="24506" href="Session.html#24218" class="Bound"
  >cs</a
  ><a name="24508" class="Symbol"
  >))</a
  ><a name="24510"
  >
                       </a
  ><a name="24534" class="Comment"
  >-- return (tt , all-ud j (all-rm i cs) chanToWriteOn)</a
  ><a name="24587"
  ></pre>
<p><code>receive</code> receives a channel from channel <code>i</code> and allows/forces the continuation to also take care of it.</p>
<pre></a
  ><a name="24810" href="Session.html#22238" class="Function"
  >run</a
  ><a name="24813"
  > </a
  ><a name="24814" class="Symbol"
  >(</a
  ><a name="24815" href="Session.html#16517" class="InductiveConstructor Operator"
  >receive</a
  ><a name="24822"
  >      </a
  ><a name="24828" href="Session.html#16517" class="InductiveConstructor Operator"
  >i</a
  ><a name="24829" class="Symbol"
  >)</a
  ><a name="24830"
  > </a
  ><a name="24831" href="Session.html#24831" class="Bound"
  >cs</a
  ><a name="24833"
  > </a
  ><a name="24834" class="Symbol"
  >=</a
  ><a name="24835"
  > </a
  ><a name="24836" class="Keyword"
  >let</a
  ><a name="24839"
  > </a
  ><a name="24840" href="Session.html#24840" class="Bound"
  >chanToReadFrom</a
  ><a name="24854"
  > </a
  ><a name="24855" class="Symbol"
  >=</a
  ><a name="24856"
  > </a
  ><a name="24857" href="Session.html#21154" class="Function"
  >lookupUChan</a
  ><a name="24868"
  > </a
  ><a name="24869" href="Session.html#24828" class="Bound"
  >i</a
  ><a name="24870"
  > </a
  ><a name="24871" href="Session.html#24831" class="Bound"
  >cs</a
  ><a name="24873"
  > </a
  ><a name="24874" class="Keyword"
  >in</a
  ><a name="24876"
  >                        
                          </a
  ><a name="24927" href="Session.html#21864" class="Function"
  >readUChan</a
  ><a name="24936"
  > </a
  ><a name="24937" href="Session.html#24840" class="Bound"
  >chanToReadFrom</a
  ><a name="24951"
  > </a
  ><a name="24952" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="24955"
  > </a
  ><a name="24956" class="Symbol"
  >&#955;</a
  ><a name="24957"
  > </a
  ><a name="24958" href="Session.html#24958" class="Bound"
  >receivedChan</a
  ><a name="24970"
  > </a
  ><a name="24971" class="Symbol"
  >&#8594;</a
  ><a name="24972"
  >                   
                          </a
  ><a name="25018" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="25024"
  > </a
  ><a name="25025" class="Symbol"
  >(</a
  ><a name="25026" class="InductiveConstructor"
  >tt</a
  ><a name="25028"
  > </a
  ><a name="25029" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="25030"
  > </a
  ><a name="25031" class="Symbol"
  >(</a
  ><a name="25032" href="Session.html#20084" class="Postulate"
  >unsafeCoerce</a
  ><a name="25044"
  > </a
  ><a name="25045" href="Session.html#24831" class="Bound"
  >cs</a
  ><a name="25047"
  > </a
  ><a name="25048" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="25050"
  > </a
  ><a name="25051" href="Session.html#24958" class="Bound"
  >receivedChan</a
  ><a name="25063" class="Symbol"
  >))</a
  ><a name="25065"
  >                  </pre>
<p><code>accept i a p</code> forks a process that waits for channels: whenever one is received it spawns a new copy of the server along it.</p>
<pre></a
  ><a name="25314" href="Session.html#22238" class="Function"
  >run</a
  ><a name="25317"
  > </a
  ><a name="25318" class="Symbol"
  >(</a
  ><a name="25319" href="Session.html#16517" class="InductiveConstructor Operator"
  >accept</a
  ><a name="25325"
  >   </a
  ><a name="25328" href="Session.html#16517" class="InductiveConstructor Operator"
  >i</a
  ><a name="25329"
  > </a
  ><a name="25330" href="Session.html#16517" class="InductiveConstructor Operator"
  >a</a
  ><a name="25331"
  > </a
  ><a name="25332" href="Session.html#16517" class="InductiveConstructor Operator"
  >p</a
  ><a name="25333" class="Symbol"
  >)</a
  ><a name="25334"
  > </a
  ><a name="25335" href="Session.html#25335" class="Bound"
  >cs</a
  ><a name="25337"
  > </a
  ><a name="25338" class="Symbol"
  >=</a
  ><a name="25339"
  > </a
  ><a name="25340" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="25346"
  > </a
  ><a name="25347" href="Session.html#25611" class="Function"
  >server</a
  ><a name="25353"
  > </a
  ><a name="25354" href="Session.html#21500" class="Function Operator"
  >&gt;&gt;</a
  ><a name="25356"
  > </a
  ><a name="25357" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="25363"
  > </a
  ><a name="25364" class="Symbol"
  >(</a
  ><a name="25365" class="InductiveConstructor"
  >tt</a
  ><a name="25367"
  > </a
  ><a name="25368" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="25369"
  > </a
  ><a name="25370" href="Session.Base.html#4259" class="Function"
  >all-rm</a
  ><a name="25376"
  > </a
  ><a name="25377" href="Session.html#25328" class="Bound"
  >i</a
  ><a name="25378"
  > </a
  ><a name="25379" href="Session.html#25335" class="Bound"
  >cs</a
  ><a name="25381" class="Symbol"
  >)</a
  ><a name="25382"
  >                   
  </a
  ><a name="25404" class="Keyword"
  >where</a
  ><a name="25409"
  > </a
  ><a name="25410" href="Session.html#25410" class="Function"
  >c</a
  ><a name="25411"
  > </a
  ><a name="25412" class="Symbol"
  >=</a
  ><a name="25413"
  > </a
  ><a name="25414" href="Session.html#21154" class="Function"
  >lookupUChan</a
  ><a name="25425"
  > </a
  ><a name="25426" href="Session.html#25328" class="Bound"
  >i</a
  ><a name="25427"
  > </a
  ><a name="25428" href="Session.html#25335" class="Bound"
  >cs</a
  ><a name="25430"
  >                                            
        </a
  ><a name="25483" href="Session.html#25483" class="Function"
  >service</a
  ><a name="25490"
  > </a
  ><a name="25491" class="Symbol"
  >:</a
  ><a name="25492"
  > </a
  ><a name="25493" href="Session.html#21016" class="Function"
  >UChan</a
  ><a name="25498"
  > </a
  ><a name="25499" class="Symbol"
  >&#8594;</a
  ><a name="25500"
  > </a
  ><a name="25501" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="25503"
  > </a
  ><a name="25504" class="Symbol"
  >_</a
  ><a name="25505"
  >                                          
        </a
  ><a name="25556" href="Session.html#25483" class="Function"
  >service</a
  ><a name="25563"
  > </a
  ><a name="25564" href="Session.html#25564" class="Bound"
  >n</a
  ><a name="25565"
  > </a
  ><a name="25566" class="Symbol"
  >=</a
  ><a name="25567"
  > </a
  ><a name="25568" href="Session.html#22238" class="Function"
  >run</a
  ><a name="25571"
  > </a
  ><a name="25572" href="Session.html#25332" class="Bound"
  >p</a
  ><a name="25573"
  > </a
  ><a name="25574" class="Symbol"
  >(</a
  ><a name="25575" href="Session.Base.html#4407" class="Function"
  >all-ud</a
  ><a name="25581"
  > </a
  ><a name="25582" href="Session.html#25328" class="Bound"
  >i</a
  ><a name="25583"
  > </a
  ><a name="25584" href="Session.html#25335" class="Bound"
  >cs</a
  ><a name="25586"
  > </a
  ><a name="25587" href="Session.html#25564" class="Bound"
  >n</a
  ><a name="25588" class="Symbol"
  >)</a
  ><a name="25589"
  > </a
  ><a name="25590" href="Session.html#21500" class="Function Operator"
  >&gt;&gt;</a
  ><a name="25592"
  > </a
  ><a name="25593" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="25599"
  > </a
  ><a name="25600" href="Unit.html#210" class="Function"
  >&#10216;&#10217;</a
  ><a name="25602"
  >
        </a
  ><a name="25611" href="Session.html#25611" class="Function"
  >server</a
  ><a name="25617"
  > </a
  ><a name="25618" class="Symbol"
  >:</a
  ><a name="25619"
  > </a
  ><a name="25620" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="25622"
  > </a
  ><a name="25623" href="Unit.html#194" class="Function"
  >C.&lt;&gt;</a
  ><a name="25627"
  >                                                
        </a
  ><a name="25684" href="Session.html#25611" class="Function"
  >server</a
  ><a name="25690"
  > </a
  ><a name="25691" class="Symbol"
  >=</a
  ><a name="25692"
  > </a
  ><a name="25693" href="Session.html#21864" class="Function"
  >readUChan</a
  ><a name="25702"
  > </a
  ><a name="25703" href="Session.html#25410" class="Function"
  >c</a
  ><a name="25704"
  >        </a
  ><a name="25712" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="25715"
  > </a
  ><a name="25716" class="Symbol"
  >&#955;</a
  ><a name="25717"
  > </a
  ><a name="25718" href="Session.html#25718" class="Bound"
  >n</a
  ><a name="25719"
  > </a
  ><a name="25720" class="Symbol"
  >&#8594;</a
  ><a name="25721"
  >                           
                 </a
  ><a name="25766" href="Control.Concurrent.html#252" class="Postulate"
  >forkIO</a
  ><a name="25772"
  > </a
  ><a name="25773" class="Symbol"
  >(</a
  ><a name="25774" href="Session.html#25483" class="Function"
  >service</a
  ><a name="25781"
  > </a
  ><a name="25782" href="Session.html#25718" class="Bound"
  >n</a
  ><a name="25783" class="Symbol"
  >)</a
  ><a name="25784"
  > </a
  ><a name="25785" href="Session.html#21500" class="Function Operator"
  >&gt;&gt;</a
  ><a name="25787"
  >                                  
                 </a
  ><a name="25839" href="Session.html#25611" class="Function"
  >server</a
  ><a name="25845"
  >                                                 </pre>
<p><code>connect i p</code> creates a channel and sends it along the channel <code>i</code>, which is (or should be) shared by construction with a server, then it becomes process <code>p</code>.</p>
<pre></a
  ><a name="26170" href="Session.html#22238" class="Function"
  >run</a
  ><a name="26173"
  > </a
  ><a name="26174" class="Symbol"
  >(</a
  ><a name="26175" href="Session.html#16517" class="InductiveConstructor Operator"
  >connect</a
  ><a name="26182"
  >    </a
  ><a name="26186" href="Session.html#16517" class="InductiveConstructor Operator"
  >i</a
  ><a name="26187"
  > </a
  ><a name="26188" href="Session.html#16517" class="InductiveConstructor Operator"
  >p</a
  ><a name="26189" class="Symbol"
  >)</a
  ><a name="26190"
  > </a
  ><a name="26191" href="Session.html#26191" class="Bound"
  >cs</a
  ><a name="26193"
  > </a
  ><a name="26194" class="Symbol"
  >=</a
  ><a name="26195"
  > </a
  ><a name="26196" href="Control.Concurrent.Chan.Synchronous.html#300" class="Postulate"
  >newChan</a
  ><a name="26203"
  >                         </a
  ><a name="26228" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="26231"
  > </a
  ><a name="26232" class="Symbol"
  >&#955;</a
  ><a name="26233"
  > </a
  ><a name="26234" href="Session.html#26234" class="Bound"
  >n</a
  ><a name="26235"
  > </a
  ><a name="26236" class="Symbol"
  >&#8594;</a
  ><a name="26237"
  >                       
                          </a
  ><a name="26287" href="Session.html#21776" class="Function"
  >writeUChan</a
  ><a name="26297"
  > </a
  ><a name="26298" class="Symbol"
  >(</a
  ><a name="26299" href="Session.html#21154" class="Function"
  >lookupUChan</a
  ><a name="26310"
  > </a
  ><a name="26311" href="Session.html#26186" class="Bound"
  >i</a
  ><a name="26312"
  > </a
  ><a name="26313" href="Session.html#26191" class="Bound"
  >cs</a
  ><a name="26315" class="Symbol"
  >)</a
  ><a name="26316"
  > </a
  ><a name="26317" href="Session.html#26234" class="Bound"
  >n</a
  ><a name="26318"
  > </a
  ><a name="26319" href="Session.html#21500" class="Function Operator"
  >&gt;&gt;</a
  ><a name="26321"
  >                              
                          </a
  ><a name="26378" href="Session.html#22238" class="Function"
  >run</a
  ><a name="26381"
  > </a
  ><a name="26382" href="Session.html#26188" class="Bound"
  >p</a
  ><a name="26383"
  > </a
  ><a name="26384" class="Symbol"
  >(</a
  ><a name="26385" href="Session.Base.html#4407" class="Function"
  >all-ud</a
  ><a name="26391"
  > </a
  ><a name="26392" href="Session.html#26186" class="Bound"
  >i</a
  ><a name="26393"
  > </a
  ><a name="26394" href="Session.html#26191" class="Bound"
  >cs</a
  ><a name="26396"
  > </a
  ><a name="26397" href="Session.html#26234" class="Bound"
  >n</a
  ><a name="26398" class="Symbol"
  >)</a
  ><a name="26399"
  ></pre>
<p><code>wont i</code> avoids starting the client/server interaction with the server which waits for channels on <code>i</code>.</p>
<pre></a
  ><a name="26620" href="Session.html#22238" class="Function"
  >run</a
  ><a name="26623"
  > </a
  ><a name="26624" class="Symbol"
  >(</a
  ><a name="26625" href="Session.html#16517" class="InductiveConstructor Operator"
  >wont</a
  ><a name="26629"
  >         </a
  ><a name="26638" href="Session.html#16517" class="InductiveConstructor Operator"
  >i</a
  ><a name="26639" class="Symbol"
  >)</a
  ><a name="26640"
  > </a
  ><a name="26641" href="Session.html#26641" class="Bound"
  >cs</a
  ><a name="26643"
  > </a
  ><a name="26644" class="Symbol"
  >=</a
  ><a name="26645"
  > </a
  ><a name="26646" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="26652"
  > </a
  ><a name="26653" class="Symbol"
  >(</a
  ><a name="26654" class="InductiveConstructor"
  >tt</a
  ><a name="26656"
  > </a
  ><a name="26657" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="26658"
  > </a
  ><a name="26659" href="Session.Base.html#4259" class="Function"
  >all-rm</a
  ><a name="26665"
  > </a
  ><a name="26666" href="Session.html#26638" class="Bound"
  >i</a
  ><a name="26667"
  > </a
  ><a name="26668" href="Session.html#26641" class="Bound"
  >cs</a
  ><a name="26670" class="Symbol"
  >)</a
  ><a name="26671"
  ></pre>
<p><code>twice i</code> duplicates the server which waits for channels on <code>i</code>.</p>
<pre></a
  ><a name="26853" href="Session.html#22238" class="Function"
  >run</a
  ><a name="26856"
  > </a
  ><a name="26857" class="Symbol"
  >(</a
  ><a name="26858" href="Session.html#16517" class="InductiveConstructor Operator"
  >twice</a
  ><a name="26863"
  >        </a
  ><a name="26871" href="Session.html#16517" class="InductiveConstructor Operator"
  >i</a
  ><a name="26872" class="Symbol"
  >)</a
  ><a name="26873"
  > </a
  ><a name="26874" href="Session.html#26874" class="Bound"
  >cs</a
  ><a name="26876"
  > </a
  ><a name="26877" class="Symbol"
  >=</a
  ><a name="26878"
  > </a
  ><a name="26879" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="26885"
  > </a
  ><a name="26886" class="Symbol"
  >(</a
  ><a name="26887" class="InductiveConstructor"
  >tt</a
  ><a name="26889"
  > </a
  ><a name="26890" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="26891"
  > </a
  ><a name="26892" class="Symbol"
  >(</a
  ><a name="26893" href="Session.html#26874" class="Bound"
  >cs</a
  ><a name="26895"
  > </a
  ><a name="26896" href="Data.List.All.html#796" class="InductiveConstructor Operator"
  >,&#775;</a
  ><a name="26898"
  > </a
  ><a name="26899" href="Session.html#21154" class="Function"
  >lookupUChan</a
  ><a name="26910"
  > </a
  ><a name="26911" href="Session.html#26871" class="Bound"
  >i</a
  ><a name="26912"
  > </a
  ><a name="26913" href="Session.html#26874" class="Bound"
  >cs</a
  ><a name="26915" class="Symbol"
  >))</a
  ><a name="26917"
  >                           </pre>
<p><code>write i x</code> writes <code>x</code> on channel <code>i</code>.</p>
<pre></a
  ><a name="27178" href="Session.html#22238" class="Function"
  >run</a
  ><a name="27181"
  > </a
  ><a name="27182" class="Symbol"
  >(</a
  ><a name="27183" href="Session.html#16517" class="InductiveConstructor Operator"
  >write</a
  ><a name="27188"
  >      </a
  ><a name="27194" href="Session.html#16517" class="InductiveConstructor Operator"
  >i</a
  ><a name="27195"
  > </a
  ><a name="27196" href="Session.html#16517" class="InductiveConstructor Operator"
  >x</a
  ><a name="27197" class="Symbol"
  >)</a
  ><a name="27198"
  > </a
  ><a name="27199" href="Session.html#27199" class="Bound"
  >cs</a
  ><a name="27201"
  > </a
  ><a name="27202" class="Symbol"
  >=</a
  ><a name="27203"
  > </a
  ><a name="27204" class="Keyword"
  >let</a
  ><a name="27207"
  > </a
  ><a name="27208" href="Session.html#27208" class="Bound"
  >c</a
  ><a name="27209"
  > </a
  ><a name="27210" class="Symbol"
  >=</a
  ><a name="27211"
  > </a
  ><a name="27212" href="Session.html#21154" class="Function"
  >lookupUChan</a
  ><a name="27223"
  > </a
  ><a name="27224" href="Session.html#27194" class="Bound"
  >i</a
  ><a name="27225"
  > </a
  ><a name="27226" href="Session.html#27199" class="Bound"
  >cs</a
  ><a name="27228"
  > </a
  ><a name="27229" class="Keyword"
  >in</a
  ><a name="27231"
  >                                     
                          </a
  ><a name="27295" href="Session.html#21776" class="Function"
  >writeUChan</a
  ><a name="27305"
  > </a
  ><a name="27306" href="Session.html#27208" class="Bound"
  >c</a
  ><a name="27307"
  > </a
  ><a name="27308" href="Session.html#27196" class="Bound"
  >x</a
  ><a name="27309"
  > </a
  ><a name="27310" href="Session.html#21500" class="Function Operator"
  >&gt;&gt;</a
  ><a name="27312"
  >                                               
                          </a
  ><a name="27386" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="27392"
  > </a
  ><a name="27393" class="Symbol"
  >(</a
  ><a name="27394" class="InductiveConstructor"
  >tt</a
  ><a name="27396"
  > </a
  ><a name="27397" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="27398"
  > </a
  ><a name="27399" href="Session.html#20084" class="Postulate"
  >unsafeCoerce</a
  ><a name="27411"
  > </a
  ><a name="27412" href="Session.html#27199" class="Bound"
  >cs</a
  ><a name="27414" class="Symbol"
  >)</a
  ><a name="27415"
  >                                   </pre>
<p><code>read i</code> reads from <code>i</code> and returns what it read.</p>
<pre></a
  ><a name="27617" href="Session.html#22238" class="Function"
  >run</a
  ><a name="27620"
  > </a
  ><a name="27621" class="Symbol"
  >(</a
  ><a name="27622" href="Session.html#16517" class="InductiveConstructor Operator"
  >read</a
  ><a name="27626"
  >         </a
  ><a name="27635" href="Session.html#16517" class="InductiveConstructor Operator"
  >i</a
  ><a name="27636" class="Symbol"
  >)</a
  ><a name="27637"
  > </a
  ><a name="27638" href="Session.html#27638" class="Bound"
  >cs</a
  ><a name="27640"
  > </a
  ><a name="27641" class="Symbol"
  >=</a
  ><a name="27642"
  > </a
  ><a name="27643" class="Keyword"
  >let</a
  ><a name="27646"
  > </a
  ><a name="27647" href="Session.html#27647" class="Bound"
  >c</a
  ><a name="27648"
  > </a
  ><a name="27649" class="Symbol"
  >=</a
  ><a name="27650"
  > </a
  ><a name="27651" href="Session.html#21154" class="Function"
  >lookupUChan</a
  ><a name="27662"
  > </a
  ><a name="27663" href="Session.html#27635" class="Bound"
  >i</a
  ><a name="27664"
  > </a
  ><a name="27665" href="Session.html#27638" class="Bound"
  >cs</a
  ><a name="27667"
  > </a
  ><a name="27668" class="Keyword"
  >in</a
  ><a name="27670"
  >                                     
                          </a
  ><a name="27734" href="Session.html#21864" class="Function"
  >readUChan</a
  ><a name="27743"
  > </a
  ><a name="27744" href="Session.html#27647" class="Bound"
  >c</a
  ><a name="27745"
  > </a
  ><a name="27746" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="27749"
  > </a
  ><a name="27750" class="Symbol"
  >&#955;</a
  ><a name="27751"
  > </a
  ><a name="27752" href="Session.html#27752" class="Bound"
  >x</a
  ><a name="27753"
  > </a
  ><a name="27754" class="Symbol"
  >&#8594;</a
  ><a name="27755"
  >
                          </a
  ><a name="27782" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="27788"
  > </a
  ><a name="27789" class="Symbol"
  >(</a
  ><a name="27790" href="Session.html#27752" class="Bound"
  >x</a
  ><a name="27791"
  > </a
  ><a name="27792" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="27793"
  > </a
  ><a name="27794" href="Session.html#20084" class="Postulate"
  >unsafeCoerce</a
  ><a name="27806"
  > </a
  ><a name="27807" href="Session.html#27638" class="Bound"
  >cs</a
  ><a name="27809" class="Symbol"
  >)</a
  ><a name="27810"
  >                                    </pre>
<p><code>end i</code> terminates the (sub)session</p>
<pre></a
  ><a name="28077" href="Session.html#22238" class="Function"
  >run</a
  ><a name="28080"
  > </a
  ><a name="28081" class="Symbol"
  >(</a
  ><a name="28082" href="Session.html#16517" class="InductiveConstructor Operator"
  >end/</a
  ><a name="28086"
  >       </a
  ><a name="28093" href="Session.html#16517" class="InductiveConstructor Operator"
  >i</a
  ><a name="28094"
  > </a
  ><a name="28095" href="Session.html#16517" class="InductiveConstructor Operator"
  >r</a
  ><a name="28096" class="Symbol"
  >)</a
  ><a name="28097"
  > </a
  ><a name="28098" href="Session.html#28098" class="Bound"
  >cs</a
  ><a name="28100"
  > </a
  ><a name="28101" class="Symbol"
  >=</a
  ><a name="28102"
  > </a
  ><a name="28103" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="28109"
  > </a
  ><a name="28110" class="Symbol"
  >(</a
  ><a name="28111" href="Session.html#28095" class="Bound"
  >r</a
  ><a name="28112"
  > </a
  ><a name="28113" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="28114"
  > </a
  ><a name="28115" href="Session.Base.html#4259" class="Function"
  >all-rm</a
  ><a name="28121"
  > </a
  ><a name="28122" href="Session.html#28093" class="Bound"
  >i</a
  ><a name="28123"
  > </a
  ><a name="28124" href="Session.html#28098" class="Bound"
  >cs</a
  ><a name="28126" class="Symbol"
  >)</a
  ><a name="28127"
  >                                     </pre>
<p><code>at/ i o</code> simply returns <code>o</code>.</p>
<pre></a
  ><a name="28221" href="Session.html#22238" class="Function"
  >run</a
  ><a name="28224"
  > </a
  ><a name="28225" class="Symbol"
  >(</a
  ><a name="28226" href="Session.html#16517" class="InductiveConstructor Operator"
  >at/</a
  ><a name="28229"
  >        </a
  ><a name="28237" href="Session.html#16517" class="InductiveConstructor Operator"
  >i</a
  ><a name="28238"
  > </a
  ><a name="28239" href="Session.html#16517" class="InductiveConstructor Operator"
  >o</a
  ><a name="28240" class="Symbol"
  >)</a
  ><a name="28241"
  > </a
  ><a name="28242" href="Session.html#28242" class="Bound"
  >cs</a
  ><a name="28244"
  > </a
  ><a name="28245" class="Symbol"
  >=</a
  ><a name="28246"
  > </a
  ><a name="28247" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="28253"
  > </a
  ><a name="28254" class="Symbol"
  >(</a
  ><a name="28255" href="Session.html#28239" class="Bound"
  >o</a
  ><a name="28256"
  > </a
  ><a name="28257" href="Data.Product.html#509" class="InductiveConstructor Operator"
  >,</a
  ><a name="28258"
  > </a
  ><a name="28259" href="Session.html#20084" class="Postulate"
  >unsafeCoerce</a
  ><a name="28271"
  > </a
  ><a name="28272" href="Session.html#28242" class="Bound"
  >cs</a
  ><a name="28274" class="Symbol"
  >)</a
  ><a name="28275"
  >                                    </pre>
<p><code>corec</code> enters a loop whose body is contained in <code>gp</code>: the coiteration will possibly be exited whenever the value the process returns is <code>inl x</code> for some <code>x</code>.</p>
<pre></a
  ><a name="28497" href="Session.html#22238" class="Function"
  >run</a
  ><a name="28500"
  > </a
  ><a name="28501" class="Symbol"
  >(</a
  ><a name="28502" href="Session.html#16517" class="InductiveConstructor Operator"
  >corec</a
  ><a name="28507"
  >   </a
  ><a name="28510" href="Session.html#16517" class="InductiveConstructor Operator"
  >i</a
  ><a name="28511"
  > </a
  ><a name="28512" href="Session.html#16517" class="InductiveConstructor Operator"
  >o</a
  ><a name="28513"
  > </a
  ><a name="28514" href="Session.html#16517" class="InductiveConstructor Operator"
  >gp</a
  ><a name="28516" class="Symbol"
  >)</a
  ><a name="28517"
  > </a
  ><a name="28518" href="Session.html#28518" class="Bound"
  >cs</a
  ><a name="28520"
  > </a
  ><a name="28521" class="Symbol"
  >=</a
  ><a name="28522"
  > </a
  ><a name="28523" href="Session.html#28537" class="Function"
  >aux</a
  ><a name="28526"
  > </a
  ><a name="28527" href="Session.html#28512" class="Bound"
  >o</a
  ><a name="28528"
  >
  </a
  ><a name="28531" class="Keyword"
  >where</a
  ><a name="28536"
  > </a
  ><a name="28537" href="Session.html#28537" class="Function"
  >aux</a
  ><a name="28540"
  > </a
  ><a name="28541" class="Symbol"
  >=</a
  ><a name="28542"
  > </a
  ><a name="28543" class="Symbol"
  >&#955;</a
  ><a name="28544"
  > </a
  ><a name="28545" href="Session.html#28545" class="Bound"
  >o</a
  ><a name="28546"
  > </a
  ><a name="28547" class="Symbol"
  >&#8594;</a
  ><a name="28548"
  > </a
  ><a name="28549" href="Session.html#22238" class="Function"
  >run</a
  ><a name="28552"
  > </a
  ><a name="28553" class="Symbol"
  >(</a
  ><a name="28554" href="Data.Product.html#535" class="Field"
  >snd</a
  ><a name="28557"
  > </a
  ><a name="28558" class="Symbol"
  >(</a
  ><a name="28559" href="Session.html#28514" class="Bound"
  >gp</a
  ><a name="28561"
  > </a
  ><a name="28562" href="Session.html#28545" class="Bound"
  >o</a
  ><a name="28563" class="Symbol"
  >))</a
  ><a name="28565"
  > </a
  ><a name="28566" class="Symbol"
  >(</a
  ><a name="28567" href="Session.html#20084" class="Postulate"
  >unsafeCoerce</a
  ><a name="28579"
  > </a
  ><a name="28580" href="Session.html#28518" class="Bound"
  >cs</a
  ><a name="28582" class="Symbol"
  >)</a
  ><a name="28583"
  > </a
  ><a name="28584" href="IO.Primitive.html#628" class="Postulate Operator"
  >&gt;&gt;=</a
  ><a name="28587"
  >
                    </a
  ><a name="28608" href="Data.Product.html#2847" class="Function"
  >uc</a
  ><a name="28610"
  > </a
  ><a name="28611" href="Data.Sum.html#678" class="Function Operator"
  >&#8846;.[</a
  ><a name="28614"
  > </a
  ><a name="28615" href="Data.Product.html#2682" class="Function"
  >cu</a
  ><a name="28617"
  > </a
  ><a name="28618" href="IO.Primitive.html#588" class="Postulate"
  >return</a
  ><a name="28624"
  > </a
  ><a name="28625" href="Data.Sum.html#678" class="Function Operator"
  >,</a
  ><a name="28626"
  > </a
  ><a name="28627" class="Symbol"
  >(&#955;</a
  ><a name="28629"
  > </a
  ><a name="28630" href="Session.html#28630" class="Bound"
  >o</a
  ><a name="28631"
  > </a
  ><a name="28632" href="Session.html#28632" class="Bound"
  >_</a
  ><a name="28633"
  > </a
  ><a name="28634" class="Symbol"
  >&#8594;</a
  ><a name="28635"
  > </a
  ><a name="28636" href="Session.html#28537" class="Function"
  >aux</a
  ><a name="28639"
  > </a
  ><a name="28640" href="Session.html#28630" class="Bound"
  >o</a
  ><a name="28641" class="Symbol"
  >)</a
  ><a name="28642"
  > </a
  ><a name="28643" href="Data.Sum.html#678" class="Function Operator"
  >]</a
  ><a name="28644"
  ></pre>
<p>Closed processes describe IO computations.</p>
<pre></a
  ><a name="28714" href="Session.html#28714" class="Function"
  >run[]</a
  ><a name="28719"
  > </a
  ><a name="28720" class="Symbol"
  >:</a
  ><a name="28721"
  > </a
  ><a name="28722" class="Symbol"
  >&#8704;</a
  ><a name="28723"
  > </a
  ><a name="28724" class="Symbol"
  >{</a
  ><a name="28725" href="Session.html#28725" class="Bound"
  >X</a
  ><a name="28726" class="Symbol"
  >}</a
  ><a name="28727"
  > </a
  ><a name="28728" class="Symbol"
  >&#8594;</a
  ><a name="28729"
  >  </a
  ><a name="28731" href="Session.html#20494" class="Function"
  >IOProc</a
  ><a name="28737"
  > </a
  ><a name="28738" href="Session.html#28725" class="Bound"
  >X</a
  ><a name="28739"
  > </a
  ><a name="28740" class="Symbol"
  >&#8594;</a
  ><a name="28741"
  > </a
  ><a name="28742" href="IO.Primitive.html#448" class="Postulate"
  >IO</a
  ><a name="28744"
  > </a
  ><a name="28745" href="Session.html#28725" class="Bound"
  >X</a
  ><a name="28746"
  >
</a
  ><a name="28747" href="Session.html#28714" class="Function"
  >run[]</a
  ><a name="28752"
  > </a
  ><a name="28753" href="Session.html#28753" class="Bound"
  >P</a
  ><a name="28754"
  > </a
  ><a name="28755" class="Symbol"
  >=</a
  ><a name="28756"
  > </a
  ><a name="28757" href="Session.html#21586" class="Function"
  >mapIO</a
  ><a name="28762"
  > </a
  ><a name="28763" href="Data.Product.html#525" class="Field"
  >fst</a
  ><a name="28766"
  > </a
  ><a name="28767" class="Symbol"
  >(</a
  ><a name="28768" href="Session.html#22238" class="Function"
  >run</a
  ><a name="28771"
  > </a
  ><a name="28772" href="Session.html#28753" class="Bound"
  >P</a
  ><a name="28773"
  > </a
  ><a name="28774" href="Data.List.All.html#779" class="InductiveConstructor"
  >[]</a
  ><a name="28776" class="Symbol"
  >)</a
  ><a name="28777"
  ></pre>
<p>Note that as the evaluator allows for processes that embed any <code>IO</code> action one could easily add unwanted behaviours: the user is still free to capture a fragment of <code>IO</code> to be considered <em>safe</em> and simply compose this evaluator after a translation phase to <code>IO</code>.</p>
<p>For simplicity, the currently provided <a href="Session.Examples.html">examples</a> just use <code>IO</code> for basic operations like suspending processes for finite amounts of time or accessing the standard output.</p></body></html>